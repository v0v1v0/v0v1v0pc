<div class="container">

<table style="width: 100%;"><tr>
<td>CBS_RC</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>CBS_RC</h2>

<h3>Description</h3>

<p>Fit either a 1-piece or 2-piece CBS latent utility function to binary risky choice data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">CBS_RC(choice, Amt1, Prob1, Amt2, Prob2, numpiece, numfit = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>choice</code></td>
<td>
<p>Vector of 0s and 1s. 1 if the choice was option 1, 0 if the choice was option 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Amt1</code></td>
<td>
<p>Vector of positive real numbers. Reward amount of choice 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Prob1</code></td>
<td>
<p>Vector of positive real numbers between 0 and 1. Probability of winning the reward of choice 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Amt2</code></td>
<td>
<p>Vector of positive real numbers. Reward amount of choice 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Prob2</code></td>
<td>
<p>Vector of positive real numbers between 0 and 1. Probability of winning the reward of choice 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numpiece</code></td>
<td>
<p>Either 1 or 2. Number of CBS pieces to use.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numfit</code></td>
<td>
<p>Number of model fits to perform from different starting points. If not provided, numfit = 10*numpiece</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The input data has n choices (ideally n &gt; 100) between two reward options.
Option 1 is receiving <code>Amt1</code> with probability <code>Prob1</code> and Option 2 is receiving <code>Amt2</code> with probability <code>Prob2</code> (e.g., $40 with 53% chance vs. $20 with 90% chance).
One of the two options may be certain (i.e., prob = 1; e.g., $40 with 53% chance vs. $20 for sure).
<code>choice</code> should be 1 if option 1 is chosen, 0 if option 2 is chosen.
</p>


<h3>Value</h3>

<p>A list containing the following:
</p>

<ul>
<li> <p><code>type</code>: either 'CBS1' or 'CBS2' depending on the number of pieces
</p>
</li>
<li> <p><code>LL</code>: log likelihood of the model
</p>
</li>
<li> <p><code>numparam</code>: number of total parameters in the model
</p>
</li>
<li> <p><code>scale</code>: scaling factor of the logit model
</p>
</li>
<li> <p><code>xpos</code>: x coordinates of the fitted CBS function
</p>
</li>
<li> <p><code>ypos</code>: y coordinates of the fitted CBS function
</p>
</li>
<li> <p><code>AUC</code>: area under the curve of the fitted CBS function. Normalized to be between 0 and 1.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R"># Fit example Risky choice data with 2-piece CBS function.
# Load example data (included with package).
# Each row is a choice between option 1 (Amt with prob) vs option 2 (20 for 100%).
Amount1 = RCdat$Amt1
Prob1 = RCdat$Prob1
Amount2 = 20
Prob2 = 1
Choice = RCdat$Choice

# Fit the model
out = CBS_RC(Choice,Amount1,Prob1,Amount2,Prob2,2)

# Plot the choices (x = Delay, y = relative amount : 20 / risky amount)
plot(Prob1[Choice==1],20/Amount1[Choice==1],type = 'p',col="blue",xlim=c(0, 1), ylim=c(0, 1))
points(Prob1[Choice==0],20/Amount1[Choice==0],type = 'p',col="red")

# Plot the fitted CBS
x = seq(0,1,.01)
lines(x,CBSfunc(out$xpos,out$ypos,x))
</code></pre>


</div>