<div class="container">

<table style="width: 100%;"><tr>
<td>cptest</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Clustered permutation test for cluster randomized trials</h2>

<h3>Description</h3>

<p>cptest performs a clustered permutation test on the individual-level outcome data for cluster
randomized trials (CRTs). The type of the outcome can be specified by the user to be <code>"continuous"</code> or
<code>"binary"</code>.
</p>
<p>Linear regression (for outcome type <code>"continuous"</code>) or logistic regression (for outcome type <code>"binary"</code>) is applied to the outcome regressed on covariates specified. Cluster residual means are computed. Within the constrained space,
the contrast statistic between the treatment and control arms is created from the randomization schemes and the cluster residual means. The permutation test is then conducted by comparing the contrast statistic for the scheme actually utilized to all other schemes in the constrained space.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cptest(
  outcome,
  clustername,
  z = NULL,
  cspacedatname,
  outcometype,
  categorical = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>outcome</code></td>
<td>
<p>a vector specifying the individual-level outcome.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clustername</code></td>
<td>
<p>a vector specifying the identification variable of the cluster.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>a data frame of covariates to be adjusted for in the permutation analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cspacedatname</code></td>
<td>
<p>gives the path of the csv dataset containing the saved randomization space. This dataset contains the permutation matrix, as well as an indicator variable in the first column indicating which row of the permutation matrix was selected as the final scheme to be implemented in practice.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outcometype</code></td>
<td>
<p>the type of regression model that should be run. Options are <code>"continuous"</code> for linear regression and <code>"binary"</code> for logistic regression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>categorical</code></td>
<td>
<p>a vector specifying categorical (including binary) variables. This can be names of the columns or number indexes of columns, but cannot be both. Suppose there are <code>p</code> categories for a categorical variable, <code>cptest</code> function creates <code>(p-1)</code> dummy variables and drops the reference level if the variable is specified as a factor. Otherwise, the first level in the alphanumerical order will be dropped. If the user wants to specify a different level to drop for a <code>p</code>-level categorical variable, the user can create <code>p-1</code> dummy variables and these can instead be supplied as covariates to the <code>cptest</code> function. Then, the user needs to specify the dummy variables created themselves to be <code>categorical</code> when running <code>cptest</code>. In addition, the user could also set the variable as a factor with the specific reference level. The user must ensure that the same level of the categorical variable is excluded as was excluded when running <code>cvrall</code>, by coding the variables the same way as in the design phase. This is the only optional argument of the <code>cptest</code> function. All others are required.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>FinalScheme</code> the final scheme in the permutation matrix
</p>
<p><code>pvalue</code> the p-value of the intervention effect from the clustered permutation test
</p>
<p><code>pvalue_statement</code> the statement about the p-value of the intervention effect from the clustered permutation test
</p>


<h3>Author(s)</h3>

<p>Hengshi Yu &lt;hengshi@umich.edu&gt;, Fan Li &lt;fan.f.li@yale.edu&gt;, John A. Gallis &lt;john.gallis@duke.edu&gt;, Elizabeth L. Turner &lt;liz.turner@duke.edu&gt;
</p>


<h3>References</h3>

<p>Gail, M.H., Mark, S.D., Carroll, R.J., Green, S.B. and Pee, D., 1996. On design considerations and randomization based inference for community intervention trials. Statistics in medicine, 15(11), pp.1069-1092.
</p>
<p>Li, F., Lokhnygina, Y., Murray, D.M., Heagerty, P.J. and DeLong, E.R., 2016. An evaluation of constrained randomization for the design and analysis of group randomized trials. Statistics in medicine, 35(10), pp.1565-1579.
</p>
<p>Li, F., Turner, E. L., Heagerty, P. J., Murray, D. M., Vollmer, W. M., &amp; DeLong, E. R. (2017). An evaluation of constrained randomization for the design and analysis of group randomized trials with binary outcomes. Statistics in medicine, 36(24), 3791-3806.
</p>
<p>Gallis, J. A., Li, F., Yu, H., Turner, E. L. (In Press).  cvcrand and cptest: Efficient design and analysis of cluster randomized trials.  Stata Journal.
</p>
<p>Gallis, J. A., Li, Fl. Yu, H., Turner, E. L. (2017).  cvcrand and cptest: Efficient design and analysis of cluster randomized trials.  Stata Conference.  https://www.stata.com/meeting/baltimore17/slides/Baltimore17_Gallis.pdf.
</p>
<p>Dickinson, L. M., Beaty, B., Fox, C., Pace, W., Dickinson, W. P., Emsermann, C., &amp; Kempe, A. (2015). Pragmatic cluster randomized trials using covariate constrained randomization: A method for practice-based research networks (PBRNs). The Journal of the American Board of Family Medicine, 28(5), 663-672.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
Analysis_result &lt;- cptest(outcome = Dickinson_outcome$outcome,
                          clustername = Dickinson_outcome$county,
                          z = data.frame(Dickinson_outcome[ , c("location", "inciis",
                              "uptodateonimmunizations", "hispanic", "incomecat")]),
                          cspacedatname = "dickinson_constrained.csv",
                          outcometype = "binary",
                          categorical = c("location","incomecat"))

## End(Not run)

</code></pre>


</div>