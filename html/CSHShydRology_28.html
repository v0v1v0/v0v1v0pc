<div class="container">

<table style="width: 100%;"><tr>
<td>ch_get_url_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Gets remote data sets</h2>

<h3>Description</h3>

<p>Accesses data sets, via a url the first time,
saves them locally, then accesses them locally after the first time the script is executed.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ch_get_url_data(gd_url, gd_filename, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>gd_url</code></td>
<td>
<p>url for accessing data set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gd_filename</code></td>
<td>
<p>name of file on local drive, including full path</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>Optional. If <code>FALSE</code> (the default) error/warning messages are printed if the data cannot be found.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a data frame (from a .csv file), a <code>raster</code> object (from a .tif file), 
or an <code>sf</code> object (from a GeoJSON file).
</p>


<h3>Author(s)</h3>

<p>Dan Moore
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Example not tested automatically as multiple large data files are downloaded which is slow

# Tested using files in the Upper Penticton Creek
# zenodo repository https://zenodo.org/record/4781469
library(ggplot2)
library(raster)

# create directory to store data sets
dir_name &lt;- tempdir(check = FALSE)
if (!dir.exists(dir_name)) {
  dir.create(dir_name)
}
 
# test with soil moisture data in csv format
sm_fn &lt;- file.path(dir_name, "sm_data.csv")
sm_url &lt;- "https://zenodo.org/record/4781469/files/sm_data.csv"
sm_data &lt;- ch_get_url_data(sm_url, sm_fn)
head(sm_data)

# test with tif/tiff file containing a dem
ra_fn &lt;- file.path(dir_name, "gs_dem25.tif")
ra_url &lt;- "https://zenodo.org/record/4781469/files/gs_dem25.tif"
ra_data &lt;- ch_get_url_data(ra_url, ra_fn)
plot(ra_data)

# test with GeoJSON
gs_fn &lt;- file.path(dir_name, "gs_soilmaps.GeoJSON")
gs_url &lt;- "https://zenodo.org/record/4781469/files/gs_soilmaps.GeoJSON"
gs_data &lt;- ch_get_url_data(gs_url, gs_fn)

ggplot(gs_data) +
  geom_sf(aes(fill = new_key)) +
  labs(fill = "Soil class",
       x = "UTM Easting (m)",
       y = "UTM Northing (m)") +
  coord_sf(datum = 32611) +
  theme_bw()

</code></pre>


</div>