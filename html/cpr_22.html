<div class="container">

<table style="width: 100%;"><tr>
<td>get_surface</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get Surface</h2>

<h3>Description</h3>

<p>Get Two-Dimensional Control Net and Surface from n-dimensional Control Nets
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_surface(x, margin = 1:2, at, n = 100)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>cpr_cn</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>margin</code></td>
<td>
<p>an integer identifying the marginal of the control net to slice
along.  Only used when working <code>x</code> is a <code>cpr_cn</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>at</code></td>
<td>
<p>point value for marginals not defined in the <code>margin</code>.  Only
used when <code>x</code> is a <code>cpr_cn</code> object.  Expected input is a list of
length <code>length(attr(x, "bspline_list"))</code>.  Entries for elements
<code>marginal</code> are ignored.  If omitted, the midpoint between the boundary
knots for each marginal is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>the length of sequence to use for interpolating the spline function.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a list with two elements
</p>

<dl>
<dt>cn</dt>
<dd>
<p>the control net</p>
</dd>
<dt>surface</dt>
<dd>
<p>a data.frame with three columns to define the surface</p>
</dd>
</dl>
<h3>See Also</h3>

<p><code>get_spline</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Extract the control net and surface from a cpr_cn object.
a_cn &lt;- cn(log10(pdg) ~ btensor(list(day, age, ttm)
           , df = list(15, 3, 5)
           , bknots = list(c(-1, 1), c(45, 53), c(-9, -1))
           , order = list(3, 2, 3))
           , data = spdg)

cn_and_surface &lt;- get_surface(a_cn, n = 50)
str(cn_and_surface, max.level = 2)

old_par &lt;- par()
par(mfrow = c(1, 2))
with(cn_and_surface$cn,
     plot3D::persp3D(unique(Var1),
                     unique(Var2),
                     matrix(z,
                            nrow = length(unique(Var1)),
                            ncol = length(unique(Var2))),
                     main = "Control Net")
     )
with(cn_and_surface$surface,
     plot3D::persp3D(unique(Var1),
                     unique(Var2),
                     matrix(z,
                            nrow = length(unique(Var1)),
                            ncol = length(unique(Var2))),
                     main = "Surface")
     )

par(old_par)

</code></pre>


</div>