<div class="container">

<table style="width: 100%;"><tr>
<td>cyclic_shift</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Cyclic Shift Permutations</h2>

<h3>Description</h3>

<p>Performs a user-specified function on a null ecological community created via cyclic shift permutations (Harms et al. 2001, Hallett et al. 2014).
The null community is formed by randomly selected different starting years for the time series of each species.
This generates a null community matrix in which species abundances vary independently but within-species autocorrelation is maintained.
The user-specified function must require a species x time input.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cyclic_shift(
  df,
  time.var,
  species.var,
  abundance.var,
  replicate.var = NA,
  FUN,
  bootnumber
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A data frame containing time, species and abundance columns and an optional column of replicates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.var</code></td>
<td>
<p>The name of the time column</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>species.var</code></td>
<td>
<p>The name of the species column</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>abundance.var</code></td>
<td>
<p>The name of the abundance column</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replicate.var</code></td>
<td>
<p>The name of the replicate column. Defaults to <code>NA</code>, indicating no replicates (i.e., data are from a single plot).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p>A function to calculate on the null community</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bootnumber</code></td>
<td>
<p>Number of null simulations to run</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The input data frame needs to contain columns for time, species and abundance; time.var, species.var and abundance.var are used to indicate which columns contain those variables.
</p>


<h3>Value</h3>

<p>The cyclic_shift function returns an S3 object of class "cyclic_shift" and parameter "out".
The length of the "out" parameter is the number of null iterations as specified by bootnumber.
If multiple replicates are specified, null values are averaged among replicates for each iteration, but a different cyclic shift permutation is applied to each replicate within an iteration.
</p>


<h3>References</h3>

<p>Hallett, Lauren M., Joanna S. Hsu, Elsa E. Cleland, Scott L. Collins, Timothy L. Dickson, Emily C. Farrer, Laureano A. Gherardi, et al. "Biotic Mechanisms of Community Stability Shift along a Precipitation Gradient." Ecology 95, no. 6 (2014): 1693-1700.
</p>
<p>Harms, Kyle E., Richard Condit, Stephen P. Hubbell, and Robin B. Foster. "Habitat Associations of Trees and Shrubs in a 50-Ha Neotropical Forest Plot." Journal of Ecology 89, no. 6 (2001): 947-59.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Calculate a covariance matrix on a null community
data(knz_001d)
a1_cyclic &lt;- cyclic_shift(subset(knz_001d, subplot == "A_1"),
                   time.var = "year",
                   species.var = "species",
                   abundance.var = "abundance",
                   FUN = cov,
                   bootnumber = 10)
</code></pre>


</div>