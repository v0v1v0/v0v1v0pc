<div class="container">

<table style="width: 100%;"><tr>
<td>set_csfmt_rts_data_v1</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert data.table to csfmt_rts_data_v1</h2>

<h3>Description</h3>

<p><code>set_csfmt_rts_data_v1</code> converts a <code>data.table</code> to <code>csfmt_rts_data_v1</code> by reference.
<code>csfmt_rts_data_v1</code> creates a new <code>csfmt_rts_data_v1</code> (not by reference) from either a <code>data.table</code> or <code>data.frame</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">set_csfmt_rts_data_v1(x, create_unified_columns = TRUE, heal = TRUE)

csfmt_rts_data_v1(x, create_unified_columns = TRUE, heal = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>The data.table to be converted to csfmt_rts_data_v1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>create_unified_columns</code></td>
<td>
<p>Do you want it to create unified columns?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>heal</code></td>
<td>
<p>Do you want to impute missing values on creation?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For more details see the vignette:
<code>vignette("csfmt_rts_data_v1", package = "cstidy")</code>
</p>


<h3>Value</h3>

<p>An extended <code>data.table</code>, which has been modified by reference and returned (invisibly).
</p>
<p>No return value, called for side effect of replacing the current data.table with a csfmt_rts_data_v1 in place.
</p>
<p>Returns a duplicated csfmt_rts_data_v1.
</p>


<h3>Smart assignment</h3>

<p><code>csfmt_rts_data_v1</code> contains the smart assignment feature for time and geography.
</p>
<p>When the <strong>variables in bold</strong> are assigned using <code style="white-space: pre;">⁠:=⁠</code>, the listed variables will be automatically imputed.
</p>
<p><strong>location_code</strong>:
</p>

<ul>
<li>
<p> granularity_geo
</p>
</li>
<li>
<p> country_iso3
</p>
</li>
</ul>
<p><strong>isoyear</strong>:
</p>

<ul>
<li>
<p> granularity_time
</p>
</li>
<li>
<p> isoweek
</p>
</li>
<li>
<p> isoyearweek
</p>
</li>
<li>
<p> season
</p>
</li>
<li>
<p> seasonweek
</p>
</li>
<li>
<p> calyear
</p>
</li>
<li>
<p> calmonth
</p>
</li>
<li>
<p> calyearmonth
</p>
</li>
<li>
<p> date
</p>
</li>
</ul>
<p><strong>isoyearweek</strong>:
</p>

<ul>
<li>
<p> granularity_time
</p>
</li>
<li>
<p> isoyear
</p>
</li>
<li>
<p> isoweek
</p>
</li>
<li>
<p> season
</p>
</li>
<li>
<p> seasonweek
</p>
</li>
<li>
<p> calyear
</p>
</li>
<li>
<p> calmonth
</p>
</li>
<li>
<p> calyearmonth
</p>
</li>
<li>
<p> date
</p>
</li>
</ul>
<p><strong>date</strong>:
</p>

<ul>
<li>
<p> granularity_time
</p>
</li>
<li>
<p> isoyear
</p>
</li>
<li>
<p> isoweek
</p>
</li>
<li>
<p> isoyearweek
</p>
</li>
<li>
<p> season
</p>
</li>
<li>
<p> seasonweek
</p>
</li>
<li>
<p> calyear
</p>
</li>
<li>
<p> calmonth
</p>
</li>
<li>
<p> calyearmonth
</p>
</li>
</ul>
<h3>Unified columns</h3>

<p><code>csfmt_rts_data_v1</code> contains 16 unified columns:
</p>

<ul>
<li>
<p> granularity_time
</p>
</li>
<li>
<p> granularity_geo
</p>
</li>
<li>
<p> country_iso3
</p>
</li>
<li>
<p> location_code
</p>
</li>
<li>
<p> border
</p>
</li>
<li>
<p> age
</p>
</li>
<li>
<p> sex
</p>
</li>
<li>
<p> isoyear
</p>
</li>
<li>
<p> isoweek
</p>
</li>
<li>
<p> isoyearweek
</p>
</li>
<li>
<p> season
</p>
</li>
<li>
<p> seasonweek
</p>
</li>
<li>
<p> calyear
</p>
</li>
<li>
<p> calmonth
</p>
</li>
<li>
<p> calyearmonth
</p>
</li>
<li>
<p> date
</p>
</li>
</ul>
<h3>See Also</h3>

<p>Other csfmt_rts_data: 
<code>expand_time_to()</code>,
<code>identify_data_structure()</code>,
<code>remove_class_csfmt_rts_data()</code>,
<code>unique_time_series()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Create some fake data as data.table
d &lt;- cstidy::generate_test_data(fmt = "csfmt_rts_data_v1")
d &lt;- d[1:5]

# convert to csfmt_rts_data_v1 by reference
cstidy::set_csfmt_rts_data_v1(d, create_unified_columns = TRUE)

#
d[1, isoyearweek := "2021-01"]
d
d[2, isoyear := 2019]
d
d[3, date := as.Date("2020-01-01")]
d
d[4, c("isoyear", "isoyearweek") := .(2021, "2021-01")]
d
d[5, c("location_code") := .("norge")]
d

# Investigating the data structure of one column inside a dataset
cstidy::generate_test_data() %&gt;%
  cstidy::set_csfmt_rts_data_v1() %&gt;%
  cstidy::identify_data_structure("deaths_n") %&gt;%
  plot()
# Investigating the data structure via summary
cstidy::generate_test_data() %&gt;%
  cstidy::set_csfmt_rts_data_v1() %&gt;%
  summary()
</code></pre>


</div>