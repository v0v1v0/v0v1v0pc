<div class="container">

<table style="width: 100%;"><tr>
<td>write_pyrate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create Input Files for PyRate</h2>

<h3>Description</h3>

<p>Creates the input necessary to run Pyrate, based on a data.frame with fossil
ages (as derived e.g. from clean_fossils) and a vector of the
extinction status for each sample. Creates files in the working directory!
</p>


<h3>Usage</h3>

<pre><code class="language-R">write_pyrate(
  x,
  status,
  fname,
  taxon = "accepted_name",
  min_age = "min_ma",
  max_age = "max_ma",
  trait = NULL,
  path = getwd(),
  replicates = 1,
  cutoff = NULL,
  random = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>data.frame. Containing fossil records with taxon names, ages, 
and geographic coordinates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>status</code></td>
<td>
<p>a vector of character strings of length <code>nrow(x)</code>.
Indicating for each record “extinct” or “extant”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fname</code></td>
<td>
<p>a character string. The prefix to use for the output files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>taxon</code></td>
<td>
<p>character string. The column with the taxon name. 
Default = “accepted_name”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_age</code></td>
<td>
<p>character string. The column with the minimum age. Default
= “min_ma”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_age</code></td>
<td>
<p>character string. The column with the maximum age. Default
= “max_ma”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trait</code></td>
<td>
<p>a numeric vector of length <code>nrow(x)</code>. Indicating trait
values for each record. Optional.  Default = NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>a character string. giving the absolute path to write the output
files. Default is the working directory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replicates</code></td>
<td>
<p>a numerical. The number of replicates for the randomized
age generation. See details. Default = 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cutoff</code></td>
<td>
<p>a numerical. Specify a threshold to exclude fossil occurrences
with a high temporal uncertainty, i.e. with a wide temporal range between
min_age and max_age. Examples: cutoff=NULL (default; all occurrences are
kept in the data set) cutoff=5 (all occurrences with a temporal range of 5
Myr or higher are excluded from the data set)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>random</code></td>
<td>
<p>logical. Specify whether to take a random age (between MinT
and MaxT) for each occurrence or the midpoint age. Note that this option
defaults to TRUE if several replicates are generated (i.e. replicates &gt; 1).
Examples: random = TRUE (default) random = FALSE (use midpoint ages)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The replicate option allows the user to generate several replicates of the
data set in a single input file, each time re-drawing the ages of the
occurrences at random from uniform distributions with boundaries MinT and
MaxT. The replicates can be analysed in different runs (see PyRate command
-j) and combining the results of these replicates is a way to account for
the uncertainty of the true ages of the fossil occurrences. Examples:
replicates=1 (default, generates 1 data set), replicates=10 (generates 10
random replicates of the data set).
</p>


<h3>Value</h3>

<p>PyRate input files in the working directory.
</p>


<h3>Note</h3>

<p>See <a href="https://github.com/dsilvestro/PyRate/wiki">https://github.com/dsilvestro/PyRate/wiki</a> for more details
and tutorials on PyRate and PyRate input.
</p>


<h3>See Also</h3>

<p>Other fossils: 
<code>cf_age()</code>,
<code>cf_equal()</code>,
<code>cf_outl()</code>,
<code>cf_range()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
minages &lt;- runif(250, 0, 65)
exmpl &lt;- data.frame(accepted_name = sample(letters, size = 250, replace = TRUE),
                    lng = runif(250, min = 42, max = 51),
                    lat = runif(250, min = -26, max = -11),
                    min_ma = minages,
                    max_ma = minages + runif(250, 0.1, 65))

#a vector with the status for each record, 
#make sure species are only classified as either extinct or extant, 
#otherwise the function will drop an error

status &lt;- sample(c("extinct", "extant"), size = nrow(exmpl), replace = TRUE)

#or from a list of species
status &lt;- sample(c("extinct", "extant"), size = length(letters), replace = TRUE)
names(status) &lt;- letters
status &lt;- status[exmpl$accepted_name]

## Not run: 
write_pyrate(x = exmpl,fname = "test", status = status)

## End(Not run)

</code></pre>


</div>