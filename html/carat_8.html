<div class="container">

<table style="width: 100%;"><tr>
<td>compRand</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compare Different Randomization Procedures via Tables and Plots</h2>

<h3>Description</h3>

<p>Compares randomization procedures based on several different quantities of imbalances. Among all included randomization procedures of class <code>"careval"</code>, two or more procedures can be compared in this function. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">compRand(...)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>objects of class <code>"careval"</code>.</p>
</td>
</tr></table>
<h3>Details</h3>

<p>The primary goal of using covariate-adaptive randomization in practice is to achieve balance with respect to the key covariates. We choose four rules to measure the absolute imbalances at overall, within-covariate-margin, and within-stratum levels, which are maximal, 95%quantile, median and mean of the absolute imbalances at different aspects. The Monte Carlo method is used to calculate the four types of imbalances. Let <code class="reqn">D_{n,i}(\cdot)</code> be the final difference at the corresponding level for <code class="reqn">i</code>th iteration, <code class="reqn">i=1,\ldots</code>, <code>N</code>, and <code>N</code> is the number of iterations.
</p>
<p>(1) Maximal
</p>
<p style="text-align: center;"><code class="reqn">\max_{i = 1, \dots, N}|D_{n,i}(\cdot)|.</code>
</p>

<p>(2) 95% quantile
</p>
<p style="text-align: center;"><code class="reqn">|D_{n,\lceil0.95N\rceil}(\cdot)|.</code>
</p>

<p>(3) Median
</p>
<p style="text-align: center;"><code class="reqn">|D_{n,(N+1)/2}(\cdot)|</code>
</p>

<p>for <code>N</code> is odd, and
</p>
<p style="text-align: center;"><code class="reqn">\frac{1}{2}(|D_{(N/2)}(\cdot)|+|D_{(N/2+1)}(\cdot)|)</code>
</p>

<p>for <code>N</code> is even.
</p>
<p>(4) Mean
</p>
<p style="text-align: center;"><code class="reqn">\frac{1}{N}\sum_{i = 1}^{N}|D_{n, i}(\cdot)|.</code>
</p>



<h3>Value</h3>

<p>It returns an object of <code>class</code> <code>"carcomp"</code>. 
</p>
<p>An object of class <code>"carcomp"</code> is a list containing the following components: 
</p>
<table>
<tr style="vertical-align: top;">
<td><code>Overall Imbalances</code></td>
<td>
<p>a matrix containing the maximum, 95%-quantile, median, and mean of the absolute overall imbalances for the randomization method(s) to be evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Within-covariate-margin Imbalances Imbalances</code></td>
<td>
<p>a matrix containing the maximum, 95%-quantile, median, and mean of the absolute within-covariate-margin imbalances for the randomization method(s) to be evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Within-stratum Imbalances</code></td>
<td>
<p>a matrix containing the maximum, 95%-quantile, median, and mean of the absolute within-stratum imbalances for the randomization method(s) to be evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dfmm</code></td>
<td>
<p>a data frame containing the mean absolute imbalances at the overall, within-stratum, and within-covariate-margin levels for the randomization method(s) to be evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df_abm</code></td>
<td>
<p>a data frame containing the absolute imbalances at the overall, within-stratum, and within-covariate-margin levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mechanism</code></td>
<td>
<p>a character string giving the randomization method(s) to be evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>the number of patients.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iteration</code></td>
<td>
<p>the number of iterations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cov_num</code></td>
<td>
<p>the number of covariates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level_num</code></td>
<td>
<p>a vector of level numbers for each covariate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Data Type</code></td>
<td>
<p>a character string giving the data type, <code>Real</code> or <code>Simulated</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DataGeneration</code></td>
<td>
<p>a bool vector indicating whether the data used for all the iterations is the same for the randomization method(s) to be evaluated.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Atkinson A C. <em>Optimum biased coin designs for sequential clinical trials with prognostic factors</em>[J]. Biometrika, 1982, 69(1): 61-67.
</p>
<p>Baldi Antognini A, Zagoraiou M. <em>The covariate-adaptive biased coin design for balancing clinical trials in the presence of prognostic factors</em>[J]. Biometrika, 2011, 98(3): 519-535.
</p>
<p>Hu Y, Hu F. <em>Asymptotic properties of covariate-adaptive randomization</em>[J]. The Annals of Statistics, 2012, 40(3): 1794-1815.
</p>
<p>Ma W, Ye X, Tu F, Hu F. <em>carat: Covariate-Adaptive Randomization for Clinical Trials</em>[J]. Journal of Statistical Software, 2023, 107(2): 1-47.
</p>
<p>Pocock S J, Simon R. <em>Sequential treatment assignment with balancing for prognostic factors in the controlled clinical trial</em>[J]. Biometrics, 1975: 103-115.
</p>
<p>Shao J, Yu X, Zhong B. <em>A theory for testing hypotheses under covariate-adaptive randomization</em>[J]. Biometrika, 2010, 97(2): 347-360. 
</p>
<p>Zelen M. <em>The randomization and stratification of patients to clinical trials</em>[J]. Journal of chronic diseases, 1974, 27(7): 365-375.
</p>


<h3>See Also</h3>

<p>See <code>evalRand</code> or <code>evalRand.sim</code> to evaluate a specific randomization procedure.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Compare stratified permuted block randomization and Hu and Hu's general CAR
cov_num &lt;- 2
level_num &lt;- c(2, 2)
pr &lt;- rep(0.5, 4)
n &lt;- 500
N &lt;- 20 # &lt;&lt;adjust according to CPU
bsize &lt;- 4
# set weight for Hu and Hu's method, it satisfies
# (1)Length should equal to cov_num
omega &lt;- c(1, 2, 1, 1)
# Assess Hu and Hu's general CAR
Obj1 &lt;- evalRand.sim(n = n, N = N, Replace = FALSE, cov_num = cov_num, 
                     level_num = level_num, pr = pr, method = "HuHuCAR", 
                     omega, p = 0.85)
# Assess stratified permuted block randomization
Obj2 &lt;- evalRand.sim(n = n, N = N, Replace = FALSE, cov_num = cov_num, 
                     level_num = level_num, pr = pr, method = "StrPBR", 
                     bsize)

RES &lt;- compRand(Obj1, Obj2)

</code></pre>


</div>