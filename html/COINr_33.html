<div class="container">

<table style="width: 100%;"><tr>
<td>Denominate.data.frame</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Denominate data sets by other variables</h2>

<h3>Description</h3>

<p>"Denominates" or "scales" variables by other variables. Typically this is done by dividing extensive variables such as
GDP by a scaling variable such as population, to give an intensive variable (GDP per capita).
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'data.frame'
Denominate(
  x,
  denoms,
  denomby,
  x_ID = NULL,
  denoms_ID = NULL,
  f_denom = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A data frame of data to be denominated. Columns to be denominated must be numeric, but any columns not
specified in <code>denomby</code> will be ignored. <code>x</code> must also contain an ID column specified by <code>x_ID</code> to match rows with
<code>denoms</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>denoms</code></td>
<td>
<p>A data frame of denominator data. Columns should be denominator data, with column names corresponding
to entries in <code>denomby</code>. This must also include an ID column identified by <code>denoms_ID</code> to match rows.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>denomby</code></td>
<td>
<p>A data frame which specifies which denominators to use for each indicator, and any scaling factors
to apply. Should have columns <code>iCode</code>, <code>Denominator</code>, <code>ScaleFactor</code>. <code>iCode</code> specifies a column name from <code>x</code>,
<code>Denominator</code> specifies a column name from <code>denoms</code> to use to denominate the corresponding column from <code>x</code>.
<code>ScaleFactor</code> allows the possibility to scale
denominators if needed, and specifies a factor to multiply the resulting values by. For example, if GDP is a denominator and is measured in
dollars, dividing will create very small numbers (order 1e-10 and smaller) which could cause problems with numerical precision.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_ID</code></td>
<td>
<p>A column name of <code>x</code> to use to match rows with <code>denoms</code>. Default is <code>"uCode"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>denoms_ID</code></td>
<td>
<p>A column name of <code>denoms</code> to use to match rows with <code>x</code>. Default is <code>"uCode"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f_denom</code></td>
<td>
<p>A function which takes two numeric vector arguments and is used to perform the denomination for each
column. By default, this is division, i.e. <code>x[[col]]/denoms[[col]]</code> for given columns, but any function can be passed
that takes two numeric vectors as inputs and returns a single numeric vector. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed to or from other methods.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A data frame <code>x</code> is denominated by variables found in another data frame <code>denoms</code>, according to specifications in
<code>denomby</code>. <code>denomby</code> specifies which columns in <code>x</code> are to be denominated, and by which columns in <code>denoms</code>, and
any scaling factors to apply to each denomination.
</p>
<p>Both <code>x</code> and <code>denomby</code> must contain an ID column which matches the rows of <code>x</code> to <code>denomby</code>. If not specified, this
is assumed to be <code>uCode</code>,  but can also be specified using the <code>x_ID</code> and <code>denoms_ID</code> arguments. All entries in
<code>x[[x_ID]]</code> must be present in <code>denoms[[denoms_ID]]</code>, although extra rows are allowed in <code>denoms</code>. This is because
the rows of <code>x</code> are matched to the rows of <code>denoms</code> using these ID columns, to ensure that units (rows) are correctly
denominated.
</p>
<p>By default, columns of <code>x</code> are divided by columns of <code>denoms</code>. This can be generalised by setting <code>f_denom</code> to another
function which takes two numeric vector arguments. I.e. setting <code style="white-space: pre;">⁠denoms = ``*`` ⁠</code> will multiply columns of <code>x</code> and
denoms together.
</p>


<h3>Value</h3>

<p>A data frame of the same size as <code>x</code>, with any specified columns denominated according to specifications.
</p>


<h3>See Also</h3>


<ul><li> <p>WorldDenoms A data set of some common national-level denominators.
</p>
</li></ul>
<h3>Examples</h3>

<pre><code class="language-R"># Get a sample of indicator data (note must be indicators plus a "UnitCode" column)
iData &lt;- ASEM_iData[c("uCode", "Goods", "Flights", "LPI")]
# Also get some denominator data
denoms &lt;- ASEM_iData[c("uCode", "GDP", "Population")]
# specify how to denominate
denomby &lt;- data.frame(iCode = c("Goods", "Flights"),
Denominator = c("GDP", "Population"),
ScaleFactor = c(1, 1000))
# Denominate one by the other
iData_den &lt;- Denominate(iData, denoms, denomby)

</code></pre>


</div>