<div class="container">

<table style="width: 100%;"><tr>
<td>makemovie</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Produce a movie from frame-drawing function</h2>

<h3>Description</h3>

<p>Generates an MP4-movie provided a custom function that plots individual frames. The routine has been developed and tested for MacOS and it requires on a working installation of ffmpeg.
</p>


<h3>Usage</h3>

<pre><code class="language-R">makemovie(
  frame.draw,
  frame.index,
  output.path,
  output.filename,
  width = 1080,
  height = 720,
  fps = 60,
  keep.frames = FALSE,
  quiet = FALSE,
  separator = "/",
  ffmpeg.cmd = "ffmpeg",
  ffmpeg.opt = "-vcodec libx264 -crf 18 -pix_fmt yuv420p",
  manual = FALSE,
  cex = 1,
  oversampling = 1,
  first.index = 1,
  last.index = length(frame.index)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>frame.draw</code></td>
<td>
<p>function that plots an individual frame. This function must have exactly one  argument 'x', which can be integer (e.g. a simple frame index) or real (e.g. a time).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frame.index</code></td>
<td>
<p>list of frame indices 'x' to be included in the movie</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output.path</code></td>
<td>
<p>character specifying the directory, where the movie and temporary frames are saved</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output.filename</code></td>
<td>
<p>movie filename without path. This filename should end on the extension '.mp4'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>integer number of pixels along the horizontal axis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>integer number of pixels along the vertical axis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fps</code></td>
<td>
<p>number of frames per second</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep.frames</code></td>
<td>
<p>logical flag specifying whether the temporary directory with the individual frame files should be kept. If <code>manual</code> is set to <code>TRUE</code>, the frames are always kept.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>logical flag; if true, all console outputs produced by 'ffmpeg' are suppressed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>separator</code></td>
<td>
<p>filename separate of the system ('/' for Mac, Linux, Unix; '\' for Windows)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ffmpeg.cmd</code></td>
<td>
<p>command used to call ffmpeg form a terminal. Normally, this is just 'ffmpeg'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ffmpeg.opt</code></td>
<td>
<p>compression and formatting options used with ffmpeg</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>manual</code></td>
<td>
<p>logical flag; if true, ffmpeg is not called from within the code and the frames are never deleted. The suggested linux command line is returned as output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex</code></td>
<td>
<p>number defining the overall scaling of line widths, font sizes, etc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>oversampling</code></td>
<td>
<p>integer specifying the oversampling factor along both dimensions. If larger than 1, frames are plotted with (width*oversampling)-by-(height*oversampling) pixels and then resized back to width-by-height. This can be used to make line objects and text move more smoothly.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>first.index</code></td>
<td>
<p>integer specifying the first index of the vector frame.index to consider. Choosing a value larger than the default (1) can be used to continue a previously interrupted call of makemovie and/or to call makemovie from different R sessions in parallel.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>last.index</code></td>
<td>
<p>integer specifying the last index of the vector frame.index to consider. Choosing a value smaller than the default (length(frame.index)) can be used to continue a previously interrupted call of makemovie and/or to call makemovie from different R sessions in parallel.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Linux command line to convert frames into movie using ffmpeg.
</p>


<h3>Author(s)</h3>

<p>Danail Obreschkow
</p>


<h3>See Also</h3>

<p><code>makeframe</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Example: Movie of a manual clock

# Function to draw a single clock face with two hands
frame = function(time) {
  oldpar = graphics::par(mar=c(0,0,0,0))
  nplot(xlim=c(-1.1,1.1),ylim=c(-1.1,1.1),pty='s')
  plotrix::draw.circle(0,0,1,col='#aaaaff')
  radius = c(0.5,0.9)
  speed = 2*pi/c(720,60)
  lwd = c(4,2)
  graphics::arrows(0,0,radius*sin(speed*time),radius*cos(speed*time),lwd=lwd)
  graphics::par(oldpar)
}

# Produce movie
## Not run: 
makemovie(frame,seq(0,60,0.5),'~/testmovie','movie.mp4',200,200)

## End(Not run)

</code></pre>


</div>