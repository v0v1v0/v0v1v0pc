<div class="container">

<table style="width: 100%;"><tr>
<td>dilations</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Assess dilations from <code>PLR3000</code>-output.</h2>

<h3>Description</h3>

<p><code>dilations()</code> is a function which converts longformat recording of pupillary size and uses markers to generate a dataframe, plot, and markdown output to inspect the results.
</p>


<h3>Usage</h3>

<pre><code class="language-R">dilations(pupils, markers,
  remove_markers = NULL, add_markers = NULL,
  not_assess = NULL, artefacts_static = c(0.55,9.95),
  artefacts_dynamic = c(`1` = 1.5, `0.66` = 1, `0.33` = 0.5),
  time_assess = c(`1` = 10, `3` = 5),
  sig.level = 0.05, min_change = NULL,
  resting_delay = c(`3` = 0))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pupils</code></td>
<td>
<p>recording of pupillary function. long format dataframe with at least three columns: record_id, time, and size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>markers</code></td>
<td>
<p>time of markers. long format dataframe with at least two columns: record_id and time.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove_markers</code></td>
<td>
<p>markers which should be removed. long format dataframe with at least two columns: record_id and time. The time column need one decimal.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_markers</code></td>
<td>
<p>markers which should be added. long format dataframe with at least two columns: record_id and time. The time column need one decimal.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>not_assess</code></td>
<td>
<p>a list of record ids which should no be assessed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>artefacts_static</code></td>
<td>
<p>a list of the limits of the artefacts. The first number in the list is the minimum size to be assessed and the second is the maximum size to be assessed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>artefacts_dynamic</code></td>
<td>
<p>a named list where max change in millimeter within the duration (name in list) is removed. Will use the first 1 second of the recording to create a baseline, thus suspectible to artefacts in the start of the recording.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_assess</code></td>
<td>
<p>This named list define the number of seconds which should be used in the assessment of dilatios. The name is the number of periods-of-interest and the value is the seconds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sig.level</code></td>
<td>
<p>This is the significance level to be used when comparing the size of the period-of-interest. The significance level corresponds to the Wilcox.test used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_change</code></td>
<td>
<p>This is the minimum size of mm which needs to change before a dilation can be identified. Default is no minimum requirement.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resting_delay</code></td>
<td>
<p>This can be used if the subsequent resting period to compare should be delayed, i.e. if we should wait 5 second for those investigations with three periods of interest create a named list with periods of interest as names and seconds to delay as input.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a nested list one dataframe of the results ($dilations), plot ($plot$id[record id]), and a markdown output ($plot$markdown$id[record_id]). The dilations dataframe include the following columns: Record ID (record_id); Patient ID (pt_id); Date (date); pupil side (side); start of the period (min); end of the period (max); length of period (rec_length); number of measurements (n); median size (median); P value when comparing with the previous period (p_before); P value when comparing with the following period (p_after); and if dilation is identified (dilation, 1 is successful dilation and 0 is no dilation).
</p>


<h3>Examples</h3>

<pre><code class="language-R"> ## Not run: 
   recordings &lt;- PLR3000("C:/PLR3000/R_20200105_205901.xls")
   dilations &lt;- dilations(recordings$pupils,recordings$markers)

   # The dataframe of the results
   dilations$dilations

   # The plot of one of the recordings
   dilations$plot$id833

   # The markdown output of one of the recordings
   dilations$markdown$id833

 
## End(Not run)

</code></pre>


</div>