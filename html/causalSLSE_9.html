<div class="container">

<table style="width: 100%;"><tr>
<td>cslseModel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Semiparametric Least Squares Estimator Model
</h2>

<h3>Description</h3>

<p>This function creates an object of class <code>cslseModel</code> or
<code>slseModel</code>. The former is a list of <code>slseModel</code> objects, one
for each treatment group. The model objects contain all specifications
about the model being estimated including the starting knots used to
construct the basis functions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cslseModel(form, data, nbasis = function(n) n^0.3, 
           knots, groupInd=c(treated=1, nontreated=0))
slseModel(form, data, nbasis = function(n) n^0.3, 
           knots)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>form</code></td>
<td>
<p>A formula for the regression in  the case of a simple spline
regression, or two formulas separated by <code>|</code>, one for the
outcome versus the treatment indicator and one of the
confounders. See the details and examples below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A <code>data.frame</code> that contains all variables included
in <code>form</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nbasis</code></td>
<td>
<p>A function to determined the number of basis
functions. It has to be a function of one argument, the sample
size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>knots</code></td>
<td>
<p>An optional list of knots. For <code>cslseModel</code>, it must 
be a named list using the group names (treated and nontreated). Each element  
of the list is also a list  of length  equal to the number of
covariates. The choice for each covariate is NULL for no knots or
a numeric vector for specific knots. If missing, the knots are 
automatically generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groupInd</code></td>
<td>
<p>A named vector with the group names and values. By
default, the treatment indicator defined in <code>form</code> is equal to
1 for the treated and 0 for the nontreated. For now, these are
the only allowed names, but the values can differ. In particular,
the treatment indicator may be a factor with character values. See
the example below.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>An object of class <code>slseModel</code> is a regression model with a
dependent variable and a set of covariates. We assume that the model can
be written as <code class="reqn">Y=f(X)+e</code>, where <code class="reqn">f(x)</code> is an
unknown function of the covariates that we approximate using linear
combinations of basis functions. For now, we only consider local linear 
splines defined by sets of knots, one for each covariate generated by
the <code>model.matrix</code> of <code>form</code>. The knots are
automatically determined unless specified by the user. 
</p>
<p>An object of class <code>cslseModel</code> is a list of <code>slseModel</code>
objects, one for each treatment group. The assignment to a group is
determined by a treatment indicator, which is the right-hand side
variable in the formula to the left of <code>|</code> specified in
<code>form</code>. The formula to the right of <code>|</code> is used by
<code>model.matrix</code> to generate a set of confounders for each
treatment group. See the example below and the vignette to more details.
</p>


<h3>Value</h3>

<p>The function <code>slseModel</code> creates a semiparametric least squares
model or a class <code>slseModel</code> object. It is a list with the
following elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>slseForm</code></td>
<td>
<p>The formula for the semiparametric estimation. It links
the outcome variable with the matrix of basis functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>form</code></td>
<td>
<p>The <code>form</code> argument passed to the function
<code>slseModel</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nameY</code></td>
<td>
<p>The name of the variable representing the outcome</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The dataset passed to the function <code>slseModel</code> with the
missing values, if any, omitted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>knots</code></td>
<td>
<p>An object of class <code>slseKnots</code>. It is the set of
knots that define the local linear splines.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nameX</code></td>
<td>
<p>The names of all covariates included in the model. They are
all variables implied by the formula <code>form</code>, which may include
interactions and functions of variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nameS</code></td>
<td>
<p>The prefix added to the covariate names when the basis
functions are generated. By default, it is equal to <code>"U."</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlevels</code></td>
<td>
<p>When relevant, a list of levels of the factors included
in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na</code></td>
<td>
<p>A vector of integer representing the observations omitted
because of missing values. It is <code>NULL</code> when there are no missing
values.</p>
</td>
</tr>
</table>
<p>Note that other elements may be present if a knots selection has been
applied to the model.
</p>
<p>The function <code>cslseModel</code> creates an object of class
<code>cslseModel</code>. It is a list of <code>slseModel</code> objects, one for
each treatment group. It also contains the following additional
attributes:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>treatedVar</code></td>
<td>
<p>The name of the variable in the dataset that represents
the treatment indicator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groupInd</code></td>
<td>
<p>A named vector with the value of the treatment indicator
corresponding do each treatment group.</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>selSLSE</code> for additional elements that can be
included in the <code>slseModel</code> object, <code>estSLSE</code> to see
how the model is estimated and <code>slseKnots</code> for the format
of the knots</p>


<h3>Examples</h3>

<pre><code class="language-R">data(simDat3)

## Y is the outcome and Z the treatment indicator
## The confounders are X1, X2 and X1:X2:

mod1 &lt;- cslseModel(Y ~ Z | ~ X1 * X2, data = simDat3)
mod1

## A simple SLSE for a regression model

mod2 &lt;- slseModel(Y ~ X1 * X2, data = simDat3)
mod2

## If the treatment indicator differs from 0-1

data(simDat4)
mod3 &lt;- cslseModel(Y ~ treat | ~ X1 * X2, data = simDat4,
                   groupInd = c(treated = "treat", nontreated = "notreat" ))
mod3
</code></pre>


</div>