<div class="container">

<table style="width: 100%;"><tr>
<td>ard_hierarchical</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Hierarchical ARD Statistics</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt="[Experimental]"></a><br>
Performs hierarchical or nested tabulations, e.g. tabulates AE terms
nested within AE system organ class.
</p>

<ul>
<li> <p><code>ard_hierarchical()</code> includes summaries for the last variable listed
in the <code>variables</code> argument, nested within the other variables included.
</p>
</li>
<li> <p><code>ard_hierarchical_count()</code> includes summaries for <em>all</em> variables
listed in the <code>variables</code> argument each summary nested within the preceding
variables, e.g. <code>variables=c(AESOC, AEDECOD)</code> summarizes <code>AEDECOD</code> nested
in <code>AESOC</code>, and also summarizes the counts of <code>AESOC</code>.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">ard_hierarchical(data, ...)

ard_hierarchical_count(data, ...)

## S3 method for class 'data.frame'
ard_hierarchical(
  data,
  variables,
  by = dplyr::group_vars(data),
  statistic = everything() ~ c("n", "N", "p"),
  denominator = NULL,
  fmt_fn = NULL,
  stat_label = everything() ~ default_stat_labels(),
  id = NULL,
  ...
)

## S3 method for class 'data.frame'
ard_hierarchical_count(
  data,
  variables,
  by = dplyr::group_vars(data),
  fmt_fn = NULL,
  stat_label = everything() ~ default_stat_labels(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>(<code>data.frame</code>)<br>
a data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variables</code></td>
<td>
<p>(<code>tidy-select</code>)<br>
variables to perform the nested/hierarchical tabulations within.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>(<code>tidy-select</code>)<br>
variables to perform tabulations by. All combinations of the variables
specified here appear in results. Default is <code>dplyr::group_vars(data)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>statistic</code></td>
<td>
<p>(<code>formula-list-selector</code>)<br>
a named list, a list of formulas,
or a single formula where the list element one or more of  <code>c("n", "N", "p")</code>
(or the RHS of a formula).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>denominator</code></td>
<td>
<p>(<code>data.frame</code>, <code>integer</code>)<br>
Specify this <em>optional</em> argument to change the denominator,
e.g. the <code>"N"</code> statistic. Default is <code>NULL</code>. See below for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fmt_fn</code></td>
<td>
<p>(<code>formula-list-selector</code>)<br>
a named list, a list of formulas,
or a single formula where the list element is a named list of functions
(or the RHS of a formula),
e.g. <code style="white-space: pre;">⁠list(mpg = list(mean = \(x) round(x, digits = 2) |&gt; as.character()))⁠</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stat_label</code></td>
<td>
<p>(<code>formula-list-selector</code>)<br>
a named list, a list of formulas, or a single formula where
the list element is either a named list or a list of formulas defining the
statistic labels, e.g. <code>everything() ~ list(n = "n", p = "pct")</code> or
<code>everything() ~ list(n ~ "n", p ~ "pct")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>(<code>tidy-select</code>)<br>
an optional argument used to assert there are no duplicates within
the <code>c(id, variables)</code> columns.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>an ARD data frame of class 'card'
</p>


<h3>Denominators</h3>

<p>By default, the <code>ard_categorical()</code> function returns the statistics <code>"n"</code>, <code>"N"</code>, and
<code>"p"</code>, where little <code>"n"</code> are the counts for the variable levels, and big <code>"N"</code> is
the number of non-missing observations. The default calculation for the
percentage is merely <code>p = n/N</code>.
</p>
<p>However, it is sometimes necessary to provide a different <code>"N"</code> to use
as the denominator in this calculation. For example, in a calculation
of the rates of various observed adverse events, you may need to update the
denominator to the number of enrolled subjects.
</p>
<p>In such cases, use the <code>denominator</code> argument to specify a new definition
of <code>"N"</code>, and subsequently <code>"p"</code>.
The argument expects one of the following inputs:
</p>

<ul>
<li>
<p> a data frame. Any columns in the data frame that overlap with the <code>by</code>/<code>strata</code>
columns will be used to calculate the new <code>"N"</code>.
</p>
</li>
<li>
<p> an integer. This single integer will be used as the new <code>"N"</code>
</p>
</li>
<li>
<p> a string: one of <code>"column"</code>, <code>"row"</code>, or <code>"cell"</code>. <code>"column"</code> is equivalent
to <code>denominator=NULL</code>. <code>"row"</code> gives 'row' percentages where <code>by</code>/<code>strata</code>
columns are the 'top' of a cross table, and the variables are the rows.
<code>"cell"</code> gives percentages where the denominator is the number of non-missing
rows in the source data frame.
</p>
</li>
<li>
<p> a structured data frame. The data frame will include columns from <code>by</code>/<code>strata</code>.
The last column must be named <code>"...ard_N..."</code>. The integers in this column will
be used as the updated <code>"N"</code> in the calculations.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">ard_hierarchical(
  data = ADAE |&gt;
    dplyr::slice_tail(n = 1L, by = c(USUBJID, TRTA, AESOC, AEDECOD)),
  variables = c(AESOC, AEDECOD),
  by = TRTA,
  id = USUBJID,
  denominator = ADSL |&gt; dplyr::rename(TRTA = ARM)
)

ard_hierarchical_count(
  data = ADAE,
  variables = c(AESOC, AEDECOD),
  by = TRTA
)
</code></pre>


</div>