<div class="container">

<table style="width: 100%;"><tr>
<td>samplesizeTable.cgPairedDifferenceFit</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Estimate Sample Sizes based on a cgPairedDifferenceFit object
</h2>

<h3>Description</h3>

<p>Estimate the sample size that would be required to detect a specified 
difference in a paired difference data study.  The estimate is based on the
variability that was observed in a previous paired difference data study.
A cgPairedDifferenceSampleSizeTable class object is created. </p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'cgPairedDifferenceFit'
samplesizeTable(fit, direction, mmdvec,
 power = 0.80, alpha = 0.05, nmax = 1000, display = "print", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fit </code></td>
<td>

<p>A <code>cgPairedDifferenceFit</code> object from a previous paired difference data study.    
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>direction </code></td>
<td>

<p>A <code>character</code> value indicating whether the sample size should be estimated
to detect an <code>"increase"</code> or a <code>"decrease"</code>.  This only effects
the sample size estimates if the previous study in <code>fit</code> was 
analyzed on the log scale, in which case the differences in <code>mmdvec</code>
are relative differences instead of absolute differences.
For detecting relative changes, the sample size
required to detect a relative increase of 25% is not the same as the sample
size to detect a relative decrease of 25%, for example.  But for detecting
absolute changes, the sample size required
to detect an absolute increase of 25 is the same as the sample size
to detect an absolute decrease of 25.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mmdvec </code></td>
<td>

<p>A <code>numeric</code> <code>vector</code> specifying the minimum meaningful differences
to be detected in the future study.  If the previous study
in <code>fit</code> was analyzed on the log scale, then the values in <code>mmdvec</code>
are assumed to be relative percentage increases or decreases, depending
on the value of <code>direction</code>.  If the previous study in
<code>fit</code> was not analyzed on the log scale, then the values in <code>mmdvec</code>
are assumed to be absolute increases or decreases, depending on 
the value of <code>direction</code>. Each value in <code>mmdvec</code> needs to
be positive.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>power </code></td>
<td>

<p>The power for the future study, set by default to be <code>0.80</code>.
This is equivalent
to <code class="reqn">1 - \beta</code>, where <code class="reqn">\beta</code> is the probability of
committing a Type II error: accepting the null hypothesis of
no difference when a difference truly exists.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha </code></td>
<td>

<p>The significance level or alpha for the future study, set by default
as <code>0.05</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nmax </code></td>
<td>

<p>The maximum number of subjects per group.  If more subjects are estimated
to be required, than the exact number required is not reported, only the
fact that more than the maximum number would be required. This is in
place to prevent long and likely unnecessary calculations.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>display </code></td>
<td>

<p>One of three valid values:
</p>

<dl>
<dt><code>"print"</code></dt>
<dd>
<p>The default value; It calls a <code>print</code> method for the
created <br><code>cgPairedDifferenceSamplesizeTable</code> object, which is
a formatted text output of the table(s).
</p>
</dd>
<dt><code>"none"</code></dt>
<dd>
<p>Supresses any printing. Useful, for example, when just assignment
of the resulting object is desired.
</p>
</dd>
<dt><code>"show"</code></dt>
<dd>
<p>Calls the default <code>showDefault</code> method, which
will just print out the <code>cgPairedDifferenceSamplesizeTable</code> components.
</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>... </code></td>
<td>

<p>Additional arguments. Only one is currently valid:
</p>

<dl>
<dt>
<code>correction</code> </dt>
<dd>
<p>Other than the <code>NULL</code> value, only the <code>"df"</code> value can
be specified. This <code>"df"</code> values provides a
degrees of freedom correction for using 
variance estimates based on different degrees of freedom. See
details below.
</p>
</dd>
</dl>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Here, the estimated sample size actually refers to the number of
experimental units. Hence the number of observations will always be
twice the number of experimental units, due to the paired structure. 
</p>
<p>This sample size method only works for the classical least squares
fitted model, since there is no analogous decomposition of total
variance into  between-experimental unit and within-experimental unit variance
components. Sample sizes are estimated for detecting a minimum
difference with the classical least squares t-test / F-test.
</p>
<p>The <code>correction = "df"</code> argument specifies a method that Fleiss
(1986, pages 129-130) attributes to Cochran and Cox (1957) and Fisher.
The correction decreases the relative efficiency that is calculated
from accounting for correlated paired observations, relative to the unpaired two group
design. The adjustment accounts for the different degrees of freedom
used for the variance components in the paired design
(between-experimental unit, within-experimettal unit, total variability.)
</p>
<p>Since the correction reduces the relative efficiency, and the
noncentrality parameter is also reduced. The correction
is a multiplicative factor bounded below
by 0.833 and approaches 1 as the number of experimental units
increments from the minimum of <code>n=2</code>. The reduction in the
noncentrality parameter increases the computed sample size.
</p>


<h3>Value</h3>

  
<p>Creates an object of class <code>cgPairedDifferenceSampleSizeTable</code>, with the
following slots:
</p>

<dl>
<dt><code>ols.sstable</code></dt>
<dd>
<p>A matrix with the estimated experimental
unit sample sizes based on the
classical model variance estimates. The matrix has 3 columns and
one row for each element of the <code>mmdvec</code> <code>vector</code>.
The first column specifies the minimum meaningful difference (<code>"mmd"</code>).
The second column gives the number of experimental units
(<code>"n"</code>) required,
possibly truncated at <code>nmax</code>.
The third column gives the total number of
observations (<code>"N"</code>), also possibly truncated at
<code>nmax</code>. Since this for the paired groups design, <code>N = n
	* 2</code> will always hold.</p>
</dd>
<dt><code>settings</code></dt>
<dd>
<p>A list of properties mostly carried as-is from the
<code>data</code> argument object of class
<code>cgPairedDifferenceData</code>, with the following additional members:
</p>

<dl>
<dt><code>sigmaest</code></dt>
<dd>
<p>A list with 1 member, <code>ols</code>, containing the
estimated spread (sigma, standard deviation) variance
estimates from
the classical model of <code>fit</code>. This list component is a
vector of length 3, providing the within-experimental unit,
between experimental unit, and total variability estimates. </p>
</dd>
<dt><code>planningname</code></dt>
<dd>
<p>A <code>character</code> describing the study
or purpose of the sample size analysis.  Taken from the 
<code>settings$analysisname</code> of the <code>fit</code> object. </p>
</dd>
<dt><code>direction</code></dt>
<dd>
<p>A saved copy of the <code>direction</code> argument. </p>
</dd>
<dt><code>alpha</code></dt>
<dd>
<p>A saved copy of the <code>alpha</code> argument. </p>
</dd>
<dt><code>power</code></dt>
<dd>
<p>A saved copy of the <code>power</code> argument. </p>
</dd>
<dt><code>nmax</code></dt>
<dd>
<p>A saved copy of the <code>nmax</code> argument. </p>
</dd>
</dl>
</dd>
</dl>
<h3>Note</h3>

<p>Contact <a href="mailto:cg@billpikounis.net">cg@billpikounis.net</a> for bug reports, questions,
concerns, and comments. 
</p>


<h3>Author(s)</h3>

<p>Bill Pikounis, John Oleynick, and Eva Ye
</p>


<h3>References</h3>

<p>Fleiss, J. L. (1986). <em>The Design and Analysis of Clinical
Experiments</em>,  pages 129 - 130. New York: Wiley.
</p>
<p>Cochran, W. G. and Cox, G. M. (1957), <em>Experimental Designs.</em> Second
edition. Wiley. 
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(anorexiaFT)
anorexiaFT.data &lt;- prepareCGPairedDifferenceData(anorexiaFT, format="groupcolumns",
                                                 analysisname="Anorexia FT",
                                                 endptname="Weight",
                                                 endptunits="lbs",
                                                 expunitname="Patient",
                                                 digits=1,
                                                 logscale=TRUE)
anorexiaFT.fit &lt;- fit(anorexiaFT.data)

## Recall the interest is in increased weight for the anorexia FT
## (family treatment) group of patients
samplesizeTable(anorexiaFT.fit, direction="increasing",
                mmdvec=c(5, 10, 15, 20))

## and with the adjustment on the noncentrality parameter
samplesizeTable(anorexiaFT.fit, direction="increasing",
                mmdvec=c(5, 10, 15, 20), correction="df")

</code></pre>


</div>