<div class="container">

<table style="width: 100%;"><tr>
<td>sim.din</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Data Simulation Tool for DINA, DINO and mixed DINA and DINO Data
</h2>

<h3>Description</h3>

<p><code>sim.din</code> can be used to simulate dichotomous response data according to a CDM
model.  The model type DINA or DINO can be specified item wise.  The number of items,
the sample size, and two parameters for each item,
the slipping and guessing parameters, can be set explicitly.
</p>


<h3>Usage</h3>

<pre><code class="language-R">  sim.din(N=0, q.matrix, guess=rep(0.2, nrow(q.matrix)),
    slip=guess, mean=rep(0, ncol(q.matrix)), Sigma=diag(ncol(q.matrix)),
    rule="DINA", alpha=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>A numeric value specifying the number <code class="reqn">N</code> of requested
response patterns. If <code>alpha</code> is specified, then <code>N</code> is set
by default to 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q.matrix</code></td>
<td>
<p>A required binary <code class="reqn">J \times K</code> matrix describing which
of the <code class="reqn">K</code> attributes are required, coded by 1, and which attributes
are not required, coded by 0, to master the items.   </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>guess</code></td>
<td>
<p>An optional vector of guessing parameters.  Default is
0.2 for each item.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>slip</code></td>
<td>
<p>An optional vector of slipping parameters.  Default is
0.2 for each item.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mean</code></td>
<td>
<p>A numeric vector of length <code>ncol(q.matrix)</code> indicating
the mean vector of the continuous version of the dichotomous skill vector.
Default is <code>rep(0, length=ncol(q.matrix))</code>.
That is, having a probability of <code>0.5</code> for possessing each of the
attributes.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Sigma</code></td>
<td>
<p>A matrix of dimension <code>ncol(q.matrix)</code> times <code>ncol(q.matrix)</code>
specifying the covariance matrix of the continuous version of the dichotomous skill
vector (i.e., the tetrachoric correlation of the dichotomous skill vector).
Default is <code>diag( 1, ncol(q.matrix))</code>.  That is, by default the possession of
the attributes is assumed to be uncorrelated.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rule</code></td>
<td>
<p>An optional character string or vector of character strings
specifying the model rule that is used.  The character strings must be
of <code>"DINA"</code> or <code>"DINO"</code>.  If a vector of character strings is
specified, implying an itemwise condensation rule, the vector must
be of length <code class="reqn">J</code>, which is the number of used items.  The default is
the condensation rule <code>"DINA"</code> for all items.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>A matrix of attribute patterns which can be given as an input
instead of underlying latent variables. If <code>alpha</code> is not <code>NULL</code>,
then <code>mean</code> and <code>Sigma</code> are ignored.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with following entries
</p>
<table>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>
<p>A matrix of simulated dichotomous response data
according to the specified CDM model.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Simulated attributes</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Rupp, A. A., Templin, J. L., &amp; Henson, R. A. (2010). <em>Diagnostic
Measurement: Theory, Methods, and Applications</em>. New York: The Guilford
Press.
</p>


<h3>See Also</h3>

<p><code>Data-sim</code> for artificial date set simulated with the help of this
method; <code>plot.din</code>, the S3 method for plotting objects of
the class <code>din</code>; <code>summary.din</code>, the S3
method for summarizing objects of the class <code>din</code>, which
creates objects of the class <code>summary.din</code>;
<code>print.summary.din</code>, the S3 method for printing
objects of the class <code>summary.din</code>; <code>din</code>,
the main function for DINA and DINO parameter estimation,
which creates objects of the class <code>din</code>.  See also
<code>CDM-package</code> for general information about this package.
</p>
<p>See <code>sim_model</code> for a general simulation function.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#############################################################################
## EXAMPLE 1: simulate DINA/DINO data according to a tetrachoric correlation
#############################################################################

# define Q-matrix for 4 items and 2 attributes
q.matrix &lt;- matrix(c(1,0,0,1,1,1,1,1), ncol=2, nrow=4)

# Slipping parameters
slip &lt;- c(0.2,0.3,0.4,0.3)

# Guessing parameters
guess &lt;- c(0,0.1,0.05,0.2)

set.seed(1567) # fix random numbers
dat1 &lt;- CDM::sim.din(N=200, q.matrix, slip=slip, guess=guess,
  # Possession of the attributes with high probability
  mean=c(0.5,0.2),
  # Possession of the attributes is weakly correlated
  Sigma=matrix(c(1,0.2,0.2,1), ncol=2), rule="DINA")$dat
head(dat1)

set.seed(15367) # fix random numbers
res &lt;- CDM::sim.din(N=200, q.matrix, slip=slip, guess=guess, mean=c(0.5,0.2),
         Sigma=matrix(c(1,0.2,0.2,1), ncol=2), rule="DINO")

# extract simulated data
dat2 &lt;- res$dat
# extract attribute patterns
head( res$alpha )
  ##        [,1] [,2]
  ##   [1,]    1    1
  ##   [2,]    1    1
  ##   [3,]    1    1
  ##   [4,]    1    1
  ##   [5,]    1    1
  ##   [6,]    1    0

#  simulate data based on given attributes
#          -&gt; 5 persons with 2 attributes -&gt; see the Q-matrix above
alpha &lt;- matrix( c(1,0,1,0,1,1,0,1,1,1),
    nrow=5,ncol=2, byrow=TRUE )
CDM::sim.din(  q.matrix=q.matrix, alpha=alpha )

## Not run: 
#############################################################################
# EXAMPLE 2: Simulation based on attribute vectors
#############################################################################
set.seed(76)
# define Q-matrix
Qmatrix &lt;- matrix(c(1,0,1,0,1,0,0,1,0,1,0,1,1,1,1,1), 8, 2, byrow=TRUE)
colnames(Qmatrix) &lt;- c("Attr1","Attr2")
# define skill patterns
alpha.patt &lt;- matrix(c(0,0,1,0,0,1,1,1), 4,2,byrow=TRUE )
AP &lt;- nrow(alpha.patt)
# define pattern probabilities
alpha.prob &lt;- c( .20, .40, .10, .30 )
# simulate alpha latent responses
N &lt;- 1000     # number of persons
ind &lt;- sample( x=1:AP, size=N, replace=TRUE, prob=alpha.prob)
alpha &lt;- alpha.patt[ ind, ]    # (true) latent responses
# define guessing and slipping parameters
guess &lt;- c(.26,.3,.07,.23,.24,.34,.05,.1)
slip &lt;- c(.05,.16,.19,.03,.03,.19,.15,.05)
# simulation of the DINA model
dat &lt;- CDM::sim.din(N=0, q.matrix=Qmatrix, guess=guess,
              slip=slip, alpha=alpha)$dat
# estimate model
res &lt;- CDM::din( dat, q.matrix=Qmatrix )
# extract maximum likelihood estimates for individual classifications
est &lt;- paste( res$pattern$mle.est )
# calculate classification accuracy
mean( est==apply( alpha, 1, FUN=function(ll){ paste0(ll[1],ll[2] ) } ) )
  ##   [1] 0.935

#############################################################################
# EXAMPLE 3: Simulation based on already estimated DINA model for data.ecpe
#############################################################################

dat &lt;- CDM::data.ecpe$data
q.matrix &lt;- CDM::data.ecpe$q.matrix

#***
# (1) estimate DINA model
mod &lt;- CDM::din( data=dat[,-1], q.matrix=q.matrix, rule="DINA")

#***
# (2) simulate data according to DINA model
set.seed(977)
# number of subjects to be simulated
n &lt;- 3000
# simulate attribute patterns
probs &lt;- mod$attribute.patt$class.prob   # probabilities
patt &lt;- mod$attribute.patt.splitted      # response patterns
alpha &lt;- patt[ sample( 1:(length(probs) ), n, prob=probs, replace=TRUE), ]
# simulate data using estimated item parameters
res &lt;- CDM::sim.din(N=n, q.matrix=q.matrix, guess=mod$guess$est, slip=mod$slip$est,
              rule="DINA", alpha=alpha)
# extract data
dat &lt;- res$dat

## End(Not run)
</code></pre>


</div>