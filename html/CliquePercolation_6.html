<div class="container">

<table style="width: 100%;"><tr>
<td>cpCommunitySizeDistribution</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plotting Clique Percolation Community Size Distribution</h2>

<h3>Description</h3>

<p>Function for plotting the frequency distribution of community sizes from clique
percolation community detection and testing for power-law.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cpCommunitySizeDistribution(
  list.of.communities,
  color.line = "#bc0031",
  test.power.law = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>list.of.communities</code></td>
<td>
<p>List object taken from results of cpAlgorithm
function; see also cpAlgorithm</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color.line</code></td>
<td>
<p>string indicating the color of the line in the plot as described
in par; default is <code>"#bc0031"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test.power.law</code></td>
<td>
<p>Logical indicating whether fit of power-law should be tested; default
is FALSE; see Details</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function takes the results of cpAlgorithm (see also cpAlgorithm),
that is, either the <code>list.of.communities.numbers</code> or the
<code>list.of.communities.labels</code> and plots the community size distribution. If there
are no communities, no plot can be generated. An error is printed indicating this.
</p>
<p>If <code>test.power.law = TRUE</code>, test of a fit of a power-law is performed with the
function fit_power_law (see also fit_power_law). Fit is tested for
the entire distribution from the smallest community size onward (i.e., typically k
as specified in cpAlgorithm). Moreover, test uses the <code>plfit</code> implementation of
fit_power_law. For other arguments, default values are used.
</p>


<h3>Value</h3>

<p>The function primarily plots the community size distribution. Additionally, it returns
a list with a data frame containing all community sizes and their frequencies
(<code>size.distribution</code>). If <code>test.power.law = TRUE</code>, a test of fit of a power-law
distribution is also returned as a list object with results from fit_power_law (see
also fit_power_law).
</p>


<h3>Author(s)</h3>

<p>Jens Lange, <a href="mailto:lange.jens@outlook.com">lange.jens@outlook.com</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Example with fictitious data

# create qgraph object; 150 nodes; 1/7 of all edges are different from zero
W &lt;- matrix(c(0), nrow = 150, ncol = 150, byrow = TRUE)
set.seed(4186)
W[upper.tri(W)] &lt;- sample(c(rep(0,6),1), length(W[upper.tri(W)]), replace = TRUE)
rand_w &lt;- stats::rnorm(length(which(W == 1)), mean = 0.3, sd = 0.1)
W[which(W == 1)] &lt;- rand_w
W &lt;- Matrix::forceSymmetric(W)
W &lt;- qgraph::qgraph(W, DoNotPlot = TRUE)

# run clique percolation for weighted networks
cp.results &lt;- cpAlgorithm(W, k = 3, method = "weighted", I = 0.38)

# plot community size distribution with blue line
cp.size.dist &lt;- cpCommunitySizeDistribution(cp.results$list.of.communities.numbers,
                                            color.line = "#0000ff")
# test for power-law distribution
cp.size.dist &lt;- cpCommunitySizeDistribution(cp.results$list.of.communities.numbers,
                                            color.line = "#0000ff",
                                            test.power.law = TRUE)
cp.size.dist$fit.power.law

## Example with Obama data set (see ?Obama)

# get data
data(Obama)

# estimate network
net &lt;- qgraph::EBICglasso(qgraph::cor_auto(Obama), n = nrow(Obama))

# run clique percolation algorithm with specific k and I
cpk3I.16 &lt;- cpAlgorithm(net, k = 3, I = 0.16, method = "weighted")

# plot community size distribution
#the distribution is not very informative with four equally-sized communities
Obama.size.dist &lt;- cpCommunitySizeDistribution(cpk3I.16$list.of.communities.numbers)

</code></pre>


</div>