<div class="container">

<table style="width: 100%;"><tr>
<td>compute_mesh</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create INLA mesh for spatial analysis</h2>

<h3>Description</h3>

<p><code>compute_mesh</code> create objects required for INLA analysis of an object of class <code>"CRTsp"</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">compute_mesh(
  trial = trial,
  offset = -0.1,
  max.edge = 0.25,
  inla.alpha = 2,
  maskbuffer = 0.5,
  pixel = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>trial</code></td>
<td>
<p>an object of class <code>"CRTsp"</code> or a data frame containing locations in (x,y) coordinates, cluster
assignments (factor <code>cluster</code>), and arm assignments (factor <code>arm</code>) and outcome.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offset</code></td>
<td>
<p>see <code>inla.mesh.2d</code> documentation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.edge</code></td>
<td>
<p>see <code>inla.mesh.2d</code> documentation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inla.alpha</code></td>
<td>
<p>parameter related to the smoothness (see <code>inla</code> documentation)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maskbuffer</code></td>
<td>
<p>numeric: width of buffer around points (km)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pixel</code></td>
<td>
<p>numeric: size of pixel (km)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>compute_mesh</code> carries out the computationally intensive steps required for setting-up an
INLA analysis of an object of class <code>"CRTsp"</code>, creating the prediction mesh and the projection matrices.
The mesh can be reused for different models fitted to the same
geography. The computational resources required depend largely on the resolution of the prediction mesh.
The prediction mesh is thinned to include only pixels centred at a distance less than
<code>maskbuffer</code> from the nearest point.<br>
A warning may be generated if the <code>Matrix</code> library is not loaded.
</p>


<h3>Value</h3>

<p>list
</p>

<ul>
<li> <p><code>prediction</code> Data frame containing the prediction points and covariate values
</p>
</li>
<li> <p><code>A</code> projection matrix from the observations to the mesh nodes.
</p>
</li>
<li> <p><code>Ap</code> projection matrix from the prediction points to the mesh nodes.
</p>
</li>
<li> <p><code>indexs</code> index set for the SPDE model
</p>
</li>
<li> <p><code>spde</code> SPDE model
</p>
</li>
<li> <p><code>pixel</code> pixel size (km)
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">{
# low resolution mesh for test dataset
library(Matrix)
example &lt;- readdata('exampleCRT.txt')
exampleMesh=compute_mesh(example, pixel = 0.5)
}
</code></pre>


</div>