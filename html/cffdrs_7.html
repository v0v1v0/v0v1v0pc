<div class="container">

<table style="width: 100%;"><tr>
<td>fwiRaster</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Raster-based Fire Weather Index System</h2>

<h3>Description</h3>

<p><code>fwiRaster</code> is used to calculate the outputs of the
Canadian Forest Fire Weather Index (FWI) System for one day based on noon
local standard time (LST) weather observations of temperature, relative
humidity, wind speed, and 24-hour rainfall, as well as the previous day's
fuel moisture conditions. This function takes rasterized input and generates
raster maps as outputs.
</p>
<p>The Canadian Forest Fire Weather Index (FWI) System is a major subsystem of
the Canadian Forest Fire Danger Rating System, which also includes Canadian
Forest Fire Behavior Prediction (FBP) System. The modern FWI System was
first issued in 1970 and is the result of work by numerous researchers from
across Canada. It evolved from field research which began in the 1930's and
regional fire hazard and fire danger tables developed from that early
research.
</p>
<p>The modern System (Van Wagner 1987) provides six output indices which
represent fuel moisture and potential fire behavior in a standard pine
forest fuel type. Inputs are a daily noon observation of fire weather, which
consists of screen-level air temperature and relative humidity, 10 meter
open wind speed and 24 accumulated precipitation.
</p>
<p>The first three outputs of the system (the Fire Fuel Moisture Code, the Duff
Moisture Code, and the Drought Code) track moisture in different layers of
the fuel making up the forest floor. Their calculation relies on the daily
fire weather observation and also, importantly, the code value from the
previous day as they are in essence bookkeeping systems tracking the amount
of moisture (water) in to and out of the layer.  It is therefore important
that when calculating FWI System outputs over an entire fire season, an
uninterrupted daily weather stream is provided; one day is the assumed time
step in the models and thus missing data must be filled in.
</p>
<p>The next three outputs of the System are relative (unitless) indicators of
aspects of fire behavior potential: spread rate (the Initial Spread Index),
fuel consumption (the Build-up Index) and fire intensity per unit length of
fire front (the Fire Weather Index).  This final index, the fwi, is the
component of the System used to establish the daily fire danger level for a
region and communicated to the public.  This final index can be transformed
to the Daily Severity Rating (dsr) to provide a more reasonably-scaled
estimate of fire control difficulty.
</p>
<p>Both the Duff Moisture Code (dmc) and Drought Code (dc) are influenced by
day length (see Van Wagner, 1987). Day length adjustments for different
ranges in latitude can be used (as described in Lawson and Armitage 2008
(<a href="https://cfs.nrcan.gc.ca/pubwarehouse/pdfs/29152.pdf">https://cfs.nrcan.gc.ca/pubwarehouse/pdfs/29152.pdf</a>)) and are included
in this R function; latitude must be positive in the northern hemisphere and
negative in the southern hemisphere.
</p>
<p>The default initial (i.e., "start-up") fuel moisture code values (FFMC=85,
DMC=6, DC=15) provide a reasonable set of conditions for most springtime
conditions in Canada, the Northern U.S., and Alaska. They are not suitable
for particularly dry winters and are presumably not appropriate for
different parts of the world.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fwiRaster(
  input,
  init = c(ffmc = 85, dmc = 6, dc = 15),
  mon = 7,
  out = "all",
  lat.adjust = TRUE,
  uppercase = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>input</code></td>
<td>
<p>A stack or brick containing rasterized daily weather
observations taken at noon LST. Variable names have to be the same as in the
following list, but they are case insensitive. The order in which the inputs
are entered is not important.
</p>

<table>
<tr>
<td style="text-align: left;">
<var>lat</var> </td>
<td style="text-align: left;"> (recommended) </td>
<td style="text-align: left;"> Latitude (decimal degree,
__default=55__)</td>
</tr>
<tr>
<td style="text-align: left;">
<var>temp</var> </td>
<td style="text-align: left;"> (required) </td>
<td style="text-align: left;"> Temperature (centigrade)</td>
</tr>
<tr>
<td style="text-align: left;">
<var>rh</var> </td>
<td style="text-align: left;"> (required) </td>
<td style="text-align: left;"> Relative humidity (%)</td>
</tr>
<tr>
<td style="text-align: left;">
<var>ws</var> </td>
<td style="text-align: left;">
(required) </td>
<td style="text-align: left;"> 10-m height wind speed (km/h)</td>
</tr>
<tr>
<td style="text-align: left;">
<var>prec</var> </td>
<td style="text-align: left;"> (required)
</td>
<td style="text-align: left;"> 24-hour rainfall (mm)</td>
</tr>
<tr>
<td style="text-align: left;"> </td>
</tr>
</table>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>init</code></td>
<td>
<p>A vector that contains the initial values for FFMC, DMC, and DC
or a stack that contains raster maps of the three moisture codes calculated
for the previous day, which will be used for the current day's calculation.
Defaults are the standard initial values for FFMC, DMC, and DC defined as
the following:
</p>

<table>
<tr>
<td style="text-align: left;">
<b>Variable</b> </td>
<td style="text-align: left;"> <b>Description</b> </td>
<td style="text-align: left;"> <b>Default</b> </td>
</tr>
<tr>
<td style="text-align: left;">
<var>ffmc</var>
   </td>
<td style="text-align: left;"> Previous day Fine Fuel Moisture Code (FFMC; unitless) </td>
<td style="text-align: left;"> 85 </td>
</tr>
<tr>
<td style="text-align: left;">
<var>dmc</var> </td>
<td style="text-align: left;"> Previous day Duff Moisture Code (DMC; unitless)</td>
<td style="text-align: left;"> 6 </td>
</tr>
<tr>
<td style="text-align: left;">
<var>dc</var> </td>
<td style="text-align: left;"> Previous Day Drought Code (DC; unitless) </td>
<td style="text-align: left;"> 15</td>
</tr>
<tr>
<td style="text-align: left;">
<var>lat</var> </td>
<td style="text-align: left;"> Latitude of the weather station (<em>Optional</em>)</td>
<td style="text-align: left;"> 55 </td>
</tr>
</table>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mon</code></td>
<td>
<p>Month of the year (integer 1~12, default=7). Month is used in
latitude adjustment (<code>lat.adjust</code>), it is therefore recommended when
<code>lat.adjust=TRUE</code> was chosen.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out</code></td>
<td>
<p>The function offers two output options, <code>out="all"</code> will
produce a raster stack include both the input and the FWI System outputs;
<code>out="fwi"</code> will generate a stack with only the FWI system components.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lat.adjust</code></td>
<td>
<p>The function offers options for whether latitude
adjustments to day lengths should be applied to the calculations. The
default value is "TRUE".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uppercase</code></td>
<td>
<p>Output in upper cases or lower cases would be decided by
this argument. Default is TRUE.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>By default, <code>fwi</code> returns a raster stack which includes both
the input and the FWI System variables, as describe below: </p>
<table>
<tr style="vertical-align: top;">
<td><code>Inputs
</code></td>
<td>
<p>Including <code>temp</code>, <code>rh</code>, <code>ws</code>, and <code>prec</code> with
<code>lat</code> as optional.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ffmc </code></td>
<td>
<p>Fine Fuel Moisture Code</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dmc
</code></td>
<td>
<p>Duff Moisture Code</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dc </code></td>
<td>
<p>Drought Code</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>isi </code></td>
<td>
<p>Initial Spread
Index</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bui </code></td>
<td>
<p>Buildup Index</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fwi </code></td>
<td>
<p>Fire Weather Index</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dsr
</code></td>
<td>
<p>Daily Severity Rating</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Xianli Wang, Alan Cantin, Marc-Andr√© Parisien, Mike Wotton, Kerry
Anderson, and Mike Flannigan
</p>


<h3>References</h3>

<p>1. Van Wagner, C.E. and T.L. Pickett. 1985. Equations and
FORTRAN program for the Canadian Forest Fire Weather Index System. Can. For.
Serv., Ottawa, Ont. For. Tech. Rep. 33. 18 p.
<a href="https://cfs.nrcan.gc.ca/pubwarehouse/pdfs/19973.pdf">https://cfs.nrcan.gc.ca/pubwarehouse/pdfs/19973.pdf</a>
</p>
<p>2. Van Wagner, C.E. 1987. Development and structure of the Canadian forest
fire weather index system. Forest Technology Report 35. (Canadian Forestry
Service: Ottawa). <a href="https://cfs.nrcan.gc.ca/pubwarehouse/pdfs/19927.pdf">https://cfs.nrcan.gc.ca/pubwarehouse/pdfs/19927.pdf</a>
</p>
<p>3.  Lawson, B.D. and O.B. Armitage. 2008. Weather guide for the Canadian
Forest Fire Danger Rating System. Nat. Resour. Can., Can. For. Serv., North.
For. Cent., Edmonton, AB.
<a href="https://cfs.nrcan.gc.ca/pubwarehouse/pdfs/29152.pdf">https://cfs.nrcan.gc.ca/pubwarehouse/pdfs/29152.pdf</a>
</p>


<h3>See Also</h3>

<p><code>fbp</code>, <code>fbpRaster</code>, <code>fwi</code>,
<code>hffmc</code>, <code>hffmcRaster</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(cffdrs)
require(terra)
# The test data is a stack with four input variables including
# daily noon temp, rh, ws, and prec (we recommend tif format):
day01src &lt;- rast(
  system.file("extdata", "test_rast_day01.tif", package = "cffdrs")
)
day01 &lt;- crop(day01src, c(250, 255, 47, 51))
# assign variable names:
names(day01) &lt;- c("temp", "rh", "ws", "prec")
# (1) use the initial values
foo &lt;- fwiRaster(day01)
plot(foo)
### Additional, longer running examples ###
# (2) use initial values with larger raster
day01 &lt;- day01src
names(day01) &lt;- c("temp", "rh", "ws", "prec")

foo &lt;- fwiRaster(day01)

plot(foo)

</code></pre>


</div>