<div class="container">

<table style="width: 100%;"><tr>
<td>transform_mod_cv</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Transforms data according to the modified CV rule</h2>

<h3>Description</h3>

<p>Transforms data according to the modified coefficient of variation (CV)
rule. This is used to add additional variance to datasets with
unexpectedly low variance, which is sometimes encountered during
testing of new materials over short periods of time.
</p>
<p>Two versions of this transformation are implemented. The first version,
<code>transform_mod_cv()</code>, transforms the data in a single group (with
no other structure) according to the modified CV rules.
</p>
<p>The second
version, <code>transform_mod_cv_ad()</code>, transforms data that is structured
according to both condition and batch, as is commonly done for
the Andersonâ€“Darling k-Sample and Anderson-Darling tests when pooling
across environments.
</p>


<h3>Usage</h3>

<pre><code class="language-R">transform_mod_cv_ad(x, condition, batch)

transform_mod_cv(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a vector of data to transform</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>condition</code></td>
<td>
<p>a vector indicating the condition to which each
observation belongs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>batch</code></td>
<td>
<p>a vector indicating the batch to which each observation
belongs</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The modified CV transformation takes the general form:
</p>
<p style="text-align: center;"><code class="reqn">\frac{S_i^*}{S_i} (x_{ij} - \bar{x_i}) + \bar{x_i}</code>
</p>

<p>Where <code class="reqn">S_i^*</code> is the modified standard deviation
(mod CV times mean) for
the <code class="reqn">ith</code> group; <code class="reqn">S_i</code> is the standard deviation
for the <code class="reqn">ith</code> group, <code class="reqn">\bar{x_i}</code> is
the group mean and <code class="reqn">x_{ij}</code> is the observation.
</p>
<p><code>transform_mod_cv()</code> takes a vector
containing the observations and transforms the data.
The equation above is used, and all observations
are considered to be from the same group.
</p>
<p><code>transform_mod_cv_ad()</code> takes a vector containing the observations
plus a vector containing the corresponding conditions and a vector
containing the batches. This function first calculates the modified
CV value from the data from each condition (independently). Then,
within each condition, the transformation
above is applied to produce the transformed data <code class="reqn">x'</code>.
This transformed data is further transformed using the following
equation.
</p>
<p style="text-align: center;"><code class="reqn">x_{ij}'' = C (x'_{ij} - \bar{x_i}) + \bar{x_i}</code>
</p>

<p>Where:
</p>
<p style="text-align: center;"><code class="reqn">C = \sqrt{\frac{SSE^*}{SSE'}}</code>
</p>

<p style="text-align: center;"><code class="reqn">SSE^* = (n-1) (CV^* \bar{x})^2 - \sum(n_i(\bar{x_i}-\bar{x})^2)</code>
</p>

<p style="text-align: center;"><code class="reqn">SSE' = \sum(x'_{ij} - \bar{x_i})^2</code>
</p>



<h3>Value</h3>

<p>A vector of transformed data
</p>


<h3>See Also</h3>

<p><code>calc_cv_star()</code>
</p>
<p><code>cv()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Transform data according to the modified CV transformation
# and report the original and modified CV for each condition

library(dplyr)
carbon.fabric %&gt;%
filter(test == "FT") %&gt;%
  group_by(condition) %&gt;%
  mutate(trans_strength = transform_mod_cv(strength)) %&gt;%
  head(10)

## # A tibble: 10 x 6
## # Groups:   condition [1]
##    id         test  condition batch strength trans_strength
##    &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;    &lt;dbl&gt;          &lt;dbl&gt;
##  1 FT-RTD-1-1 FT    RTD           1     126.           126.
##  2 FT-RTD-1-2 FT    RTD           1     139.           141.
##  3 FT-RTD-1-3 FT    RTD           1     116.           115.
##  4 FT-RTD-1-4 FT    RTD           1     132.           133.
##  5 FT-RTD-1-5 FT    RTD           1     129.           129.
##  6 FT-RTD-1-6 FT    RTD           1     130.           130.
##  7 FT-RTD-2-1 FT    RTD           2     131.           131.
##  8 FT-RTD-2-2 FT    RTD           2     124.           124.
##  9 FT-RTD-2-3 FT    RTD           2     125.           125.
## 10 FT-RTD-2-4 FT    RTD           2     120.           119.

# The CV of this transformed data can be computed to verify
# that the resulting CV follows the rules for modified CV

carbon.fabric %&gt;%
  filter(test == "FT") %&gt;%
  group_by(condition) %&gt;%
  mutate(trans_strength = transform_mod_cv(strength)) %&gt;%
  summarize(cv = sd(strength) / mean(strength),
            mod_cv = sd(trans_strength) / mean(trans_strength))

## # A tibble: 3 x 3
##   condition     cv mod_cv
##   &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;
## 1 CTD       0.0423 0.0612
## 2 ETW       0.0369 0.0600
## 3 RTD       0.0621 0.0711

</code></pre>


</div>