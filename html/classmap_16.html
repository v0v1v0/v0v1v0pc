<div class="container">

<table style="width: 100%;"><tr>
<td>vcr.knn.newdata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Carry out a k-nearest neighbor classification on new data, and prepare to visualize its results.
</h2>

<h3>Description</h3>

<p>Predicts class labels for new data by k nearest neighbors, using the output of <code>vcr.knn.train</code> on the training data. For cases in the new data whose given label <code>ynew</code> is not <code>NA</code>, additional output is produced for constructing graphical displays such as the <code>classmap</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">vcr.knn.newdata(Xnew, ynew = NULL, vcr.knn.train.out, LOO = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Xnew</code></td>
<td>
<p>If the training data was a matrix of coordinates, <code>Xnew</code> must be such a matrix with the same number of columns. If the training data was a set of dissimilarities, <code>Xnew</code> must be a rectangular matrix of dissimilarities, with each row containing the dissmilarities of a new case to all training cases. Missing values are not allowed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ynew</code></td>
<td>
<p>factor with class membership of each new case. Can be <code>NA</code> for some or all cases. If <code>NULL</code>, is assumed to be <code>NA</code> everywhere.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vcr.knn.train.out</code></td>
<td>
<p>output of <code>vcr.knn.train</code> on the training data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LOO</code></td>
<td>
<p>leave one out. Only used when testing this function on a subset of the training data. Default is <code>LOO=FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with components: <br></p>
<table>
<tr style="vertical-align: top;">
<td><code>yintnew</code></td>
<td>
<p>number of the given class of each case. Can contain <code>NA</code>'s.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ynew</code></td>
<td>
<p>given class label of each case. Can contain <code>NA</code>'s.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>levels</code></td>
<td>
<p>levels of the response, from <code>vcr.knn.train.out</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predint</code></td>
<td>
<p>predicted class number of each case. Always exists.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pred</code></td>
<td>
<p>predicted label of each case.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>altint</code></td>
<td>
<p>number of the alternative class. Among the classes different from the given class, it is the one with the highest posterior probability. Is <code>NA</code> for cases whose <code>ynew</code> is missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>altlab</code></td>
<td>
<p>label of the alternative class. Is <code>NA</code> for cases whose <code>ynew</code> is missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PAC</code></td>
<td>
<p>probability of the alternative class. Is <code>NA</code> for cases whose <code>ynew</code> is missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fig</code></td>
<td>
<p>distance of each case <code class="reqn">i</code> from each class <code class="reqn">g</code>. Always exists.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>farness</code></td>
<td>
<p>farness of each case from its given class. Is <code>NA</code> for cases whose <code>ynew</code> is missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ofarness</code></td>
<td>
<p>for each case <code>i</code>, its lowest  <code>fig[i,g]</code> to any class <code>g</code>. Always exists.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>the requested number of nearest neighbors, from <code>vcr.knn.train.out</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ktrues</code></td>
<td>
<p>for each case this contains the actual number of elements in its neighborhood. This can be higher than <code>k</code> due to ties.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>counts</code></td>
<td>
<p>a matrix with 3 columns, each row representing a case. For the neighborhood of each case it says how many members it has from the given class, the predicted class, and the alternative class. The first and third entry is <code>NA</code> for cases whose <code>ynew</code> is missing.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Raymaekers J., Rousseeuw P.J.
</p>


<h3>References</h3>

<p>Raymaekers J., Rousseeuw P.J., Hubert M. (2021). Class maps for visualizing classification results. <em>Technometrics</em>, appeared online. doi: <a href="https://doi.org/10.1080/00401706.2021.1927849">10.1080/00401706.2021.1927849</a>(link to open access pdf)
</p>


<h3>See Also</h3>

<p><code>vcr.knn.train</code>, <code>classmap</code>, <code>silplot</code>, <code>stackedplot</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("data_floralbuds")
X &lt;- data_floralbuds[, 1:6]; y &lt;- data_floralbuds[, 7]
set.seed(12345); trainset &lt;- sample(1:550, 275)
vcr.train &lt;- vcr.knn.train(X[trainset, ], y[trainset], k = 5)
vcr.test &lt;- vcr.knn.newdata(X[-trainset, ], y[-trainset], vcr.train)
confmat.vcr(vcr.train) # for comparison
confmat.vcr(vcr.test)
cols &lt;- c("saddlebrown", "orange", "olivedrab4", "royalblue3")
stackedplot(vcr.train, classCols = cols) # for comparison
stackedplot(vcr.test, classCols = cols)
classmap(vcr.train, "bud", classCols = cols) # for comparison
classmap(vcr.test, "bud", classCols = cols)

# For more examples, we refer to the vignette:
## Not run: 
vignette("K_nearest_neighbors_examples")

## End(Not run)
</code></pre>


</div>