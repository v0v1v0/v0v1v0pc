<div class="container">

<table style="width: 100%;"><tr>
<td>graph_departure</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Graphical representation based on sigma convergence</h2>

<h3>Description</h3>

<p>A ggplot object countries by time where coloured rectangles show if in that
time unit the indicator is below one standard deviation (-1) from the mean,
above one standard deviation (-1) from the mean or within 2 standard
deviations around the mean.
</p>


<h3>Usage</h3>

<pre><code class="language-R">graph_departure(
  myTB,
  timeName = "time",
  indiType = "highBest",
  displace = 0.25,
  displaceh = 0.45,
  dimeFontNum = 6,
  myfont_scale = 1.35,
  x_angle = 45,
  color_rect = c(`-1` = "red1", `0` = "gray80", `1` = "lightskyblue1"),
  axis_name_y = "Countries",
  axis_name_x = "Time",
  alpha_color = 0.9
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>myTB</code></td>
<td>
<p>the component $res$departure of an object created by
<code>departure_mean()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeName</code></td>
<td>
<p>name of the time variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indiType</code></td>
<td>
<p>indicator type, one among "highBest" and "lowBest"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>displace</code></td>
<td>
<p>rectangle half height</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>displaceh</code></td>
<td>
<p>rectangle half base</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dimeFontNum</code></td>
<td>
<p>size of font</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>myfont_scale</code></td>
<td>
<p>axes magnification</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_angle</code></td>
<td>
<p>angle of x axis labels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color_rect</code></td>
<td>
<p>colors within rectangles; the default for a "highBest" indicator type is red for
"-1", grey for "0" and light sky blue for "1"; the default for a "lowBest" indicator type is light
sky blue for "-1", grey for "0" and red for "1"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis_name_y</code></td>
<td>
<p>name of y axis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis_name_x</code></td>
<td>
<p>name of x axis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha_color</code></td>
<td>
<p>transparency</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note that  calculation of departure must be already performed by invoking
<code>departure_mean</code>.
</p>


<h3>Value</h3>

<p>a list with component $res made by a ggplot object to be displayed
or saved using ggsave function.
</p>


<h3>References</h3>

<p><a href="https://www.eurofound.europa.eu/system/files/2022-04/introduction-to-the-convergeu-package-0.6.4-tutorial-v2-apr2022.pdf">https://www.eurofound.europa.eu/system/files/2022-04/introduction-to-the-convergeu-package-0.6.4-tutorial-v2-apr2022.pdf</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">

# Example 1: "lowBest" indicator type:
# Dataframe in the format time by countries:
require(tibble)
testTB &lt;- dplyr::tribble(
   ~time, ~countryA ,  ~countryB,  ~countryC,
   2000,     0.8,   2.7,    3.9,
   2001,     1.2,   3.2,    4.2,
   2002,     0.9,   2.9,    4.1,
   2003,     1.3,   2.9,    4.0,
   2004,     1.2,   3.1,    4.1,
   2005,     1.2,   3.0,    4.0
   )
mySTB &lt;- sigma_conv(testTB)
resDM &lt;-  departure_mean(oriTB=testTB, sigmaTB=mySTB$res)
myG &lt;- NULL
myG &lt;- graph_departure(resDM$res$departures,
                       timeName = "time",
                       indiType = "lowBest",
                       displace = 0.25,
                       displaceh = 0.45,
                       dimeFontNum = 6,
                       myfont_scale = 1.35,
                       x_angle = 45,
                       axis_name_y = "Countries",
                       axis_name_x = "Time",
                       alpha_color = 0.9)
# Change the colour of rectangles:
myGG &lt;- graph_departure(resDM$res$departures,
                       timeName = "time",
                       indiType = "lowBest",
                       displace = 0.25,
                       displaceh = 0.45,
                       dimeFontNum = 6,
                       myfont_scale = 1.35,
                       x_angle = 45,
                       color_rect = c("-1"='green4', "0"='yellow',"1"='red'),
                       axis_name_y = "Countries",
                       axis_name_x = "Time",
                       alpha_color = 0.9)

# Example 2: "highBest" type of indicator:
# Graphical plot of sigma convergence for the emp_20_64_MS Eurofound dataset:
data(emp_20_64_MS)
mySC &lt;- sigma_conv(emp_20_64_MS)
resDMeur &lt;- departure_mean(oriTB = emp_20_64_MS, sigmaTB = mySC$res)
myG1 &lt;- NULL
myG1 &lt;- graph_departure(resDMeur$res$departures,
                        timeName = "time",
                        indiType = "highBest",
                        displace = 0.25,
                        displaceh = 0.45,
                        dimeFontNum = 6,
                        myfont_scale = 1.35,
                        x_angle = 45,
                        axis_name_y = "Countries",
                        axis_name_x = "Time",
                        alpha_color = 0.9)

# Plot mean departures for selected countries only and change the colour of rectangles:
myG2 &lt;- NULL
myG2 &lt;- graph_departure(resDMeur$res$departures[,1:8],
                        timeName = "time",
                        indiType = "highBest",
                        displace = 0.25,
                        displaceh = 0.45,
                        dimeFontNum = 6,
                        myfont_scale = 1.35,
                        x_angle = 45,
                        color_rect = c("-1"='red', "0"='yellow',"1"='green4'),
                        axis_name_y = "Countries",
                        axis_name_x = "Time",
                        alpha_color = 0.9)

</code></pre>


</div>