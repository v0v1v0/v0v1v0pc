<div class="container">

<table style="width: 100%;"><tr>
<td>RAC_difference</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Rank Abundance Curve Differences</h2>

<h3>Description</h3>

<p>Calculates differences between two samples for four comparable
aspects of rank abundance curves (richness, evenness, rank, species
composition). There are three ways differences can be calculated. 1)
Between treatments within a block (note: block.var and treatment.var need
to be specified). 2) Between treatments, pooling all replicates into a
single species pool (note: pool = TRUE, treatment.var needs to be
specified, and block.var will be NULL). 3) All pairwise combinations
between all replicates (note: block.var = NULL, pool = FALSE and specifying
treatment.var is optional. If treatment.var is specified, the treatment
that each replicate belongs to will also be listed in the output).
</p>


<h3>Usage</h3>

<pre><code class="language-R">RAC_difference(
  df,
  time.var = NULL,
  species.var,
  abundance.var,
  replicate.var,
  treatment.var = NULL,
  pool = FALSE,
  block.var = NULL,
  reference.treatment = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A data frame containing a species, abundance, and replicate columns
and optional time, treatment, and block columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.var</code></td>
<td>
<p>The name of the optional time column.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>species.var</code></td>
<td>
<p>The name of the species column.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>abundance.var</code></td>
<td>
<p>The name of the abundance column.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replicate.var</code></td>
<td>
<p>The name of the replicate column. Replicate identifiers
must be unique within the dataset and cannot be nested within treatments or
blocks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment.var</code></td>
<td>
<p>The name of the optional treatment column.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pool</code></td>
<td>
<p>An argument to allow abundance values to be pooled within a
treatment. The default value is "FALSE", a value of "TRUE" averages
abundance of each species within a treatment at a given time point.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>block.var</code></td>
<td>
<p>The name of the optional block column.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference.treatment</code></td>
<td>
<p>The name of the optional treatment that all other
treatments will be compared to (e.g. only controls will be compared to all
other treatments). If not specified all pairwise treatment comparisons will
be made.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The RAC_difference function returns a data frame with the following
attributes:
</p>

<ul>
<li>
<p>time.var: A column that has the same name and type as the time.var
column, if time.var is specified.
</p>
</li>
<li>
<p>block.var: A column that has same name and type as the block.var
column, if block.var is specified.
</p>
</li>
<li>
<p>replicate.var: A column that has same name and type as the
replicate.var column, represents the first replicate being compared. Note, a
replicate column will be returned only when pool is FALSE or block.var =
NULL.
</p>
</li>
<li>
<p>replicate.var2: A column that has the same type as the replicate.var
column, and is named replicate.var with a 2 appended to it, represents the
second replicate being compared. Note, a replicate.var column will be
returned only when pool is FALSE and block.var = NULL.
</p>
</li>
<li>
<p>treatment.var: A column that has the same name and type as the
treatment.var column, represents the first treatment being compared. A
treatment.var column will be returned when pool is TRUE or block.var is
present, or treatment.var is specified.
</p>
</li>
<li>
<p>treatment.var2: A column that has the same type as the treatment.var
column, and is named treatment.var with a 2 appended to it, represents the
second treatment being compared. A treatment.var column will be returned
when pool is TRUE or block.var is present, or treatment.var is specified.
</p>
</li>
<li>
<p>richness_diff: A numeric column that is the difference between the
compared samples (treatments or replicates) in species richness divided by
the total number of unique species in both samples. A positive value occurs
when there is greater species richness in replicate.var2 than replicate.var
or treatment.var2 than treatment.var.
</p>
</li>
<li>
<p>evenness_diff: A numeric column of the difference between the
compared samples (treatments or replicates) in evenness (measured by Evar).
A positive value occurs when there is greater evenness in replicate.var2
than replicate.var or treatment.var2 than treatment.var.
</p>
</li>
<li>
<p>rank_diff: A numeric column of the absolute value of average
difference between the compared samples (treatments or replicates) in
species' ranks divided by the total number of unique species in both
samples.Species that are not present in both samples are given the S+1 rank
in the sample it is absent in, where S is the number of species in that
sample.
</p>
</li>
<li>
<p>species_diff: A numeric column of the number of species that are
different between the compared samples (treatments or replicates) divided by
the total number of species in both samples. This is equivalent to the
Jaccard Index.
</p>
</li>
</ul>
<h3>References</h3>

<p>Avolio et al. Submitted
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(pplots)
# With block and no time
df &lt;- subset(pplots, year == 2002 &amp; block &lt; 3)
RAC_difference(df = df,
               species.var = "species",
               abundance.var = "relative_cover",
               treatment.var = 'treatment',
               block.var = "block",
               replicate.var = "plot")

# With blocks and time
df &lt;- subset(pplots, year &lt; 2004 &amp; block &lt; 3)
RAC_difference(df = df,
               species.var = "species",
               abundance.var = "relative_cover",
               treatment.var = 'treatment',
               block.var = "block",
               replicate.var = "plot",
               time.var = "year")

# With blocks, time and reference treatment
df &lt;- subset(pplots, year &lt; 2004 &amp; block &lt; 3)
RAC_difference(df = df,
               species.var = "species",
               abundance.var = "relative_cover",
               treatment.var = 'treatment',
               block.var = "block",
               replicate.var = "plot",
               time.var = "year",
               reference.treatment = "N1P0")

# Pooling by treatment with time
df &lt;- subset(pplots, year &lt; 2004)
RAC_difference(df = df,
               species.var = "species",
               abundance.var = "relative_cover",
               treatment.var = 'treatment',
               pool = TRUE,
               replicate.var = "plot",
               time.var = "year")

# All pairwise replicates with treatment
df &lt;- subset(pplots, year &lt; 2004 &amp; plot %in% c(21, 25, 32))
RAC_difference(df = df,
               species.var = "species",
               abundance.var = "relative_cover",
               replicate.var = "plot",
               time.var = "year",
               treatment.var = "treatment")

# All pairwise replicates without treatment
df &lt;- subset(pplots, year &lt; 2004 &amp; plot %in% c(21, 25, 32))
RAC_difference(df = df,
               species.var = "species",
               abundance.var = "relative_cover",
               replicate.var = "plot",
               time.var = "year")
</code></pre>


</div>