<div class="container">

<table style="width: 100%;"><tr>
<td>discLayer</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Discontinuities Layer</h2>

<h3>Description</h3>

<p>This function computes and plots spatial discontinuities. The 
discontinuities are plotted over the layer outputted by the getBorders function.
The line widths reflect the ratio or the difference between values of an indicator 
in two neighbouring units.
</p>


<h3>Usage</h3>

<pre><code class="language-R">discLayer(
  x,
  df,
  dfid = NULL,
  var,
  method = "quantile",
  nclass = 4,
  threshold = 0.75,
  type = "rel",
  sizemin = 1,
  sizemax = 10,
  col = "red",
  legend.pos = "bottomleft",
  legend.title.txt = "legend title",
  legend.title.cex = 0.8,
  legend.values.cex = 0.6,
  legend.values.rnd = 2,
  legend.frame = FALSE,
  add = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an sf object, a simple feature collection, as outputted by the getBorders function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>a data frame that contains the values used to compute and plot discontinuities.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dfid</code></td>
<td>
<p>name of the identifier variable in df, default to the first column 
of df. (optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>name of the numeric variable used to compute and plot discontinuities.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>a classification method; one of "sd", "equal", "quantile", "fisher-jenks","
q6", "geom", "arith", "em" or "msd" (see getBreaks).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nclass</code></td>
<td>
<p>a targeted number of classes. If null, the number of 
class is automatically defined (see getBreaks).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>share of represented borders, value between 0 
(nothing) and 1 (all the discontinuities).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>type of discontinuity measure, one of "rel" or "abs" (see Details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sizemin</code></td>
<td>
<p>thickness of the smallest line.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sizemax</code></td>
<td>
<p>thickness of the biggest line.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>color of the discontinuities lines.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.pos</code></td>
<td>
<p>position of the legend, one of "topleft", "top", 
"topright", "right", "bottomright", "bottom", "bottomleft", "left" or a 
vector of two coordinates in map units (c(x, y)). If 
legend.pos is "n" then the legend is not plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.title.txt</code></td>
<td>
<p>title of the legend.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.title.cex</code></td>
<td>
<p>size of the legend title.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.values.cex</code></td>
<td>
<p>size of the values in the legend.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.values.rnd</code></td>
<td>
<p>number of decimal places of the values in 
the legend.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.frame</code></td>
<td>
<p>whether to add a frame to the legend (TRUE) or 
not (FALSE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add</code></td>
<td>
<p>whether to add the layer to an existing plot (TRUE) or 
not (FALSE).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The "rel" type of discontinuity is the result of pmax(value unit 1 / value unit 2, value unit 2 / value unit 1).<br>
The "abs" type of discontinuity is the result of pmax(value unit 1 - value unit 2, value unit 2 - value unit 1).
</p>


<h3>Value</h3>

<p>An invisible sf object (MULTISTRING) with the discontinuity measures is returned.
</p>


<h3>See Also</h3>

<p>getBorders, gradLinkLayer, legendGradLines
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(sf)
mtq &lt;- st_read(system.file("gpkg/mtq.gpkg", package="cartography"))
# Get borders
mtq.borders &lt;- getBorders(x = mtq)
# Median Income 
choroLayer(x = mtq, var = "MED", border = "grey", lwd = 0.5, 
           method = 'equal', nclass = 6, legend.pos = "topleft",
           legend.title.txt = "Median Income\n(in euros)" )
# Discontinuities
discLayer(x = mtq.borders, df = mtq,
          var = "MED", col="red4", nclass=3,
          method="equal", threshold = 0.4, sizemin = 0.5,
          sizemax = 10, type = "abs",legend.values.rnd = 0,
          legend.title.txt = "Discontinuities\n(absolute difference)",
          legend.pos = "bottomleft", add=TRUE)
</code></pre>


</div>