<div class="container">

<table style="width: 100%;"><tr>
<td>pwcor-pwcov-pwnobs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
(Pairwise, Weighted) Correlations, Covariances and Observation Counts
</h2>

<h3>Description</h3>

<p>Computes (pairwise, weighted) Pearson's correlations, covariances and observation counts. Pairwise correlations and covariances can be computed together with observation counts and p-values, and output as 3D array (default) or list of matrices. <code>pwcor</code> and <code>pwcov</code> offer an elaborate print method.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pwcor(X, ..., w = NULL, N = FALSE, P = FALSE, array = TRUE, use = "pairwise.complete.obs")

pwcov(X, ..., w = NULL, N = FALSE, P = FALSE, array = TRUE, use = "pairwise.complete.obs")

pwnobs(X)

## S3 method for class 'pwcor'
print(x, digits = .op[["digits"]], sig.level = 0.05,
      show = c("all","lower.tri","upper.tri"), spacing = 1L, return = FALSE, ...)

## S3 method for class 'pwcov'
print(x, digits = .op[["digits"]], sig.level = 0.05,
      show = c("all","lower.tri","upper.tri"), spacing = 1L, return = FALSE, ...)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>a matrix or data.frame, for <code>pwcor</code> and <code>pwcov</code> all columns must be numeric. All functions are faster on matrices, so converting is advised for large data (see <code>qM</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an object of class 'pwcor' / 'pwcov'. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w</code></td>
<td>
<p>numeric. A vector of (frequency) weights. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>logical. <code>TRUE</code> also computes pairwise observation counts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>P</code></td>
<td>
<p>logical. <code>TRUE</code> also computes pairwise p-values (same as <code>cor.test</code> and <code>Hmisc::rcorr</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>array</code></td>
<td>
<p>logical. If <code>N = TRUE</code> or <code>P = TRUE</code>, <code>TRUE</code> (default) returns output as 3D array whereas <code>FALSE</code> returns a list of matrices.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use</code></td>
<td>
<p>argument passed to <code>cor</code> / <code>cov</code>. If <code>use != "pairwise.complete.obs"</code>, <code>sum(complete.cases(X))</code> is used for <code>N</code>, and p-values are computed accordingly. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>integer. The number of digits to round to in print. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sig.level</code></td>
<td>
<p>numeric. P-value threshold below which a <code>'*'</code> is displayed above significant coefficients if <code>P = TRUE</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show</code></td>
<td>
<p>character. The part of the correlation / covariance matrix to display. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spacing</code></td>
<td>
<p>integer. Controls the spacing between different reported quantities in the printout of the matrix: 0 - compressed, 1 - single space, 2 - double space.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return</code></td>
<td>
<p>logical. <code>TRUE</code> returns the formatted object from the print method for exporting. The default is to return <code>x</code> invisibly.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments passed to <code>cor</code> or <code>cov</code>. Only sensible if <code>P = FALSE</code>. </p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a numeric matrix, 3D array or list of matrices with the computed statistics. For <code>pwcor</code> and <code>pwcov</code> the object has a class 'pwcor' and 'pwcov', respectively.
</p>


<h3>Note</h3>

<p><code>weights::wtd.cors</code> is imported for weighted pairwise correlations (written in C for speed). For weighted correlations with bootstrap SE's see <code>weights::wtd.cor</code> (bootstrap can be slow). Weighted correlations for complex surveys are implemented in <code>jtools::svycor</code>. An equivalent and faster implementation of <code>pwcor</code> (without weights) is provided in <code>Hmisc::rcorr</code> (written in Fortran).
</p>


<h3>See Also</h3>

<p><code>qsu</code>, Summary Statistics, Collapse Overview 
</p>


<h3>Examples</h3>

<pre><code class="language-R">mna &lt;- na_insert(mtcars)
pwcor(mna)
pwcov(mna)
pwnobs(mna)
pwcor(mna, N = TRUE)
pwcor(mna, P = TRUE)
pwcor(mna, N = TRUE, P = TRUE)
aperm(pwcor(mna, N = TRUE, P = TRUE))
print(pwcor(mna, N = TRUE, P = TRUE), digits = 3, sig.level = 0.01, show = "lower.tri")
pwcor(mna, N = TRUE, P = TRUE, array = FALSE)
print(pwcor(mna, N = TRUE, P = TRUE, array = FALSE), show = "lower.tri")


</code></pre>


</div>