<div class="container">

<table style="width: 100%;"><tr>
<td>vcr.forest.train</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Prepare for visualization of a random forest classification on training data
</h2>

<h3>Description</h3>

<p>Produces output for the purpose of constructing graphical displays such as the <code>classmap</code> and <code>silplot</code>. The user first needs to train a random forest on the data by <code>randomForest::randomForest</code>.
This then serves as an argument to  <code>vcr.forest.train</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">vcr.forest.train(X, y, trainfit, type = list(),
                 k = 5, stand = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>A rectangular matrix or data frame, where the
columns (variables) may be of mixed type.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>factor with the given class labels.
It is crucial that <code>X</code> and <code>y</code> are exactly the same
as in the call to <code>randomForest::randomForest</code>.
<code>y</code> is allowed to contain <code>NA</code>'s.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trainfit</code></td>
<td>
<p>the output of a <code>randomForest::randomForest</code> training run.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>the number of nearest neighbors used in the
farness computation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>list for specifying some (or all) of the types of the
variables (columns) in <code>X</code>, used for computing the dissimilarity matrix, as in <code>cluster::daisy</code>.  The list may contain the following components: <code>"ordratio"</code> (ratio scaled variables to be treated as ordinal variables), <code>"logratio"</code> (ratio scaled variables that
must be logarithmically transformed), <code>"asymm"</code> (asymmetric
binary) and <code>"symm"</code> (symmetric binary variables).  Each
component's value is a vector, containing the names or the numbers
of the corresponding columns of <code>X</code>.
Variables not mentioned in the <code>type</code> list are interpreted as
usual (see argument <code>X</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stand</code></td>
<td>
<p>whether or not to standardize numerical (interval scaled) variables by their range as in the original <code>cluster::daisy</code> code for the farness computation. Defaults to <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with components: <br></p>
<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>The data used to train the forest.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yint</code></td>
<td>
<p>number of the given class of each case. Can contain <code>NA</code>'s.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>given class label of each case. Can contain <code>NA</code>'s.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>levels</code></td>
<td>
<p>levels of <code>y</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predint</code></td>
<td>
<p>predicted class number of each case. For each case this is the class with the highest posterior probability. Always exists.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pred</code></td>
<td>
<p>predicted label of each case.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>altint</code></td>
<td>
<p>number of the alternative class. Among the classes different from the given class, it is the one with the highest posterior probability. Is <code>NA</code> for cases whose <code>y</code> is missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>altlab</code></td>
<td>
<p>label of the alternative class. Is <code>NA</code> for cases whose <code>y</code> is missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PAC</code></td>
<td>
<p>probability of the alternative class. Is <code>NA</code> for cases whose <code>y</code> is missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>figparams</code></td>
<td>
<p>parameters for computing <code>fig</code>, can be used for new data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fig</code></td>
<td>
<p>distance of each case <code class="reqn">i</code> from each class <code class="reqn">g</code>. Always exists.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>farness</code></td>
<td>
<p>farness of each case from its given class. Is <code>NA</code> for cases whose <code>y</code> is missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ofarness</code></td>
<td>
<p>for each case <code>i</code>, its lowest  <code>fig[i,g]</code> to any class <code>g</code>. Always exists.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trainfit</code></td>
<td>
<p>The trained random forest which was given as an input to this function.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Raymaekers J., Rousseeuw P.J.
</p>


<h3>References</h3>

<p>Raymaekers J., Rousseeuw P.J.(2021). Silhouettes and quasi residual plots for neural nets and tree-based classifiers. <a href="https://arxiv.org/abs/2106.08814">(link to open access pdf)</a>
</p>


<h3>See Also</h3>

<p><code>vcr.forest.newdata</code>, <code>classmap</code>, <code>silplot</code>, <code>stackedplot</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(randomForest)
data("data_instagram")
traindata &lt;- data_instagram[which(data_instagram$dataType == "train"), -13]
set.seed(71) # randomForest is not deterministic
rfout &lt;- randomForest(y~., data = traindata, keep.forest = TRUE)
mytype &lt;- list(symm = c(1, 5, 7, 8)) # These 4 columns are
# (symmetric) binary variables. The variables that are not
# listed are interval-scaled by default.
x_train &lt;- traindata[, -12]
y_train &lt;- traindata[, 12]
# Prepare for visualization:
vcrtrain &lt;- vcr.forest.train(X = x_train, y = y_train,
                            trainfit = rfout, type = mytype)
confmat.vcr(vcrtrain)
stackedplot(vcrtrain, classCols = c(4, 2))
silplot(vcrtrain, classCols = c(4, 2))
classmap(vcrtrain, "genuine", classCols = c(4, 2))
classmap(vcrtrain, "fake", classCols = c(4, 2))

# For more examples, we refer to the vignette:
## Not run: 
vignette("Random_forest_examples")

## End(Not run)
</code></pre>


</div>