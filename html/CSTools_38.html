<div class="container">

<table style="width: 100%;"><tr>
<td>CST_SaveExp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Save objects of class 's2dv_cube' to data in NetCDF format</h2>

<h3>Description</h3>

<p>This function allows to divide and save a object of class 
's2dv_cube' into a NetCDF file, allowing to reload the saved data using 
<code>CST_Start</code> or <code>CST_Load</code> functions. It also allows to save any 
's2dv_cube' object that follows the NetCDF attributes conventions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">CST_SaveExp(
  data,
  destination = "./",
  startdates = NULL,
  sdate_dim = "sdate",
  ftime_dim = "time",
  memb_dim = "member",
  dat_dim = "dataset",
  var_dim = "var",
  drop_dims = NULL,
  single_file = FALSE,
  extra_string = NULL,
  global_attrs = NULL,
  units_hours_since = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>An object of class <code>s2dv_cube</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>destination</code></td>
<td>
<p>A character string containing the directory name in which 
to save the data. NetCDF file for each starting date are saved into the 
folder tree: 'destination/Dataset/variable/'. By default the function 
saves the data into the working directory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>startdates</code></td>
<td>
<p>A vector of dates that will be used for the filenames 
when saving the data in multiple files (single_file = FALSE). It must be a 
vector of the same length as the start date dimension of data. It must be a 
vector of class <code>Dates</code>, <code>'POSIXct'</code> or character with lenghts 
between 1 and 10. If it is NULL, the coordinate corresponding the the start 
date dimension or the first Date of each time step will be used as the name 
of the files. It is NULL by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sdate_dim</code></td>
<td>
<p>A character string indicating the name of the start date 
dimension. By default, it is set to 'sdate'. It can be NULL if there is no
start date dimension.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ftime_dim</code></td>
<td>
<p>A character string indicating the name of the forecast time
dimension. If 'Dates' are used, it can't be NULL. If there is no forecast 
time dimension, 'Dates' will be set to NULL and will not be used. By 
default, it is set to 'time'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>memb_dim</code></td>
<td>
<p>A character string indicating the name of the member 
dimension. It can be NULL if there is no member dimension. By default, it is
set to 'member'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dat_dim</code></td>
<td>
<p>A character string indicating the name of dataset dimension. 
It can be NULL if there is no dataset dimension. By default, it is set to 
'dataset'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_dim</code></td>
<td>
<p>A character string indicating the name of variable dimension. 
It can be NULL if there is no variable dimension. By default, it is set to 
'var'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop_dims</code></td>
<td>
<p>(optional) A vector of character strings indicating the 
dimension names of length 1 that need to be dropped in order that they don't 
appear in the netCDF file. Only is allowed to drop dimensions that are not 
used in the computation. The dimensions used in the computation are the ones 
specified in: sdate_dim, ftime_dim, dat_dim, var_dim and memb_dim. It is 
NULL by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>single_file</code></td>
<td>
<p>A logical value indicating if all object is saved in a 
single file (TRUE) or in multiple files (FALSE). When it is FALSE, 
the array is separated for datasets, variable and start date. When there are 
no specified time dimensions, the data will be saved in a single file by 
default. The output file name when 'single_file' is TRUE is a character 
string containing: '&lt;var&gt;_&lt;first_sdate&gt;_&lt;last_sdate&gt;.nc'; when it is FALSE, 
it is '&lt;var&gt;_&lt;sdate&gt;.nc'. It is FALSE by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extra_string</code></td>
<td>
<p>(Optional) A character string to be included as part of 
the file name, for instance, to identify member or realization. When 
single_file is TRUE, the 'extra_string' will substitute all the default 
file name; when single_file is FALSE, the 'extra_string' will be added 
in the file name as: '&lt;var&gt;_&lt;extra_string&gt;_&lt;sdate&gt;.nc'. It is NULL by 
default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>global_attrs</code></td>
<td>
<p>(Optional) A list with elements containing the global 
attributes to be saved in the NetCDF.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units_hours_since</code></td>
<td>
<p>(Optional) A logical value only available for the 
case: 'Dates' have forecast time and start date dimension, 'single_file' is 
TRUE and 'time_bounds' are not used. When it is TRUE, it saves the forecast 
time with units of 'hours since'; if it is FALSE, the time units will be a 
number of time steps with its corresponding frequency (e.g. n days, n months 
or n hours). It is FALSE by default.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Multiple or single NetCDF files containing the data array.<br></p>
<table>
<tr style="vertical-align: top;">
<td><code>single_file is TRUE</code></td>
<td>

<p>All data is saved in a single file located in the specified destination  
path with the following name (by default): 
'&lt;variable_name&gt;_&lt;first_sdate&gt;_&lt;last_sdate&gt;.nc'. Multiple variables
are saved separately in the same file. The forecast time units 
are calculated from each start date (if sdate_dim is not NULL) or from 
the time step. If 'units_hours_since' is TRUE, the forecast time units 
will be 'hours since &lt;each start date&gt;'. If 'units_hours_since' is FALSE, 
the forecast time units are extracted from the frequency of the time steps 
(hours, days, months); if no frequency is found, the units will be ’hours 
since’. When the time units are 'hours since' the time ateps are assumed to 
be equally spaced.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>single_file is FALSE</code></td>
<td>

<p>The data array is subset and stored into multiple files. Each file 
contains the data subset for each start date, variable and dataset. Files 
with different variables and datasets are stored in separated directories 
within the following directory tree: 'destination/Dataset/variable/'. 
The name of each file will be by default: '&lt;variable_name&gt;_&lt;sdate&gt;.nc'. 
The forecast time units are calculated from each start date (if sdate_dim 
is not NULL) or from the time step. The forecast time units will be 'hours 
since &lt;each start date&gt;'.
</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Perez-Zanon Nuria, <a href="mailto:nuria.perez@bsc.es">nuria.perez@bsc.es</a>
</p>


<h3>See Also</h3>

<p><code>Start</code>, <code>as.s2dv_cube</code> and 
<code>s2dv_cube</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
data &lt;- lonlat_temp_st$exp
CST_SaveExp(data = data, ftime_dim = 'ftime', var_dim = 'var', 
           dat_dim = 'dataset', sdate_dim = 'sdate')

## End(Not run)

</code></pre>


</div>