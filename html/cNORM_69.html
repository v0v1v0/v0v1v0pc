<div class="container">

<table style="width: 100%;"><tr>
<td>weighted.quantile</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Weighted quantile estimator</h2>

<h3>Description</h3>

<p>Computes weighted quantiles (code from Andrey Akinshin (2023) "Weighted quantile estimators" arXiv:2304.07265 [stat.ME]
Code made available via the CC BY-NC-SA 4.0 license) on the basis of either the weighted Harrell-Davis
quantile estimator or an adaption of the type 7 quantile estimator of the generic quantile function in
the base package. Please provide a vector with raw values, the probabilities for the quantiles and an
additional vector with the weight of each observation. In case the weight vector is NULL, a normal
quantile estimation is done. The vectors may not include NAs and the weights should be positive non-zero
values. Please draw on the computeWeights() function for retrieving weights in post stratification.
</p>


<h3>Usage</h3>

<pre><code class="language-R">weighted.quantile(x, probs, weights = NULL, type = "Harrell-Davis")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A numerical vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>probs</code></td>
<td>
<p>Numerical vector of quantiles</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>A numerical vector with weights; should have the same length as x</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Type of estimator, can either be "inflation", "Harrell-Davis" using a beta function to
approximate the weighted percentiles (Harrell &amp; Davis, 1982) or "Type7" (default; Hyndman &amp; Fan, 1996), an adaption
of the generic quantile function in R, including weighting. The inflation procedure is essentially
a numerical, non-parametric solution that gives the same results as Harrel-Davis. It requires less
ressources with small datasets and always finds a solution (e. g. 1000 cases with
weights between 1 and 10). If it becomes too resource intense, it switches to Harrell-Davis automatically.
Harrel-Davis and Type7 code is based on the work of Akinshin (2023).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>the weighted quantiles
</p>


<h3>References</h3>


<ol>
<li>
<p> Harrell, F.E. &amp; Davis, C.E. (1982). A new distribution-free quantile estimator. Biometrika, 69(3), 635-640.
</p>
</li>
<li>
<p> Hyndman, R. J. &amp; Fan, Y. (1996). Sample quantiles in statistical packages, American Statistician 50, 361â€“365.
</p>
</li>
<li>
<p> Akinshin, A. (2023). Weighted quantile estimators arXiv:2304.07265 [stat.ME]
</p>
</li>
</ol>
<h3>See Also</h3>

<p>weighted.quantile.inflation, weighted.quantile.harrell.davis, weighted.quantile.type7
</p>


</div>