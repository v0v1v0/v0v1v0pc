<div class="container">

<table style="width: 100%;"><tr>
<td>read.STdata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Imports a text file in R</h2>

<h3>Description</h3>

<p>A function for importing a text file containing spatio-temporal data.
In particular, it (a) generates the spatial and temporal IDs,
(b) converts the time series of each spatial point (with non-existing values
for some dates) into a regularly spaced object
within the observed time period, by filling the missing dates with ‘NA’
(c) converts the data into a <code>STFDF</code>, according to the standard of the
<code>spacetime</code> package, or into a data frame
</p>


<h3>Usage</h3>

<pre><code class="language-R">read.STdata(
  file,
  header = FALSE,
  dec = ".",
  sep = "",
  iclx,
  icly,
  iclt,
  icldate = c(icl.date = 0, iclty = 0, icltm = 0, icltd = 0),
  icltime = c(icl.time = 0, icltH = 0, icltM = 0, icltS = 0),
  iclvr,
  iclsp = 0,
  missing.v = NA,
  save.as = "data.frame",
  date.format = c("code", format = NA),
  bytime = NA,
  tlag,
  time.zone = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>the name of the data file and its extension. The file is searched
in the current working directory, otherwise the absolute path has to be included
in the file name. Note that data for each spatial point and
each temporal point are given by row; each row of the file contains at least
the x and y coordinates of a spatial point, the temporal code (or date) and
the measurement of the variable of interest.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>header</code></td>
<td>
<p>logical, value indicating whether the file contains the names
of the variables in the first line. If this argument is missing, header is
set to <code>FALSE</code> (default choice)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dec</code></td>
<td>
<p>character, used to indicate decimal points</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>field separator character. If sep = "" (default choice)
columns of the file are separated by white space or tabs (see <code>read.table</code>
for more details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iclx</code></td>
<td>
<p>numeric, the column in which the x-coordinate of the spatial points are
stored</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icly</code></td>
<td>
<p>numeric, the column in which the y-coordinate of the spatial points are
stored</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iclt</code></td>
<td>
<p>numeric, the column in which numeric temporal codes are stored.
This argument is provided  only if the <code>icldate</code> argument is not available:
<code>iclt</code> and <code>icldate</code>  are mutually exclusive. This argument is set
equal to <code>0</code>, if not available</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icldate</code></td>
<td>
<p>numeric vector to set the columns in which the dates are stored.
The user has to set <code>icl.date</code> if the date is stored in a single column, otherwise
the user has to specify the colunn in which the years (<code>iclty</code>), the months
(<code>icltm</code>) or the days (<code>icltd</code>) are stored separately.
This argument is set equal to <code>0</code> (default choice) if not available</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icltime</code></td>
<td>
<p>numeric vector to set the columns in which the time component
(hour, minute, second) of a date (if available) is stored. The user has to
set <code>icl.time</code> if the time is stored in a single column, otherwise the
user has to specify the column in which the hours (<code>icltH</code>), the minutes
(<code>icltM</code>) or the seconds (<code>icltS</code>) are stored separately.
This argument is set equal to <code>0</code> (default choice) if not available</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iclvr</code></td>
<td>
<p>numeric, the column in which the values of the variable are stored</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iclsp</code></td>
<td>
<p>numeric, the column in which the identification codes (IDs) for the
spatial locations are stored. This argument is set equal to <code>0</code> (default
choice) if IDs for the spatial locations are not available</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing.v</code></td>
<td>
<p>code used to indicate the presence of missing values in
the imported data. By default this argument is set equal to <code>NA</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save.as</code></td>
<td>
<p>character, indicating the class of the data to be returned.
It is allowed to choose between two options for saving the file (<code>"STFDF"</code>
or <code>"data.frame"</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date.format</code></td>
<td>
<p>vector, whose first element <code>date.format[1]</code> denotes the class of
the temporal component to be imported and the second one <code>date.format[2]</code> represents
the corresponding format. Note that the supported class of dates are
<code>"yearmon"</code>, <code>"yearqtr"</code>,
<code>"Date"</code>, <code>"POSIX"</code> (see <span class="pkg">Base</span>, <span class="pkg">lubridate</span>, <span class="pkg">zoo</span>);
moreover the personalized options <code>"year"</code> and <code>"code"</code> are also admissible and
are used if the temporal coordinate is given by year or as a numerical code,
respectively. By default, the argument <code>date.format</code> is set equal to <code>("code", format = NA)</code>.
If the temporal component, provided for example in year and month, is given in
separeted columns in the text file,
the required format in <code>date.format[2]</code> is of the type <code>"%Y %m"</code>;
in general the format requires the use of white spaces between two consecutive time units</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bytime</code></td>
<td>
<p>character, which denotes the time disaggregation of interest,
set <code>NA</code> (default choice) for numeric temporal code, otherwise <code>"%Y"</code>
or <code>"%y"</code> if values are taken by year, <code>"%m"</code> if values are taken by
month, <code>"%d"</code> if values are taken by day, <code>"%q"</code> if values
are taken by quarter, <code>"%H"</code> if values are taken by hour, <code>"%M"</code>
if values are taken by minute and <code>"%S"</code> if values are taken by seconds</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tlag</code></td>
<td>
<p>numeric, time increment/lag between two temporal observations</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.zone</code></td>
<td>
<p>character, time zone for dates with time component</p>
</td>
</tr>
</table>
<h3>Details</h3>



<ul>
<li>
<p> Uncomplete time series, for each spatial point, are filled with NA
</p>
</li>
<li>
<p> Some checks on the admissibility of the supported classes of dates are
implemented
</p>
</li>
<li>
<p> Time indexes for temporal points are coded for data.frame output by using
consecutive numbers starting from 1 (column 'timeIndex')
</p>
</li>
<li>
<p> The spatial points are coded by using the string 'id' and the consecutive numbers
starting from 1 (column 'spatialIndex')
</p>
</li>
</ul>
<h3>Value</h3>

<p>object of the <code>STFDF</code>-class or <code>data.frame</code>, which contains
coordinates of the spatial points, the spatial IDs, the temporal IDs, the dates
(if available in the input file) and the observed values of the variable of interest
</p>


<h3>References</h3>

<p>Bivand, R. S., Pebesma, E., Gomez-Rubio, V., 2013,
<em>Applied spatial data analysis with R</em>, Second edition. New York: Springer.
<a href="https://asdar-book.org/">https://asdar-book.org/</a>
</p>
<p>Grolemund, G, Wickham, H., 2011, Dates and Times Made Easy with lubridate.
Journal of Statistical Software, <b>40(3)</b> 1–25.
</p>
<p>Pebesma, E.J., 2012, spacetime: Spatio-Temporal Data in R.
Journal of Statistical Software, <b>51(7)</b> 1–30.
</p>
<p>Zeileis, A., Grothendieck. G., 2005, zoo: S3 Infrastructure for Regular and
Irregular Time Series.
Journal of Statistical Software, <b>14(6)</b> 1–27.
</p>


<h3>See Also</h3>

<p><code>STFDF-class</code>
</p>
<p><code>read.table</code>
</p>
<p><code>yearmon</code>
</p>
<p><code>yearqtr</code>
</p>
<p><code>Dates</code> for dates without times
</p>
<p><code>DateTimeClasses</code>
</p>
<p><code>timezones</code> for OlsonNames
</p>


<h3>Examples</h3>

<pre><code class="language-R">#example 1: import a text file, with dates stored in a single column (the 4th)
# and fill missing time points in monthly time series, with time lag equal to one


## Not run
## To run example 1 paste and copy the following lines (without the symbol '#')
## in the console:
#file_date &lt;- system.file("extdata", "file_date.txt", package = "covatest")
#db.date &lt;- read.STdata(file = file_date, header = TRUE, iclx = 2, icly = 3, iclt = 0,
#icldate = c(icl.date = 4, iclty = 0, icltm = 0, icltd = 0),
#icltime = c(icl.time = 0, icltH =0, icltM = 0, icltS = 0),
#iclvr = 5, iclsp = 1, missing.v = -99999, save.as = "data.frame",
#date.format = c("Date", "%d-%m-%Y"), bytime = "%m", tlag = 1)


#example 2: import a text file, with dates and times stored in different columns
# (from the 4th to the 9th) and fill missing time points in hourly time series,
# with time lag equal to three

## Not run
## To run example 2 paste and copy the following lines (without the symbol '#')
## in the console:
#file_datetime &lt;- system.file("extdata", "file_datetime.txt", package = "covatest")
#db.datetime &lt;- read.STdata(file = file_datetime, header = TRUE, iclx = 2, icly = 3, iclt = 0,
#icldate = c(icl.date = 0, iclty = 6, icltm = 5, icltd = 4),
#icltime = c(icl.time = 0, icltH = 7, icltM = 8, icltS = 9),
#iclvr = 10, iclsp = 1, missing.v = -99999, save.as = "data.frame",
#date.format = c("POSIX", "%Y %m %d %H %M %S"), bytime = "%H", tlag = 3)


#example 3: import a text file, with dates and times stored in different columns
# (from the 4th to the 9th) and fill missing time points in quarterly time series,
# with time lag equal to one

## Not run
## To run example 3 paste and copy the following lines (without the symbol '#')
## in the console:
#file_yq &lt;- system.file("extdata", "file_yq.txt", package = "covatest")
#db.yq &lt;- read.STdata(file = file_yq, header = TRUE, iclx = 2, icly = 3, iclt = 0,
#icldate = c(icl.date = 4, iclty = 0, icltm = 0, icltd = 0),
#icltime = c(icl.time = 0, icltH =0, icltM = 0, icltS = 0),
#iclvr = 5, iclsp = 1, missing.v = -99999, save.as = "data.frame",
#date.format = c("yearqtr", "%Y-Q%q"), bytime = "%q", tlag = 1)


</code></pre>


</div>