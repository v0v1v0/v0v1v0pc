<div class="container">

<table style="width: 100%;"><tr>
<td>cnlp_utils_tfidf</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Construct the TF-IDF Matrix from Annotation or Data Frame</h2>

<h3>Description</h3>

<p>Given annotations, this function returns the term-frequency inverse
document frequency (tf-idf) matrix from the extracted lemmas.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cnlp_utils_tfidf(
  object,
  tf_weight = c("lognorm", "binary", "raw", "dnorm"),
  idf_weight = c("idf", "smooth", "prob", "uniform"),
  min_df = 0.1,
  max_df = 0.9,
  max_features = 10000,
  doc_var = "doc_id",
  token_var = "lemma",
  vocabulary = NULL,
  doc_set = NULL
)

cnlp_utils_tf(
  object,
  tf_weight = "raw",
  idf_weight = "uniform",
  min_df = 0,
  max_df = 1,
  max_features = 10000,
  doc_var = "doc_id",
  token_var = "lemma",
  vocabulary = NULL,
  doc_set = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>a data frame containing an identifier for the document
(set with <code>doc_var</code>) and token (set with
<code>token_var</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tf_weight</code></td>
<td>
<p>the weighting scheme for the term frequency matrix.
The selection <code>lognorm</code> takes one plus
the log of the raw frequency (or zero if zero),
<code>binary</code> encodes a zero one matrix
indicating simply whether the token exists at all
in the document, <code>raw</code> returns raw counts,
and <code>dnorm</code> uses double normalization.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idf_weight</code></td>
<td>
<p>the weighting scheme for the inverse document
matrix. The selection <code>idf</code> gives the
logarithm of the simple inverse frequency,
<code>smooth</code> gives the logarithm of one plus
the simple inverse frequency, and <code>prob</code>
gives the log odds of the the token occurring
in a randomly selected document. Set to <code>uniform</code>
to return just the term frequencies.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_df</code></td>
<td>
<p>the minimum proportion of documents a token
should be in to be included in the vocabulary</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_df</code></td>
<td>
<p>the maximum proportion of documents a token
should be in to be included in the vocabulary</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_features</code></td>
<td>
<p>the maximum number of tokens in the vocabulary</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>doc_var</code></td>
<td>
<p>character vector. The name of the column in
<code>object</code> that contains the document ids. Defaults
to "doc_id".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>token_var</code></td>
<td>
<p>character vector. The name of the column in
<code>object</code> that contains the tokens. Defaults to
"lemma".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vocabulary</code></td>
<td>
<p>character vector. The vocabulary set to use in
constructing the matrices. Will be computed
within the function if set to <code>NULL</code>. When
supplied, the options <code>min_df</code>, <code>max_df</code>,
and <code>max_features</code> are ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>doc_set</code></td>
<td>
<p>optional character vector of document ids. Useful to
create empty rows in the output matrix for documents
without data in the input. Most users will want to keep
this equal to <code>NULL</code>, the default, to have the
function compute the document set automatically.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a sparse matrix with dimnames giving the documents and vocabular.
</p>


</div>