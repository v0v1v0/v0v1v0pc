<div class="container">

<table style="width: 100%;"><tr>
<td>CFOeff.oc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate operating characteristics of phase I/II trials single-drug trials in multiple simulations.</h2>

<h3>Description</h3>

<p>Based on the toxicity outcomes and efficacy outcomes, this function is used to perform multiple simulations for phase I/II single-drug trials and obtain relevant operating characteristics.
</p>


<h3>Usage</h3>

<pre><code class="language-R">CFOeff.oc(target, p.true=p.true, pE.true=pE.true, prior.para = 
                 list(alp.prior = target, bet.prior = 1 - target, 
                 alp.prior.eff = 0.5, bet.prior.eff = 0.5),  
                 init.level = 1, cohortsize=cohortsize, ncohort=ncohort, 
                 nsimu, cutoff.eli=0.95, 
                 early.stop=0.95, effearly.stop = 0.9, mineff,
                 seeds = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>the target DLT rate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p.true</code></td>
<td>
<p>the true DLT rates under the different dose levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pE.true</code></td>
<td>
<p>the true efficacy rates under the different dose levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prior.para</code></td>
<td>
<p>the prior parameters for two beta distributions, where set as <code>list(alp.prior = target, 
                 bet.prior = 1 - target, alp.prior.eff = 0.5, bet.prior.eff = 0.5)</code> by default. <code>alp.prior</code> and <code>bet.prior</code>
represent the parameters of the prior distribution for the true DLT rate at any dose level. This prior distribution
is specified as Beta(<code>alpha.prior</code>, <code>beta.prior</code>). <code>alp.eff.prior</code> and <code>bet.eff.prior</code>
represent the parameters of the Jeffreys' prior distribution for the efficacy probability at any dose level.
This prior distribution is specified as Beta(<code>alpha.eff.prior</code>, <code>beta.eff.prior</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>init.level</code></td>
<td>
<p>the dose level assigned to the first cohort. The default value <code>init.level</code> is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohortsize</code></td>
<td>
<p>the number of patients in each cohort.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncohort</code></td>
<td>
<p>the total number of cohorts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nsimu</code></td>
<td>
<p>the total number of trials to be simulated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cutoff.eli</code></td>
<td>
<p>the cutoff to eliminate overly toxic doses for safety. We recommend
the default value of <code>cutoff.eli = 0.95</code> for general use.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>early.stop</code></td>
<td>
<p>the threshold value for early stopping due to overly toxic. The default value <code>early.stop = 0.95</code>
generally works well.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>effearly.stop</code></td>
<td>
<p>the threshold value for early stopping due to low efficacy. The trial would be terminated
early if <code class="reqn">Pr(q_k&lt;\psi |y_k,m_k \ge 3)</code> is smaller than the value of <code>effearly.stop</code> where <code class="reqn">q_k, y_k</code> and <code class="reqn">m_k</code>
are the efficacy probability, the number of efficacy outcomes and the number of patients at dose level <code class="reqn">k</code>.
<code class="reqn">\psi</code> is the the lowest acceptable efficacy rate which is set by <code>mineff</code> here.
By default, <code>effearly.stop</code> is set as <code>0.9</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mineff</code></td>
<td>
<p>the lowest acceptable efficacy rate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seeds</code></td>
<td>
<p>a vector of random seeds for each simulation, for example, <code>seeds = 1:nsimu</code> (default is <code>NULL</code>).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The <code>CFOeff.oc()</code> function returns a list object, which includes the basic setup (<code>simu.setup</code>), comprising the following components:
</p>

<ul>
<li>
<p> p.true: the true DLT rates under the different dose levels.
</p>
</li>
<li>
<p> pE.true: the true efficacy rates under the different dose levels.
</p>
</li>
<li>
<p> selpercent: the selection percentage at each dose level.
</p>
</li>
<li>
<p> npatients: the averaged number of patients treated at each dose level in one simulation.
</p>
</li>
<li>
<p> ntox: the averaged number of toxicity observed at each dose level in one simulation.
</p>
</li>
<li>
<p> neff: the averaged number of efficacy outcome at each dose level in one simulation.
</p>
</li>
<li>
<p> OBDsel: the percentage of correct selection of the OBD.
</p>
</li>
<li>
<p> OBDallo: the percentage of patients allocated to the OBD.
</p>
</li>
<li>
<p> averDLT: the percentage of the patients suffering DLT.
</p>
</li>
<li>
<p> avereff: the percentage of the patients with efficacy outcomes.
</p>
</li>
<li>
<p> percentstop: the percentage of early stopping without selecting the OBD.
</p>
</li>
<li>
<p> simu.setup: the parameters for the simulation set-up.
</p>
</li>
<li>
<p> class: the phase of the trial.
</p>
</li>
</ul>
<h3>Note</h3>

<p>In the example, we set <code>nsimu = 3</code> for testing time considerations.
In reality, <code>nsimu</code> is typically set as 5000 to ensure the accuracy of the results.
</p>


<h3>Author(s)</h3>

<p>Jialu Fang, Wenliang Wang, Ninghao Zhang, and Guosheng Yin
</p>


<h3>References</h3>

<p>Jin H, Yin G (2022). CFO: Calibration-free odds design for phase I/II clinical trials.
<em>Statistical Methods in Medical Research</em>, 31(6), 1051-1066. <br></p>


<h3>Examples</h3>

<pre><code class="language-R">target &lt;- 0.30; mineff &lt;- 0.30; cohortsize = 3; ncohort = 12; nsimu = 10; init.level = 1
prior.para = list(alp.prior = target, bet.prior = 1 - target, 
                  alp.prior.eff = 0.5, bet.prior.eff = 0.5)
p.true=c(0.05, 0.07, 0.1, 0.12, 0.16)
pE.true=c(0.35, 0.45, 0.5, 0.55, 0.75)
result &lt;- CFOeff.oc (target, p.true, pE.true, prior.para, 
          init.level,cohortsize, ncohort, nsimu, mineff = mineff, seeds = 1:nsimu)
summary(result)
plot(result)
#earlystop for overly tox
target &lt;- 0.30; mineff &lt;- 0.30; cohortsize = 3; ncohort = 12; nsimu = 10; init.level = 1
prior.para = list(alp.prior = target, bet.prior = 1 - target, 
                  alp.prior.eff = 0.5, bet.prior.eff = 0.5)
p.true=c(0.75, 0.77, 0.81, 0.82, 0.86)
pE.true=c(0.35, 0.45, 0.5, 0.55, 0.75)
result &lt;- CFOeff.oc (target, p.true, pE.true, prior.para, 
          init.level,cohortsize, ncohort, nsimu, mineff = mineff, seeds = 1:nsimu)
summary(result)
plot(result)

#earlystop for lower efficacy
target &lt;- 0.30; mineff &lt;- 0.30; cohortsize = 3; ncohort = 20; nsimu = 3; init.level = 1
prior.para = list(alp.prior = target, bet.prior = 1 - target, 
                  alp.prior.eff = 0.5, bet.prior.eff = 0.5)
p.true=c(0.05, 0.07, 0.1, 0.12, 0.16)
pE.true=c(0.001, 0.001, 0.001, 0.002, 0.003)
result &lt;- CFOeff.oc (target, p.true, pE.true, prior.para, 
          init.level,cohortsize, ncohort, nsimu, mineff = mineff, seeds = 1:nsimu)
summary(result)
plot(result)

</code></pre>


</div>