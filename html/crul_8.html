<div class="container">

<table style="width: 100%;"><tr>
<td>crul-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>crul: HTTP Client</h2>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style="float: right" alt="logo" width="120"></p>
<p>A simple HTTP client, with tools for making HTTP requests, and mocking HTTP requests. The package is built on R6, and takes inspiration from Ruby's 'faraday' gem (<a href="https://rubygems.org/gems/faraday">https://rubygems.org/gems/faraday</a>). The package name is a play on curl, the widely used command line tool for HTTP, and this package is built on top of the R package 'curl', an interface to 'libcurl' (<a href="https://curl.se/libcurl/">https://curl.se/libcurl/</a>).
</p>


<h3>Package API</h3>


<ul>
<li> <p><code>HttpClient()</code> - create a connection client, set all
your http options, make http requests
</p>
</li>
<li> <p><code>HttpResponse()</code> - mostly for internal use, handles
http responses
</p>
</li>
<li> <p><code>Paginator()</code> - auto-paginate through requests
</p>
</li>
<li> <p><code>Async()</code> - asynchronous requests
</p>
</li>
<li> <p><code>AsyncVaried()</code> - varied asynchronous requests
</p>
</li>
<li> <p><code>HttpRequest()</code> - generate an HTTP request, mostly for
use in building requests to be used in <code>Async</code> or <code>AsyncVaried</code>
</p>
</li>
<li> <p><code>mock()</code> - Turn on/off mocking, via <code>webmockr</code>
</p>
</li>
<li> <p><code>auth()</code> - Simple authentication helper
</p>
</li>
<li> <p><code>proxy()</code> - Proxy helper
</p>
</li>
<li> <p><code>upload()</code> - File upload helper
</p>
</li>
<li>
<p> set curl options globally: <code>set_auth()</code>, <code>set_headers()</code>,
<code>set_opts()</code>, <code>set_proxy()</code>, and <code>crul_settings()</code>
</p>
</li>
</ul>
<h3>HTTP verbs (or HTTP request methods)</h3>

<p>See verb-GET, verb-POST, verb-PUT, verb-PATCH, verb-DELETE,
verb-HEAD for details.
</p>

<ul>
<li> <p>HttpClient is the main interface for making HTTP requests,
and includes methods for each HTTP verb
</p>
</li>
<li> <p>HttpRequest allows you to prepare a HTTP payload for use with
AsyncVaried, which provides asynchronous requests for varied
HTTP methods
</p>
</li>
<li> <p>Async provides asynchronous requests for a single HTTP method
at a time
</p>
</li>
<li>
<p> the <code>verb()</code> method can be used on all the above to request
a specific HTTP verb
</p>
</li>
</ul>
<h3>Checking HTTP responses</h3>

<p><code>HttpResponse()</code> has helpers for checking and raising warnings/errors.
</p>

<ul>
<li> <p>content-types details the various options for checking content
types and throwing a warning or error if the response content
type doesn't match what you expect. Mis-matched content-types are
typically a good sign of a bad response. There's methods built
in for json, xml and html, with the ability to set any
custom content type
</p>
</li>
<li> <p><code>raise_for_status()</code> is a method on <code>HttpResponse()</code> that checks
the HTTP status code, and errors with the appropriate message for
the HTTP status code, optionally using the package <code>fauxpas</code>
if it's installed.
</p>
</li>
</ul>
<h3>HTTP conditions</h3>

<p>We use <code>fauxpas</code> if you have it installed for handling HTTP
conditions but if it's not installed we use <span class="pkg">httpcode</span>
</p>


<h3>Mocking</h3>

<p>Mocking HTTP requests is supported via the <span class="pkg">webmockr</span>
package. See mock for guidance, and
<a href="https://books.ropensci.org/http-testing/">https://books.ropensci.org/http-testing/</a>
</p>


<h3>Caching</h3>

<p>Caching HTTP requests is supported via the <span class="pkg">vcr</span>
package. See <a href="https://books.ropensci.org/http-testing/">https://books.ropensci.org/http-testing/</a>
</p>


<h3>Links</h3>

<p>Source code: <a href="https://github.com/ropensci/crul">https://github.com/ropensci/crul</a>
</p>
<p>Bug reports/feature requests: <a href="https://github.com/ropensci/crul/issues">https://github.com/ropensci/crul/issues</a>
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Scott Chamberlain <a href="mailto:myrmecocystus@gmail.com">myrmecocystus@gmail.com</a> (<a href="https://orcid.org/0000-0003-1444-9135">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://docs.ropensci.org/crul/">https://docs.ropensci.org/crul/</a>
</p>
</li>
<li> <p><a href="https://github.com/ropensci/crul">https://github.com/ropensci/crul</a>
</p>
</li>
<li> <p><a href="https://books.ropensci.org/http-testing/">https://books.ropensci.org/http-testing/</a>
</p>
</li>
<li>
<p> Report bugs at <a href="https://github.com/ropensci/crul/issues">https://github.com/ropensci/crul/issues</a>
</p>
</li>
</ul>
</div>