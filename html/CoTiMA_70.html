<div class="container">

<table style="width: 100%;"><tr>
<td>ctmaOptimizeFit</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>ctmaOptimizeFit</h2>

<h3>Description</h3>

<p>Replaces deprecated <code>ctmaOptimizeInit</code>, which was limited to initial fitting
(i.e., applies <code>ctmaInit</code>) of a primary study reFits times to capitalize on chance for obtaining
a hard-to-find optimal fit.
Now, optimizing a CoTiMA model generated with <code>ctmaFit</code> can also be done.
Using <code>ctmaOptimizeFit</code> could be helpful if a model yields out-of-range estimates, which could happen if the fitting
algorithm unfortunately used random start values that resulted in a locally but not globally optimal fit. Essentially, using
<code>ctmaOptimizeFit</code> is like gambling, hoping that at least one set of starting values (the number it tries is specified in the reFits argument)
enables finding the global optimal fit.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ctmaOptimizeFit(
  activateRPB = FALSE,
  activeDirectory = NULL,
  coresToUse = c(2),
  CoTiMAStanctArgs = NULL,
  ctmaFitFit = NULL,
  ctmaInitFit = NULL,
  customPar = FALSE,
  finishsamples = NULL,
  iter = 5000,
  primaryStudies = NULL,
  problemStudy = NULL,
  randomPar = FALSE,
  randomScaleTI = FALSE,
  randomScaleTime = c(1, 1),
  saveModelFits = FALSE,
  shuffleStudyList = FALSE,
  reFits = NULL,
  scaleTime = NULL,
  scaleTI = NULL,
  verbose = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>activateRPB</code></td>
<td>
<p>set to TRUE to receive push messages with 'CoTiMA' notifications on your phone</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>activeDirectory</code></td>
<td>
<p>activeDirectory</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coresToUse</code></td>
<td>
<p>if neg., the value is subtracted from available cores, else value = cores to use</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CoTiMAStanctArgs</code></td>
<td>
<p>parameters that can be set to improve model fitting of the <code>ctStanFit</code> Function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ctmaFitFit</code></td>
<td>
<p>a object fitted with <code>ctmaFit</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ctmaInitFit</code></td>
<td>
<p>the ctmaInitFit object that was used to create the ctmaFitFit object with <code>ctmaFit</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>customPar</code></td>
<td>
<p>logical. If set TRUE leverages the first pass using priors and ensure that the drift diagonal cannot easily go too negative (helps since ctsem &gt; 3.4)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>finishsamples</code></td>
<td>
<p>number of samples to draw (either from hessian based covariance or posterior distribution) for final results computation (default = 1000).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iter</code></td>
<td>
<p>number of iterations (default = 5000)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>primaryStudies</code></td>
<td>
<p>list of primary study information created with <code>ctmaPrep</code> or <code>ctmaFitToPrep</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>problemStudy</code></td>
<td>
<p>number (position in list) where the problem study in primaryStudies is found</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>randomPar</code></td>
<td>
<p>logical (default = FALSE). Overrides arguments used for customPar and randomly sets customPar either TRUE or FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>randomScaleTI</code></td>
<td>
<p>logical (default = FALSE). Overrides arguments used for scaleTI and randomly sets scaleTI either TRUE or FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>randomScaleTime</code></td>
<td>
<p>lower and upper limit (default = c(1,1)) of uniform distribution from which timeScale argument for ctmaInit is uniformly shuffled (integer)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>saveModelFits</code></td>
<td>
<p>save the fit of each Fit attempt (default = FALSE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shuffleStudyList</code></td>
<td>
<p>(default = FALSE) randomly re-arranges studies in primaryStudyList. We encountered a few cases where this mattered, even though it should not. Only works if ctmaFit is optimized.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reFits</code></td>
<td>
<p>how many reFits should be done</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scaleTime</code></td>
<td>
<p>scale time (interval) - sometimes desirable to improve fitting</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scaleTI</code></td>
<td>
<p>scale TI predictors - not recommended until version 0.5.3.1. Does not change aggregated results anyways, just interpretation of effects for dummies representing primary studies.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>integer from 0 to 2. Higher values print more information during model fit â€“ for debugging</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>returns a list with bestFit (= the best fit achieved), all_minus2ll (= all -2ll values for all fitted models), and summary, which
is printed if the summary function is applied to the returned object, and which shows the summary information of the ctsem model with the
best fit.
</p>



<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
optimFit313 &lt;- ctmaOptimizeFit(primaryStudies=CoTiMAstudyList_3,
                                activeDirectory="/Users/tmp/",  # adapt!
                                problemStudy=which(CoTiMAstudyList_3$studyNumbers == 313),
                                reFits=10,
                                n.latent=2)
summary(optimFit313)

## End(Not run)

</code></pre>


</div>