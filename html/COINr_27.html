<div class="container">

<table style="width: 100%;"><tr>
<td>compare_df</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compare two data frames</h2>

<h3>Description</h3>

<p>A custom function for comparing two data frames of indicator data, to see whether they match up, at a specified number of
significant figures. Specifically, this is intended to compare two data frames, without regard to row or column ordering.
Rows are matched by the required <code>matchcol</code> argument. Hence, it is different from e.g. <code>all.equal()</code> which requires rows
to be ordered. In COINr, typically <code>matchcol</code> is the <code>uCode</code> column, for example.
</p>


<h3>Usage</h3>

<pre><code class="language-R">compare_df(df1, df2, matchcol, sigfigs = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df1</code></td>
<td>
<p>A data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df2</code></td>
<td>
<p>Another data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>matchcol</code></td>
<td>
<p>A common column name that is used to match row order. E.g. this might be <code>uCode</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigfigs</code></td>
<td>
<p>The number of significant figures to use for matching numerical columns</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function compares numerical and non-numerical columns to see if they match. Rows and columns can be in any order. The function
performs the following checks:
</p>

<ul>
<li>
<p> Checks that the two data frames are the same size
</p>
</li>
<li>
<p> Checks that column names are the same, and that the matching column has the same entries
</p>
</li>
<li>
<p> Checks column by column that the elements are the same, after sorting according to the matching column
</p>
</li>
</ul>
<p>It then summarises for each column whether there are any differences, and also what the differences are, if any.
</p>
<p>This is intended to cross-check results. For example, if you run something in COINr and want to check indicator results against
external calculations.
</p>
<p>This function replaces the now-defunct <code>compareDF()</code> from COINr &lt; v1.0.
</p>


<h3>Value</h3>

<p>A list with comparison results. List contains:
</p>

<ul>
<li> <p><code>.$Same</code>: overall summary: if <code>TRUE</code> the data frames are the same according to the rules specified, otherwise <code>FALSE</code>.
</p>
</li>
<li> <p><code>.$Details</code>: details of each column as a data frame. Each row summarises a column of the data frame, saying whether
the column is the same as its equivalent, and the number of differences, if any. In case the two data frames have differing
numbers of columns and rows, or have differing column names or entries in <code>matchcol</code>, <code>.$Details</code> will simply contain a
message to this effect.
</p>
</li>
<li> <p><code>.$Differences</code>: a list with one entry for every column which contains different entries. Differences are summarised as
a data frame with one row for each difference, reporting the value from <code>df1</code> and its equivalent from <code>df2</code>.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R"># take a sample of indicator data (including the uCode column)
data1 &lt;- ASEM_iData[c(2,12:15)]
# copy the data
data2 &lt;- data1
# make a change: replace one value in data2 by NA
data2[1,2] &lt;- NA
# compare data frames
compare_df(data1, data2, matchcol = "uCode")

</code></pre>


</div>