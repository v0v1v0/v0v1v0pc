<div class="container">

<table style="width: 100%;"><tr>
<td>cbc_power</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate the same model on different size subsets of data</h2>

<h3>Description</h3>

<p>This function estimates the same model multiple times using different size
subsets of a set of choice data and then returns a data frame of the
estimated model coefficients and standard errors for each sample size. This
is useful for determining the required sample size for obtaining a desired
level of statistical power on each coefficient. The number of models to
estimate is set by the <code>nbreaks</code> argument, which breaks up the data into
groups of increasing sample sizes. All models are estimated models using
the 'logitr' package. For more details see the JSS article on the 'logitr'
package (Helveston, 2023).
</p>


<h3>Usage</h3>

<pre><code class="language-R">cbc_power(
  data,
  outcome,
  obsID,
  pars,
  randPars = NULL,
  nbreaks = 10,
  n_q = 1,
  return_models = FALSE,
  panelID = NULL,
  clusterID = NULL,
  robust = FALSE,
  predict = FALSE,
  n_cores = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The data, formatted as a <code>data.frame</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outcome</code></td>
<td>
<p>The name of the column that identifies the outcome variable,
which should be coded with a <code>1</code> for <code>TRUE</code> and <code>0</code> for <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obsID</code></td>
<td>
<p>The name of the column that identifies each observation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pars</code></td>
<td>
<p>The names of the parameters to be estimated in the model.
Must be the same as the column names in the <code>data</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>randPars</code></td>
<td>
<p>A named vector whose names are the random parameters and
values the distribution: <code>'n'</code> for normal or <code>'ln'</code> for log-normal.
Defaults to <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nbreaks</code></td>
<td>
<p>The number of different sample size groups.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_q</code></td>
<td>
<p>Number of questions per respondent. Defaults to <code>1</code> if not
specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_models</code></td>
<td>
<p>If <code>TRUE</code>, a list of all estimated models is returned.
This can be useful if you want to extract other outputs from each model,
such as the variance-covariance matrix, etc. Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>panelID</code></td>
<td>
<p>The name of the column that identifies the individual (for
panel data where multiple observations are recorded for each individual).
Defaults to <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clusterID</code></td>
<td>
<p>The name of the column that identifies the cluster
groups to be used in model estimation. Defaults to <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>robust</code></td>
<td>
<p>Determines whether or not a robust covariance matrix is
estimated. Defaults to <code>FALSE</code>. Specification of a <code>clusterID</code> will override
the user setting and set this to ‘TRUE’ (a warning will be displayed in this
case). Replicates the functionality of Stata's cmcmmixlogit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predict</code></td>
<td>
<p>If <code>TRUE</code>, predicted probabilities, fitted values, and
residuals are also included in the returned model objects. Defaults to
<code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_cores</code></td>
<td>
<p>The number of cores to use for parallel processing.
Set to <code>1</code> to run serially Defaults to <code>NULL</code>, in which case the number of
cores is set to <code>parallel::detectCores() - 1</code>. Max cores allowed is capped
at <code>parallel::detectCores()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments that are passed to <code>logitr::logitr()</code> for model
estimation. See the logitr documentation for details about other
available arguments.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a data frame of estimated model coefficients and standard
errors for the same model estimated on subsets of the <code>data</code> with increasing
sample sizes.
</p>


<h3>References</h3>

<p>Helveston, J. P. (2023). logitr: Fast Estimation of Multinomial and Mixed Logit Models with Preference Space and Willingness-to-Pay Space Utility Parameterizations. Journal of Statistical Software, 105(10), 1–37,
<a href="https://doi.org/10.18637/jss.v105.i10">doi:10.18637/jss.v105.i10</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(cbcTools)

# A simple conjoint experiment about apples

# Generate all possible profiles
profiles &lt;- cbc_profiles(
  price     = c(1, 1.5, 2, 2.5, 3, 3.5, 4, 4.5, 5),
  type      = c("Fuji", "Gala", "Honeycrisp"),
  freshness = c('Poor', 'Average', 'Excellent')
)

# Make a survey design from all possible profiles
# (This is the default setting where method = 'full' for "full factorial")
design &lt;- cbc_design(
  profiles = profiles,
  n_resp   = 300, # Number of respondents
  n_alts   = 3,   # Number of alternatives per question
  n_q      = 6    # Number of questions per respondent
)

# Simulate random choices
data &lt;- cbc_choices(
  design = design,
  obsID  = "obsID"
)

# Conduct a power analysis
power &lt;- cbc_power(
  data    = data,
  pars    = c("price", "type", "freshness"),
  outcome = "choice",
  obsID   = "obsID",
  nbreaks = 10,
  n_q     = 6,
  n_cores = 2
)
</code></pre>


</div>