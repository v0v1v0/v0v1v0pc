<div class="container">

<table style="width: 100%;"><tr>
<td>journey</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plan a journey with CycleStreets.net</h2>

<h3>Description</h3>

<p>R interface to the CycleStreets.net journey planning API,
a route planner made by cyclists for cyclists.
See <a href="https://www.cyclestreets.net/api/">cyclestreets.net/api</a> for details.
</p>


<h3>Usage</h3>

<pre><code class="language-R">journey(
  from,
  to,
  plan = "fastest",
  silent = TRUE,
  pat = NULL,
  base_url = "https://www.cyclestreets.net",
  reporterrors = TRUE,
  save_raw = "FALSE",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>
<p>Longitude/Latitude pair, e.g. <code>c(-1.55, 53.80)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to</code></td>
<td>
<p>Longitude/Latitude pair, e.g. <code>c(-1.55, 53.80)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plan</code></td>
<td>
<p>Text strong of either "fastest" (default), "quietest" or "balanced"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>silent</code></td>
<td>
<p>Logical (default is FALSE). TRUE hides request sent.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pat</code></td>
<td>
<p>The API key used. By default this uses <code>Sys.getenv("CYCLESTREETS")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base_url</code></td>
<td>
<p>The base url from which to construct API requests
(with default set to main server)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reporterrors</code></td>
<td>
<p>Boolean value (TRUE/FALSE) indicating if cyclestreets (TRUE by default).
should report errors (FALSE by default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save_raw</code></td>
<td>
<p>Boolean value which returns raw list from the json if TRUE (FALSE by default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to json2sf_cs</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Requires the internet and a CycleStreets.net API key.
CycleStreets.net does not yet work worldwide.
</p>
<p>You need to have an api key for this code to run.
By default it uses the CYCLESTREETS environment variable.
A quick way to set this is to install the <code>usethis</code> package and then
executing the following command:
</p>
<p><code>usethis::edit_r_environ()</code>
</p>
<p>That should open up a new file in your text editor where you
can add the environment variable as follows
(replace 1a... with your key for this to work):
</p>
<p>CYCLESTREETS=1a43ed677e5e6fe9
</p>
<p>After setting the environment variable, as outlined above,
you need to restart your R session before the journey function will work.
</p>
<p>See <a href="https://www.cyclestreets.net/help/journey/howitworks/">www.cyclestreets.net/help/journey/howitworks/</a>
for details on how these are calculated.
</p>
<p>CycleStreets can give you lots of info at route and segment level.
Commonly useful columns include:
</p>
<div class="sourceCode"><pre>cols = c("name", "provisionName", "time", "quietness", "edition", "gradient_smooth")
</pre></div>
<p>See <code>json2sf_cs()</code> for details.
</p>


<h3>See Also</h3>

<p>json2sf_cs
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
from = c(-1.55, 53.80) # geo_code("leeds")
to = c(-1.76, 53.80) # geo_code("bradford uk")
r1 = journey(from, to)
names(r1)
cols = c("name", "provisionName", "distances", "time", "quietness", "edition", "gradient_smooth")
r2 = journey(from, to, cols_to_keep = cols)
names(r2)
r2
r1[1:2, ]
r1$grammesCO2saved
r1$calories
plot(r1[1:4])
plot(r1[10:ncol(r1)])
to = c(-2, 53.5) # towards Manchester
r1 = journey(from, to)
names(r1)
r2 = journey(from, to, plan = "balanced")
plot(r1["quietness"], reset = FALSE)
plot(r2["quietness"], add = TRUE)
r3 = journey(from, to, silent = FALSE)
r4 = journey(from, to, save_raw = TRUE)
r5 = journey(c(-1.524, 53.819), c(-1.556, 53.806))
plot(r5["gradient_segment"])
plot(r5["gradient_smooth"])

u = paste0("https://github.com/cyclestreets/cyclestreets-r/",
  "releases/download/v0.4.0/line_with_single_segment.geojson")
desire_line = sf::read_sf(u)
r = stplanr::route(l = desire_line, route_fun = journey)
r

## End(Not run)
</code></pre>


</div>