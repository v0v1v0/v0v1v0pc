<div class="container">

<table style="width: 100%;"><tr>
<td>compositions-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Compositional Data Analysis
</h2>

<h3>Description</h3>

<p>"compositions" is a package for the analysis of compositional and
multivariate positive data (generally called "amounts"), based on several alternative approaches.
</p>


<h3>Details</h3>

<p>The DESCRIPTION file:
</p>

<table>
<tr>
<td style="text-align: left;">
Package: </td>
<td style="text-align: left;"> compositions</td>
</tr>
<tr>
<td style="text-align: left;">
Version: </td>
<td style="text-align: left;"> 2.0-8</td>
</tr>
<tr>
<td style="text-align: left;">
Date: </td>
<td style="text-align: left;"> 2024-01-25</td>
</tr>
<tr>
<td style="text-align: left;">
Title: </td>
<td style="text-align: left;"> Compositional Data Analysis</td>
</tr>
<tr>
<td style="text-align: left;">
Author: </td>
<td style="text-align: left;"> K. Gerald van den Boogaart &lt;boogaart@hzdr.de&gt;, 
	Raimon Tolosana-Delgado, Matevz Bren  </td>
</tr>
<tr>
<td style="text-align: left;">
Maintainer: </td>
<td style="text-align: left;"> K. Gerald van den Boogaart &lt;support@boogaart.de&gt;</td>
</tr>
<tr>
<td style="text-align: left;">
Depends: </td>
<td style="text-align: left;"> R (&gt;= 3.6)</td>
</tr>
<tr>
<td style="text-align: left;">
Imports: </td>
<td style="text-align: left;"> methods, utils, grDevices,  stats, tensorA, robustbase, bayesm, graphics, MASS</td>
</tr>
<tr>
<td style="text-align: left;">
Suggests: </td>
<td style="text-align: left;"> rgl (&gt;= 1.0.1),
combinat,
energy,
knitr,
rmarkdown</td>
</tr>
<tr>
<td style="text-align: left;">
Description: </td>
<td style="text-align: left;"> Provides functions for the consistent analysis of compositional 
  data (e.g. portions of substances) and positive numbers (e.g. concentrations) 
  in the way proposed by J. Aitchison and V. Pawlowsky-Glahn.</td>
</tr>
<tr>
<td style="text-align: left;">
License: </td>
<td style="text-align: left;"> GPL (&gt;= 2)</td>
</tr>
<tr>
<td style="text-align: left;">
URL: </td>
<td style="text-align: left;"> http://www.stat.boogaart.de/compositions/</td>
</tr>
<tr>
<td style="text-align: left;">
VignetteBuilder: </td>
<td style="text-align: left;"> knitr</td>
</tr>
<tr>
<td style="text-align: left;">
RoxygenNote: </td>
<td style="text-align: left;"> 7.1.1</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p>Index of help topics:
</p>
<pre>


                        structure
Aar                     Composition of glaciar sediments from the Aar 
                        massif (Switzerland)
acomp                   Aitchison compositions
acompmargin             Marginal compositions in Aitchison Compositions
Activity10              Activity patterns of a statistician for 20 days
Activity31              Activity patterns of a statistician for 20 days
alr                     Additive log ratio transform
AnimalVegetation        Animal and vegetation measurement
+.aplus                 vectorial arithmetic for data sets with aplus
                        class
aplus                   Amounts analysed in log-scale
apt                     Additive planar transform
ArcticLake              Artic lake sediment samples of different water
                        depth
arrows3D                arrows in 3D, based on package rgl
as.data.frame.acomp     Convert "compositions" classes to data frames
axis3D                  Drawing a 3D coordiante system to a plot, based
                        on package rgl
balance                 Compute balances for a compositional dataset.
barplot.acomp           Bar charts of amounts
Bayesite                Permeabilities of bayesite
binary                  Treating binary and g-adic numbers
biplot3D                Three-dimensional biplots, based on package rgl
Blood23                 Blood samples
Boxite                  Compositions and depth of 25 specimens of
                        boxite
boxplot.acomp           Displaying compositions and amounts with
                        box-plots
cdt                     Centered default transform
ClamEast                Color-size compositions of 20 clam colonies
                        from East Bay
ClamWest                Color-size compositions of 20 clam colonies
                        from West Bay
clo                     Closure of a composition
clr                     Centered log ratio transform
clr2ilr                 Convert between clr and ilr, and between cpt
                        and ipt.
ClusterFinder1          Heuristics to find subpopulations of outliers
CoDaDendrogram          Dendrogram representation of acomp or rcomp
                        objects
coloredBiplot           A biplot providing somewhat easier access to
                        details of the plot.
colorsForOutliers1      Create a color/char palette or for groups of
                        outliers
CompLinModCoReg         Compositional Linear Model of Coregionalisation
compOKriging            Compositional Ordinary Kriging
compositions-package    library(compositions)
ConfRadius              Helper to compute confidence ellipsoids
cor.acomp               Correlations of amounts and compositions
Coxite                  Compositions, depths and porosities of 25
                        specimens of coxite
cpt                     Centered planar transform
DiagnosticProb          Diagnostic probabilities
dist                    Distances in variouse approaches
ellipses                Draw ellipses
endmemberCoordinates    Recast amounts as mixtures of end-members
Firework                Firework mixtures
geometricmean           The geometric mean
getDetectionlimit       Gets the detection limit stored in the data set
Glacial                 Compositions and total pebble counts of 92
                        glacial tills
groupparts              Group amounts of parts
Hongite                 Compositions of 25 specimens of hongite
HouseholdExp            Household Expenditures
Hydrochem               Hydrochemical composition data set of Llobregat
                        river basin water (NE Spain)
idt                     Isometric default transform
iit                     Isometric identity transform
ilr                     Isometric log ratio transform
ilrBase                 The canonical basis in the clr plane used for
                        ilr and ipt transforms.
ilt                     Isometric log transform
ipt                     Isometric planar transform
is.acomp                Check for compositional data type
IsMahalanobisOutlier    Checking for outliers
isoPortionLines         Isoportion- and Isoproportion-lines
juraset                 The jura dataset
kingTetrahedron         Ploting composition into rotable tetrahedron
Kongite                 Compositions of 25 specimens of kongite
lines.rmult             Draws connected lines from point to point.
logratioVariogram       Empirical variograms for compositions
MahalanobisDist         Compute Mahalanobis distances based von robust
                        Estimations
mean.acomp              Mean amounts and mean compositions
meanRow                 The arithmetic mean of rows or columns
Metabolites             Steroid metabolite patterns in adults and
                        children
missingProjector        Returns a projector the the observed space in
                        case of missings.
missingsInCompositions
                        The policy of treatment of missing values in
                        the "compositions" package
missingSummary          Classify and summarize missing values in a
                        dataset
mix.2aplus              Transformations from 'mixtures' to
                        'compositions' classes
mix.Read                Reads a data file in a mixR format
mvar                    Metric summary statistics of real, amount or
                        compositional data
names.acomp             The names of the parts
normalize               Normalize vectors to norm 1
norm.default            Vector space norm
oneOrDataset            Treating single compositions as one-row
                        datasets
OutlierClassifier1      Detect and classify compositional outliers.
outlierplot             Plot various graphics to analyse outliers.
outliersInCompositions
                        Analysing outliers in compositions.
pairwisePlot            Creates a paneled plot like pairs for two
                        different datasets.
parametricPosdefMat     Unique parametrisations for matrices.
perturbe                Perturbation of compositions
plot3D                  plot in 3D based on rgl
plot3D.acomp            3D-plot of compositional data
plot3D.aplus            3D-plot of positive data
plot3D.rmult            plot in 3D based on rgl
plot3D.rplus            plot in 3D based on rgl
plot.acomp              Ternary diagrams
plot.aplus              Displaying amounts in scatterplots
plot.logratioVariogram
                        Empirical variograms for compositions
plot.missingSummary     Plot a Missing Summary
pMaxMahalanobis         Compute distributions of empirical Mahalanobis
                        distances based on simulations
PogoJump                Honk Kong Pogo-Jumps Championship
power.acomp             Power transform in the simplex
powerofpsdmatrix        power transform of a matrix
princomp.acomp          Principal component analysis for Aitchison
                        compositions
princomp.aplus          Principal component analysis for amounts in log
                        geometry
princomp.rcomp          Principal component analysis for real
                        compositions
princomp.rmult          Principal component analysis for real data
princomp.rplus          Principal component analysis for real amounts
print.acomp             Printing compositional data.
qHotellingsTsq          Hotellings T square distribution
qqnorm.acomp            Normal quantile plots for compositions and
                        amounts
R2                      R square
rAitchison              Aitchison Distribution
+.rcomp                 Arithmetic operations for compositions in a
                        real geometry
rcomp                   Compositions as elements of the simplex
                        embedded in the D-dimensional real space
rcompmargin             Marginal compositions in real geometry
rDirichlet              Dirichlet distribution
read.geoeas             Reads a data file in a geoeas format
relativeLoadings        Loadings of relations of two amounts
replot                  Modify parameters of compositional plots.
rlnorm.rplus            The multivariate lognormal distribution

+.rmult                 vectorial arithmetic for datasets in a
                        classical vector scale
rmult                   Simple treatment of real vectors
rnorm.acomp             Normal distributions on special spaces
robustnessInCompositions
                        Handling robustness issues and outliers in
                        compositions.
+.rplus                 vectorial arithmetic for data sets with rplus
                        class
rplus                   Amounts i.e. positive numbers analysed as
                        objects of the real vector space
runif.acomp             The uniform distribution on the simplex
scalar                  Parallel scalar products
scale                   Normalizing datasets by centering and scaling
Sediments               Proportions of sand, silt and clay in sediments
                        specimens
segments.rmult          Draws straight lines from point to point.
SerumProtein            Serum Protein compositions of blood samples
ShiftOperators          Shifts of machine operators
simpleMissingSubplot    Ternary diagrams
SimulatedAmounts        Simulated amount datasets
simulateMissings        Artifical simulation of various kinds of
                        missings
Skulls                  Measurement of skulls
SkyeAFM                 AFM compositions of 23 aphyric Skye lavas
split.acomp             Splitting datasets in groups given by factors
straight                Draws straight lines.
summary.acomp           Summarizing a compositional dataset in terms of
                        ratios
summary.aplus           Summaries of amounts
summary.rcomp           Summary of compositions in real geometry
sumMissingProjector     Compute the global projector to the observed
                        subspace.
Supervisor              Proportions of supervisor's statements assigned
                        to different categories
ternaryAxis             Axis for ternary diagrams
totals                  Total sum of amounts
tryDebugger             Empirical variograms for compositions
ult                     Uncentered log transform
var.acomp               Variances and covariances of amounts and
                        compositions
variation               Variation matrices of amounts and compositions
var.lm                  Residual variance of a model
vcovAcomp               Variance covariance matrix of parameters in
                        compositional regression
vgmFit                  Compositional variogram model fitting
vgram2lrvgram           vgram2lrvgram
vgram.sph               Variogram functions
WhiteCells              White-cell composition of 30 blood samples by
                        two different methods
Yatquat                 Yatquat fruit evaluation
zeroreplace             Zero-replacement routine
</pre>
<p>To get detailed "getting started" introduction use
<code>help.start()</code> or <code>help.start(browser="myfavouritebrowser")</code>
Go to "Packages" then "compositions" and then "overview"
and then launch the file "UsingCompositions.pdf" from there. Please
also check the web-site: http://www.stat.boogaart.de/compositions/ for
improved material and our new book expected to appear spring 2009.  
<br>
The package is devoted to the analysis of multiple amounts. Amounts
have typically non-negative values, and often sum up to 100% or one. These
constraints lead to spurious effects on the covariance structure, 
as pointed out by Chayes (1960). The problem is treated rigorously 
in the monography by Aitchison (1986), 
who characterizes compositions as vectors having a relative scale,
and identifies its sample space with the D-part simplex. 
However still (i.e. 2005) most statistical packages do not
provided any support for this scale.
<br>
The grounding idea of the package exploits the class concept: 
the analyst gives the data a compositional or amount class, and
then all further analysis are (should be) automatically  done
in a consistent way, e.g. <code>x &lt;- acomp(X); plot(x)</code> 
should plot the data as a composition (in a ternary diagram) 
directly without any further interaction of the user. 
<br>
The package provides four different approaches to analyse
amounts. These approaches are associated to four R-classes,
representing four different geometries of the sampling space of
amounts. These geometries depend on two questions: whether the total sum
of the amounts is a relevant information, and which is the meaningful
measure of difference of the data.
<br></p>
<p><code>rplus</code> : (Real Plus) The total amount matters, and amounts should be
compared on an absolute basis. i.e. the difference between 1g and
2g is the same as the difference between 1kg and 1001g, one gram.
<br><code>aplus</code> : (Aitchison Plus) The total amount matters,
but amounts should be compared relatively, i.e. the difference
between 1mg and 2mg is the same as that of 1g and 2g: the double.
<br><code>acomp</code> : (Aitchison composition) the total amount is constant 
(or an artifact of the sampling/measurement procedure), and the meaningful 
difference is a relative one. This class follows
the original proposals of Aitchison.
<br><code>rcomp</code> : (Real composition) the sum
is a constant, and the difference in amount from 0% to 1% and from
10% to 11% is regarded as equal. This class represents the
raw/naive treatment of compositions as elements of the real simplex based
on an absolute geometry. This treatment is implicitly used 
in most amalgamation problems. However the whole approach suffers
from the drawbacks and problems discussed in Chayes (1960) and Aitchison
(1986).
<br>
The aim of the package is to provide all the functionality to do a
consistent analysis in all of these approaches and to make the
results obtained with different geometries as easy to compare as possible. 
</p>


<h3>Note</h3>

<p>The package compositions has grown a lot in the last year:
missings, robust estimations, outlier detection and classification,
codadendrogram. This makes everything much more complex especially
from the side of programm testing. Thus we would like to urge our
users to report all errors and problems of the lastest version (please
check first) to
support@boogaart.de.
</p>


<h3>Author(s)</h3>

<p>K. Gerald van den Boogaart &lt;boogaart@hzdr.de&gt;, 
	Raimon Tolosana-Delgado, Matevz Bren  
</p>
<p>Maintainer: K. Gerald van den Boogaart &lt;support@boogaart.de&gt;
</p>


<h3>References</h3>

<p>Aitchison, J. (1986) <em>The Statistical Analysis of Compositional
Data</em> Monographs on Statistics and Applied Probability. Chapman &amp;
Hall Ltd., London (UK). 416p.<br></p>
<p>Aitchison, J, C. Barcel'o-Vidal, J.J. Egozcue, V. Pawlowsky-Glahn
(2002) A consise guide to the algebraic geometric structure of the
simplex, the sample space for compositional data analysis, <em>Terra
Nostra</em>, Schriften der Alfred Wegener-Stiftung, 03/2003<br></p>
<p>Billheimer, D., P. Guttorp, W.F. and Fagan (2001) Statistical interpretation of species composition,
<em>Journal of the American Statistical Association</em>, <b>96</b> (456), 1205-1214<br></p>
<p>Chayes, F. (1960). On correlation between variables of constant
sum. Journal of Geophysical Research 65~(12), 4185–4193.
</p>
<p>Pawlowsky-Glahn, V. and J.J. Egozcue (2001) Geometric approach to
statistical analysis on the simplex. <em>SERRA</em> <b>15</b>(5), 384-398<br></p>
<p>Pawlowsky-Glahn, V. (2003) Statistical modelling on coordinates. In: 
Thi\'o -Henestrosa, S. and Mart\'in-Fern\'a ndez, J.A. (Eds.)
<em>Proceedings of the 1st International Workshop on Compositional Data Analysis</em>,
Universitat de Girona, ISBN 84-8458-111-X, <a href="https://ima.udg.edu/Activitats/CoDaWork03/">https://ima.udg.edu/Activitats/CoDaWork03/</a><br></p>
<p>Mateu-Figueras, G. and Barcel\'o-Vidal, C. (Eds.)
<em>Proceedings of the 2nd International Workshop on Compositional Data Analysis</em>,
Universitat de Girona, ISBN 84-8458-222-1, <a href="https://ima.udg.edu/Activitats/CoDaWork05/">https://ima.udg.edu/Activitats/CoDaWork05/</a><br></p>
<p>van den Boogaart, K.G. and R. Tolosana-Delgado (2008) "compositions": a unified 
R package to analyze Compositional Data, <em>Computers &amp;
Geosciences</em>, 34 (4), pages 320-338, doi: <a href="https://doi.org/10.1016/j.cageo.2006.11.017">10.1016/j.cageo.2006.11.017</a>.
</p>


<h3>See Also</h3>

<p>compositions-package, missingsInCompositions,
robustnessInCompositions, outliersInCompositions,
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(compositions)      # load library
data(SimulatedAmounts)     # load data sa.lognormals
x &lt;- acomp(sa.lognormals)  # Declare the dataset to be compositional
                           # and use relative geometry
plot(x)                    # plot.acomp : ternary diagram
ellipses(mean(x),var(x),r=2,col="red")  # Simplex 2sigma predictive region
pr &lt;- princomp(x)
straight(mean(x),pr$Loadings) 

x &lt;- rcomp(sa.lognormals)  # Declare the dataset to be compositional
                           # and use absolute geometry
plot(x)                    # plot.acomp : ternary diagram
ellipses(mean(x),var(x),r=2,col="red")  # Real 2sigma predictive region
pr &lt;- princomp(x)          
straight(mean(x),pr$Loadings) 
</code></pre>


</div>