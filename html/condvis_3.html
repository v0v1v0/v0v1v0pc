<div class="container">

<table style="width: 100%;"><tr>
<td>ceplot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Interactive conditional expectation plot</h2>

<h3>Description</h3>

<p>Creates an interactive conditional expectation plot, which
consists of two main parts. One part is a single plot depicting a section
through a fitted model surface, or conditional expectation. The other part
shows small data summaries which give the current condition, which can be
altered by clicking with the mouse.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ceplot(data, model, response = NULL, sectionvars = NULL,
  conditionvars = NULL, threshold = NULL, lambda = NULL,
  distance = c("euclidean", "maxnorm"), type = c("default", "separate",
  "shiny"), view3d = FALSE, Corder = "default", selectortype = "minimal",
  conf = FALSE, probs = FALSE, col = "black", pch = NULL,
  residuals = FALSE, xsplotpar = NULL, modelpar = NULL,
  xcplotpar = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A dataframe containing the data to plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>A model object, or list of model objects</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>response</code></td>
<td>
<p>Character name of response in <code>data</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sectionvars</code></td>
<td>
<p>Character name of variable(s) from <code>data</code> on which to
take a section, can be of length 1 or 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conditionvars</code></td>
<td>
<p>Character names of conditioning variables from
<code>data</code>. These are the predictors which we can set to single values in
order to produce a section. Can be a list of vectors of length 1 or 2. Can
be a character vector, which is then paired up using
<code>arrangeC</code>. If <code>NULL</code>, an attempt will be made to extract
all variable names which are not <code>response</code> or <code>sectionvars</code> from
<code>model</code>, and these will be arranged using <code>arrangeC</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>This is a threshold distance. Points further than
<code>threshold</code> away from the current section will not be visible. Passed
to <code>similarityweight</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>
<p>A constant to multiply by number of factor mismatches in
constructing a general dissimilarity measure. If left <code>NULL</code>, behaves
as though <code>lambda</code> is set greater than <code>threshold</code>, and so only
observations whose factor levels match the current section are visible.
Passed to <code>similarityweight</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distance</code></td>
<td>
<p>A character vector describing the type of distance measure to
use, either <code>"euclidean"</code> (default) or <code>"maxnorm"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>This specifies the type of interactive plot. <code>"default"</code>
places everything on one device. <code>"separate"</code> places condition
selectors on one device and the section on another. (These two options
require XQuartz on OS X). <code>"shiny"</code> produces a Shiny application.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>view3d</code></td>
<td>
<p>Logical; if <code>TRUE</code> plots a three-dimensional
regression surface if possible.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Corder</code></td>
<td>
<p>Character name for method of ordering conditioning variables.
See <code>arrangeC</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selectortype</code></td>
<td>
<p>Type of condition selector plots to use. Must be
<code>"minimal"</code> if <code>type</code> is <code>"default"</code>. If <code>type</code> is
<code>"separate"</code>, can be <code>"pcp"</code> (see <code>plotxc.pcp</code>) or
<code>"full"</code> (see <code>plotxc.full</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf</code></td>
<td>
<p>Logical; if <code>TRUE</code> plots confidence bounds (or equivalent)
for models which provide this.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>probs</code></td>
<td>
<p>Logical; if <code>TRUE</code>, shows predicted class probabilities
instead of just predicted classes. Only available if <code>S</code> specifies two
numeric predictors and the model's predict method provides this.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>Colour for observed data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pch</code></td>
<td>
<p>Plot symbols for observed data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>residuals</code></td>
<td>
<p>Logical; if <code>TRUE</code>, plots a residual versus predictor
plot instead of the usual scale of raw response.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xsplotpar</code></td>
<td>
<p>Plotting parameters for section visualisation as a list,
passed to <code>plotxs</code>. Can specify <code>xlim</code>, <code>ylim</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modelpar</code></td>
<td>
<p>Plotting parameters for models as a list, passed to
<code>plotxs</code>. Not used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xcplotpar</code></td>
<td>
<p>Plotting parameters for condition selector plots as a list,
passed to <code>plotxc</code>. Can specify <code>col</code> for highlighting
current section, <code>cex</code>, and <code>trim</code> (see <code>plotxc</code>).</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>O'Connell M, Hurley CB and Domijan K (2017). “Conditional
Visualization for Statistical Models: An Introduction to the
<strong>condvis</strong> Package in R.”<em>Journal of Statistical Software</em>,
<strong>81</strong>(5), pp. 1-20. &lt;URL:http://dx.doi.org/10.18637/jss.v081.i05&gt;.
</p>


<h3>See Also</h3>

<p><code>condtour</code>, <code>similarityweight</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
## Example 1: Multivariate regression, xs one continuous predictor

mtcars$cyl &lt;- as.factor(mtcars$cyl)

library(mgcv)
model1 &lt;- list(
    quadratic = lm(mpg ~ cyl + hp + wt + I(wt^2), data = mtcars),
    additive = mgcv::gam(mpg ~ cyl + hp + s(wt), data = mtcars))

conditionvars1 &lt;- list(c("cyl", "hp"))

ceplot(data = mtcars, model = model1, response = "mpg", sectionvars = "wt",
  conditionvars = conditionvars1, threshold = 0.3, conf = T)

## Example 2: Binary classification, xs one categorical predictor

mtcars$cyl &lt;- as.factor(mtcars$cyl)
mtcars$am &lt;- as.factor(mtcars$am)

library(e1071)
model2 &lt;- list(
  svm = svm(am ~ mpg + wt + cyl, data = mtcars, family = "binomial"),
  glm = glm(am ~ mpg + wt + cyl, data = mtcars, family = "binomial"))

ceplot(data = mtcars, model = model2, sectionvars = "wt", threshold = 1,
  type = "shiny")

## Example 3: Multivariate regression, xs both continuous

mtcars$cyl &lt;- as.factor(mtcars$cyl)
mtcars$gear &lt;- as.factor(mtcars$gear)

library(e1071)
model3 &lt;- list(svm(mpg ~ wt + qsec + cyl + hp + gear,
  data = mtcars, family = "binomial"))

conditionvars3 &lt;- list(c("cyl","gear"), "hp")

ceplot(data = mtcars, model = model3, sectionvars = c("wt", "qsec"),
  threshold = 1, conditionvars = conditionvars3)

ceplot(data = mtcars, model = model3, sectionvars = c("wt", "qsec"),
    threshold = 1, type = "separate", view3d = T)

## Example 4: Multi-class classification, xs both categorical

mtcars$cyl &lt;- as.factor(mtcars$cyl)
mtcars$vs &lt;- as.factor(mtcars$vs)
mtcars$am &lt;- as.factor(mtcars$am)
mtcars$gear &lt;- as.factor(mtcars$gear)
mtcars$carb &lt;- as.factor(mtcars$carb)

library(e1071)
model4 &lt;- list(svm(carb ~ ., data = mtcars, family = "binomial"))

ceplot(data = mtcars, model = model4, sectionvars = c("cyl", "gear"),
  threshold = 3)

## Example 5: Multi-class classification, xs both continuous

data(wine)
wine$Class &lt;- as.factor(wine$Class)
library(e1071)

model5 &lt;- list(svm(Class ~ ., data = wine, probability = TRUE))

ceplot(data = wine, model = model5, sectionvars = c("Hue", "Flavanoids"),
  threshold = 3, probs = TRUE)

ceplot(data = wine, model = model5, sectionvars = c("Hue", "Flavanoids"),
  threshold = 3, type = "separate")

ceplot(data = wine, model = model5, sectionvars = c("Hue", "Flavanoids"),
  threshold = 3, type = "separate", selectortype = "pcp")

## Example 6: Multi-class classification, xs with one categorical predictor,
##            and one continuous predictor.

mtcars$cyl &lt;- as.factor(mtcars$cyl)
mtcars$carb &lt;- as.factor(mtcars$carb)

library(e1071)
model6 &lt;- list(svm(cyl ~ carb + wt + hp, data = mtcars, family = "binomial"))

ceplot(data = mtcars, model = model6, threshold = 1, sectionvars = c("carb",
  "wt"), conditionvars = "hp")

## End(Not run)

</code></pre>


</div>