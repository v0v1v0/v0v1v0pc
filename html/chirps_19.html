<div class="container">

<table style="width: 100%;"><tr>
<td>get_esi</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get evaporative stress index (ESI) data</h2>

<h3>Description</h3>

<p>Get evaporative stress index (<abbr><span class="acronym">ESI</span></abbr>) from <abbr><span class="acronym">SERVIR</span></abbr> Global
via ClimateSERV <abbr><span class="acronym">API</span></abbr> Client. <abbr><span class="acronym">ESI</span></abbr> is available every four
(or twelve) weeks from 2001 to present.
The dataset may contain cloudy data which is returned as <code>NA</code>s.
ClimateSERV works with geojson of type 'Polygon'. The input <code>object</code> is
then transformed into polygons with a small buffer area around the point.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_esi(object, dates, operation = 5, period = 1, ...)

## Default S3 method:
get_esi(object, dates, operation = 5, period = 1, ...)

## S3 method for class 'sf'
get_esi(object, dates, operation = 5, period = 1, as.sf = FALSE, ...)

## S3 method for class 'geojson'
get_esi(object, dates, operation = 5, period = 1, as.geojson = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>input, an object of class <code>data.frame</code> (or
any other object that can be coerced to data.frame), <code>SpatVector</code>, 
<code>SpatRaster</code>, <code>sf</code> or <code>geojson</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dates</code></td>
<td>
<p>a character of start and end dates in that order in the format
"YYYY-MM-DD"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>operation</code></td>
<td>
<p>optional, an integer that represents which type of
statistical operation to perform on the dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>period</code></td>
<td>
<p>an integer value for the period of ESI data, 
four weeks period = 1, twelve weeks = 2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments passed to <code>terra</code> 
or <code>sf</code> methods
See details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as.sf</code></td>
<td>
<p>logical, returns an object of class <code>sf</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as.geojson</code></td>
<td>
<p>logical, returns an object of class <code>geojson</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><b>operation</b>: supported operations are:  
</p>

<table>
<tr>
<td style="text-align: right;">
 <b>operation</b>      </td>
<td style="text-align: left;">    </td>
<td style="text-align: left;"> <b>value</b>
</td>
</tr>
<tr>
<td style="text-align: right;">
 max                   </td>
<td style="text-align: left;"> =  </td>
<td style="text-align: left;"> 0</td>
</tr>
<tr>
<td style="text-align: right;">
 min                   </td>
<td style="text-align: left;"> =  </td>
<td style="text-align: left;"> 1</td>
</tr>
<tr>
<td style="text-align: right;">
 median                </td>
<td style="text-align: left;"> =  </td>
<td style="text-align: left;"> 2</td>
</tr>
<tr>
<td style="text-align: right;">
 sum                   </td>
<td style="text-align: left;"> =  </td>
<td style="text-align: left;"> 4</td>
</tr>
<tr>
<td style="text-align: right;">
 average               </td>
<td style="text-align: left;"> =  </td>
<td style="text-align: left;"> 5 (<em>default value</em>)</td>
</tr>
<tr>
<td style="text-align: right;">
 </td>
</tr>
</table>
<p><b>dist</b>: numeric, buffer distance for each <code>object</code> coordinate
</p>
<p><b>nQuadSegs</b>: integer, number of segments per buffer quadrant
</p>


<h3>Value</h3>

<p>A data frame of <abbr><span class="acronym">ESI</span></abbr> data:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>the index for the rows in <code>object</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dates</code></td>
<td>
<p>the dates from which ESI was requested</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lon</code></td>
<td>
<p>the longitude as provided in <code>object</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lat</code></td>
<td>
<p>the latitude as provided in <code>object</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>esi</code></td>
<td>
<p>the ESI value</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>get_esi may return some warning messages given by 
<code>sf</code>, please look sf documentation for 
possible issues.
</p>


<h3>Examples</h3>

<pre><code class="language-R">

lonlat &lt;- data.frame(lon = c(-55.0281,-54.9857),
                     lat = c(-2.8094, -2.8756))

dates &lt;- c("2017-12-15","2018-06-20")

# by default the function set a very small buffer around the points
# which can return NAs due to cloudiness in ESI data

dt &lt;- get_esi(lonlat, dates = dates)

# the argument dist passed through sf increase the buffer area

dt &lt;- get_esi(lonlat, dates = dates, dist = 0.1)

</code></pre>


</div>