<div class="container">

<table style="width: 100%;"><tr>
<td>MSVR</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Select the number of factors</h2>

<h3>Description</h3>

<p>Select the number of factors using maximum singular value ratio based method
</p>


<h3>Usage</h3>

<pre><code class="language-R">MSVR(
  XList,
  Z,
  types,
  numvarmat,
  Alist = NULL,
  q_max = 20,
  threshold = 1e-05,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>XList</code></td>
<td>
<p>a list consisting of multiple matrices in which each matrix has the same type of values, i.e., continuous, or count, or binomial/binary values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Z</code></td>
<td>
<p>a matrix, the fixed-dimensional covariate matrix with control variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>types</code></td>
<td>
<p>a string vector, specify the variable type in each matrix in <code>XList</code>;</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numvarmat</code></td>
<td>
<p>a <code>length(types)</code>-by-d matrix, specify the number of variables in modalities that belong to the same type.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Alist</code></td>
<td>
<p>an optional vector, the offset for each unit; default as full-zero vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q_max</code></td>
<td>
<p>an optional string, specify the maximum number of factors; default as 20.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>an optional positive value, a cutoff to filter the singular values that are smaller than it.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments passed to CMGFM</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>None
</p>


<h3>Value</h3>

<p>return the estimated number of factors.
</p>


<h3>References</h3>

<p>None
</p>


<h3>See Also</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class="language-R">pveclist &lt;- list('gaussian'=c(50, 150),'poisson'=c(50, 150),
   'binomial'=c(100,60))
q &lt;- 6
sigmavec &lt;- rep(1,3)
pvec &lt;- unlist(pveclist)
datlist &lt;- gendata_cmgfm(pveclist = pveclist, seed = 1, n = 300,d = 3,
                         q = q, rho = rep(1,length(pveclist)), rho_z=0.2,
                         sigmavec=sigmavec, sigma_eps=1)
XList &lt;- datlist$XList
Z &lt;- datlist$Z
numvarmat &lt;- datlist$numvarmat
types &lt;- datlist$types
hq &lt;- MSVR(XList, Z, types=types, numvarmat, q_max=20)

print(c(q_true=q, q_est=hq))
</code></pre>


</div>