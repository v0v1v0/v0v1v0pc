<div class="container">

<table style="width: 100%;"><tr>
<td>MacroPCApredict</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
MacroPCApredict
</h2>

<h3>Description</h3>

<p>Based on a <code>MacroPCA</code> fit of an initial (training) data set <code>X</code>, this function analyzes a
new (test) data set <code>Xnew</code>.</p>


<h3>Usage</h3>

<pre><code class="language-R">MacroPCApredict(Xnew, InitialMacroPCA, MacroPCApars = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Xnew</code></td>
<td>
<p>The new data (test data), which must be a matrix or a data frame.
It must always be provided. Its columns (variables) should correspond to those of <code>InitialMacroPCA$remX</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>InitialMacroPCA</code></td>
<td>
<p>The output of the MacroPCA function on the initial
(training) dataset. Must be provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MacroPCApars</code></td>
<td>
<p>The input options to be used for the prediction.
By default the options of InitialMacroPCA are used. For the complete list of
options see the function <code>MacroPCA</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with components: <br></p>
<table>
<tr style="vertical-align: top;">
<td><code>MacroPCApars</code></td>
<td>
<p>the options used in the call.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DDC</code></td>
<td>
<p>result of DDCpredict which is the first step of MacroPCApredict.
See the function <code>DDCpredict</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scaleX</code></td>
<td>
<p>the scales of the columns of <code>X</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>the number of principal components.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>loadings</code></td>
<td>
<p>the columns are the <code>k</code> loading vectors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eigenvalues</code></td>
<td>
<p>the <code>k</code> eigenvalues.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>center</code></td>
<td>
<p>vector with the fitted center.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>It</code></td>
<td>
<p>number of iteration steps.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diff</code></td>
<td>
<p>convergence criterion.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Xnew.NAimp</code></td>
<td>
<p><code>Xnew</code> with all <code>NA</code>'s imputed by <code>MacroPCA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scores</code></td>
<td>
<p>scores of <code>Xnew.NAimp</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OD</code></td>
<td>
<p>orthogonal distances of the rows of <code>Xnew.NAimp</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cutoffOD</code></td>
<td>
<p>cutoff value for the OD.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SD</code></td>
<td>
<p>score distances of the rows of <code>Xnew.NAimp</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cutoffSD</code></td>
<td>
<p>cutoff value for the SD.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>highOD</code></td>
<td>
<p>row numbers of cases in <code>Xnew.NAimp</code> whose <code>OD</code> is above <code>cutoffOD</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>highSD</code></td>
<td>
<p>row numbers of cases in <code>Xnew.NAimp</code> whose <code>SD</code> is above <code>cutoffSD</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>residScale</code></td>
<td>
<p>scale of the residuals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stdResid</code></td>
<td>
<p>standardized residuals. Note that these are <code>NA</code> for all missing values of <code>Xnew</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indcells</code></td>
<td>
<p>indices of cellwise outliers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NAimp</code></td>
<td>
<p>various results for the NA-imputed Xnew.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Cellimp</code></td>
<td>
<p>various results for the cell-imputed Xnew.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Fullimp</code></td>
<td>
<p>various result for the fully imputed Xnew.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Rousseeuw P.J., Van den Bossche W. 
</p>


<h3>References</h3>

<p>Hubert, M., Rousseeuw, P.J., Van den Bossche W. (2019). MacroPCA: An all-in-one PCA method allowing for missing values as well as cellwise and rowwise outliers. <em>Technometrics</em>, <b>61</b>(4), 459-473. <a href="https://www.tandfonline.com/doi/full/10.1080/00401706.2018.1562989">(link to open access pdf)</a>
</p>


<h3>See Also</h3>

<p><code>checkDataSet</code>, <code>cellMap</code>,
<code>DDC</code>, <code>DDCpredict</code>,
<code>MacroPCA</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(MASS) 
set.seed(12345) 
n &lt;- 50; d &lt;- 10
A &lt;- matrix(0.9, d, d); diag(A) = 1
x &lt;- mvrnorm(n, rep(0,d), A)
x[sample(1:(n * d), 50, FALSE)] &lt;- NA
x[sample(1:(n * d), 50, FALSE)] &lt;- 10
MacroPCA.out &lt;- MacroPCA(x, 2)
xnew &lt;- mvrnorm(25, rep(0,d), A)
xnew[sample(1:(25 * d), 12, FALSE)] &lt;- 10
predict.out &lt;- MacroPCApredict(xnew, MacroPCA.out)
cellMap(predict.out$stdResid)

# For more examples, we refer to the vignette:
## Not run: 
vignette("MacroPCA_examples")

## End(Not run)
</code></pre>


</div>