<div class="container">

<table style="width: 100%;"><tr>
<td>as_cff_person</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Coerce <strong>R</strong> objects to <code>cff_pers_lst</code> objects (<code>cff</code> persons)</h2>

<h3>Description</h3>

<p><code>as_cff_person()</code> turns an existing list-like <strong>R</strong> object into a
<code>cff_pers_lst</code> object representing a list of <code>definitions.person</code> or
<code>definitions.entity</code>, as defined by the <a href="https://github.com/citation-file-format/citation-file-format/blob/main/schema-guide.md">Citation File Format schema</a>.
</p>
<p><code>as_cff_person</code> is an S3 generic, with methods for:
</p>

<ul>
<li> <p><code>person</code>: objects created with <code>person()</code>.
</p>
</li>
<li> <p><code>character</code>: String with the definition of an author or several authors,
using the standard BibTeX notation (see Markey, 2007) and others, like
the output of <code>format()</code> for person (see <code>format.person()</code>).
</p>
</li>
<li>
<p> Default: Other inputs are first coerced with <code>as.character()</code>.
</p>
</li>
</ul>
<p>The inverse transformation (<code>cff_pers_lst</code> to <code>person</code>) can be done with
the methods <code>as.person.cff_pers()</code> and <code>as.person.cff_pers_lst()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">as_cff_person(x, ...)

## Default S3 method:
as_cff_person(x, ...)

## S3 method for class 'person'
as_cff_person(x, ...)

## S3 method for class 'character'
as_cff_person(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Any <strong>R</strong> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Ignored by this method.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>as_cff_person()</code> would recognize if the input should be converted using the
CFF reference for <code>definition.person</code> or <code>definition.entity</code>.
</p>
<p><code>as_cff_person()</code> uses a custom algorithm that tries to break a name as
explained in Section 11 of "Tame the BeaST" (Markey, 2007) (see also
Decoret, 2007):
</p>

<ul>
<li> <p><code style="white-space: pre;">⁠First von Last⁠</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠von Last, First⁠</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠von Last, Jr, First⁠</code>.
</p>
</li>
</ul>
<p>Mapping is performed as follows:
</p>

<ul>
<li> <p><code>First</code> is mapped to the CFF field <code>given-names</code>.
</p>
</li>
<li> <p><code>von</code> is mapped to the CFF field <code>name-particle</code>.
</p>
</li>
<li> <p><code>Last</code> is mapped to the CFF field <code>family-names</code>.
</p>
</li>
<li> <p><code>Jr</code> is mapped to the CFF field <code>name-suffix</code>.
</p>
</li>
</ul>
<p>In the case of entities, the whole <code>character</code> would be mapped to <code>name</code>.
It is a good practice to "protect" entity's names with <code>{}</code>:
</p>
<div class="sourceCode r"><pre># Don't do
entity &lt;- "Elephant and Castle"
as_cff_person(entity)
- name: Elephant
- name: Castle

# Do
entity_protect &lt;- "{Elephant and Castle}"
as_cff_person(entity_protect)
- name: Elephant and Castle
</pre></div>
<p><code>as_cff_person()</code> would try to add as many information as possible.
On <code>character</code> string coming from <code>format.person()</code> the
email and the ORCID would be retrieved as well.
</p>


<h3>Value</h3>

<p><code>as_cff_person()</code> returns an object of classes
<code>cff_pers_lst, cff</code> according to the <code>definitions.person</code>
or <code>definitions.entity</code> specified in the <a href="https://github.com/citation-file-format/citation-file-format/blob/main/schema-guide.md">Citation File Format schema</a>.
Each element of the <code>cff_pers_lst</code> object would have classes
<code>cff_pers, cff</code>.
</p>


<h3>References</h3>


<ul>
<li>
<p> Patashnik, Oren. "BIBTEXTING" February 1988.
<a href="https://osl.ugr.es/CTAN/biblio/bibtex/base/btxdoc.pdf">https://osl.ugr.es/CTAN/biblio/bibtex/base/btxdoc.pdf</a>.
</p>
</li>
<li>
<p> Markey, Nicolas. "Tame the BeaST"
<em>The B to X of BibTeX, Version 1.4</em> (October 2007).
<a href="https://osl.ugr.es/CTAN/info/bibtex/tamethebeast/ttb_en.pdf">https://osl.ugr.es/CTAN/info/bibtex/tamethebeast/ttb_en.pdf</a>.
</p>
</li>
<li>
<p> Decoret X (2007). "A summary of BibTex."<a href="https://maverick.inria.fr/~Xavier.Decoret/resources/xdkbibtex/bibtex_summary.html#names">https://maverick.inria.fr/~Xavier.Decoret/resources/xdkbibtex/bibtex_summary.html#names</a>
</p>
</li>
</ul>
<p>See <strong>Examples</strong> for more information.
</p>


<h3>See Also</h3>

<p>Examples in <code>vignette("cffr", "cffr")</code> and <code>utils::person()</code>.
</p>
<p>Learn more about the classes <code style="white-space: pre;">⁠cff_pers_lst, cff_pers⁠</code> classes in cff_class.
</p>
<p>Coercing between <strong>R</strong> classes with <strong>S3 Methods</strong>:
<code>as_bibentry()</code>,
<code>as_cff()</code>,
<code>cff_class</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Create a person object
a_person &lt;- person(
  given = "First", family = "Author",
  role = c("aut", "cre"),
  email = "first.last@example.com", comment = c(
    ORCID = "0000-0001-8457-4658",
    affiliation = "An affiliation"
  )
)

a_person

cff_person &lt;- as_cff_person(a_person)

# Class cff_pers_lst / cff
class(cff_person)

# With each element with class cff_pers / cff
class(cff_person[[1]])

# Print
cff_person

# Back to person object with S3 Method
as.person(cff_person)

# Coerce a string
a_str &lt;- paste0(
  "Julio Iglesias &lt;fake@email.com&gt; ",
  "(&lt;https://orcid.org/0000-0001-8457-4658&gt;)"
)
as_cff_person(a_str)

# Several persons
persons &lt;- c(
  person("Clark", "Kent", comment = c(affiliation = "Daily Planet")),
  person("Lois", "Lane"), person("Oscorp Inc.")
)

a_cff &lt;- as_cff_person(persons)

a_cff

# Printed as Bibtex thanks to the method
toBibtex(a_cff)

# Or as person object
as.person(a_cff)


# Or you can use BibTeX style as input if you prefer

x &lt;- "Frank Sinatra and Dean Martin and Davis, Jr., Sammy and Joey Bishop"

as_cff_person(x)

as_cff_person("Herbert von Karajan")

toBibtex(as_cff_person("Herbert von Karajan"))
</code></pre>


</div>