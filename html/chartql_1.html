<div class="container">

<table style="width: 100%;"><tr>
<td>cql</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
<code>chartql</code> Chart Generator</h2>

<h3>Description</h3>

<p>Generates a chart/plot using <code>source_frame</code> as the source dataframe and using <code>cql_string</code> as the query string. Options and structure of the query string are described below:
</p>


<h3>Usage</h3>

<pre><code class="language-R">cql(source_frame, cql_string)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>source_frame</code></td>
<td>
<p>DataFrame object. Used as the source to build the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cql_string</code></td>
<td>
<p><code>chartql</code> query string. Used to specify options in terms of how to build the plot. This includes the type of plot, choice of x and y variables, axis titles and more. Full parameter list below.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>chartql</code> query language uses a fairly simple format to let users generate amazing plots but with minimal scripting, allowing for much faster prototyping. The <code>chartql</code> string uses the following general format:
</p>
<p><code>CHART &lt;chart_type&gt; X &lt;x_var&gt; Y &lt;y_var&gt; (Options) &lt;options&gt;</code>
</p>
<p>The main variables that are required for all types of plots are:
</p>

<table>
<tr>
<td style="text-align: right;">
Chart <code>&lt;chart_type&gt;</code>: </td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"> <code>bar|scatter|hist|line</code>
</td>
</tr>
<tr>
<td style="text-align: right;">
X <code>&lt;x_var&gt;, &lt;(x_facet)&gt;</code>: </td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">  X-axis variable. May include a second categorical</td>
</tr>
<tr>
<td style="text-align: right;">
</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"> variable (comma separated)</td>
</tr>
<tr>
<td style="text-align: right;">
Y <code>&lt;y_var&gt;</code>: </td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"> Y-axis variable. *Not used for <code>hist</code>.</td>
</tr>
<tr>
<td style="text-align: right;">
</td>
</tr>
</table>
<p><b>Optional Variables</b>
</p>

<table>
<tr>
<td style="text-align: right;">
X_label <code>'&lt;xlab&gt;'</code>: </td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">  X-axis custom label. Defaults to &lt;x_var&gt;</td>
</tr>
<tr>
<td style="text-align: right;">
Y_label <code>'&lt;ylab&gt;'</code>: </td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">  Y-axis custom label. Defaults to &lt;y_var&gt;</td>
</tr>
<tr>
<td style="text-align: right;">
Legend <code>'&lt;legend&gt;'</code>: </td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">  Legend custom label. Defaults to &lt;x_category&gt;</td>
</tr>
<tr>
<td style="text-align: right;">
Colorset <code>'&lt;clist&gt;'</code>: </td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">  Custom set of colors for &lt;x_category&gt; levels.</td>
</tr>
<tr>
<td style="text-align: right;">
</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"> Must be comma-separated list.</td>
</tr>
<tr>
<td style="text-align: right;">
AggFunc <code>'&lt;func&gt;'</code>: </td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"> Summary function for <code>bar</code> type.</td>
</tr>
<tr>
<td style="text-align: right;">
</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"> Valid types: <code>mean|median|count|sum</code>.</td>
</tr>
<tr>
<td style="text-align: right;">
</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"> Defaults to <code>mean</code>.</td>
</tr>
<tr>
<td style="text-align: right;">
Fit <code>'&lt;show_se&gt;'</code>: </td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"> Valid types: <code>true|false</code>. Fit quadratic line.</td>
</tr>
<tr>
<td style="text-align: right;">
</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"> Show/Don't show standard error curves.</td>
</tr>
<tr>
<td style="text-align: right;">
ConfInt <code>'&lt;interval&gt;'</code>: </td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">  Show error bars. Value is confidence interval value. E.g. '.95'
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>response</code></td>
<td>
<p>List object. Entries are the valid parameters and their values extracted from <code>cql_string</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_obj</code></td>
<td>
<p>ggplot object. This is the resulting plot.</p>
</td>
</tr>
</table>
<h3>Note</h3>


<ol>
<li>
<p> Custom label parameters <code>X_label</code>, <code>Y_label</code> and <code>Legend</code> may contain newlines but should be escaped with an extra backslash as: "\\n".
</p>
</li>
<li>
<p> The parameter names themselves are not case-sensitive (e.g. both <code>"CHART bar"</code> and <code>"chart bar"</code> are valid formatting).
</p>
</li>
<li>
<p> You can hide the Legend by setting the value to "&lt;&gt;" (e.g. <code>"Legend '&lt;&gt;'"</code>)
</p>
</li>
</ol>
<h3>Examples</h3>

<pre><code class="language-R">
# Test data
dframe &lt;- data.frame(
category = factor(c(rep("Sports",50), rep("Home", 150), rep("Fashion", 100))),
season = factor(c(rep(c("Fall","Winter"),150))),
sales = c(runif(100,min=0,max=100), runif(100,min=50,max=200), runif(100,min=50,max=80))
)
dframe$visitors &lt;- dframe$sales * runif(300, min=0.5, max=1.5)


# Bar chart with product category on x-axis and total sales on y-axis
cql_str &lt;- "CHART bar X category Y sales";
cql(dframe, cql_str);


# Bar chart but facet x-axis with both category and season of the year
cql_str &lt;- "CHART bar X category, season Y sales X_label 'Product\\nCategory'";
cql(dframe, cql_str);


# Bar chart with 95% confidence interval error bars
cql_str &lt;- "CHART bar X category, season Y sales ConfInt '.95'";
cql(dframe, cql_str);


# Bar chart but specify the colors for each season
cql_str &lt;- "CHART bar X category, season Y sales Colorset '#FF9900, #990099'";
cql(dframe, cql_str);


# Scatter plot of number of visitors and sales
cql_str &lt;- "CHART scatter X visitors Y sales";
cql(dframe, cql_str);


# Scatter plot but facet by season
cql_str &lt;- "CHART scatter X visitors, season Y sales";
cql(dframe, cql_str);


# Scatter plot with fitted line (no SE curves)
cql_str &lt;- "CHART scatter X visitors, season Y sales Fit 'false'";
cql(dframe, cql_str);
</code></pre>


</div>