<div class="container">

<table style="width: 100%;"><tr>
<td>h2h_long</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute long format of Head-to-Head values</h2>

<h3>Description</h3>

<p>Functions to compute Head-to-Head values in long pair-value format.
</p>


<h3>Usage</h3>

<pre><code class="language-R">h2h_long(cr_data, ..., fill = list())

to_h2h_long(mat, value = "h2h_value", drop = FALSE)

## S3 method for class 'h2h_long'
as_tibble(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>cr_data</code></td>
<td>
<p>Competition results ready for <code>as_longcr()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Name-value pairs of Head-to-Head functions (see Details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p>A named list that for each variable supplies a single value to
use instead of <code>NA</code> for missing pairs (see tidyr's
complete()).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mat</code></td>
<td>
<p>Matrix of Head-to-Head values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>String name to be used for column with Head-to-Head value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop</code></td>
<td>
<p>Use <code>TRUE</code> to drop rows with missing Head-to-Head values (see
Details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Object to be converted to tibble.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>h2h_long()</code> computes Head-to-Head values in
long format. It allows computation of multiple
Head-to-Head values at the same time by supplying multiple summary functions
in <code>...</code>. If no function is supplied in <code>...</code>, it returns all appropriate
combinations of matchups (see next paragraph).
</p>
<p>After computing Head-to-Head values of actually present matchups, they are
aligned with "levels" (see <code>levels2()</code>) of <code>player</code> vector (after applying
<code>as_longcr()</code>). This is a way to target function on fixed set of players by
using factor columns. The procedure is:
</p>

<ul>
<li>
<p> Implicit missing matchups are turned into explicit (by adding corresponding
rows with filling values in Head-to-Head columns) by using tidyr's
complete().
</p>
</li>
<li>
<p> All matchups not containing players from "levels" are removed.
</p>
</li>
</ul>
<p>Use <code>fill</code> as in <code>complete()</code> to control filling values. To drop those rows
use tidyr's drop_na().
</p>
<p><code>to_h2h_long()</code> takes <strong>object of h2h_mat structure</strong> and converts
it into <code>h2h_long</code> object with value column named as stored in <code>value</code>. Use
<code>drop = TRUE</code> to remove rows with missing values in value column (but not in
players').
</p>


<h3>Value</h3>

<p>An object of class <code>h2h_long</code> which is a tibble
with columns <code>player1</code>, <code>player2</code> and those, produced by Head-to-Head
functions (for <code>h2h_long()</code> maybe none).
</p>
<p>as_tibble() applied to <code>h2h_long</code> object drops
<code>h2h_long</code> class.
</p>


<h3>Head-to-Head value</h3>

<p>Head-to-Head value is a summary statistic of direct confrontation between two
players. It is assumed that this value can be computed based only on the
players' matchups. In other words, every game is converted
into series of "subgames" between ordered pairs of players (including
selfplay) which is stored as widecr object. After that, summary of item,
defined by columns <code>player1</code> and <code>player2</code>, is computed using
<code>summarise_item()</code>.
</p>
<p>That said, name-value pairs of Head-to-Head functions should be defined as
for <code>summarise_item()</code> applied to data with columns <code>game</code>, <code>player1</code>,
<code>score1</code>, <code>player2</code>, <code>score2</code>.
</p>


<h3>See Also</h3>

<p>Matrix format of Head-to-Head values.
</p>
<p>Common Head-to-Head functions.
</p>


<h3>Examples</h3>

<pre><code class="language-R">ncaa2005 %&gt;%
  h2h_long(
    mean_score = mean(score1),
    mean_abs_score = mean(abs(score1 - score2))
  )

ncaa2005[-(1:2), ] %&gt;%
  h2h_long(
    mean_score = mean(score1),
    fill = list(mean_score = 0)
  )
</code></pre>


</div>