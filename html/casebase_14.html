<div class="container">

<table style="width: 100%;"><tr>
<td>hazardPlot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot Fitted Hazard Curve as a Function of Time</h2>

<h3>Description</h3>

<p>Visualize estimated hazard curves as a function of time with
confidence intervals. This function takes as input, the result from the
<code>fitSmoothHazard()</code> function. The user can also specify a
sequence of times at which to estimate the hazard function. These plots are
useful to visualize the non-proportional hazards, i.e., time dependent
interactions with a covariate.
</p>


<h3>Usage</h3>

<pre><code class="language-R">hazardPlot(
  object,
  newdata,
  type = c("hazard"),
  xlab = NULL,
  breaks = 100,
  ci.lvl = 0.95,
  ylab = NULL,
  line.col = 1,
  ci.col = "grey",
  lty = par("lty"),
  add = FALSE,
  ci = !add,
  rug = !add,
  s = c("lambda.1se", "lambda.min"),
  times = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>Fitted object of class <code>glm</code>, <code>gam</code>, <code>cv.glmnet</code> or <code>gbm</code>. This
is the result from the <code>fitSmoothHazard()</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newdata</code></td>
<td>
<p>A data frame in which to look for variables with which to
predict. This is required and must contain all the variables used in the
model. Only one covariate profile can be used. If more than one row is
provided, only the first row will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Type of plot. Currently, only "hazard" has been implemented.
Default: c("hazard")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>x-axis label. Default: the name of the time variable from the
fitted <code>object</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>breaks</code></td>
<td>
<p>Number of points at which to estimate the hazard. This argument
is only used if argument <code>times=NULL</code>. This function will calculate a
sequence of times between the minimum and maximum of observed event times.
Default: 100.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci.lvl</code></td>
<td>
<p>Confidence level. Must be in (0,1), Default: 0.95</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>y-axis label. Default: NULL which means the function will put
sensible defaults.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>line.col</code></td>
<td>
<p>Line color, Default: 1. See <code>graphics::par()</code> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci.col</code></td>
<td>
<p>Confidence band color. Only used if argument <code>ci=TRUE</code>,
Default: 'grey'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lty</code></td>
<td>
<p>Line type. See <code>graphics::par()</code> for details, Default: par("lty")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add</code></td>
<td>
<p>Logical; if TRUE add to an already existing plot; Default: FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p>Logical; if TRUE confidence bands are calculated. Only available
for <code>family="glm"</code> and <code>family="gam"</code>, Default: !add</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rug</code></td>
<td>
<p>Logical. Adds a rug representation (1-d plot) of the event times
(only for <code>status=1</code>), Default: !add</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s</code></td>
<td>
<p>Value of the penalty parameter lambda at which predictions are
required (for class <code>cv.glmnet</code> only). Only the first entry will be
used if more than one numeric value is provided, Default: c("lambda.1se",
"lambda.min")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>Vector of numeric values at which the hazard should be
calculated. Default: NULL which means this function will use the minimum
and maximum of observed event times with the <code>breaks</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments passed to <code>graphics::matplot()</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is an earlier version of a function to plot hazards. We
recommend instead using the plot method for objects returned by
<code>fitSmoothHazard()</code>. See <code>plot.singleEventCB()</code>.
</p>


<h3>Value</h3>

<p>a plot of the hazard function and a data.frame of original data used
in the fitting along with the data used to create the plots including
<code>predictedhazard</code> which is the predicted hazard for a given covariate
pattern and time <code>predictedloghazard</code> is the predicted hazard on the log
scale. <code>lowerbound</code> and <code>upperbound</code> are the lower and upper confidence
interval bounds on the hazard scale (i.e. used to plot the confidence
bands). <code>standarderror</code> is the standard error of the log hazard (only if
<code>family="glm"</code> or <code>family="gam"</code>)
</p>


<h3>See Also</h3>

<p><code>fitSmoothHazard()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("simdat")
mod_cb &lt;- fitSmoothHazard(status ~ trt * eventtime,
                                    time = "eventtime",
                                    data = simdat[1:200,],
                                    ratio = 1,
                                    family = "glm")

results0 &lt;- hazardPlot(object = mod_cb, newdata = data.frame(trt = 0),
           ci.lvl = 0.95, ci = FALSE, lty = 1, line.col = 1, lwd = 2)
head(results0)
hazardPlot(object = mod_cb, newdata = data.frame(trt = 1), ci = FALSE,
           ci.lvl = 0.95, add = TRUE, lty = 2, line.col = 2, lwd = 2)
legend("topleft", c("trt=0","trt=1"),lty=1:2,col=1:2,bty="y", lwd = 2)
</code></pre>


</div>