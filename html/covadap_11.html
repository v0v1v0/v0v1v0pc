<div class="container">

<table style="width: 100%;"><tr>
<td>HuHu</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Covariate-Adaptive randomization by Hu and Hu</h2>

<h3>Description</h3>

<p>Implements the Covariate-Adaptive randomization by Hu and Hu (2012) for assigning patients to two treatments A and B. The procedure works with qualitative covariates only.
</p>


<h3>Usage</h3>

<pre><code class="language-R">HuHu(data, p = 0.85, omega = NULL, print.results = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame or a matrix. Each row of <code>data</code> corresponds to the covariate profile of a patient. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>biased coin probability for the Efron's allocation function (<code class="reqn">1/2 \leq p  \leq 1</code>). The default value is 0.85.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>omega</code></td>
<td>
<p>vector of weights for the overall, within-stratum, and within-covariate-margin levels. If <code>NULL</code> (default) <code>omega = rep(1/(n_cov + 2), n_cov + 2)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print.results</code></td>
<td>
<p> logical. If TRUE a summary of the results is printed. </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function assigns patients to treatments A or B as described in Hu and Hu (2012).
</p>
<p>The assignment probability to A of each patient is based on the Efron's allocation function (Efron, 1971) with biasing probability equal to <code>p</code>.
</p>
<p>At the end of the study the imbalance measures reported are the loss of estimation precision as described in Atkinson (1982), the Mahalanobis distance and the overall imbalance, defined as the difference in the total number of patients assigned to treatment A and B. The strata imbalances measures report, for each stratum, the total number of patients assigned (<code>N.strata</code>), the number of patients assigned to A (<code>A.strata</code>) and the within stratum imbalance (<code>D.strata</code>), calculated as <code>2*A.strata</code>-<code>N.strata</code>. The within covariate imbalances report, for each level of each qualitative covariate, the difference in the number of patients assigned to A and B. See also Value.
</p>


<h3>Value</h3>

<p>It returns an object of <code>class</code> <code>"covadap"</code>, which is a list containing the following elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>summary.info</code></td>
<td>

<p><code>Design</code> name of the design,
</p>
<p><code>Sample_size</code> number of patients,
</p>
<p><code>n_cov</code> number of covariates,
</p>
<p><code>n_levels</code> number of levels of each covariate,
</p>
<p><code>var_names</code> name of covariates and levels,
</p>
<p><code>parameter_a</code> design parameter (see above).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Assignments </code></td>
<td>
<p>a vector with the treatment assignments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Imbalances.summary</code></td>
<td>
<p>summary of overall imbalance measures at the end of the
study (<code>Loss</code> loss, <code>Mahal</code> Mahalanobis
distance, <code>overal.imb</code> difference in the total
number of patients assigned to A and B).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Strata.measures</code></td>
<td>
<p>a data frame containing for each possiblue stratum the
corresponding imbalances:
<code>N.strata</code> is the total number of
patients assigned to the stratum;
<code>A.strata</code> is the total number of patients
assigned to A  within the stratum;
<code>D.strata</code> is the within-stratum imbalance,
i.e. difference in the total number of patients
assigned to A and B within the stratum.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Imbalances</code></td>
<td>
<p>a list containing all the imbalance measures:
</p>
<p><code>Imb.measures</code> (<code>Loss</code> loss,
<code>Mahal</code> Mahalanobis distance),
</p>
<p><code>Overall.imb</code> difference in the total number of patients
assigned to A and B,
</p>
<p><code>Within.strata</code> within-stratum imbalance for all strata,
</p>
<p><code>Within.cov</code> within-covariate imbalance: difference in the
number of patients assigned to A and B for each level of each
qualitative covariate.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>the data provided in input.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>observed.strata</code></td>
<td>
<p>a data frame with all the observed strata.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Hu Y, Hu F. <em>Asymptotic properties of covariate-adaptive randomization</em>. The Annals of Statistics, 2012, 40(3): 1794-1815.
</p>
<p>Efron B, <em>Forcing a sequential experiment to be balanced</em>. Biometrika, 1971, 58(3): 403-418.
</p>
<p>Atkinson A. C. <em>Optimum biased coin designs for sequential clinical trials with prognostic factors</em>. Biometrika, 1982, 69(1): 61-67.
</p>


<h3>See Also</h3>

<p><code>HuHu.sim</code> for allocating patients by simulating their covariate profiles.
</p>


<h3>Examples</h3>

<pre><code class="language-R">require(covadap)


# Create a sample dataset
df1 &lt;- data.frame("gender" = sample(c("female", "male"), 200, TRUE, c(1 / 3, 2 / 3)),
                  "age" = sample(c("18-35", "36-50", "&gt;50"), 200, TRUE),
                  "bloodpressure" = sample(c("normal", "high", "hyper"), 200, TRUE),
                   stringsAsFactors = TRUE)
# To view a summary of the metrics of the design
HuHu(df1, p = 0.85, omega = NULL, print.results = TRUE)
# To view a summary
# and create a list containing all the metrics of the design
res &lt;- HuHu(df1, p = 0.85, omega = NULL, print.results = TRUE)
res
</code></pre>


</div>