<div class="container">

<table style="width: 100%;"><tr>
<td>update_PACKAGES</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create or update PACKAGES* files for a CRAN-like repository</h2>

<h3>Description</h3>

<p>This function is similar to <code>tools::write_PACKAGES()</code>, with some
differences:
</p>

<ul>
<li>
<p> It always uses the <code>MD5sum</code> field.
</p>
</li>
<li>
<p> It defaults to <code>addFiles = TRUE</code>, to allow following the package
files better.
</p>
</li>
<li>
<p> It does not support the <code>verbose</code>, <code>unpacked</code>, and <code>subdirs</code>
arguments currently.
</p>
</li>
<li>
<p> It uses a database to speed up the indexing process, and only
reindexes files that have added, removed or updated.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">update_PACKAGES(
  dir = ".",
  fields = NULL,
  type = c("source", "mac.binary", "win.binary"),
  xcolumns = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>Character vector describing the location of the repository
(directory including source or binary packages) to generate the
‘<span class="file">PACKAGES</span>’, ‘<span class="file">PACKAGES.gz</span>’ and ‘<span class="file">PACKAGES.rds</span>’ files
from and write them to.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fields</code></td>
<td>

<p>a character vector giving the fields to be used in the
‘<span class="file">PACKAGES</span>’, ‘<span class="file">PACKAGES.gz</span>’ and ‘<span class="file">PACKAGES.rds</span>’ files in
addition to the default ones, or <code>NULL</code> (default).
</p>
<p>The default corresponds to
the fields needed by <code>available.packages</code>:
<code>"Package"</code>, <code>"Version"</code>, <code>"Priority"</code>,
<code>"Depends"</code>, <code>"Imports"</code>, <code>"LinkingTo"</code>,
<code>"Suggests"</code>, <code>"Enhances"</code>, <code>"OS_type"</code>,
<code>"License"</code> and <code>"Archs"</code>, and those fields will always
be included, plus
the file name in field <code>"File"</code> if <code>addFile = TRUE</code>
and the path to the subdirectory in field <code>"Path"</code> if subdirectories
are used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>

<p>Type of packages: currently source ‘<span class="file">.tar.{gz,bz2,xz}</span>’ archives,
and macOS or Windows binary (‘<span class="file">.tgz</span>’ or ‘<span class="file">.zip</span>’,
respectively) packages are supported.  Defaults to
<code>"win.binary"</code> on Windows and to <code>"source"</code> otherwise.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xcolumns</code></td>
<td>
<p>Extra scalar columns to add to the database.
Should be a named list of character scalars or <code>NULL</code> for no extra
columns.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>update_PACKAGES</code> uses a SQLite database to aid updating PACKAGES*
files quickly. It this database does not exist, then it will be created
based on the existing PACKAGES* files. If no PACKAGES* files exist,
either, then these will be created via <code>tools::write_PACKAGES()</code>.
</p>


<h3>See Also</h3>

<p>Other PACKAGES manipulation: 
<code>add_PACKAGES()</code>,
<code>remove_PACKAGES()</code>
</p>


</div>