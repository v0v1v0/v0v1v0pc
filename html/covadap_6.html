<div class="container">

<table style="width: 100%;"><tr>
<td>DABCD</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
<code class="reqn">D_A</code>-optimum biased coin design</h2>

<h3>Description</h3>

<p>Implements the  <code class="reqn">D_A</code>-optimum BCD by A. Atkinson (1982) for assigning patients to two treatments A and B in order to minimize the variance of the estimated treatment difference sequentially. The procedure works with qualitative and quantitative covariates.
</p>


<h3>Usage</h3>

<pre><code class="language-R">DABCD(data, all.cat, print.results = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame or a matrix. It can be a matrix only when <code>all.cat =
                TRUE</code>. Each row of <code>data</code> corresponds to the covariate profile of a
patient.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all.cat</code></td>
<td>
<p>logical. If all the covariates in <code>data</code> are qualitative must be set equal to <code>TRUE</code>, otherwise
must be set equal to <code>FALSE</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print.results</code></td>
<td>
<p>logical. If TRUE a summary of the results is printed. </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function assigns patients to treatments A or B with the <code class="reqn">D_A</code>-optimum BCD as described in Atkinson (1982).
</p>
<p>This randomization procedure can be used when <code>data</code> contains only qualitative covariate, in this case set <code>all.cat = TRUE</code>, when <code>data</code> contains only quantitative covariates or when covariates of mixed nature are present, in these two latter cases set <code>all.cat = FALSE</code>.  The function's output is slighly different according to these three scenarios as described in Value.
</p>
<p>At the end of the study the imbalance measures reported are the loss of estimation precision as described in Atkinson (1982), the Mahalanobis distance and the overall imbalance, defined as the difference in the total number of patients assigned to treatment A and B.
</p>
<p>Only when <code>all.cat = TRUE</code>, the function returns the strata imbalances measures, that report, for each stratum, the total number of patients assigned (<code>N.strata</code>), the number of patients assigned to A (<code>A.strata</code>) and the within-stratum imbalance (<code>D.strata</code>), calculated as <code>2*A.strata</code>-<code>N.strata</code>.
</p>
<p>If at least one qualitative covariate is present, the function returns the within-covariate imbalances reporting, for each level of each qualitative covariate, the difference in the number of patients assigned to A and B.
</p>
<p>If at least one quantitative covariate is present, the function returns the difference in means. For each quantitative covariate, is reported the difference in the mean in group A and B.
</p>
<p>See Value for more details.
</p>


<h3>Value</h3>

<p>It returns an object of <code>class</code> <code>"covadap"</code>, which is a list containing the following elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>summary.info</code></td>
<td>

<p><code>Design</code> name of the design.
</p>
<p><code>Sample_size</code> number of patients.
</p>
<p><code>n_cov</code> number of covariates.
</p>
<p><code>n_categorical_variables</code>  number of levels of each
covariate. Is <code>NULL</code> if
<code>all.cat = TRUE</code> or only quantitative covariates are present).
</p>
<p><code>n_levels</code> number of levels of each qualitative covariate.
Is <code>NULL</code> if only quantitative covariates are present.
</p>
<p><code>var_names</code> name of the covariates.
</p>
<p><code>cov_levels_names</code> levels of each qualitative covariate.
Is <code>NULL</code> if only quantitative covariates are present.
</p>
<p><code>n_quantitative_variables</code> number of quantitative
covariates.  Is <code>NULL</code> if <code>all.cat = TRUE</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Assignments </code></td>
<td>
<p>a vector with the treatment assignments.</p>
</td>
</tr>
</table>
<table>
<tr style="vertical-align: top;">
<td><code>Imbalances.summary</code></td>
<td>
<p>summary of overall imbalance measures at the end
of the study (<code>Loss</code> loss, <code>Mahal</code>
Mahalanobis distance,
<code>overall.imb</code> difference in the total number
of patients assigned to A and B).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Strata.measures</code></td>
<td>
<p>(only if <code>all.cat = TRUE</code>) a data frame
containing for each possiblue stratum the
corresponding imbalances: <code>N.strata</code> is the total number of
patients assigned to the stratum; <code>A.strata</code> is the total
number of patients assigned to A within the stratum;
<code>D.strata</code> is the within-stratum imbalance,
i.e. difference in the total number of patients
assigned to A and B within the stratum).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Imbalances</code></td>
<td>
<p>a list containing all the imbalance measures.
</p>
<p><code>Imb.measures</code> summary of overall imbalances
(<code>Loss</code> loss,
<code>Mahal</code> Mahalanobis distance,
<code>overall.imb</code> difference in the total
number of patients assigned to A and B).
</p>
<p><code>Within.strata</code> (only if <code>all.cat = TRUE</code>)
within-stratum imbalance for all strata.
</p>
<p><code>Within.cov</code> within-covariate imbalance: difference in the
number of patients assigned to A and B for each level of each
qualitative covariate (is <code>NULL</code> if only quantitative
covariates are present).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>the data provided in input.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diff_mean</code></td>
<td>
<p>(only if <code>all.cat = FALSE</code>) the difference in mean of the
quantitative covariates in group A and B.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>observed.strata</code></td>
<td>
<p>(only if <code>all.cat = TRUE</code>) a data frame with all the
observed strata.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Atkinson A. C. <em>Optimum biased coin designs for sequential clinical trials with prognostic factors</em>. Biometrika, 1982, 69(1): 61-67.
</p>


<h3>See Also</h3>

<p>See Also as <code>DABCD.sim</code> to for allocating patients by simulating their covariate profiles.
</p>


<h3>Examples</h3>

<pre><code class="language-R">require(covadap)

### Implement with qualitative covariates (set all.cat = TRUE)
# Create a sample dataset with qualitative covariates
df1 &lt;- data.frame("gender" = sample(c("female", "male"), 100, TRUE, c(1 / 3, 2 / 3)),
                  "age" = sample(c("18-35", "36-50", "&gt;50"), 100, TRUE),
                  "bloodpressure" = sample(c("normal", "high", "hyper"), 100, TRUE),
                   stringsAsFactors = TRUE)
# To just view a summary of the metrics of the design
DABCD(data = df1,  all.cat = TRUE, print.results = TRUE)
# To view a summary
# and create a list containing all the metrics of the design
res1 &lt;- DABCD(data = df1, all.cat = TRUE, print.results = TRUE)
res1


### Implement with quantitative or mixed covariates
# Create a sample dataset with covariates of mixed nature
ff1 &lt;- data.frame("gender" = sample(c("female", "male"), 100, TRUE, c(1 / 3, 2 / 3)),
                 "age" = sample(c("0-30", "30-50", "&gt;50"), 100, TRUE),
                 "bloodpressure" = sample(c("normal", "high", "hypertension"), 10,
                  TRUE),
                 "smoke" = sample(c("yes", "no"), 100, TRUE, c(2 / 3, 1 / 3)),
                 "cholesterol" = round(rnorm(100, 200, 8),1),
                 "height" = rpois(100,160),
                  stringsAsFactors = TRUE)

### With quantitative covariates only (set all.cat = FALSE)
# select only column 5 and 6 of the sample dataset
# To just view a summary of the metrics of the design
DABCD(data = ff1[,5:6],  all.cat = FALSE, print.results = TRUE)
# To view a summary
# and create a list containing all the metrics of the design
res2 &lt;- DABCD(data = ff1[,5:6], all.cat = FALSE, print.results = TRUE)
res2

### With mixed covariates (set all.cat = FALSE)
# To just view a summary of the metrics of the design
DABCD(data = ff1,  all.cat = FALSE, print.results = TRUE)
# To view a summary
# and create a list containing all the metrics of the design
res3 &lt;- DABCD(data = ff1, all.cat = FALSE, print.results = TRUE)
res3
</code></pre>


</div>