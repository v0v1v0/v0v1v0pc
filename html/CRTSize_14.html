<div class="container">

<table style="width: 100%;"><tr>
<td>n4propsMeta</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Empirical Power and Variance Reduction of an Updated Fixed Effects Meta-Analysis with Binary Outcomes</h2>

<h3>Description</h3>

<p>This function provides the empirical power/variance reduction of an updated meta-analysis for
a vector of the number of clusters to randomize per group and a vector of estimates
of the ICC with a binary outcome measured using the (log) relative risk or odds ratio.</p>


<h3>Usage</h3>

<pre><code class="language-R">n4propsMeta(data, measure="RR", model="fixed", k, ICC, ICCDistn="unif", 
lower=0, upper=0.25, varRed=FALSE, m, sdm, pC, sdpC, iter=1000, alpha=0.05)</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A matrix with completed studies in each row.  The first column contains the estimate
of the relative risk or odds ratio, the second column contains the 95 % lower limit and the third contains the 95 % upper limit.  Note that the variance is estimated from the upper bound of these confidence intervals and risk differences are not permitted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>measure</code></td>
<td>
<p>Corresponds to the effect measure.  Can be one of "RR" or "OR", corresponding to the Relative Risk or Odds Ratio.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>One of fixed or random, corresponding to the fixed or random effects meta-analysis models.  Note that the random effects model is estimated according to the DerSimonian-Laird estimate of the between-study variance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>A vector of the potential number of clusters to randomize to each of the treatment and control
groups.  Note that this function assumes an equal allocation to treatment and control group status.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ICC</code></td>
<td>
<p>A vector of potential values of the ICC, these can be obtained from the literature, pilot studies, etc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ICCDistn</code></td>
<td>
<p>The hypothetical distribution of the ICC values.  This can be set to "fixed" (note that only one ICC value is accepted for this option), "unif" on the range [lower, upper], "normal", corresponding to the truncated
normal distribution (Turner et al, 2004), and "smooth" corresponding to the empirical smoothing option (Rotondi and Donner, 2009).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lower</code></td>
<td>
<p>The lower bound for the smoothing or unif options.  Default value is zero.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>upper</code></td>
<td>
<p>The upper bound for the smoothing or unif options.  Default value is 0.25.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varRed</code></td>
<td>
<p>Logical; If varRed is set to TRUE, the proportionate reduction of variance is displayed
for the fixed effects meta-analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>
<p>The mean cluster size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sdm</code></td>
<td>
<p>The standard deviation of the mean cluster size.  This adds additional real-world variation
in the simulated study, using a normal model for large cluster sizes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pC</code></td>
<td>
<p>The anticipated event in the control group.  The anticipated treatment event is calculated
from the simulated effect size of the preliminary meta-analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sdpC</code></td>
<td>
<p>The standard deviation of the control rate.  This is to generate real-world variation
in the simulated study and can be precise or imprecise depending on the investigators preference.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iter</code></td>
<td>
<p>The number of iterations for each value of k and the ICC.  This has a large impact
on computational time.  Default is 1000.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>The desired type I error rate for calculation of confidence limits for the
meta-analysis model.  Note that for simplicity, this function assumes that each of the inputed lower
and upper limits are 95 % confidence limits and this cannot be changed.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function calculates the empirical power of an updated meta-analysis by a generalization
of Sutton et al. (2007) to the context of cluster randomized trials with
a binary outcome.  The procedure is summarized in the accompanying manuscript (Rotondi and Donner, 2012).  In short,
a hypothetical new study of a given size is simulated, then added to the meta-analysis.  The
results are re-meta-analyzed and it is verified whether the pooled result is statistically significant,
or the appropriate reduction in variance of the pooled effect measure is recorded.  Note
that the proportion of variance reduction and power may not always (strictly) decrease with k, as the simulation
exhibits individual-level variation.  In addition, the random effects model does not guarantee that future studies will result in higher power due to the presence of between-study heterogeneity.</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>power</code></td>
<td>
<p>The power of the updated meta-analysis.  Presented as a vector 
corresponding to the number of clusters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varianceReduction</code></td>
<td>
<p>The proportionate reduction in variance for the number of clusters in the fixed effects meta-analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>
<p>The mean cluster size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The data matrix is returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newMean</code></td>
<td>
<p>The preliminary fixed (or random) effects log relative risk (RR) or odds ratio (OR).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newVar</code></td>
<td>
<p>The variance of the preliminary fixed (or random) effects log RR or log OR.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lF</code></td>
<td>
<p>The 100(1 - <code class="reqn">\alpha</code>) % lower limit of the log RR/log OR in the original meta-analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uF</code></td>
<td>
<p>The 100(1 - <code class="reqn">\alpha</code>) % upper limit of the log RR/log OR in the original meta-analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Var</code></td>
<td>
<p>The variance of the updated log RR/log OR.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>The number of clusters randomized per group (vector).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ICC</code></td>
<td>
<p>A vector of ICC values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ICCDistn</code></td>
<td>
<p>The distributional assumption about the ICC.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varRed</code></td>
<td>
<p>Variance Reduction: Logical.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sdm</code></td>
<td>
<p>The standard deviation of the mean cluster size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pC</code></td>
<td>
<p>The mean control rate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sdpC</code></td>
<td>
<p>The standard deviation of the control rate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>The desired type I error rate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iter</code></td>
<td>
<p>The total number of iterations.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Michael Rotondi, <a href="mailto:mrotondi@yorku.ca">mrotondi@yorku.ca</a></p>


<h3>References</h3>

<p>Matthews JNS.  Introduction to Randomized Controlled Clinical Trials (2nd Ed.) Chapman &amp; Hall: New York, 2006.
</p>
<p>Donner A and Klar N.  Design and Analysis of Cluster Randomization Trials in Health Research.  Arnold: London, 2000.
</p>
<p>Sutton AJ et al. (2007) Evidence-based sample size calculations based upon updated meta-analysis. Statistics in Medicine,
26(12):2479-2500.
</p>
<p>Turner R et al. (2004) Allowing for imprecision in the intracluster correlation coefficient in the design of cluster randomized trials.  Statistics in Medicine, 23(8):1195-1214.
</p>
<p>Rotondi M and Donner A.  (2009) Sample Size Estimation in Cluster Randomized Trials: An Empirical Bayes Approach. Journal
of Educational and Behavioral Statistics, 34:229-237.  
</p>
<p>Rotondi M and Donner A.  (2012) Sample Size Estimation in Cluster Randomized Trials:
An Evidence-Based Perspective.  Computational Statistics and Data Analysis  56:1174-1187.
</p>


<h3>See Also</h3>

<p><code>n4meansMeta</code> </p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: A brief example with 10 iterations and a simple initial meta-analysis 
of two studies with the following RRs and CIs:
## End(Not run)
n4propsMeta(data=rbind(c(0.800, 0.551, 1.162), c(0.690, 0.342, 1.390)), 
model="fixed", measure="RR", k=c(20, 40, 60, 80, 100), ICC=0.011, 
m=100, sdm=0, pC=0.1, sdpC=0, iter=10, alpha=0.05, ICCDistn="fixed");
</code></pre>


</div>