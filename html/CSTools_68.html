<div class="container">

<table style="width: 100%;"><tr>
<td>s2dv_cube</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creation of a 's2dv_cube' object</h2>

<h3>Description</h3>

<p>This function allows to create an 's2dv_cube' object by passing 
information through its parameters. This function will be needed if the data 
hasn't been loaded using CST_Start or has been transformed with other methods. 
An 's2dv_cube' object has many different components including metadata. This 
function will allow to create 's2dv_cube' objects even if not all elements 
are defined and for each expected missed parameter a warning message will be 
returned.
</p>


<h3>Usage</h3>

<pre><code class="language-R">s2dv_cube(
  data,
  coords = NULL,
  varName = NULL,
  metadata = NULL,
  Datasets = NULL,
  Dates = NULL,
  when = NULL,
  source_files = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A multidimensional array with named dimensions, typically with 
dimensions: dataset, member, sdate, time, lat and lon.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coords</code></td>
<td>
<p>A list of named vectors with the coordinates corresponding to 
the dimensions of the data parameter. If any coordinate has dimensions, they 
will be set as NULL. If any coordinate is not provided, it is set as an 
index vector with the values from 1 to the length of the corresponding 
dimension. The attribute 'indices' indicates wether the coordinate is an 
index vector (TRUE) or not (FALSE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varName</code></td>
<td>
<p>A character string indicating the abbreviation of the variable 
name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metadata</code></td>
<td>
<p>A named list where each element is a variable containing the
corresponding information. The information can be contained in a list of 
lists for each variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Datasets</code></td>
<td>
<p>Character strings indicating the names of the dataset. It 
there are multiple datasets it can be a vector of its names or a list of
lists with additional information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Dates</code></td>
<td>
<p>A POSIXct array of time dimensions containing the Dates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>when</code></td>
<td>
<p>A time stamp of the date when the data has been loaded. This 
parameter is also found in Load() and Start() functions output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>source_files</code></td>
<td>
<p>A vector of character strings with complete paths to all 
the found files involved in loading the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional elements to be added in the object. They will be 
stored in the end of 'attrs' element. Multiple elements are accepted.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The function returns an object of class 's2dv_cube' with the following 
elements in the structure:<br></p>

<ul>
<li>
<p>'data', array with named dimensions;
</p>
</li>
<li>
<p>'dims', named vector of the data dimensions;
</p>
</li>
<li>
<p>'coords', list of named vectors with the coordinates corresponding to 
the dimensions of the data parameter;
</p>
</li>
<li>
<p>'attrs', named list with elements:
</p>

<ul>
<li>
<p>'Dates', array with named temporal dimensions of class 'POSIXct' from 
time values in the data;
</p>
</li>
<li>
<p>'Variable', has the following components:
</p>

<ul>
<li>
<p>'varName', with the short name of the loaded variable as specified 
in the parameter 'var';
</p>
</li>
<li>
<p>'metadata', named list of elements with variable metadata. 
They can be from coordinates variables (e.g. longitude) or 
main variables (e.g. 'var');
</p>
</li>
</ul>
</li>
<li>
<p>'Datasets', character strings indicating the names of the dataset;
</p>
</li>
<li>
<p>'source_files', a vector of character strings with complete paths 
to all the found files involved in loading the data;
</p>
</li>
<li>
<p>'when', a time stamp of the date issued by the Start() or Load() 
call to obtain the data;
</p>
</li>
<li>
<p>'load_parameters', it contains the components used in the 
arguments to load the data from Start() or Load() functions.
</p>
</li>
</ul>
</li>
</ul>
<h3>Author(s)</h3>

<p>Perez-Zanon Nuria, <a href="mailto:nuria.perez@bsc.es">nuria.perez@bsc.es</a>
</p>


<h3>See Also</h3>

<p><code>Load</code> and <code>CST_Start</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">exp_original &lt;- 1:100
dim(exp_original) &lt;- c(lat = 2, time = 10, lon = 5)
exp1 &lt;- s2dv_cube(data = exp_original)
class(exp1)
coords &lt;- list(lon = seq(-10, 10, 5), lat = c(45, 50))
exp2 &lt;- s2dv_cube(data = exp_original, coords = coords) 
class(exp2)
metadata &lt;- list(tas = list(level = '2m'))
exp3 &lt;- s2dv_cube(data = exp_original, coords = coords,
                 varName = 'tas', metadata = metadata)
class(exp3)
Dates = as.POSIXct(paste0(rep("01", 10), rep("01", 10), 1990:1999), format = "%d%m%Y")
dim(Dates) &lt;- c(time = 10)
exp4 &lt;- s2dv_cube(data = exp_original, coords = coords,
                 varName = 'tas', metadata = metadata,
                 Dates = Dates)  
class(exp4)
exp5 &lt;- s2dv_cube(data = exp_original, coords = coords,
                 varName = 'tas', metadata = metadata,
                 Dates = Dates, when = "2019-10-23 19:15:29 CET")  
class(exp5)
exp6 &lt;- s2dv_cube(data = exp_original, coords = coords,
                 varName = 'tas', metadata = metadata,
                 Dates = Dates,
                 when = "2019-10-23 19:15:29 CET", 
                 source_files = c("/path/to/file1.nc", "/path/to/file2.nc"))
class(exp6)
exp7 &lt;- s2dv_cube(data = exp_original, coords = coords,
                 varName = 'tas', metadata = metadata,
                 Dates = Dates,
                 when = "2019-10-23 19:15:29 CET", 
                 source_files = c("/path/to/file1.nc", "/path/to/file2.nc"),
                 Datasets = list(
                   exp1 = list(InitializationsDates = list(Member_1 = "01011990", 
                                                           Members = "Member_1"))))  
class(exp7)
dim(exp_original) &lt;- c(dataset = 1, member = 1, time = 10, lat = 2, lon = 5)
exp8 &lt;- s2dv_cube(data = exp_original, coords = coords,
                 varName = 'tas', metadata = metadata,
                 Dates = Dates, original_dates = Dates)  
class(exp8)
</code></pre>


</div>