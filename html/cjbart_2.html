<div class="container">

<table style="width: 100%;"><tr>
<td>cjbart</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate Conjoint Model Using BART</h2>

<h3>Description</h3>

<p>A wrapper for the <code>BART::pbart()</code> function used for estimating heterogeneity in conjoint models
</p>


<h3>Usage</h3>

<pre><code class="language-R">cjbart(
  data,
  Y,
  type = NULL,
  id = NULL,
  round = NULL,
  use_round = TRUE,
  cores = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data.frame, containing all attributes, controls, the outcome and id variables to analyze.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Y</code></td>
<td>
<p>Character string – the outcome variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Type of conjoint experiment – either "choice" (for forced-choice outcomes) or "rating" (for interval ratings). If NULL (default), the function will attempt to automatically detect the outcome type.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>Character string – variable identifying individual respondents (optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>round</code></td>
<td>
<p>Character string – variable identifying rounds of the conjoint experiment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_round</code></td>
<td>
<p>Boolean – whether to include the round indicator column when training the BART model (default = <code>TRUE</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cores</code></td>
<td>
<p>Integer – number of CPU cores used in model training</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments passed to <code>BART::mc.pbart()</code> if on a Unix-based system</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Please note, Windows users cannot use the parallelized <code>BART::mc.pbart()</code> function, and so setting an internal seed will not be used.
</p>


<h3>Value</h3>

<p>A trained <code>BART::pbart()</code> model that can be passed to <code>IMCE()</code>
</p>


<h3>See Also</h3>

<p><code>BART::pbart()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">subjects &lt;- 5
rounds &lt;- 2
profiles &lt;- 2
obs &lt;- subjects*rounds*profiles

fake_data &lt;- data.frame(A = sample(c("a1","a2"), obs, replace = TRUE),
                        B = sample(c("b1","b2"), obs, replace = TRUE),
                        id1 = rep(1:subjects, each=rounds),
                        stringsAsFactors = TRUE)

fake_data$Y &lt;- sample(c(0,1), obs, replace = TRUE)

cj_model &lt;- cjbart(data = fake_data,
                   Y = "Y",
                   id = "id1")
</code></pre>


</div>