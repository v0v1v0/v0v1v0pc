<div class="container">

<table style="width: 100%;"><tr>
<td>cumulative</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sum of a weather variable between between two dates</h2>

<h3>Description</h3>

<p>Calculates the sum or total of daily values between two dates from
a tibble or data frame of daily weather data. Alternatively, a
number of days before or after a specific date may be
specified. Typically this is used for solar radiation, evaporation
or rainfall since the total rainfall, radiation or evaporation
during a specified period may prove useful for modelling yield or
plant growth.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cumulative(
  data,
  var = NULL,
  datevar = NULL,
  ndays = 5,
  na.rm = FALSE,
  startdate = NULL,
  enddate = NULL,
  monitor = FALSE,
  warn.consecutive = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Tibble or dataframe of daily weather data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>Variable(s) to be extracted (Default: radn). Several columns
may be specified using column names <code>c(variable1, variable2, ...)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datevar</code></td>
<td>
<p>Date variable specifying day (Default: date_met)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ndays</code></td>
<td>
<p>Number of days after/before the start or end date,
respectively. Ignored of both the start and end dates are
specified (Default: 5)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>Used for calculations (Default: FALSE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>startdate</code></td>
<td>
<p>Start date of data to be extracted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>enddate</code></td>
<td>
<p>Final date of data to be extracted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>monitor</code></td>
<td>
<p>For debugging. Prints data and dates. (Default:
FALSE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn.consecutive</code></td>
<td>
<p>A logical indicating whether to check that
dates are consecutive, that none are missing and provide a warning if
not (Default:TRUE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>options to be passed to <code>sum</code> calculation</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The sum is returned but if there are any missing values, then the
sum is set to <code>NA</code> since the default <code>na.rm</code> is
<code>TRUE</code>. Note that if there are any missing dates, then a
warning is issued but the sum of non-missing values is returned.
</p>
<p>If any values are missing, while the calculated sum or total may
prove useful, it will not include all the data and so may lead to
biased underestimates. Hence, in these cases it may be unlikely
that the sum is a good estimate but the appropriateness of the
estimate will depend on the exact circumstances of the missing
data and so this decision is left to the user.
</p>


<h3>Value</h3>

<p>Numeric variable containing the sum of all values of the
weather variable <code>var</code> during the specified period.
</p>


<h3>See Also</h3>

<p><code>sum</code>, <code>daily_mean</code>,
<code>growing_degree_days</code>,
<code>stress_days_over</code>, and
<code>weather_extract</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Selected calculations
## library(tidyverse)   # purrr used here for crop2 example
library(dplyr)
library(purrr)
cumulative(boonah, enddate = crop$flower_date[4], ndays = 3,
                    monitor = TRUE)
cumulative(boonah, enddate = crop$harvest_date[4], ndays = 3,
                    monitor = TRUE)
cumulative(boonah, startdate = crop$flower_date[4],
                    enddate = crop$harvest_date[4], monitor = TRUE)
cumulative(boonah, startdate = crop$flower_date[4],
                    enddate = crop$harvest_date[4])
cumulative(boonah, var = rain, startdate = crop$flower_date[4],
                    enddate = crop$harvest_date[4])

## Add selected totals of weather variables in 'boonah' to 'crop'' tibble
## using 'map2_dbl' from the 'purrr' package
## Note: using equivalent 'furrr' functions can speed up calculations 
crop2 &lt;- crop |&gt;
  dplyr::mutate(totalrain_post_sow_7d =
          purrr::map_dbl(sowing_date, function(x)
            cumulative(boonah, var = rain, startdate = x, ndays = 7)),
          totalrad_flower_harvest =
            purrr::map2_dbl(flower_date, harvest_date, function(x, y)
              cumulative(boonah, var = radn, startdate = x, enddate = y)))
crop2
</code></pre>


</div>