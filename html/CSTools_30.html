<div class="container">

<table style="width: 100%;"><tr>
<td>CST_MultivarRMSE</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Multivariate Root Mean Square Error (RMSE)</h2>

<h3>Description</h3>

<p>This function calculates the RMSE from multiple variables, as the 
mean of each variable's RMSE scaled by its observed standard deviation. 
Variables can be weighted based on their relative importance (defined by the 
user).
</p>


<h3>Usage</h3>

<pre><code class="language-R">CST_MultivarRMSE(
  exp,
  obs,
  weight = NULL,
  memb_dim = "member",
  dat_dim = "dataset",
  sdate_dim = "sdate",
  ftime_dim = "ftime"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>exp</code></td>
<td>
<p>A list of objects, one for each variable, of class <code>s2dv_cube</code> 
as returned by <code>CST_Anomaly</code> function, containing the anomaly of the 
seasonal forecast experiment data in the element named <code>$data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obs</code></td>
<td>
<p>A list of objects, one for each variable (in the same order than 
the input in 'exp') of class <code>s2dv_cube</code> as returned by 
<code>CST_Anomaly</code> function, containing the observed anomaly data in the 
element named <code>$data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>(optional) A vector of weight values to assign to each variable. 
If no weights are defined, a value of 1 is assigned to every variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>memb_dim</code></td>
<td>
<p>A character string indicating the name of the member 
dimension. It must be one dimension in 'exp' and 'obs'. The default value is 
'member'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dat_dim</code></td>
<td>
<p>A character string indicating the name of the dataset 
dimension. It must be one dimension in 'exp' and 'obs'. If there is no 
dataset dimension, it can be NULL. The default value is 'dataset'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sdate_dim</code></td>
<td>
<p>A character string indicating the name of the start date 
dimension. It must be one dimension in 'exp' and 'obs'. The default value is 
'sdate'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ftime_dim</code></td>
<td>
<p>A character string indicating the name of the forecast time 
dimension. It must be one dimension in 'exp' and 'obs'. The default value is 
'ftime'.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>s2dv_cube</code> containing the RMSE in the element 
<code>$data</code> which is an array with two datset dimensions equal to the 
'dataset' dimension in the <code>exp$data</code> and <code>obs$data</code> inputs. An 
array with dimensions: c(number of exp, number of obs, 1 (the multivariate 
RMSE value), number of lat, number of lon)
</p>


<h3>Author(s)</h3>

<p>Deborah Verfaillie, <a href="mailto:deborah.verfaillie@bsc.es">deborah.verfaillie@bsc.es</a>
</p>


<h3>See Also</h3>

<p><code>RMS</code> and <code>CST_Load</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Example with 2 variables
mod1 &lt;- abs(rnorm(1 * 3 * 4 * 5 * 6 * 7))
mod2 &lt;- abs(rnorm(1 * 3 * 4 * 5 * 6 * 7))
dim(mod1) &lt;- c(dataset = 1, member = 3, sdate = 4, ftime = 5, lat = 6, lon = 7)
dim(mod2) &lt;- c(dataset = 1, member = 3, sdate = 4, ftime = 5, lat = 6, lon = 7)
obs1 &lt;- abs(rnorm(1 * 1 * 4 * 5 * 6 * 7))
obs2 &lt;- abs(rnorm(1 * 1 * 4 * 5 * 6 * 7))
dim(obs1) &lt;- c(dataset = 1, member = 1, sdate = 4, ftime = 5, lat = 6, lon = 7)
dim(obs2) &lt;- c(dataset = 1, member = 1, sdate = 4, ftime = 5, lat = 6, lon = 7)
lon &lt;- seq(0, 30, 5)
lat &lt;- seq(0, 25, 5)
coords &lt;- list(lat = lat, lon = lon)
exp1 &lt;- list(data = mod1, coords = coords, 
            attrs = list(Datasets = "EXP1", source_files = "file1", 
                         Variable = list(varName = 'pre')))
exp2 &lt;- list(data = mod2, coords = coords, 
            attrs = list(Datasets = "EXP2", source_files = "file2", 
                         Variable = list(varName = 'tas')))
obs1 &lt;- list(data = obs1, coords = coords, 
            attrs = list(Datasets = "OBS1", source_files = "file1", 
                         Variable = list(varName = 'pre')))
obs2 &lt;- list(data = obs2, coords = coords, 
            attrs = list(Datasets = "OBS2", source_files = "file2", 
                         Variable = list(varName = 'tas')))
attr(exp1, 'class') &lt;- 's2dv_cube'
attr(exp2, 'class') &lt;- 's2dv_cube'
attr(obs1, 'class') &lt;- 's2dv_cube'
attr(obs2, 'class') &lt;- 's2dv_cube'
anom1 &lt;- CST_Anomaly(exp1, obs1, cross = TRUE, memb = TRUE)
anom2 &lt;- CST_Anomaly(exp2, obs2, cross = TRUE, memb = TRUE)
ano_exp &lt;- list(anom1$exp, anom2$exp)
ano_obs &lt;- list(anom1$obs, anom2$obs)
a &lt;- CST_MultivarRMSE(exp = ano_exp, obs = ano_obs, weight = c(1, 2))
</code></pre>


</div>