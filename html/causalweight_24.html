<div class="container">

<table style="width: 100%;"><tr>
<td>testmedident</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Test for identification in causal mediation and dynamic treatment models</h2>

<h3>Description</h3>

<p>This function tests for identification in causal mediation and dynamic treatment models based on covariates and instrumental variables using machine learning methods.
</p>


<h3>Usage</h3>

<pre><code class="language-R">testmedident(
  y,
  d,
  m = NULL,
  x,
  w = NULL,
  z1,
  z2 = NULL,
  testmediator = TRUE,
  seed = 123,
  MLmethod = "lasso",
  k = 3,
  zeta_sigma = min(0.5, 500/length(y))
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Outcome variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>Treatment variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>
<p>Mediator variable (optional).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Baseline covariates (prior to treatment assignment).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w</code></td>
<td>
<p>Post-treatment covariates (prior to mediator assignment, optional).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z1</code></td>
<td>
<p>Instrument for the treatment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z2</code></td>
<td>
<p>Instrument for the mediator (optional).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>testmediator</code></td>
<td>
<p>Logical indicating if the mediator should be used as dependent variable (in addition to outcome <code>y</code>) when testing if the effect of treatment <code>d</code> is identified. Default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Random seed for sample splitting in cross-fitting. Default is 123.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MLmethod</code></td>
<td>
<p>Machine learning method for estimating conditional outcome/mediator means required for testing. Default is "lasso".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>Number of cross-fitting folds. Default is 3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zeta_sigma</code></td>
<td>
<p>Tuning parameter defining the standard deviation of a random, mean zero, and normal variable that is added to the test statistic to avoid a degenerate distribution of test statistic under the null hypothesis. <code>zeta_sigma</code> gauges the trade-off between power and size of the test. Default is the minimum of 0.5 and 500/(# of observations).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function implements a hypothesis test for identifying causal effects in mediation and dynamic treatment models involving sequential assignment of treatment and mediator variables. The test jointly verifies the exogeneity/ignorability of treatment and mediator variables conditional on covariates and the validity of (distinct) instruments for the treatment and mediator (ignorability of instrument assignment and exclusion restriction). If the null hypothesis holds, dynamic and pathwise causal effects may be identified based on the sequential exogeneity/ignorability of the treatment and the mediator given the covariates. The function employs machine learning techniques to control for covariates in a data-driven manner.
</p>


<h3>Value</h3>

<p>A list with the following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>teststat</code></td>
<td>
<p>Test statistic.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>se</code></td>
<td>
<p>Standard error of the test statistic.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pval</code></td>
<td>
<p>Two-sided p-value of the test.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Huber, M., Kloiber, K., and Laff√©rs, L. (2024): "Testing identification in mediation and dynamic treatment models", arXiv preprint 2406.13826.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Example with simulated data in which null hypothesis holds
n=2000
x=rnorm(n)
z1=rnorm(n)
z2=rnorm(n)
d=1*(0.5*x+0.5*z1+rnorm(n)&gt;0)      # Treatment equation
m=0.5*x+0.5*d+0.5*z2+rnorm(n)      # Mediator equation
y=0.5*x+d+0.5*m+rnorm(n)           # Outcome equation
# Run test and report p-value
testmedident(y=y, d=d, m=m, x=x, z1=z1, z2=z2)$pval

## End(Not run)
</code></pre>


</div>