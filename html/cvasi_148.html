<div class="container">

<table style="width: 100%;"><tr>
<td>set_transfer</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Set transfer events</h2>

<h3>Description</h3>

<p>A <em>transfer</em> refers to an event where a certain amount of biomass (<em>BM</em>)
is moved to a new medium after a period of time. This feature replicates
a procedure occurring e.g. in Lemna effect studies and may be necessary to recreate
study results.
</p>


<h3>Usage</h3>

<pre><code class="language-R">set_transfer(x, interval, times, biomass, scaled_comp)

## S4 method for signature 'ANY'
set_transfer(x, interval, times, biomass, scaled_comp)

## S4 method for signature 'Transferable'
set_transfer(x, interval, times, biomass, scaled_comp)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>vector of <code>EffectScenario</code> objects</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interval</code></td>
<td>
<p>optional <code>numeric</code>, interval in time units of the scenario,
set to <code>-1</code> to disable transfers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>optional <code>numeric</code> vector of time points where transfers occur</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>biomass</code></td>
<td>
<p>optional <code>numeric</code> vector, amount of biomass that is being
transferred at each transfer</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scaled_comp</code></td>
<td>
<p>optional <code>character</code> vector of affected compartments
that are scaled according to new biomass levels</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Any transfer time point must also be an output time point. If a transfer
occurs, simulation results of that time point will report the model state
<strong>before</strong> the transfer. Be aware that in order to use transfers at regular
intervals, the simulation must start at time point zero.
</p>


<h4>Transferred biomass</h4>

<p>At each transfer, a defined amount of biomass is transferred to a new medium.
This is modeled by interrupting the simulation at a transfer time point, modifying
the biomass level <code>BM</code>, and scaling affected compartments according to new
biomass levels. Scaling of compartments depending on biomass, such as
<em>internal toxicant mass</em>, is necessary to correctly reflect mass balances and
concentrations over time.
</p>
<p>Transferred biomass is set using the <code>biomass</code> parameter. Is is either a
single numerical value in which case the same biomass level is set at each
transfer. Or it is a vector of numerical values with the same length as the
<code>times</code> parameter in which case a custom biomass level can be set for each
transfer. Multiple biomass levels can only be set in conjunction with
custom transfer time points.
</p>
<p>Some scenario types define default values for transferred biomass based
on common study set ups.
</p>



<h4>Regular and custom transfer time points</h4>

<p>Transfers can occur either in regular intervals of time or at selected, custom
time points. For regular intervals, the parameter <code>interval</code> is set to a single
numeric value which has the same unit as the scenario's time dimension. As an
example: if a scenario uses the unit of <em>days</em> for time, the transfer interval
is also specified in <em>days</em>:
</p>
<p>Transfers occurring at custom time points are set by passing a numerical vector
to the parameter <code>times</code>. The time points' units must match with the unit of
time in the scenario. A custom transfer time point <strong>must not occur at the
starting time point of a simulation</strong>.
</p>



<h4>Affected compartments</h4>

<p>Some compartments depend on biomass to correctly reflect mass balances and
concentrations over time, such as <em>internal toxicant mass</em>. These compartments
need to be scaled linearly to reflect the change in biomass levels.
The parameter <code>scaled_comp</code> accepts a character vector of compartment names
which are scaled at each transfer. This parameter should only be used with
custom, user-defined models. If no compartment needs to be scaled, set or
use the default value of <code>character(0)</code>.
</p>



<h3>Value</h3>

<p>Modified <code>EffectScenario</code> objects
</p>


<h3>See Also</h3>

<p><code>Lemna_Schmitt()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Simulate biomass transfer of 50 *g dw/mÂ²* at a regular interval of 7 *days*
metsulfuron %&gt;%
  set_transfer(interval=7, biomass=50) %&gt;%
  simulate()

# Simulate irregular biomass transfers occuring at days 5, 10, and 12
metsulfuron %&gt;%
  set_transfer(times=c(5,10,12), biomass=50) %&gt;%
  simulate()

# Simulate irregular transfers with changing amounts of transferred biomass
metsulfuron %&gt;%
  set_transfer(times=c(5,10,12), biomass=c(50,20,10)) %&gt;%
  simulate()
</code></pre>


</div>