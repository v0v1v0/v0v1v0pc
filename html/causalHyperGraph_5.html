<div class="container">

<table style="width: 100%;"><tr>
<td>causalHyperGraph</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Draw Causal Hypergraphs</h2>

<h3>Description</h3>

<p><code>causalHyperGraph()</code> draws causal hypergraphs based on solution formulas of configurational comparative methods 
as <a href="https://CRAN.R-project.org/package=cna"><span class="pkg">cna</span></a> or <a href="https://CRAN.R-project.org/package=QCA"><span class="pkg">QCA</span></a>. In contrast to a directed acyclic graph (DAG), edges of a hypergraph
can connect more than two nodes. <code>chg()</code> is a short form/alias of <code>causalHyperGraph()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">causalHyperGraph(
  x,
  show_formula = FALSE,
  formula_font = "Courier",
  formula_spaces = NULL,
  n = 10,
  ask = length(x) &gt; 1
)

chg(
  x,
  show_formula = FALSE,
  formula_font = "Courier",
  formula_spaces = NULL,
  n = 10,
  ask = length(x) &gt; 1
)

## S3 method for class 'causalHyperGraph'
plot(x, n = attr(x, "n"), ask = attr(x, "ask"), print = TRUE, ...)

## S3 method for class 'causalHyperGraph'
print(x, n = attr(x, "n"), ask = attr(x, "ask"), plot = TRUE, ...)

## S3 method for class 'causalHyperGraph'
x[i, ask = length(out) &gt; 1]

## S3 method for class 'causalHyperGraph'
c(..., n = 10, ask = length(out) &gt; 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A character vector containing atomic or complex solution formulas (asf or csf) in crisp-set (binary) 
or multi-value standard form.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_formula</code></td>
<td>
<p>Logical; if <code>TRUE</code>, the formula is printed below the graph.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula_font</code></td>
<td>
<p>Character string; specifies a font for the formula. The name of any available 
systemfont can be used.
The argument is only relevant if <code>show_formula=TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula_spaces</code></td>
<td>
<p>Character vector; the characters in this vector will be displayed with a space around them
in the formula. The argument is only relevant if <code>show_formula=TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>Positive integer; specifies the maximal number of graphs to render.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ask</code></td>
<td>
<p>Logical; if <code>TRUE</code>, the user is asked to hit &lt;Return&gt; before a new graph is drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print</code></td>
<td>
<p>Logical; if <code>TRUE</code>, <code>x</code> is printed to the console.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>Logical; if <code>TRUE</code>, <code>x</code> is rendered graphically (in addition to being printed to the console).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i</code></td>
<td>
<p>A vector (integer, character or logical) indicating elements to select.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The most common type of graph representing causal structures is
the directed acyclic graph (DAG) (cf. e.g. Spirtes et al. 2000).
Edges in DAGs connect exactly two nodes, and the edges
indicate the direction of causation. In contrast, 
edges in hypergraphs can connect more than two nodes and, thereby, represent more
than just the direction of causation. Causal hypergraphs represent causal complexity, that is, 
they depict the fact that often many causes need to be instantiated jointly, i.e. as a bundle,
in order for an effect to occur (which is known as <em>causal conjunctivity</em>) and 
that different bundles of causes can bring about an effect independently of one another on alternative
causal routes (<em>causal 
disjunctivity</em>). Hypergraphs are particularly useful for representing causal structures in the vein
of Mackie's (1974) INUS theory of causation, and modern variants thereof (Baumgartner &amp; Falk 2023).
</p>
<p>The methods designed to trace causal complexity in data are configurational 
comparative methods (CCMs), such as <a href="https://CRAN.R-project.org/package=cna"><span class="pkg">cna</span></a> (Baumgartner &amp; Ambühl 2020) and <a href="https://CRAN.R-project.org/package=QCA"><span class="pkg">QCA</span></a>
(Ragin 2008). Accordingly, the first argument of <code>causalHyperGraph()</code> is a character vector of  
CCM solution formulas in crisp-set (binary) or multi-value standard form (asf or csf).
CCM solution formulas are conjunctions of
biconditionals with minimized disjunctive normal forms (DNF) on the left-hand sides and single effects 
on the right-hand sides. Conjunction is expressed by "<code class="reqn">*</code>", disjunction by "+", negation by changing upper case into lower case letters
and vice versa, conditional by "<code class="reqn">\rightarrow</code>", and biconditional by "<code class="reqn">\leftrightarrow</code>". Examples are <code>(A*b + c*B &lt;-&gt; D)*(D + E &lt;-&gt; F)</code> or 
<code>(A=2*B=4 + A=3*B=1 &lt;-&gt; C=2)*(C=2*D=3 + C=1*D=4 &lt;-&gt; E=3)</code>.
</p>
<p>If the hypergraphs drawn by <code>causalHyperGraph()</code> have crisp-set (or fuzzy-set) factors only,
upper case "X" means X=1, lower case "x" stands for X=0, and "<code class="reqn">\diamond</code>" expresses 
that the value of the factor at the tail of the edge is negated. In case of hypergraphs with
multi-value factors, the relevant values of the factors are displayed at the tails and heads of the directed edges.
In all graphs, nodes whose exiting edges are
joined by "<code class="reqn">\bullet</code>" form a conjunction, and the tails of edges 
with the same head node (so-called "colliders") constitute a disjunction.
</p>
<p>The arguments <code>show_formula</code>, <code>formula_font</code>, and <code>formula_spaces</code> control the display
of the solution formula below the graph. <code>show_formula</code> 
determines whether the formula is printed, and <code>formula_font</code> specifies a font for the formula.
The argument <code>formula_spaces</code> identifies characters that are displayed with a space around them.
For example,  <code>formula_spaces = c("+", "&lt;-&gt;")</code> displays "+" and "<code class="reqn">\leftrightarrow</code>" with a space around them.
<code>formula_font</code> and <code>formula_spaces</code> only have an effect if <code>show_formula</code> is set to its 
non-default value <code>TRUE</code>. 
</p>
<p>The argument <code>n</code> specifies the maximal number of graphs to render. If the number
of graphs is larger than <code>n</code>,
only the first <code>n</code> graphs are drawn.
By means of the argument <code>ask</code> the rendering of the graphs can be paused. 
If <code>ask=TRUE</code>, the user is asked to hit &lt;Return&gt; before a new graph is drawn. 
If <code>ask=FALSE</code>, all <code>n</code> graphs are drawn at once.
</p>
<p>Formally, <code>causalHyperGraph()</code> returns a list of graphs of class 
“causalHyperGraph” produced using the <a href="https://CRAN.R-project.org/package=DiagrammeR"><span class="pkg">DiagrammeR</span></a> package. 
Such a list contains one or more graphs.
</p>
<p>The class “causalHyperGraph” has the following methods: <code>plot()</code> for rendering the graphs, 
<code>print()</code> for printing the solution formulas to the console and, optionally, graph rendering,
<code>c()</code> for concatenating several “causalHyperGraph” objects, and
<code>[]</code>/<code>subset()</code> for subsetting. By 
contrast, extraction of a single list element with <code>[[]]</code> or <code>$</code> does not return anything useful.
</p>
<p>Hint: Use <code>length(x)</code> to query the number of graphs in an object of class “causalHyperGraph”.
</p>


<h3>Value</h3>

<p><code>causalHyperGraph()</code> returns a list of class “causalHyperGraph” containing one or several graphs.
</p>


<h3>References</h3>

<p>Baumgartner, Michael and Christoph Falk. 2023. Boolean Difference-Making: A Modern
Regularity Theory of Causation. <em>The British Journal for the Philosophy of Science</em> 74(1):171–197.
</p>
<p>Baumgartner, Michael and Mathias Ambühl. 2020. Causal Modeling with Multi-Value and Fuzzy-Set Coincidence Analysis.
<em>Political Science Research and Methods</em> 8:526–542.
</p>
<p>Mackie, John L. 1974. <em>The Cement of the Universe: A Study of Causation.</em> Oxford: Oxford University Press.
</p>
<p>Ragin, Charles C. 2008. <em>Redesigning Social Inquiry: Fuzzy Sets and Beyond.</em> Chicago: University of Chicago Press.
</p>
<p>Spirtes, Peter, Clark Glymour and Richard Scheines. 2000. <em>Causation, Prediction, and Search</em>. 2 ed. Cambridge: MIT Press.
</p>


<h3>See Also</h3>

<p><code>export_as_svg</code>, and the methods described in <code>plot.cna</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(cna)  # required for randomAsf(), randomCsf(), and allCombs()

x &lt;- "(A+B&lt;-&gt;C)*(B+D&lt;-&gt;E)"
causalHyperGraph(x)
chg(x)

# Input of length &gt; 1
x &lt;- c("(A*b+a*B&lt;-&gt;C)*(C+f&lt;-&gt;E)", "(A*B+a*b&lt;-&gt;C)*(C+F&lt;-&gt;E)")
gr1 &lt;- causalHyperGraph(x)
gr1
# Suppress plotting.
print(gr1, plot = FALSE)

# Outcomes can be negated.
chg("(A+B&lt;-&gt;c)*(c+F&lt;-&gt;E)")

# Negative outcomes that appear positively downstream are rendered
# with double negation in the resulting hypergraph.
chg("(A+B&lt;-&gt;c)*(C+F&lt;-&gt;E)")

# Random formula.
x &lt;- randomCsf(6, n.asf = 2)
chg(x, show_formula = TRUE)
# Change the font of the formula.
chg(x, show_formula = TRUE, formula_font = "arial")
# Change the spacing.
chg(x, show_formula = TRUE, formula_spaces = c("+", "&lt;-&gt;"))

# Multi-value formula.
x &lt;- "(C=1*G=0 + T=1*A=0 + T=2*G=3 &lt;-&gt; P=1)*(P=1*M=0 + F=1 &lt;-&gt; D=1)"
causalHyperGraph(x)

# Random multi-value formula with 3 outcomes.
x &lt;- randomCsf(allCombs(c(3,3,3,3,3,3)), n.asf = 3)
gr2 &lt;- causalHyperGraph(x)
gr2

# Random multi-value formula with a random number of outcomes.  
y &lt;- randomCsf(allCombs(c(3,4,3,5,3,4)))
gr3 &lt;- chg(y, show_formula = TRUE)
gr3

# Concatenation.
gr4 &lt;- c(gr1,gr2,gr3)
plot(gr4)

# Subsetting.
gr5 &lt;- gr4[c(1,4)]
plot(gr5)

# Longer factor names.
x &lt;- paste("(Test1=1*Test2=3+Test3=2 &lt;-&gt; Out1=2)", 
           "(Out1=1*TestN=5 &lt;-&gt; Out2=3)", 
           "(TestN=4+TestK=1*Out2=1 &lt;-&gt; Out3=5)", 
           sep = "*")
chg(x)

</code></pre>


</div>