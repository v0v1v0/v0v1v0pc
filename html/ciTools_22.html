<div class="container">

<table style="width: 100%;"><tr>
<td>add_quantile</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add Regression Quantiles to Data Frames</h2>

<h3>Description</h3>

<p>This is a generic function to append regression quantiles to a data
frame. A regression quantile <em>q</em> is a point such that
<code class="reqn">Pr(Response | Covariates &lt; q) = p</code>. These quantiles are
generated for the fitted value of each observation in
<code>df</code>. Quantiles are then appended to <code>df</code> and returned to
the user as a data frame.
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_quantile(df, fit, p = 0.5, name = NULL, yhatName = "pred", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A data frame of new data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>An object of class <code>lm</code>, <code>glm</code>, or
<code>lmerMod</code>. Predictions are made with this object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>A double. A probability that determines the quantile. Must
be between 0 and 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p><code>NULL</code> or a string. If <code>NULL</code>,
quantiles automatically will be named by <code>add_quantile()</code>,
otherwise, the quantiles will be named <code>name</code> in the
returned data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yhatName</code></td>
<td>
<p>A string. Name of the vector of predictions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For more specific information about the arguments that are applicable
for each type of model, consult:
</p>

<ul>
<li> <p><code>add_quantile.lm</code> for linear regression response quantiles
</p>
</li>
<li> <p><code>add_quantile.glm</code> for generalized linear regression response quantiles
</p>
</li>
<li> <p><code>add_quantile.lmerMod</code> for linear mixed models response quantiles
</p>
</li>
<li> <p><code>add_quantile.glmerMod</code> for generalized linear mixed models response quantiles
</p>
</li>
<li> <p><code>add_quantile.survreg</code> for accelerated failure time response quantiles
</p>
</li>
</ul>
<p>Note: Except in <code>add_ci.survreg</code>, the quantiles that
<code>add_quantile</code> calculates are on the distribution of
<code class="reqn">Y|x</code>, not <code class="reqn">E[Y|x]</code>. That is, they use the same
distribution that determines a prediction interval, not the
distribution that determines a confidence interval.
</p>


<h3>Value</h3>

<p>A dataframe, <code>df</code>, with predicted values and
level-<em>p</em> quantiles attached.
</p>


<h3>See Also</h3>

<p><code>add_ci</code> for confidence intervals,
<code>add_probs</code> for response level probabilities, and
<code>add_pi</code> for prediction intervals
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Fit a linear model
fit &lt;- lm(dist ~ speed, data = cars)

# Find the 0.4 quantile (or 40th percentile) of new distances for
# each observations in cars, conditioned on the linear model.
add_quantile(cars, fit, p = 0.4)

# Fit a Poisson model
fit2 &lt;- glm(dist ~ speed, family = "poisson", data = cars)
# Find the 0.4 quantile (or 40th percentile) of new distances for
# each observation in cars, conditioned on the Poisson model.
add_quantile(cars, fit2, p = 0.4)

# Fit a random intercept linear mixed model
fit3 &lt;- lme4::lmer(Reaction ~ Days + (1|Subject), data = lme4::sleepstudy)
# Find the 0.4 quantile (or 40 percentile) of reaction times for
# each observation in the sleepstudy data. Condition on the model and random effects.
add_quantile(lme4::sleepstudy, fit3, p = 0.4, type = "parametric")


</code></pre>


</div>