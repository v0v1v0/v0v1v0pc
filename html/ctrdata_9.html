<div class="container">

<table style="width: 100%;"><tr>
<td>dbFindFields</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Find names of fields in the database collection</h2>

<h3>Description</h3>

<p>Given part of the name of a field of interest to the user, this
function returns the full field names used in records that were
previously loaded into a collection
(using ctrLoadQueryIntoDb). Only names of fields that have
a value in the collection can be returned.
Set <code>sample = FALSE</code> to force screening all records in the
collection for field names, see below.
</p>


<h3>Usage</h3>

<pre><code class="language-R">dbFindFields(namepart = ".*", con, sample = TRUE, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>namepart</code></td>
<td>
<p>A character string (can be a regular expression,
including Perl-style) to be searched among all field names (keys)
in the collection, case-insensitive. The default '".*"' lists all fields.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>con</code></td>
<td>
<p>A connection object, see section
'Databases' in ctrdata.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample</code></td>
<td>
<p>If <code>TRUE</code> (default), uses a sample of only 5 trial
records per register to identify fields, to rapidly return a possibly
incomplete set of field names.
If <code>FALSE</code>, uses all trial records in the collection, which will
take more time with more trials but ensures to returns all names of
all fields in the collection.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>If <code>TRUE</code>, prints additional information
(default <code>FALSE</code>).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The full names of child fields are returned in dot notation (e.g.,
<code>clinical_results.outcome_list.outcome.measure.class_list.class.title</code>)
In addition, names of parent fields (e.g.,
<code>clinical_results</code>) are returned.
Data in parent fields is typically complex (nested), see
dfTrials2Long for easily handling it.
For field definitions of the registers, see
"Definition" in ctrdata-registers.
Note: When <code>dbFindFields</code> is first called after
ctrLoadQueryIntoDb, it will take a moment.
</p>


<h3>Value</h3>

<p>Vector of strings with full names of field(s) found,
ordered by register and alphabet, see examples. Names of the vector
are the names of the register holding the respective fields. The field
names can be fed into dbGetFieldsIntoDf to extract the
data for the field(s) from the collection into a data frame.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
dbc &lt;- nodbi::src_sqlite(
    dbname = system.file("extdata", "demo.sqlite", package = "ctrdata"),
    collection = "my_trials"
)

dbFindFields(namepart = "date", con = dbc)[1:5]

# view all 3350+ fields from all registers:

allFields &lt;- dbFindFields(con = dbc, sample = FALSE)

if (interactive()) View(data.frame(
  register = names(allFields),
  field = allFields))

</code></pre>


</div>