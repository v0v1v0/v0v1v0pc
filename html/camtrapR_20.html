<div class="container">

<table style="width: 100%;"><tr>
<td>detectionMaps</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate maps of observed species richness and species presences by station</h2>

<h3>Description</h3>

<p>Generates maps of observed species richness and species presence by species
and station. Output can be R graphics, PNG graphics or a shapefile for use
in GIS software.
</p>


<h3>Usage</h3>

<pre><code class="language-R">detectionMaps(
  CTtable,
  recordTable,
  Xcol,
  Ycol,
  backgroundPolygon,
  stationCol = "Station",
  speciesCol = "Species",
  speciesToShow,
  richnessPlot = TRUE,
  speciesPlots = TRUE,
  addLegend = TRUE,
  printLabels = FALSE,
  smallPoints,
  plotR = TRUE,
  writePNG = FALSE,
  plotDirectory,
  createPlotDir = FALSE,
  pngMaxPix = 1000,
  writeShapefile = FALSE,
  shapefileName,
  shapefileDirectory,
  shapefileProjection
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>CTtable</code></td>
<td>
<p>data.frame. contains station IDs and coordinates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recordTable</code></td>
<td>
<p>data.frame. the record table created by
<code>recordTable</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Xcol</code></td>
<td>
<p>character. name of the column specifying x coordinates in
<code>CTtable</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Ycol</code></td>
<td>
<p>character. name of the column specifying y coordinates in
<code>CTtable</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>backgroundPolygon</code></td>
<td>
<p>SpatialPolygons or SpatialPolygonsDataFrame.
Polygon to be plotted in the background of the map (e.g. project area
boundary)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stationCol</code></td>
<td>
<p>character. name of the column specifying station ID in
<code>CTtable</code> and <code>recordTable</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>speciesCol</code></td>
<td>
<p>character. name of the column specifying species in
<code>recordTable</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>speciesToShow</code></td>
<td>
<p>character. Species to include in the maps. If missing,
all species in <code>recordTable</code> will be included.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>richnessPlot</code></td>
<td>
<p>logical. Generate a species richness plot?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>speciesPlots</code></td>
<td>
<p>logical. Generate plots of all species number of
independent events?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addLegend</code></td>
<td>
<p>logical. Add legends to the plots?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>printLabels</code></td>
<td>
<p>logical. Add station labels to the plots?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smallPoints</code></td>
<td>
<p>numeric. Number by which to decrease point sizes in plots
(optional).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotR</code></td>
<td>
<p>logical. Create plots in R graphics device?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>writePNG</code></td>
<td>
<p>logical. Create PNGs of the plots?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotDirectory</code></td>
<td>
<p>character. Directory in which to save the PNGs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>createPlotDir</code></td>
<td>
<p>logical. Create <code>plotDirectory</code>?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pngMaxPix</code></td>
<td>
<p>integer. number of pixels in pngs on the longer side</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>writeShapefile</code></td>
<td>
<p>logical. Create a shapefile from the output?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shapefileName</code></td>
<td>
<p>character. Name of the shapefile to be saved. If empty,
a name will be generated automatically.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shapefileDirectory</code></td>
<td>
<p>character. Directory in which to save the
shapefile.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shapefileProjection</code></td>
<td>
<p>character. A character string of projection
arguments to use in the shapefile.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The column name <code>stationCol</code> must be identical in <code>CTtable</code> and
<code>recordTable</code> and station IDs must match.
</p>
<p>Shapefile creation depends on the packages <span class="pkg">sf</span>.
Argument <code>shapefileProjection</code> must be a valid argument of
<code>st_crs</code> (one of (i) character: a string accepted by GDAL, 
(ii) integer, a valid EPSG value (numeric), or (iii) an object of class crs.
If <code>shapefileProjection</code> is undefined,
the resulting shapefile will lack a coordinate reference system.
</p>


<h3>Value</h3>

<p>An invisible <code>data.frame</code> with station coordinates, numbers of
events by species at each station and total species number by station. In
addition and optionally, R graphics or png image files.
</p>


<h3>Author(s)</h3>

<p>Juergen Niedballa
</p>


<h3>References</h3>

<p>A great resource for coordinate system information
is <a href="https://spatialreference.org/">https://spatialreference.org/</a>. Use the Proj4 string as
<code>shapefileProjection</code> argument.
</p>


<h3>Examples</h3>

<pre><code class="language-R">

# load station information
data(camtraps)

# load record table
data(recordTableSample)


# create maps
Mapstest &lt;- detectionMaps(CTtable           = camtraps,
                          recordTable       = recordTableSample,
                          Xcol              = "utm_x",
                          Ycol              = "utm_y",
                          stationCol        = "Station",
                          speciesCol        = "Species",
                          writePNG          = FALSE,
                          plotR             = TRUE,
                          printLabels       = TRUE,
                          richnessPlot      = TRUE,
                          addLegend         = TRUE
)



# with a polygon in the background, and for one species only

# make a dummy polygon for the background
library(sf)

Sr1 = st_polygon(list(cbind(c(521500,526500,527000, 521500, 521500),
                            c(607500, 608000, 603500, 603500, 607500))))
aoi &lt;- data.frame(name = "My AOI")
st_geometry(aoi) &lt;- st_geometry(Sr1)
st_crs(aoi) &lt;- 32650  # assign CRS: UTM50N

Mapstest2 &lt;- detectionMaps(CTtable           = camtraps,
                           recordTable       = recordTableSample,
                           Xcol              = "utm_x",
                           Ycol              = "utm_y",
                           backgroundPolygon = aoi,               # this was added
                           speciesToShow     = c("PBE", "VTA"),   # this was added
                           stationCol        = "Station",
                           speciesCol        = "Species",
                           writePNG          = FALSE,
                           plotR             = TRUE,
                           printLabels       = TRUE,
                           richnessPlot      = TRUE,
                           addLegend         = TRUE
)




</code></pre>


</div>