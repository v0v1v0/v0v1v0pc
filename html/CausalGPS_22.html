<div class="container">

<table style="width: 100%;"><tr>
<td>estimate_gps</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate generalized propensity score (GPS) values</h2>

<h3>Description</h3>

<p>Estimates GPS value for each observation using normal or kernel
approaches.
</p>


<h3>Usage</h3>

<pre><code class="language-R">estimate_gps(
  .data,
  .formula,
  gps_density = "normal",
  sl_lib = c("SL.xgboost"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>A data frame of observed continuous exposure variable and
observed covariates variable. Also includes <code>id</code> column for future
references.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.formula</code></td>
<td>
<p>A formula specifying the relationship between the exposure
variable and the covariates. For example, w ~ I(cf1^2) + cf2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gps_density</code></td>
<td>
<p>Model type which is used for estimating GPS value,
including <code>normal</code> (default) and <code>kernel</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sl_lib</code></td>
<td>
<p>A vector of prediction algorithms to be used by the
SuperLearner packageg.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to the model.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The function returns a S3 object. Including the following:
</p>

<ul>
<li> <p><code>.data </code>: <code>id</code>, <code>exposure_var</code>, <code>gps</code>, <code>e_gps_pred</code>, <code>e_gps_std_pred</code>,
<code>w_resid</code>
</p>
</li>
<li> <p><code>params</code>: Including the following fields:
</p>

<ul>
<li>
<p> gps_mx (min and max of gps)
</p>
</li>
<li>
<p> w_mx (min and max of w).
</p>
</li>
<li>
<p> .formula
</p>
</li>
<li>
<p> gps_density
</p>
</li>
<li>
<p> sl_lib
</p>
</li>
<li>
<p> fcall (function call)
</p>
</li>
</ul>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
m_d &lt;- generate_syn_data(sample_size = 100)
data_with_gps &lt;- estimate_gps(.data = m_d,
                              .formula = w ~ cf1 + cf2 + cf3 + cf4 + cf5 + cf6,
                              gps_density = "normal",
                              sl_lib = c("SL.xgboost")
                             )

</code></pre>


</div>