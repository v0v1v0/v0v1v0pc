<div class="container">

<table style="width: 100%;"><tr>
<td>class-methods</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Classes and Methods for a Compound Poisson Linear Model Object</h2>

<h3>Description</h3>

<p>Documented here are the <code>"cplm"</code> class and its derived classes <code>"cpglm"</code>, <code>"cpglmm"</code>, and <code>"bcplm"</code>. Several primitive methods and statistical methods are created to facilitate the extraction of specific slots and further statistical analysis. <code>"gini"</code> is a class that stores the Gini indices and associated standard errors that could be used to perform model comparison involving the compound Poisson distribution. <code>"NullNum"</code>,  <code>"NullList"</code>, <code>"NullFunc"</code> and <code>"ListFrame"</code> are virtual classes for <code>c("NULL", "numeric")</code>, <code>c("NULL","list")</code>, <code>c("NULL","function")</code> and <code>c("list","data.frame")</code>, respectively. 
</p>


<h3>Objects from the Class</h3>


<dl>
<dt><code>"cplm"</code></dt>
<dd>
<p>Objects can be created by calls of the form <code>new("cplm", ...)</code>.</p>
</dd> 
<dt><code>"cpglm"</code></dt>
<dd>
<p>Objects can be created by calls from <code>new("cpglm", ...)</code> or <code>cpglm</code>.</p>
</dd> 
<dt><code>"cpglmm"</code></dt>
<dd>
<p>Objects can be created by calls of the form <code>new("cpglmm", ...)</code>, or a call to <code>cpglmm</code>.</p>
</dd>
<dt><code>"summary.cpglmm"</code></dt>
<dd>
<p>Objects can be created by calls of the form <code>new("summary.cpglmm", ...)</code>, or a call to <code>summary</code> on a <code>cpglmm</code> object. </p>
</dd>
<dt><code>"bcplm"</code></dt>
<dd>
<p>Objects can be created by calls from <code>new("bcplm", ...)</code> or <code>bcplm</code>.</p>
</dd>
<dt><code>"gini"</code></dt>
<dd>
<p>Objects can be created by calls from <code>new("gini", ...)</code> or <code>gini</code>.</p>
</dd>  
<dt>
<code>"NullNum"</code>, <code>"NullList"</code>, <code>"NullFunc"</code>
</dt>
<dd>
<p>These are  virtual classes and  no objects may be created from them.</p>
</dd>
</dl>
<h3>Slots</h3>

<p>The <code>"cplm"</code> class defines the slots common in all the model classes in the <code>cplm</code> package, and thus the utility methods defined on the <code>"cplm"</code> class such as <code>[</code>, <code>names</code> and so on are applicable to all of the derived classes. 
</p>

<dl>
<dt>
<code>call</code>:</dt>
<dd>
<p>the matched call. </p>
</dd>
<dt>
<code>formula</code>:</dt>
<dd>
<p>the formula supplied, class <code>"formula"</code></p>
</dd>
<dt>
<code>contrasts</code>:</dt>
<dd>
<p>the contrasts used, class <code>"NullList"</code> </p>
</dd>
<dt>
<code>link.power</code>:</dt>
<dd>
<p>index of power link function, class <code>"numeric"</code>. See <code>tweedie</code>.</p>
</dd>
<dt>
<code>model.frame</code>:</dt>
<dd>
<p>the data frame used. class <code>"ListFrame"</code>. </p>
</dd>
<dt>
<code>inits</code>:</dt>
<dd>
<p>initial values used, class <code>"NullList"</code>.</p>
</dd>
</dl>
<p>The <code>"cpglm"</code> class extends <code>"cplm"</code> directly. Most of the slots have the same definition as those in <code>glm</code>.  The following slots are in addition to those in <code>"cplm"</code>:
</p>

<dl>
<dt>
<code>coefficients</code>:</dt>
<dd>
<p>estimated mean parameters, class <code>"numeric"</code>. </p>
</dd>
<dt>
<code>residuals</code>:</dt>
<dd>
<p>the working residuals, that is the residuals in the final iteration of the IWLS fit, class <code>"numeric"</code></p>
</dd>
<dt>
<code>fitted.values</code>:</dt>
<dd>
<p>the fitted mean values, obtained by transforming the linear predictors by the inverse of the link function, class <code>"numeric"</code> </p>
</dd>
<dt>
<code>linear.predictors</code>:</dt>
<dd>
<p>the fitted linear predictors, class <code>"numeric"</code></p>
</dd>    
<dt>
<code>weights</code>:</dt>
<dd>
<p>working weights from the last iteration of the iterative least square, class <code>"numeric"</code></p>
</dd>
<dt>
<code>df.residual</code>:</dt>
<dd>
<p>residual degrees of freedom, class <code>"integer"</code></p>
</dd>
<dt>
<code>deviance</code>:</dt>
<dd>
<p>up to a constant, minus twice the maximized log-likelihood. Where sensible, the constant is chosen so that a saturated model has deviance zero. This is computed using <code>tweedie.dev</code>.</p>
</dd>
<dt>
<code>aic</code>:</dt>
<dd>
<p>a version of Akaike's Information Criterion, minus twice the maximized log-likelihood plus twice the number of mean parameters. This is computed using the tweedie density approximation as in <code>dtweedie</code>. </p>
</dd>
<dt>
<code>offset</code>:</dt>
<dd>
<p>the offset vector used, class <code>"NullNum"</code>,</p>
</dd> 
<dt>
<code>prior.weights</code>:</dt>
<dd>
<p>the weights initially supplied, a vector of <code>1</code>s if none were, class <code>"NullNum"</code></p>
</dd>        
<dt>
<code>y</code>:</dt>
<dd>
<p>the response vector used.</p>
</dd>
<dt>
<code>control</code>:</dt>
<dd>
<p>the value of the control argument used, class <code>"list"</code> </p>
</dd>
<dt>
<code>p</code>:</dt>
<dd>
<p>the maximum likelihood estimate of the index parameter.</p>
</dd>    
<dt>
<code>phi</code>:</dt>
<dd>
<p>the maximum likelihood estimate of the dispersion parameter.</p>
</dd>    
<dt>
<code>vcov</code>:</dt>
<dd>
<p>estimated variance-covariance matrix, class <code>"matrix"</code></p>
</dd>    
<dt>
<code>iter</code>:</dt>
<dd>
<p>the number of Fisher's scoring iterations in the final GLM.</p>
</dd>
<dt>
<code>converged</code>:</dt>
<dd>
<p>indicating whether the algorithm has converged, class <code>"logical"</code>.</p>
</dd>
<dt>
<code>na.action</code>:</dt>
<dd>
<p>method of handling <code>NA</code>'s, class <code>"NullFunc"</code>.</p>
</dd>
</dl>
<p>The  <code>"cpglmm"</code> class extends <code>"cplm"</code> and the old version of <code>"mer"</code> class from <code>lme4</code> directly, and has the following additional slots:
</p>

<dl>
<dt>
<code>p</code>:</dt>
<dd>
<p>estimated value of the index parameter, class <code>"numeric"</code>  </p>
</dd>
<dt>
<code>phi</code>:</dt>
<dd>
<p>estimated value of the dispersion parameter, class <code>"numeric"</code> </p>
</dd>
<dt>
<code>bound.p</code>:</dt>
<dd>
<p>the specified bounds of the index parameter, class <code>"numeric"</code>   </p>
</dd>
<dt>
<code>vcov</code>:</dt>
<dd>
<p>estimated variance-covariance matrix, class <code>"matrix"</code></p>
</dd>
<dt>
<code>smooths</code>:</dt>
<dd>
<p>a list of smooth terms</p>
</dd>
</dl>
<p>The slots it used from the old <code>"mer"</code> class has the following slots (copied from <code>lme4_0.999999-2</code>):
</p>

<dl>
<dt>
<code>env</code>:</dt>
<dd>
<p>An environment (class <code>"environment"</code>)
created for the evaluation of the nonlinear model function. </p>
</dd>
<dt>
<code>nlmodel</code>:</dt>
<dd>
<p>The nonlinear model function as an object of
class <code>"call"</code>. </p>
</dd>
<dt>
<code>frame</code>:</dt>
<dd>
<p>The model frame (class <code>"data.frame"</code>).</p>
</dd>
<dt>
<code>call</code>:</dt>
<dd>
<p>The matched call to the function that
created the object. (class <code>"call"</code>).</p>
</dd>
<dt>
<code>flist</code>:</dt>
<dd>
<p>The list of grouping factors for the random
effects.</p>
</dd>
<dt>
<code>X</code>:</dt>
<dd>
<p>Model matrix for the fixed effects. </p>
</dd>
<dt>
<code>Zt</code>:</dt>
<dd>
<p>The transpose of model matrix for the random
effects, stored as a compressed column-oriented sparse matrix (class
<code>"dgCMatrix"</code>).</p>
</dd>
<dt>
<code>pWt</code>:</dt>
<dd>
<p>Numeric prior weights vector. This may be of length
zero (0), indicating unit prior weights.</p>
</dd>
<dt>
<code>offset</code>:</dt>
<dd>
<p>Numeric offset vector. This may be of length
zero (0), indicating no offset.</p>
</dd>
<dt>
<code>y</code>:</dt>
<dd>
<p>The response vector (class <code>"numeric"</code>).</p>
</dd>
<dt>
<code>Gp</code>:</dt>
<dd>
<p>Integer vector of group pointers within the random
effects vector.  The elements of <code>Gp</code> are 0-based indices of
the first element from each random-effects term.  Thus the first
element is always 0.  The last element is the total length of the
random effects vector.</p>
</dd>
<dt>
<code>dims</code>:</dt>
<dd>
<p>A named integer vector of dimensions.  Some of
the dimensions are <code class="reqn">n</code>, the number of observations, <code class="reqn">p</code>, the
number of fixed effects, <code class="reqn">q</code>, the total number of random
effects, <code class="reqn">s</code>, the number of parameters in the nonlinear model
function and <code class="reqn">nt</code>, the number of random-effects terms in the
model.</p>
</dd>
<dt>
<code>ST</code>:</dt>
<dd>
<p>A list of S and T factors in the TSST' Cholesky
factorization of the relative variance matrices of the random
effects associated with each random-effects term.  The unit lower
triangular matrix, <code class="reqn">T</code>, and the diagonal matrix, <code class="reqn">S</code>, for
each term are stored as a single matrix with diagonal elements
from <code class="reqn">S</code> and off-diagonal elements from <code class="reqn">T</code>.</p>
</dd>
<dt>
<code>V</code>:</dt>
<dd>
<p>Numeric gradient matrix (class <code>"matrix"</code>) of
the nonlinear model function.</p>
</dd>
<dt>
<code>A</code>:</dt>
<dd>
<p>Scaled sparse model matrix (class
<code>"dgCMatrix"</code>) for
the the unit, orthogonal random effects, <code class="reqn">U</code>.</p>
</dd>
<dt>
<code>Cm</code>:</dt>
<dd>
<p>Reduced, weighted sparse model matrix (class
<code>"dgCMatrix"</code>) for the
unit, orthogonal random effects, U.  .</p>
</dd>
<dt>
<code>Cx</code>:</dt>
<dd>
<p>The <code>"x"</code> slot in the weighted sparse model
matrix (class <code>"dgCMatrix"</code>)
for the unit, orthogonal random effects, <code class="reqn">U</code>, in generalized
linear mixed models.  For these models the matrices <code class="reqn">A</code> and
<code class="reqn">C</code> have the same sparsity pattern and only the <code>"x"</code>
slot of <code class="reqn">C</code> needs to be stored.</p>
</dd>
<dt>
<code>L</code>:</dt>
<dd>
<p>The sparse lower Cholesky factor of <code class="reqn">P(AA'+I)P'</code>
(class <code>"dCHMfactor"</code>) where <code class="reqn">P</code>
is the fill-reducing permutation calculated from the pattern of
nonzeros in <code class="reqn">A</code>.</p>
</dd>
<dt>
<code>deviance</code>:</dt>
<dd>
<p>Named numeric vector containing the deviance
corresponding to the maximum likelihood (the <code>"ML"</code> element)
and <code>"REML"</code> criteria and various components. The
<code>"ldL2"</code> element is twice the logarithm of the determinant of
the Cholesky factor in the <code>L</code> slot. The <code>"usqr"</code>
component is the value of the random-effects quadratic form.</p>
</dd>
<dt>
<code>fixef</code>:</dt>
<dd>
<p>Numeric vector of fixed effects.</p>
</dd>
<dt>
<code>ranef</code>:</dt>
<dd>
<p>Numeric vector of random effects on the
original scale.</p>
</dd>
<dt>
<code>u</code>:</dt>
<dd>
<p>Numeric vector of orthogonal, constant variance,
random effects.</p>
</dd>
<dt>
<code>eta</code>:</dt>
<dd>
<p>The linear predictor at the current values of the
parameters and the random effects.</p>
</dd>
<dt>
<code>mu</code>:</dt>
<dd>
<p>The means of the responses at the current parameter
values.</p>
</dd>
<dt>
<code>muEta</code>:</dt>
<dd>
<p>The diagonal of the Jacobian of <code class="reqn">\mu</code>
by <code class="reqn">\eta</code>.  Has length zero (0) except for generalized
mixed models.</p>
</dd>
<dt>
<code>var</code>:</dt>
<dd>
<p>The diagonal of the conditional variance of
<code class="reqn">Y</code> given the random effects, up to prior weights.  In
generalized mixed models this is the value of the variance
function for the <code>glm</code> family.</p>
</dd>
<dt>
<code>resid</code>:</dt>
<dd>
<p>The residuals, <code class="reqn">y - \mu</code>, weighted by
the <code>sqrtrWt</code> slot (when its length is <code class="reqn">&gt;0</code>).</p>
</dd>
<dt>
<code>sqrtXWt</code>:</dt>
<dd>
<p>The square root of the weights applied to the
model matrices <code class="reqn">X</code> and <code class="reqn">Z</code>. This may be of length zero
(0), indicating unit weights.</p>
</dd>
<dt>
<code>sqrtrWt</code>:</dt>
<dd>
<p>The square root of the weights applied to the
residuals to obtain the weighted residual sum of squares. This may
be of length zero (0), indicating unit weights.</p>
</dd>
<dt>
<code>RZX</code>:</dt>
<dd>
<p>The dense solution (class <code>"matrix"</code>) to
<code class="reqn">L RZX = ST'Z'X = AX</code>.</p>
</dd>
<dt>
<code>RX</code>:</dt>
<dd>
<p>The upper Cholesky factor (class <code>"matrix"</code>)
of the downdated <code class="reqn">X'X</code>.</p>
</dd>
</dl>
<p>The <code>"summary.cpglmm"</code> class <em>contains</em> the <code>"cpglmm"</code>
class and has the following additional slots:
</p>

<dl>
<dt>
<code>methTitle</code>:</dt>
<dd>
<p>character string specifying a method title</p>
</dd>
<dt>
<code>logLik</code>:</dt>
<dd>
<p>the same as <code>logLik(object)</code>.</p>
</dd>
<dt>
<code>ngrps</code>:</dt>
<dd>
<p>the number of levels per grouping factor in the
<code>flist</code> slot.</p>
</dd>
<dt>
<code>sigma</code>:</dt>
<dd>
<p>the scale factor for the variance-covariance estimates</p>
</dd>
<dt>
<code>coefs</code>:</dt>
<dd>
<p>the matrix of estimates, standard errors,
etc. for the fixed-effects coefficients</p>
</dd>
<dt>
<code>REmat</code>:</dt>
<dd>
<p>the formatted Random-Effects matrix</p>
</dd>
<dt>
<code>AICtab</code>:</dt>
<dd>
<p>a named vector of values of AIC, BIC, log-likelihood
and deviance</p>
</dd>
</dl>
<p>The  <code>"bcplm"</code> class extends <code>"cplm"</code> directly, and has the following additional slots: 
</p>

<dl>
<dt>
<code>dims</code>:</dt>
<dd>
<p>a named integer vector of dimensions. </p>
</dd>
<dt>
<code>sims.list</code>:</dt>
<dd>
<p>an object of class <code>"mcmc.list"</code>. It is a list of <code>n.chains</code> <code>mcmc</code> objects, each <code>mcmc</code> object storing the simulation result from a Markov chain. See <code>mcmc</code> and <code>mcmc.convert</code>. Since this is an <code>"mcmc.list"</code> object, most methods defined in the  <code>coda</code> package can be directly applied to it. </p>
</dd>
<dt>
<code>Zt</code>:</dt>
<dd>
<p>the transpose of model matrix for the random effects, stored as a compressed column-oriented sparse matrix (class <code>"dgCMatrix"</code>).</p>
</dd>
<dt>
<code>flist</code>:</dt>
<dd>
<p>the list of grouping factors for the random effects.</p>
</dd>  
<dt>
<code>prop.var</code>:</dt>
<dd>
<p>a named list of proposal variance-covariance matrix used in the Metropolis-Hasting update.</p>
</dd>
</dl>
<p>The <code>"gini"</code> class has the following slots:
</p>

<dl>
<dt>
<code>call</code>:</dt>
<dd>
<p>the matched call. </p>
</dd>
<dt>
<code>gini</code>:</dt>
<dd>
<p>a matrix of the Gini indices. The row names are corresponding to the base while the column names are corresponding to the scores.</p>
</dd>
<dt>
<code>sd</code>:</dt>
<dd>
<p>a matrix of standard errors for each computed Gini index. </p>
</dd>
<dt>
<code>lorenz</code>:</dt>
<dd>
<p>a list of matrices that determine the graph of the ordered Lorenz curve associated with each base and score combination. For each base, there is an associated matrix.   </p>
</dd>
</dl>
<h3>Extends</h3>

<p>Class <code>"cpglm"</code> extends class <code>"cplm"</code>, directly.
</p>
<p>Class <code>"cpglmm"</code> extends class <code>"cplm"</code>, directly;
</p>
<p>Class <code>"summary.cpglmm"</code>  extends class <code>"cpglmm"</code>, directly; 
class <code>"cplm"</code>, by class <code>"cpglmm"</code>, distance 2.
</p>
<p>Class <code>"bcplm"</code> extends class <code>"cplm"</code>, directly.
</p>


<h3>Methods</h3>

<p>The following methods are defined for the class <code>"cplm"</code>, which are also applicable to all of the derived classes:
</p>

<dl>
<dt>$</dt>
<dd>
<p><code>signature(x = "cplm")</code>:  extract a slot of <code>x</code> with a specified slot name, just as in list. </p>
</dd>
<dt>[[</dt>
<dd>
<p><code>signature(x = "cplm", i = "numeric", j = "missing")</code>:  extract the i-th slot of a <code>"cpglm"</code> object, just as in list. </p>
</dd>
<dt>[[</dt>
<dd>
<p><code>signature(x = "cplm", i = "character", j = "missing")</code>: extract the slots of a <code>"cpglm"</code> object with names in <code>i</code>, just as in list.</p>
</dd>
<dt>[</dt>
<dd>
<p><code>signature(x = "cplm", i = "numeric", j = "missing", drop="missing")</code>:  extract the i-th slot of a <code>"cpglm"</code> object, just as in list. <code>i</code> could be a vector. </p>
</dd>
<dt>[</dt>
<dd>
<p><code>signature(x = "cplm", i = "character", j = "missing", drop="missing")</code>:  extract the slots of a <code>"cpglm"</code> object with names in <code>i</code>, just as in list. <code>i</code> could be a vector. </p>
</dd>    
<dt>names</dt>
<dd>
<p><code>signature(x = "cplm")</code>:  return the slot names. </p>
</dd>
<dt>terms</dt>
<dd>
<p><code>signature(x = "cplm")</code>: extract the <code>terms</code> object from the model frame.  See <code>terms</code>.</p>
</dd>
<dt>formula</dt>
<dd>
<p><code>signature(x = "cplm")</code>: extract the <code>formula</code> slot.  See <code>formula</code>.</p>
</dd>    
<dt>model.matrix</dt>
<dd>
<p><code>signature(object = "cplm")</code>: extract the design matrix.  </p>
</dd>
<dt>show</dt>
<dd>
<p><code>signature(object = "cplm")</code>: method for <code>show</code>. </p>
</dd>
<dt>vcov</dt>
<dd>
<p><code>signature(object = "cplm")</code>: extract the variance-covariance matrix of a <code>"cplm"</code> object.</p>
</dd>
</dl>
<p>The following methods are defined for the <code>"cpglm"</code> class:
</p>
    
<dl>
<dt>coef</dt>
<dd>
<p><code>signature(object = "cpglm")</code>:  extract the estimated coefficients.</p>
</dd>
<dt>fitted</dt>
<dd>
<p><code>signature(object = "cpglm")</code>: return the fitted values. </p>
</dd>
<dt>residuals</dt>
<dd>
<p><code>signature(object = "cpglm")</code>: extract residuals  from a <code>cpglm</code> object. You can also specify a <code>type</code> argument to indicate the type of residuals to be computed. See <code>glm.summaries</code>.</p>
</dd>
<dt>resid</dt>
<dd>
<p><code>signature(object = "cpglm")</code>: same as <code>residuals</code>.</p>
</dd>   
<dt>AIC</dt>
<dd>
<p><code>signature(object = "cpglm",k="missing")</code>: extract the AIC information from the <code>"cpglm"</code> object.  See <code>AIC</code>.</p>
</dd>    
<dt>deviance</dt>
<dd>
<p><code>signature(object = "cpglm")</code>: extract the deviance from the <code>"cpglm"</code> object.  See <code>deviance</code>.</p>
</dd>
<dt>summary</dt>
<dd>
<p><code>signature(object = "cpglm")</code>:  the same as <code>glm.summaries</code> except that both the dispersion and the index parameter are estimated using maximum likelihood estimation.  </p>
</dd>    
<dt>predict</dt>
<dd>
<p><code>signature(object = "cpglm")</code>: generate predictions for new data sets</p>
</dd>
</dl>
<p>The following are written for <code>"cpglmm"</code>: 
</p>

<dl>
<dt>print</dt>
<dd>
<p><code>signature(x = "cpglmm")</code>:  print the object </p>
</dd>
<dt>summary</dt>
<dd>
<p><code>signature(object = "cpglmm")</code>: summary results</p>
</dd>
<dt>predict</dt>
<dd>
<p><code>signature(object = "cpglmm")</code>: generate predictions for new data sets</p>
</dd>
<dt>VarCorr</dt>
<dd>
<p><code>signature(x = "cpglmm")</code>: estimation for the variance components </p>
</dd>
<dt>vcov</dt>
<dd>
<p><code>signature(object = "cpglmm")</code>: variance-covariance matrix for fixed effects </p>
</dd>
</dl>
<p>The following methods are available for the class <code>"bcplm"</code>: 
</p>

<dl>
<dt>plot</dt>
<dd>
<p><code>signature(x = "bcplm", y = "missing")</code>: summarize the <code>"bcplm"</code> object with a trace of the sampled output and a density estimate for each variable in the chain. See <code>plot.mcmc</code>. </p>
</dd>
<dt>summary</dt>
<dd>
<p><code>signature(object = "bcplm")</code>:  produce two sets of summary statistics. See <code>summary.mcmc</code>. </p>
</dd>
<dt>VarCorr</dt>
<dd>
<p><code>signature(x = "bcplm")</code>: estimation for the variance components if the random effects are present </p>
</dd>
<dt>fixef</dt>
<dd>
<p><code>signature(object = "bcplm")</code>: extract fixed effects. Additional arguments include: <code>sd = FALSE</code>: extract standard errors; <code>quantiles = NULL</code>: compute empirical quantiles. These additional statistics are stored as attributes in the returned results.</p>
</dd>
</dl>
<p>The following methods are defined for the <code>"gini"</code> class:
</p>

<dl>
<dt>plot</dt>
<dd>
<p><code>signature(x = "gini", y = "missing")</code>: plot the ordered Lorenz curve from each model comparison. If <code>overlay = TRUE</code> (the default), different curves are plotted on the same graph for each base. </p>
</dd>
<dt>show</dt>
<dd>
<p><code>signature(object = "gini")</code>: print the computed Gini indices and standard errors.</p>
</dd>
</dl>
<h3>Author(s)</h3>

<p> Wayne  Zhang <a href="mailto:actuary_zhang@hotmail.com">actuary_zhang@hotmail.com</a> </p>


<h3>See Also</h3>

<p>See also <code>cpglm</code>, <code>cpglmm</code>, <code>bcplm</code>, <code>glm</code>.   
</p>


</div>