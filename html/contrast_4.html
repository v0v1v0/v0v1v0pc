<div class="container">

<table style="width: 100%;"><tr>
<td>contrast.lm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>General Contrasts of Regression Coefficients</h2>

<h3>Description</h3>

<p>This function computes one or more contrasts of the estimated regression
coefficients in a fit from one of the functions in Design, along with
standard errors, confidence limits, t or Z statistics, P-values.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'lm'
contrast(fit, ...)

## S3 method for class 'gls'
contrast(fit, ...)

## S3 method for class 'lme'
contrast(fit, ...)

## S3 method for class 'geese'
contrast(fit, ...)

contrast_calc(
  fit,
  a,
  b,
  cnames = NULL,
  type = c("individual", "average"),
  weights = "equal",
  conf.int = 0.95,
  fcType = "simple",
  fcFunc = I,
  covType = NULL,
  ...,
  env = parent.frame(2)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>A fit of class <code>lm</code>, <code>glm</code>, etc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>For <code>contrast()</code>, these pass arguments to <code>contrast_calc()</code>. For
<code>contrast_calc()</code>, they are not used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>a, b</code></td>
<td>
<p>Lists containing conditions for all predictors in the model that
will be contrasted to form the hypothesis <code>H0: a = b</code>. The <code>gendata</code>
function will generate the necessary combinations and default values for
unspecified predictors. See examples below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cnames</code></td>
<td>
<p>A vector of character strings naming the contrasts when
<code>type = "individual"</code>.  Usually <code>cnames</code> is not necessary as
the function tries to name the contrasts by examining which
predictors are varying consistently in the two lists.  <code>cnames</code> will be
needed when you contrast "non-comparable" settings, e.g., you compare
<code>list(treat = "drug", age = c(20,30))</code> with
<code style="white-space: pre;">⁠list(treat = "placebo", age = c(40,50)⁠</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>A character string. Set <code>type="average"</code> to average the
individual contrasts (e.g., to obtain a "Type II" or "Type III" contrast).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>A numeric vector, used when <code>type = "average"</code>, to
obtain weighted contrasts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.int</code></td>
<td>
<p>The confidence level for confidence intervals for the
contrasts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fcType</code></td>
<td>
<p>A character string: "simple", "log" or "signed".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fcFunc</code></td>
<td>
<p>A function to transform the numerator and denominator
of fold changes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covType</code></td>
<td>
<p>A string matching the method for estimating the covariance
matrix. The default value produces the typical estimate. See
<code>sandwich::vcovHC()</code> for options.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env</code></td>
<td>
<p>An environment in which evaluate fit.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These functions mirror <code>rms::contrast.rms()</code> but have fewer options.
</p>
<p>There are some between-package inconsistencies regarding degrees of freedom
in some models. See the package vignette for more details.
</p>
<p>Fold changes are calculated for each hypothesis. When <code>fcType ="simple"</code>, the
ratio of the <code>a</code> group predictions over the <code>b</code>
group predictions are used. When <code>fcType = "signed"</code>, the ratio is used
if it is greater than 1; otherwise the negative inverse (e.g.,
<code>-1/ratio</code>) is returned.
</p>


<h3>Value</h3>

<p>a list of class <code>contrast.Design</code> containing the elements
<code>Contrast</code>, <code>SE</code>, <code>Z</code>, <code>var</code>, <code>df.residual</code> <code>Lower</code>, <code>Upper</code>, <code>Pvalue</code>, <code>X</code>,
<code>cnames</code>, and <code>foldChange</code>, which denote the contrast estimates, standard
errors, Z or t-statistics, variance matrix, residual degrees of freedom
(this is <code>NULL</code> if the model was not <code>ols</code>), lower and upper confidence
limits, 2-sided P-value, design matrix, and contrast names (or <code>NULL</code>).
</p>


<h3>See Also</h3>

<p><code>rms::contrast.rms()</code>, <code>sandwich::vcovHC()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(nlme)
Orthodont2 &lt;- Orthodont
Orthodont2$newAge &lt;- Orthodont$age - 11
fm1Orth.lme2 &lt;- lme(distance ~ Sex * newAge,
    data = Orthodont2,
    random = ~ newAge | Subject
)
summary(fm1Orth.lme2)

contrast(fm1Orth.lme2,
    a = list(Sex = levels(Orthodont2$Sex), newAge = 8 - 11),
    b = list(Sex = levels(Orthodont2$Sex), newAge = 10 - 11)
)

# ---------------------------------------------------------------------------

anova_model &lt;- lm(expression ~ diet * group, data = two_factor_crossed)
anova(anova_model)

library(ggplot2)
theme_set(theme_bw() + theme(legend.position = "top"))
ggplot(two_factor_crossed) +
    aes(x = diet, y = expression, col = group, shape = group) +
    geom_point() +
    geom_smooth(aes(group = group), method = lm, se = FALSE)

int_model &lt;- lm(expression ~ diet * group, data = two_factor_crossed)
main_effects &lt;- lm(expression ~ diet + group, data = two_factor_crossed)

# Interaction effect is probably real:
anova(main_effects, int_model)

# Test treatment in low fat diet:
veh_group &lt;- list(diet = "low fat", group = "vehicle")
trt_group &lt;- list(diet = "low fat", group = "treatment")
contrast(int_model, veh_group, trt_group)

# ---------------------------------------------------------------------------

car_mod &lt;- lm(mpg ~ am + wt, data = mtcars)
print(summary(car_mod), digits = 5)

mean_wt &lt;- mean(mtcars$wt)

manual_trans &lt;- list(am = 0, wt = mean_wt)
auto_trans &lt;- list(am = 1, wt = mean_wt)
print(contrast(car_mod, manual_trans, auto_trans), digits = 5)
</code></pre>


</div>