<div class="container">

<table style="width: 100%;"><tr>
<td>async_collect</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Collect elements of an asynchronous iterator</h2>

<h3>Description</h3>

<p><code>async_collect()</code> takes an asynchronous iterator, i.e. an iterable
function that is also awaitable. <code>async_collect()</code> returns an
awaitable that eventually resolves to a list containing the values
returned by the iterator. The values are collected until exhaustion
unless <code>n</code> is supplied. The collection is grown geometrically for
performance.
</p>


<h3>Usage</h3>

<pre><code class="language-R">async_collect(x, n = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An iterator function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>The number of elements to collect. If <code>x</code> is an infinite
sequence, <code>n</code> must be supplied to prevent an infinite loop.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">
# Emulate an async stream by yielding promises that resolve to the
# elements of the input vector
generate_stream &lt;- async_generator(function(x) for (elt in x) yield(elt))

# You can await `async_collect()` in an async function. Once the
# list of values is resolved, the async function resumes.
async(function() {
  stream &lt;- generate_stream(1:3)
  values &lt;- await(async_collect(stream))
  values
})
</code></pre>


</div>