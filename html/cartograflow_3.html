<div class="container">

<table style="width: 100%;"><tr>
<td>flowcarre</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Builds a square matrice from geographical nodes</h2>

<h3>Description</h3>

<p>Builds a square and closed matrice from a dataframe of spatial nodes
</p>


<h3>Usage</h3>

<pre><code class="language-R">flowcarre(liste, tab, origin, dest, valflow, empty.sq, format, diagonale)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>liste</code></td>
<td>
<p>list of all the spatial codes as a single dataframe</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tab</code></td>
<td>
<p>the non squared input flow dataset with three column : origin, destination, flow value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>origin</code></td>
<td>
<p>node / place of origin of the flow</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dest</code></td>
<td>
<p>node / place of destination of the flow</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>valflow</code></td>
<td>
<p>is the flow value between origin and destination places</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>empty.sq</code></td>
<td>
<p>Builds an empty matrix or not. See Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>is the desired squared flow dataset output format. See Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diagonale</code></td>
<td>
<p>to zero or not the main diagonal. See Details.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>- empty.sq is "TRUE" builds an empty matrix ; else is "FALSE" or missing<br><br>
- format is "M" for matrice format<br>
- format is "L" for long format, as three column dataframe<br><br>
- diagonal is "TRUE" to zero the main diagonal
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(cartograflow)
data(flowdata)
var1 &lt;- geoid
var2 &lt;- flows

# 1/2 Compute an empty square matrice with ID code, and sets the value to zero
# Example for matrice format (same procedure for the long format)

mat &lt;- flowcarre(var1, var2,
  origin = "i", dest = "j", valflow = "Fij",
  format = "M", empty.sq = TRUE
)

# 2/2 Fill in the matrice with external flow values
mat &lt;- flowcarre(var1, var2,
  origin = "i", dest = "j", valflow = "Fij",
  format = "M", empty.sq = FALSE
)

# Square a matrice and zero the main diagonal
mat &lt;- flowcarre(var1, var2,
  origin = "i", dest = "j", valflow = "Fij", format = "M",
  empty.sq = FALSE, diagonale = FALSE
)
</code></pre>


</div>