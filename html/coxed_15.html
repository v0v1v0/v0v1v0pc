<div class="container">

<table style="width: 100%;"><tr>
<td>make.margeffect</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculating a simulated marginal effect</h2>

<h3>Description</h3>

<p>This function is called by <code>sim.survdata</code> and is not intended to be used by itself.
</p>


<h3>Usage</h3>

<pre><code class="language-R">make.margeffect(baseline, xb, covariate = 1, low = 0, high = 1,
  compare = median)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>baseline</code></td>
<td>
<p>The baseline hazard functions, output by <code>baseline.build</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xb</code></td>
<td>
<p>The simulated data, output by <code>generate.lm</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariate</code></td>
<td>
<p>Specification of the column number of the covariate in the <code>X</code> matrix for which to generate a simulated marginal effect (default is 1).
The marginal effect is the difference in expected duration when the covariate is fixed at a high value and the expected duration when the covariate is fixed
at a low value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>low</code></td>
<td>
<p>The low value of the covariate for which to calculate a marginal effect</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>high</code></td>
<td>
<p>The high value of the covariate for which to calculate a marginal effect</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compare</code></td>
<td>
<p>The statistic to employ when examining the two new vectors of expected durations (see details for <code>sim.survdata</code>).  The default is <code>median</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The idea is to simulate a marginal change in duration so that researchers can compare the performance of
estimators of this statistic using simulated data.
</p>
<p>The function calculates simulated durations for each observation conditional on a baseline hazard function
and exogenous covariates and coefficients.  The <code>covariate</code> argument specifies the variable in the X matrix to
vary so as to measure the marginal effect.  First the covariate is set to the value specified in <code>low</code> for all
observations, then to the value specified in <code>high</code> for all observations.  Given each value, new durations are
drawn. The durations when the covariate equals the low value are subtracted from the durations when the covariate
equals the high value.  The marginal effect is calculated by employing the statistic given by <code>compare</code>, which
is <code>median</code> by default.
</p>


<h3>Value</h3>

<p>A list with three items:
</p>

<table>
<tr>
<td style="text-align: left;">
<code>marg.effect</code> </td>
<td style="text-align: left;"> A scalar containing the simulated marginal effect</td>
</tr>
<tr>
<td style="text-align: left;">
<code>data.low</code> </td>
<td style="text-align: left;"> The durations and covariates when the covariate of interest is set to the low value </td>
</tr>
<tr>
<td style="text-align: left;">
<code>data.high</code> </td>
<td style="text-align: left;"> The durations and covariates when the covariate of interest is set to the high value </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Jonathan Kropko &lt;jkropko@virginia.edu&gt; and Jeffrey J. Harden &lt;jharden2@nd.edu&gt;
</p>


<h3>See Also</h3>

<p><code>baseline.build</code>, <code>generate.lm</code>, <code>sim.survdata</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">T &lt;- 100
N &lt;- 1000
X &lt;- as.matrix(data.frame(X1=rnorm(N), X2=rnorm(N), X3=rnorm(N)))
beta &lt;- as.matrix(rnorm(3))
baseline &lt;- baseline.build(T=T, knots=8, spline=TRUE)
xb &lt;- generate.lm(baseline, X=X, beta=beta, N=N, censor=.1, type="none")
me &lt;- make.margeffect(baseline, xb, covariate=1, low=0, high=1)
me$marg.effect
</code></pre>


</div>