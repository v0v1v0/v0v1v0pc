<div class="container">

<table style="width: 100%;"><tr>
<td>RAWgrid</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
RAW grid for Cross Validation
</h2>

<h3>Description</h3>

<p>Tuning parameters for calibration weights may not be intutitive. Instead, relative average weight (RAW) can be used to find sensible tuning parameters. The RAW is the average weight of observations within the RAW region, <code class="reqn">[R_{l,RAW},R_{u,RAW}]</code>, divided by the average weight of observations outside RAW region.
</p>
<p>This function elicits a grid of tuning parameter <code class="reqn">lambda</code> or <code class="reqn">delta</code> given a sequence of relative average weights (RAW) values, to be used for cross-validation. One tuning parameter <code class="reqn">delta</code> or <code class="reqn">lambda</code> must be specified.
</p>
<p>Two clinically relevant lower and upper bound values must be specified. The first, <code class="reqn">[R_{l},R_{u}</code>, define the clinically relevant region used for the weighting function. The second, <code class="reqn">[R_{l,RAW},R_{u,RAW}]</code>, define the complemenatry regions used for defining relative average weights.
</p>


<h3>Usage</h3>

<pre><code class="language-R">RAWgrid(r, rl, ru, p, y, rawSeq=seq(0.1,0.9,0.1), cvParm,
delta = NULL, lambda = NULL, rl.raw, ru.raw)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>

<p>Clinically relevant risk threshold</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rl</code></td>
<td>

<p>Lower bound of clinically relevant region</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ru</code></td>
<td>

<p>Upper bound of clinically relevant region</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>

<p>Vector of risk score values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>

<p>Vector of binary outcomes, with 1 indicating event (cases) and 0 indicating no event (controls)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rawSeq</code></td>
<td>

<p>Sequence of relative average weights</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cvParm</code></td>
<td>

<p>Tuning parameter that will be selected via cross-validation. Can either be <code class="reqn">lambda</code> or <code class="reqn">delta</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta</code></td>
<td>

<p>Calibration weight for observations outside clinically relevant region <code class="reqn">[R_l,R_u]</code>. Needs to be specified if cvParm="lambda", otherwise should be left blank, and function will generate a sequence of delta for cross-validaton.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>

<p>Tuning parameter for controlling exponential decay of calibration weights. Needs to be specified if cvParm="delta", otherwise should be left blank, and function will generate a sequence of lambda for cross-validaton.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rl.raw</code></td>
<td>

<p>Lower bound for defining the relative average weight region of interest
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ru.raw</code></td>
<td>

<p>Upper bound for defining the relative average weight region of interest</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table><tr style="vertical-align: top;">
<td><code>rrWt.seq </code></td>
<td>
<p>Matrix containing the input RAW sequence, and corresponding weight tuning parameter lambda and weight value delta (with one fixed depending on cvParm selection). If 'NA' is returned there may be too few events within the weight clinically relevant RAW region, meaning that RAW value is not possible</p>
</td>
</tr></table>
<h3>Warning </h3>

<p>Event rate outside RAW interval, widen RAW intervalIf no or too cases are inside RAW interval [R_l,R_u], cross-validation procedure may not be stable, so this warning indicates RAW interval should widen to include more cases.
</p>


<h3>Author(s)</h3>

<p>Anu Mishra
</p>


<h3>References</h3>

<p>Mishra, A. (2019). Methods for Risk Markers that Incorporate Clinical Utility (Doctoral dissertation). (Available Upon Request)</p>


<h3>See Also</h3>

<p><code>calWt</code>,
<code>cvWtTuning</code>,
<code>cvRepWtTuning</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">### Load data ##
data(fakeData)

### Get Grid of Tuning Parameters ###
grid &lt;- RAWgrid(r = 0.3,rl = -Inf,ru = Inf,p = fakeData$p,y = fakeData$y,
                cvParm = "lambda",delta=1,rl.raw = 0.25,ru.raw = 0.35)
</code></pre>


</div>