<div class="container">

<table style="width: 100%;"><tr>
<td>rcomp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compositions as elements of the simplex embedded in the D-dimensional real space</h2>

<h3>Description</h3>

<p>A class providing a way to analyse compositions in the
philosophical framework of the Simplex as subset of the <code class="reqn">R^D</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">          rcomp(X,parts=1:NCOL(oneOrDataset(X)),total=1,warn.na=FALSE,
                detectionlimit=NULL,BDL=NULL,MAR=NULL,MNAR=NULL,SZ=NULL)
          </code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>composition or dataset of compositions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parts</code></td>
<td>
<p>vector containing the indices xor names of the columns
to be used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total</code></td>
<td>
<p>the total amount to be used, typically 1 or 100</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn.na</code></td>
<td>
<p>should the user be warned in case of NA,NaN or 0
coding different types of missing values?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>detectionlimit</code></td>
<td>
<p>a number, vector or matrix of positive
numbers giving the detection limit of all values, all columns or
each value, respectively</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>BDL</code></td>
<td>
<p>the code for 'Below Detection Limit' in X</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SZ</code></td>
<td>
<p>the code for 'Structural Zero' in X</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MAR</code></td>
<td>
<p>the code for 'Missing At Random' in X</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MNAR</code></td>
<td>
<p>the code for 'Missing Not At Random' in X</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Many multivariate datasets essentially describe amounts of D different
parts in a whole. This has some important implications justifying to
regard them as a scale on its own, called a "composition".
The functions around the class <code>"rcomp"</code> follow the traditional
(often statistically inconsistent) approach regarding compositions simply
as a multivariate vector of positive numbers summing up to 1. This space of
D positive numbers summing to 1 is traditionally called the D-1-dimensional
simplex.
</p>
<p>The compositional scale was in-depth analysed by Aitchison
(1986) and he found serious reasons why compositional data should be
analysed with a different geometry.  The functions around the class
<code>"acomp"</code> follow his
approach. However the Aitchison approach based on log-ratios is 
sometimes criticized (e.g. Rehder and Zier, 2002). It cannot deal with 
absent parts (i.e. zeros). It is sensitive to large measurement errors
in small amounts. The Aitchison operations cannot represent simple
mixture of different compositions. The used transformations
are not uniformly continuous. Straight lines and ellipses in Aitchison
space look strangely in ternary diagrams. As all uncritical statistical
analysis, blind application of logratio-based analysis is sometimes
misleading. Therefore it is sometimes useful to analyse
compositional data directly as a multivariate dataset of portions
summing to 1. However a clear warning must be given that the
utilisation of almost any kind of
classical multivariate analysis introduce some kinds of artifacts
(e.g. Chayes 1960) when applied to compositional data. So, extra care
and considerable expert knowlegde is needed for the proper
interpretation of results achieved in this non-Aitchison approach. The
package tries to lead the user around these artifacts as much as
possible and gives hints to major pitfalls in the help. However
meaningless results cannot be fully avoided in this (rather inconsistent) approach. 
<br>
A side effect of the procedure is to force the compositions to sum to
one, which is done by the closure operation <code>clo</code> . 
<br>
The classes rcomp, acomp, aplus, and rplus are designed in a fashion as similar as
possible, in order to allow direct comparison between results achieved  
by the different approaches. Especially the acomp logistic transforms
<code>clr</code>, <code>alr</code>, <code>ilr</code> are mirrored
by analogous linear transforms <code>cpt</code>, <code>apt</code>,
<code>ipt</code> in the rcomp class framework. 
</p>


<h3>Value</h3>

<p>a vector of class <code>"rcomp"</code> representing a closed composition
or a matrix of class <code>"rcomp"</code> representing
multiple closed compositions, by rows.  
</p>


<h3>Missing Policy</h3>

<p>Missing and Below Detecion Limit Policy is
explained in deeper detail in compositions.missing. 
</p>


<h3>Author(s)</h3>

<p>Raimon Tolosana-Delgado, K.Gerald v.d. Boogaart <a href="http://www.stat.boogaart.de">http://www.stat.boogaart.de</a></p>


<h3>References</h3>

<p>Aitchison, J. (1986) <em>The Statistical Analysis of Compositional
Data</em> Monographs on Statistics and Applied Probability. Chapman &amp;
Hall Ltd., London (UK). 416p.<br></p>
<p>Rehder, S. and U. Zier (2001) Letter to the Editor: Comment on 
“Logratio Analysis and Compositional Distance” by J. Aitchison, C. 
Barcel\'o-Vidal, J.A. Mart\'in-Fern\'a ndez and V. Pawlowsky-Glahn,
<em>Mathematical Geology</em>, <b>33</b> (7), 845-848.<br></p>
<p>Zier, U. and S. Rehder (2002) Some comments on log-ratio transformation and compositional distance,
<em>Terra Nostra</em>, Schriften der Alfred Wegener-Stiftung, 03/2003<br></p>
<p>van den Boogaart, K.G. and R. Tolosana-Delgado (2008) "compositions": a unified 
R package to analyze Compositional Data, <em>Computers &amp;
Geosciences</em>, 34 (4), pages 320-338, doi: <a href="https://doi.org/10.1016/j.cageo.2006.11.017">10.1016/j.cageo.2006.11.017</a>.
</p>


<h3>See Also</h3>

<p><code>cpt</code>, <code>apt</code>, <code>ipt</code>,
<code>acomp</code>, <code>rplus</code>,
<code>princomp.rcomp</code>,
<code>plot.rcomp</code>, <code>boxplot.rcomp</code>,
<code>barplot.rcomp</code>, <code>mean.rcomp</code>,
<code>var.rcomp</code>, <code>variation.rcomp</code>,
<code>cov.rcomp</code>, <code>msd</code>,
<code>convex.rcomp</code>, <code>+.rcomp</code> 
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(SimulatedAmounts)
plot(rcomp(sa.tnormals))
</code></pre>


</div>