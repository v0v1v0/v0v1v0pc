<div class="container">

<table style="width: 100%;"><tr>
<td>validation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Validate Model Predictions</h2>

<h3>Description</h3>

<p>This function is designed to perform model validation when the corresponding outcome variable is available. It facilitates the comparison of model predictions
with the provided outcome variable, which can be continuous, binary, or time-to-event.
</p>


<h3>Usage</h3>

<pre><code class="language-R">validation(
  predicted = NULL,
  outcomeType = c("binary", "continuous", "time-to-event"),
  trueY = NULL,
  time = NULL,
  trueEvent = NULL,
  baseHz = NULL,
  u = 2,
  outfile = "nameWithPath"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>predicted</code></td>
<td>
<p>A vector of model prediction values, which can be generated by prediction functions in this package such as LASSO2_predict and XGBtraining_predict. 
For continuous outcomes, this vector represents model scores; for binary outcomes, it represents the probability of the positive class; 
for time-to-event outcomes, it contains risk scores, which will later be transformed into estimated survival probabilities corresponding to times in the new data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outcomeType</code></td>
<td>
<p>Outcome variable type. There are three choices: "binary" (default), "continuous", and "time-to-event".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trueY</code></td>
<td>
<p>A vector of the outcome variable when it is continuous or binary.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>A vector of time for time-to-event outcome.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trueEvent</code></td>
<td>
<p>A vector of the event for time-to-event outcome.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>baseHz</code></td>
<td>
<p>A table for accumulating baseline hazard for multiple time points, usually generated based on a training data set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>u</code></td>
<td>
<p>A single numeric follow-up time for survival outcomes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outfile</code></td>
<td>
<p>A string for the output file, including the path if necessary but without the file type extension.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is invoked by multiple prediction functions within this package when an outcome variable is available for a new dataset. 
However, users can also directly call this function if needed.
</p>


<h3>Value</h3>

<p>A vector of model prediction values from the input
</p>


<h3>References</h3>

<p>Harrell Jr F (2023). rms: Regression Modeling Strategies_. R package version 6.7-1, &lt;https://CRAN.R-project.org/package=rms&gt;
</p>
<p>Harrell Jr F (2023). Hmisc: Harrell Miscellaneous_. R package version 5.1-1, &lt;https://CRAN.R-project.org/package=Hmisc&gt;
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Load in data sets:
data("datlist", package = "csmpv")
tdat = datlist$training
vdat = datlist$validation

# The function saves files locally. You can define your own temporary directory. 
# If not, tempdir() can be used to get the system's temporary directory.
temp_dir = tempdir()
# As an example, let's define Xvars, which will be used later:
Xvars = c("highIPI", "B.Symptoms", "MYC.IHC", "BCL2.IHC", "CD10.IHC", "BCL6.IHC")

# The function can work with multiple models and multiple outcome types. 
# Here, we use XGBoost model with binary outcome as an example:
bxfit = XGBtraining(data = tdat, biomks = Xvars, Y = "DZsig",
                    outfile = paste0(temp_dir, "/binary_XGBoost"))
testdat = vdat[,bxfit$XGBoost_model$feature_names]
test = xgboost::xgb.DMatrix(data.matrix(testdat))
scores = stats::predict(bxfit$XGBoost_model, test) 
names(scores) = rownames(vdat)
Y = bxfit$Y
outs = validation(predicted = scores, outcomeType = "binary", trueY = vdat[,Y],
                  outfile = paste0(temp_dir, "/binary_XGBoost_validate")) 
# You might save the files to the directory you want.

# To delete the "temp_dir", use the following:
unlink(temp_dir)
</code></pre>


</div>