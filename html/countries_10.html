<div class="container">

<table style="width: 100%;"><tr>
<td>find_keycol</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Find a set of columns that uniquely identifies table entries</h2>

<h3>Description</h3>

<p>This function takes a data frame as argument and returns the column names (or indices) of a set of columns that uniquely identify the table entries (i.e. table key). It can be used to automate the search of table keys.
Since the function was designed for country data, it will first search for columns containing country names and dates/years. These columns will be given priority in the search for keys. Next, the function prioritises left-most columns in the table.
For time efficiency, the function does not test all possible combination of columns, it just tests the most likely combinations. The function will look for the most common country data formats (e.g. cross-sectional, time-series, panel data, dyadic, etc.) and searches for up to 2 additional key columns beyond country and time columns.
</p>


<h3>Usage</h3>

<pre><code class="language-R">find_keycol(
  x,
  return_index = FALSE,
  search_only = NA,
  sample_size = 1000,
  allow_NA = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A data frame object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_index</code></td>
<td>
<p>A logical value indicating whether the function should return the index of country columns instead of the column names. Default is <code>FALSE</code>, column names are returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>search_only</code></td>
<td>
<p>This parameter can be used to restrict the search of table keys to a subset of columns. The default is <code>NA</code>, which will result in the entire table being searched. Alternatively, users may restrict the search by providing a vector containing the name or the numeric index of columns to check. For example, search could be restricted to the first ten columns by passing <code>1:10</code>. This could be useful in speeding up the search in wide tables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample_size</code></td>
<td>
<p>Either <code>NA</code> or a numeric value indicating the sample size used for evaluating columns. Default is <code>1000</code>. If <code>NA</code> is passed, the function will evaluate the full table. The minimum accepted value is <code>100</code> (i.e. 100 randomly sampled rows are used to evaluate the columns). This parameter can be tuned to speed up computation on long datasets. Taking a sample could result in inexact identification of key columns, accuracy improves with larger samples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allow_NA</code></td>
<td>
<p>Logical value indicating whether to allow key columns to have <code>NA</code> values. Default is <code>allow_NA=FALSE</code>. If set to <code>TRUE</code>, <code>NA</code> is considered as a distinct value.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a vector of column names (or indices) that uniquely identify the entries in the table. If no key is found, the function will return <code>NULL</code>. The output is a named vector indicating whether the identified key columns contain country names (<code>"country"</code>), year and dates (<code>"time"</code>), or other type of information (<code>"other"</code>).
</p>


<h3>See Also</h3>

<p>find_timecol, find_countrycol, is_keycol
</p>


<h3>Examples</h3>

<pre><code class="language-R">example &lt;-data.frame(nation=rep(c("FRA","ALB","JOR"),3),
                     year=c(rep(2000,3),rep(2005,3),rep(2010,3)),
                     var=runif(9))
find_keycol(x=example)
</code></pre>


</div>