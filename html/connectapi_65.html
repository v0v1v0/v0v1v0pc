<div class="container">

<table style="width: 100%;"><tr>
<td>get_oauth_credentials</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Perform an OAuth credential exchange to obtain a viewer's OAuth access token.</h2>

<h3>Description</h3>

<p>Perform an OAuth credential exchange to obtain a viewer's OAuth access token.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_oauth_credentials(connect, user_session_token)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>connect</code></td>
<td>
<p>A Connect R6 object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>user_session_token</code></td>
<td>
<p>The content viewer's session token. This token
can only be obtained when the content is running on a Connect server. The token
identifies the user who is viewing the content interactively on the Connect server.
</p>
<p>Read this value from the HTTP header: <code>Posit-Connect-User-Session-Token</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Please see https://docs.posit.co/connect/user/oauth-integrations/#obtaining-a-viewer-oauth-access-token
for more information.
</p>


<h3>Value</h3>

<p>The OAuth credential exchange response.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
library(connectapi)
library(plumber)
client &lt;- connect()

#* @get /do
function(req){
  user_session_token &lt;- req$HTTP_POSIT_CONNECT_USER_SESSION_TOKEN
  credentials &lt;- get_oauth_credentials(client, user_session_token)

  # ... do something with `credentials$access_token` ...

  "done"
}

## End(Not run)

</code></pre>


</div>