<div class="container">

<table style="width: 100%;"><tr>
<td>smi</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Single-Mediator-Imputation Estimation Method</h2>

<h3>Description</h3>

<p>'smi' is used to estimate the initial disparity, disparity reduction, and
disparity remaining for causal decomposition analysis, using the
single-mediator-imputation estimation method proposed by Park et al. (2021+).
</p>


<h3>Usage</h3>

<pre><code class="language-R">smi(fit.r = NULL, fit.m, fit.y, treat, covariates, sims = 100, conf.level = .95,
    conditional = TRUE, cluster = NULL, long = TRUE, mc.cores = 1L, seed = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fit.r</code></td>
<td>
<p>a fitted model object for treatment. Can be of class 'CBPS' or
'SumStat'. Default is 'NULL'. Only necessary if 'conditional' is 'FALSE'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit.m</code></td>
<td>
<p>a fitted model object for mediator. Can be of class 'lm', 'glm',
'multinom', or 'polr'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit.y</code></td>
<td>
<p>a fitted model object for outcome. Can be of class 'lm' or 'glm'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treat</code></td>
<td>
<p>a character string indicating the name of the treatment variable
used in the models. The treatment can be categorical with two or more
categories (two- or multi-valued factor).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariates</code></td>
<td>
<p>a vector containing the name of the covariate variable(s)
used in the models. Each covariate can be categorical with two or more
categories (two- or multi-valued factor) or continuous (numeric).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sims</code></td>
<td>
<p>number of Monte Carlo draws for nonparametric bootstrap.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.level</code></td>
<td>
<p>level of the returned two-sided confidence intervals,
which are estimated by the nonparametric percentile bootstrap method.
Default is .95, which returns the 2.5 and 97.5 percentiles of the simulated
quantities.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conditional</code></td>
<td>
<p>a logical value. If 'TRUE', the function will return the
estimates conditional on those covariate values; and all covariates in
mediator and outcome models need to be centered prior to fitting.
Default is 'TRUE'. If 'FALSE', 'fit.r' needs to be specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster</code></td>
<td>
<p>a vector of cluster indicators for the bootstrap. If provided,
the cluster bootstrap is used. Default is 'NULL'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>long</code></td>
<td>
<p>a logical value. If 'TRUE', the output will contain the entire
sets of estimates for all bootstrap samples. Default is 'TRUE'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mc.cores</code></td>
<td>
<p>The number of cores to use. Must be exactly 1 on Windows.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>seed number for the reproducibility of results. Default is ‘NULL’.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function returns the point estimates of the initial disparity,
disparity reduction, and disparity remaining for a categorical
treatment and a variety of types of outcome and mediator(s) in causal
decomposition analysis. It also returns nonparametric
percentile bootstrap confidence intervals for each estimate.
</p>
<p>The definition of the initial disparity, disparity reduction, and
disparity remaining can be found in help('mmi'). As opposed to the 'mmi'
function, this function uses the single-mediator-imputation method
suggested by Park et al. (2021+). See the reference for more details.
</p>
<p>If one wants to make the inference conditional on baseline covariates,
set 'conditional = TRUE' and center the data before fitting the models.
</p>
<p>As of version 0.1.0, the mediator model ('fit.m') can be of class 'lm', 'glm',
'multinom', or 'polr', corresponding respectively to the linear regression
models and generalized linear models, multinomial log-linear models, and
ordered response models. The outcome model ('fit.y') can be of class 'lm' or 'glm'.
Also, the treatment model ('fit.r') can be of class 'CBPS' or 'SumStat', both of
which use the propensity score weighting. It is only necessary when 'conditional = FALSE'.
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>result</code></td>
<td>
<p>a matrix containing the point estimates of the initial disparity,
disparity remaining, and disparity reduction, and the percentile bootstrap
confidence intervals for each estimate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all.result</code></td>
<td>
<p>a matrix containing the point estimates of the initial disparity,
disparity remaining, and disparity reduction for all bootstrap samples. Returned
if 'long' is 'TRUE'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha.r</code></td>
<td>
<p>a vector containing the estimates of the regression coefficient of
the treatment in the mediator. Not needed unless sensitivity analysis is
conducted afterwards.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>se.gamma</code></td>
<td>
<p>a vector containing the estimates of standard error of the
egression coefficient of the mediator in the outcome model. Not needed unless
sensitivity analysis is conducted afterwards.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Suyeon Kang, University of California, Riverside, <a href="mailto:skang062@ucr.edu">skang062@ucr.edu</a>;
Soojin Park, University of California, Riverside, <a href="mailto:soojinp@ucr.edu">soojinp@ucr.edu</a>.
</p>


<h3>References</h3>

<p>Park, S., Kang, S., and Lee, C. (2021+). "Choosing an optimal method for causal
decomposition analysis: A better practice for identifying contributing factors to
health disparities". arXiv preprint arXiv:2109.06940.
</p>


<h3>See Also</h3>

<p><code>mmi</code>, <code>sensitivity</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(sdata)

#------------------------------------------------------------------------------#
# Example 1-a: Continuous Outcome
#------------------------------------------------------------------------------#
require(PSweight)
fit.r1 &lt;- SumStat(R ~ C.num + C.bin, data = sdata, weight = "IPW")
require(CBPS)
fit.r2 &lt;- CBPS(R ~ C.num + C.bin, data = sdata, method = "exact",
          standardize = "TRUE")

# Continuous mediator
fit.m1 &lt;- lm(M.num ~ R + C.num + C.bin, data = sdata)
fit.y1 &lt;- lm(Y.num ~ R + M.num + X + C.num + C.bin, data = sdata)
res.1a1 &lt;- smi(fit.r = fit.r1, fit.m = fit.m1,
          fit.y = fit.y1, sims = 40, conditional = FALSE,
          covariates = c("C.num", "C.bin"), treat = "R", seed = 32)
res.1a1

# Binary mediator
fit.m2 &lt;- glm(M.bin ~ R + C.num + C.bin, data = sdata,
          family = binomial(link = "logit"))
fit.y2 &lt;- lm(Y.num ~ R + M.bin + X + C.num + C.bin, data = sdata)
res.1a2 &lt;- smi(fit.r = fit.r1, fit.m = fit.m2,
          fit.y = fit.y2, sims = 40, conditional = FALSE,
          covariates = c("C.num", "C.bin"), treat = "R", seed = 111)
res.1a2

# Categorical mediator
require(MASS)
fit.m3 &lt;- polr(M.cat ~ R + C.num + C.bin, data = sdata)
fit.y3 &lt;- lm(Y.num ~ R + M.cat + X + C.num + C.bin, data = sdata)
res.1a3 &lt;- smi(fit.r = fit.r1, fit.m = fit.m3,
          fit.y = fit.y3, sims = 40, conditional = FALSE,
          covariates = c("C.num", "C.bin"), treat = "R", seed = 111)
res.1a3

require(nnet)
fit.m4 &lt;- multinom(M.cat ~ R + C.num + C.bin, data = sdata)
res.1a4 &lt;- smi(fit.r = fit.r1, fit.m = fit.m4,
          fit.y = fit.y3, sims = 40, conditional = FALSE,
          covariates = c("C.num", "C.bin"), treat = "R", seed = 111)
res.1a4

#------------------------------------------------------------------------------#
# Example 1-b: Binary Outcome
#------------------------------------------------------------------------------#
# Continuous mediator
fit.y1 &lt;- glm(Y.bin ~ R + M.num + X + C.num + C.bin,
          data = sdata, family = binomial(link = "logit"))
res.1b1 &lt;- smi(fit.r = fit.r1, fit.m = fit.m1,
          fit.y = fit.y1, sims = 40, conditional = FALSE,
          covariates = c("C.num", "C.bin"), treat = "R", seed = 32)
res.1b1

# Binary mediator
fit.y2 &lt;- glm(Y.bin ~ R + M.bin + X + C.num + C.bin,
          data = sdata, family = binomial(link = "logit"))
res.1b2 &lt;- smi(fit.r = fit.r1, fit.m = fit.m2,
          fit.y = fit.y2, sims = 40, conditional = FALSE,
          covariates = c("C.num", "C.bin"), treat = "R", seed = 111)
res.1b2

# Categorical mediator
fit.y3 &lt;- glm(Y.bin ~ R + M.cat + X + C.num + C.bin,
          data = sdata, family = binomial(link = "logit"))
res.1b3 &lt;- smi(fit.r = fit.r1, fit.m = fit.m3,
          fit.y = fit.y3, sims = 40, conditional = FALSE,
          covariates = c("C.num", "C.bin"), treat = "R", seed = 111)
res.1b3

res.1b4 &lt;- smi(fit.r = fit.r1, fit.m = fit.m4,
          fit.y = fit.y3, sims = 40, conditional = FALSE,
          covariates = c("C.num", "C.bin"), treat = "R", seed = 111)
res.1b4

#---------------------------------------------------------------------------------#
# Example 2-a: Continuous Outcome, Conditional on Covariates
#---------------------------------------------------------------------------------#
# For conditional = T, need to create data with centered covariates
# copy data
sdata.c &lt;- sdata
# center quantitative covariate(s)
sdata.c$C.num &lt;- scale(sdata.c$C.num, center = TRUE, scale = FALSE)
# center binary (or categorical) covariates(s)
# only neccessary if the desired baseline level is NOT the default baseline level.
sdata.c$C.bin &lt;- relevel(sdata.c$C.bin, ref = "1")

# Continuous mediator
fit.y1 &lt;- lm(Y.num ~ R + M.num + X + C.num + C.bin, data = sdata.c)
fit.m1 &lt;- lm(M.num ~ R + C.num + C.bin, data = sdata.c)
res.2a1 &lt;- smi(fit.m = fit.m1,
          fit.y = fit.y1, sims = 40, conditional = TRUE,
          covariates = c("C.num", "C.bin"), treat = "R", seed = 111)
res.2a1

# Binary mediator
fit.y2 &lt;- lm(Y.num ~ R + M.bin + X + C.num + C.bin, data = sdata.c)
fit.m2 &lt;- glm(M.bin ~ R + C.num + C.bin, data = sdata.c,
          family = binomial(link = "logit"))
res.2a2 &lt;- smi(fit.m = fit.m2,
          fit.y = fit.y2, sims = 40, conditional = TRUE,
          covariates = c("C.num", "C.bin"), treat = "R", seed = 111)
res.2a2

# Categorical mediator
fit.y3 &lt;- lm(Y.num ~ R + M.cat + X + C.num + C.bin, data = sdata.c)
fit.m3 &lt;- polr(M.cat ~ R + C.num + C.bin, data = sdata.c)
res.2a3 &lt;- smi(fit.m = fit.m3,
          fit.y = fit.y3, sims = 40, conditional = TRUE,
          covariates = c("C.num", "C.bin"), treat = "R", seed = 111)
res.2a3

fit.m4 &lt;- multinom(M.cat ~ R + C.num + C.bin, data = sdata.c)
res.2a4 &lt;- smi(fit.m = fit.m4,
          fit.y = fit.y3, sims = 40, conditional = TRUE,
          covariates = c("C.num", "C.bin"), treat = "R", seed = 111)
res.2a4

#------------------------------------------------------------------------------#
# Example 2-b: Binary Outcome, Conditional on Covariates
#------------------------------------------------------------------------------#
# Continuous mediator
fit.y1 &lt;- glm(Y.bin ~ R + M.num + X + C.num + C.bin,
          data = sdata.c, family = binomial(link = "logit"))
res.2b1 &lt;- smi(fit.m = fit.m1,
          fit.y = fit.y1, sims = 40, conditional = TRUE,
          covariates = c("C.num", "C.bin"), treat = "R", seed = 111)
res.2b1

# Binary mediator
fit.y2 &lt;- glm(Y.bin ~ R + M.bin + X + C.num + C.bin,
          data = sdata.c, family = binomial(link = "logit"))
res.2b2 &lt;- smi(fit.m = fit.m2,
          fit.y = fit.y2, sims = 40, conditional = TRUE,
          covariates = c("C.num", "C.bin"), treat = "R", seed = 111)
res.2b2

# Categorical mediator
fit.y3 &lt;- glm(Y.bin ~ R + M.cat + X + C.num + C.bin,
          data = sdata.c, family = binomial(link = "logit"))
res.2b3 &lt;- smi(fit.m = fit.m3,
          fit.y = fit.y3, sims = 40, conditional = TRUE,
          covariates = c("C.num", "C.bin"), treat = "R", seed = 111)
res.2b3

res.2b4 &lt;- smi(fit.m = fit.m4,
          fit.y = fit.y3, sims = 40, conditional = TRUE,
          covariates = c("C.num", "C.bin"), treat = "R", seed = 111)
res.2b4
</code></pre>


</div>