<div class="container">

<table style="width: 100%;"><tr>
<td>gen.itembank</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Item bank generation</h2>

<h3>Description</h3>

<p>This function can be used to generate an item bank.
The user can provide a Q-matrix or create one defining a set of arguments.
Item quality is sampled from a uniform distribution with mean = <em>mean.IQ</em> and range = <em>range.IQ</em>. Alternatively, it is possible to provide a matrix with the guessing and slip parameters (<em>gs.param</em>) or a list with the success probabilities of each latent group (<em>catprob.parm</em>). 
Item parameters are generated so that the monotonicity constraint is satisfied.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gen.itembank(
  Q = NULL,
  gen.Q = list(J = NULL, K = NULL, propK.J = NULL, nI = 1, minJ.K = 1, max.Kcor = 1),
  mean.IQ = NULL,
  range.IQ = NULL,
  gs.parm = NULL,
  catprob.parm = NULL,
  model = "GDINA",
  min.param = 0,
  seed = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Q</code></td>
<td>
<p>Numeric matrix of length <em>J</em> number of items x <em>K</em> number of atributes. Q-matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gen.Q</code></td>
<td>
<p>A list of arguments to generate a Q-matrix if <code>Q</code> is not provided. <code>J</code> = number of items (scalar numeric). <code>K</code> = number of attributes (scalar numeric). <code>propK.J</code> = numeric vector summing up to 1 that determines the proportion of 1-attribute, 2-attribute, ..., items. The length of <code>propK.J</code> determines the maximum number of attributes considered for an item (see <code>Examples</code> below). <code>nI</code> = Scalar numeric that sets the minimum number of identity matrices to be included in the Q-matrix. <code>minJ.K</code> = numeric vector of length <em>K</em> that sets the minimum number of items measuring each attribute. <code>max.Kcor</code> = scalar numeric that sets the maximum positive correlation allowed between two attributes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mean.IQ</code></td>
<td>
<p>Item discrimination (mean for the uniform distribution). <em>mean.IQ</em> = <em>P</em>(<strong>1</strong>) - <em>P</em>(<strong>0</strong>) (Sorrel et al., 2017; Najera et al., in press). Must be a scalar numeric between 0 and 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>range.IQ</code></td>
<td>
<p>Item discrimination (range for the uniform distribution). Must be a scalar numeric between 0 and 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gs.parm</code></td>
<td>
<p>A matrix or data frame for guessing and slip parameters. The number of columns must be 2, where the first column represents the guessing parameters (or <em>P</em>(<strong>0</strong>)), and the second column represents slip parameters (or 1-<em>P</em>(<strong>1</strong>))</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>catprob.parm</code></td>
<td>
<p>A list of success probabilities of each latent group for each non-zero category of each item. This argument requires to specify a Q-matrix in <code>Q</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>A character vector of length <em>J</em> with one model for each item, or a single value to be used for all items. The possible options include <code>"DINA"</code>, <code>"DINO"</code>, <code>"ACDM"</code>, and <code>"GDINA"</code>. One-attribute items will be coded in the output as <code>"GDINA"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.param</code></td>
<td>
<p>Scalar numeric. Minimum value for the delta parameter of the principal effects of each attribute. Only usable if <code>model</code> = <code>"ACDM"</code> or <code>model</code> = <code>"GDINA"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Scalar numeric. A scalar to use with <code>set.seed</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>gen.itembank</code> returns an object of class <code>gen.itembank</code>.
</p>

<dl>
<dt>simQ</dt>
<dd>
<p>Generated Q-matrix (only if <code>gen.Q</code> arguments have been used)</p>
</dd>
<dt>simcatprob.parm</dt>
<dd>
<p>A list of success probabilities for each latent group in each item</p>
</dd>
<dt>simdelta.parm</dt>
<dd>
<p>A list of delta parameters for each item</p>
</dd>
<dt>check</dt>
<dd>
<p>A list that contains the mean.IQ and range.IQ for the item bank so that users can check whether these values match the expected results</p>
</dd>
<dt>specifications</dt>
<dd>
<p>A list that contains all the specifications</p>
</dd>
</dl>
<h3>References</h3>

<p>Najera, P., Sorrel, M. A., de la Torre, J., &amp; Abad, F. J. (2020). Improving robustness in Q-matrix validation using an iterative and dynamic procedure. <em>Applied Psychological Measurement, 44</em>, 431-446.
</p>
<p>Sorrel, M. A., Abad, F. J., Olea, J., de la Torre, J., &amp; Barrada, J. R. (2017). Inferential item-fit evaluation in cognitive diagnosis modeling. <em>Applied Psychological Measurement, 41</em>, 614-631.
</p>


<h3>Examples</h3>

<pre><code class="language-R">####################################
# Example 1.                       #
# Generate item bank providing a   #
# Q-matrix using the G-DINA model  #
####################################

Q &lt;- sim180GDINA$simQ
bank &lt;- gen.itembank(Q = Q, mean.IQ = .70, range.IQ = .20, model = "GDINA")

####################################
# Example 2.                       #
# Generate item bank providing a   #
# Q-matrix with gs.parm            #
####################################

Q &lt;- sim180GDINA$simQ
J &lt;- nrow(Q)
gs &lt;- data.frame(g = runif(J, 0.2, 0.4), s = runif(J, 0, 0.2))
bank &lt;- gen.itembank(Q = Q, gs.parm = gs, model = "GDINA", min.param = 0.05)

####################################
# Example 3.                       #
# Generate item bank providing a   #
# Q-matrix with catprob.parm       #
####################################

Q &lt;- sim180GDINA$simQ[c(1:5, 73:77, 127:131),]
catparm.list &lt;- list(J1 = c(0.2, 0.8),
                     J2 = c(0.1, 0.7),
                     J3 = c(0.2, 0.9),
                     J4 = c(0.3, 0.9),
                     J5 = c(0.3, 0.8),
                     J6 = c(0.2, 0.4, 0.5, 0.8), 
                     J7 = c(0.1, 0.7, 0.8, 0.9), 
                     J8 = c(0.2, 0.3, 0.3, 0.7),
                     J9 = c(0.2, 0.4, 0.4, 0.6), 
                     J10 = c(0.3, 0.5, 0.6, 0.9),
                     J11 = c(0.1, 0.3, 0.3, 0.5, 0.4, 0.5, 0.7, 0.8),
                     J12 = c(0.2, 0.6, 0.7, 0.6, 0.7, 0.8, 0.8, 0.9),
                     J13 = c(0.2, 0.6, 0.2, 0.3, 0.6, 0.7, 0.4, 0.9),
                     J14 = c(0.3, 0.4, 0.3, 0.5, 0.5, 0.6, 0.7, 0.9),
                     J15 = c(0.1, 0.1, 0.2, 0.1, 0.2, 0.3, 0.2, 0.8))
bank &lt;- gen.itembank(Q = Q, catprob.parm = catparm.list)

####################################
# Example 4.                       #
# Generate item bank providing a   #
# Q-matrix using multiple models   #
####################################

Q &lt;- sim180GDINA$simQ
K &lt;- ncol(Q)
model &lt;- sample(c("DINA", "DINO", "ACDM"), size = nrow(Q), replace = TRUE)
bank &lt;- gen.itembank(Q = Q, mean.IQ = .70, range.IQ = .20, model = model)

####################################
# Example 5.                       #
# Generate item bank without       #
# providing a Q-matrix (using      #
# gen.Q arguments)                 #
####################################

bank &lt;- gen.itembank(gen.Q = list(J = 150, K = 5, propK.J = c(0.4, 0.3, 0.2, 0.1),
                     nI = 3, minJ.K = 30, max.Kcor = 1),
                     mean.IQ = .80, range.IQ = .10, min.param = 0.1)

</code></pre>


</div>