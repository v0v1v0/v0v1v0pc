<div class="container">

<table style="width: 100%;"><tr>
<td>auto_melt</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Automatic pivoting of country and year columns to a long format</h2>

<h3>Description</h3>

<p>When at least 3 country names or years are found in the column names, the function will automatically transform the table from a wide to a long format by pivoting the country/year columns.
This is equivalent to applying <code>tidyr::pivot_longer()</code> or <code>data.table::melt()</code> on the columns with years or countries as names.
The function is able to detect years also when they are preceded by a prefix.
</p>


<h3>Usage</h3>

<pre><code class="language-R">auto_melt(
  x,
  names_to = "pivoted_colnames",
  values_to = "pivoted_data",
  verbose = TRUE,
  pivoting_info = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A data.frame object to check and pivot country or year columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names_to</code></td>
<td>
<p>String indicating how the column holding the name of the pivoted columns should be called in the output table. Default is <code>"pivoted_colnames"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>values_to</code></td>
<td>
<p>String indicating how the column containing the values of the pivoted columns should be called in the output table. Default is <code>"pivoted_data"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical value. If set to <code>TRUE</code> (the default), a message will be displayed on the console indicating which columns are being pivoted. If set to <code>FALSE</code>, the messages are turned off.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pivoting_info</code></td>
<td>
<p>Logical value indicating whether to return the list of names of the column that have been pivoted. Default is <code>FALSE</code>. If set to <code>TRUE</code>, the output will be a list instead of simple data.frame. Teh list will contain 1) the pivoted table, 2) the list of pivoted columns.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A table transformed into a "long" format by pivoting country or year columns. If year columns are found, a numeric column called <code>"year_pivoted_colnames"</code> is added isolating the years extracted from the table header's.
</p>


<h3>See Also</h3>

<p>auto_merge, find_countrycol,find_timecol
</p>


<h3>Examples</h3>

<pre><code class="language-R"># example data
example &lt;- data.frame(Date = c("01.01.2019", "01.02.2019", "01.03.2019"),
                      Japan = 1:3,
                      Norway = 2:4,
                      Germany = 3:5,
                      US = 4:6)
example2 &lt;- data.frame(Sector = c("Agriculture", "Mining", "Forestry"),
                       X2000 = 1:3,
                       X2001 = 2:4,
                       X2002 = 3:5,
                       X2003 = 4:6)

# examples pivotting countries and years from column names
auto_melt(example)
auto_melt(example2)
</code></pre>


</div>