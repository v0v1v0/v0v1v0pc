<div class="container">

<table style="width: 100%;"><tr>
<td>s.conc.conc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Specify a Doubly-Concave Shape-Restriction in a CGAM Formula</h2>

<h3>Description</h3>

<p>A symbolic routine to define that a surface is concave in two predictors in a formula argument to cgam.</p>


<h3>Usage</h3>

<pre><code class="language-R">s.conc.conc(x1, x2, numknots = c(0, 0), knots = list(k1 = 0, k2 = 0), space = c("E", "E"))</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x1</code></td>
<td>
<p>A numeric predictor which has the same length as the response vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x2</code></td>
<td>
<p>A numeric predictor which has the same length as the response vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numknots</code></td>
<td>
<p>A vector of the number of knots used to constrain <code class="reqn">x_1</code> and <code class="reqn">x_2</code>. It will not be used if the user specifies the <em>knots</em> argument and each predictor is within the range of its knots. The default is numknots = c(0, 0).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>knots</code></td>
<td>
<p>A list of two vectors of knots used to constrain <code class="reqn">x_1</code> and <code class="reqn">x_2</code>. User-defined knots will be used if each predictor is within the range of its knots. Otherwise, <em>numknots</em> and <em>space</em> will be used to create knots. The default is knots = list(k1 = 0, k2 = 0).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>space</code></td>
<td>
<p>A vector of the character specifying the method to create knots for <code class="reqn">x_1</code> and <code class="reqn">x_2</code>. It will not be used if the user specifies the <em>knots</em> argument. If "E" is used, then equally spaced knots will be created; if "Q" is used, then a vector of equal quantiles will be created with duplicate elements removed. The number of knots is <em>numknots</em> when <em>numknots</em> is a positive integer <code class="reqn">&gt; 4</code>. Otherwise it is of the order <code class="reqn">n^{1/3}</code>. The default is space = c("E", "E").</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>"s.conc.conc" returns the vectors "x1" and "x2", and imposes on each vector six attributes: name, shape, numknots, knots, space and cvs.
</p>
<p>The name attribute is used in the subroutine plotpersp; the numknots, knots and space attributes are the same as the numknots, knots and space arguments in "s.conc.conc"; the shape attribute is "tri_cvs"(doubly-concave); the cvs values for both vectors are FALSE. According to the value of the vector itself and its shape, numknots, knots, space and cvs attributes, the cone edges will be made by triangle spline basis functions in Meyer (2017). The cone edges are a set of basis employed in the hinge algorithm. 
</p>
<p>Note that "s.conc.conc" does not make the corresponding cone edges itself. It sets things up to a subroutine called trispl.fit
</p>
<p>See references cited in this section for more details.
</p>


<h3>Value</h3>

<p>The vectors <code class="reqn">x_1</code> and <code class="reqn">x_2</code>. Each of them has six attributes, i.e., name: names of <code class="reqn">x_1</code> and <code class="reqn">x_2</code>; shape: "tri_cvs"(doubly-concave); numknots: the numknots argument in "s.conc.conc"; knots: the knots argument in "s.conc.conc"; space: the space argument in "s.conc.conc"; cvs: two logical values indicating the monotonicity of the isotonically-constrained surface with respect to <code class="reqn">x_1</code> and <code class="reqn">x_2</code>, which are both FALSE.</p>


<h3>Author(s)</h3>

<p>Mary C. Meyer and Xiyue Liao
</p>


<h3>References</h3>

<p>Meyer, M. C. (2017) Estimation and inference for regression surfaces using shape-constrained splines.
</p>


<h3>See Also</h3>

<p><code>s.conv.conv</code>, <code>cgam</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">	# generate data
	n &lt;- 200
	set.seed(123)
	x1 &lt;- runif(n); x2 &lt;- runif(n)
	y &lt;- -(x1 - 1)^2 - (x2 - 3)^2 + rnorm(n)
   
    # regress y on x1 and x2 under the shape-restriction: "doubly-concave" 
    ans &lt;- cgam(y ~ s.conc.conc(x1, x2), nsim = 0)
    # make a 3D plot of the constrained surface
    plotpersp(ans)
</code></pre>


</div>