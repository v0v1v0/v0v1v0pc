<div class="container">

<table style="width: 100%;"><tr>
<td>h2h_mat</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute matrix format of Head-to-Head values</h2>

<h3>Description</h3>

<p>Functions to compute Head-to-Head values in matrix pair-value format.
</p>


<h3>Usage</h3>

<pre><code class="language-R">h2h_mat(cr_data, ..., fill = NULL)

to_h2h_mat(tbl, value = NULL, fill = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>cr_data</code></td>
<td>
<p>Competition results ready for <code>as_longcr()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Name-value pairs of Head-to-Head functions (see Details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p>A single value to use instead of <code>NA</code> for missing pairs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tbl</code></td>
<td>
<p>Data frame in long format of Head-to-Head values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>String name for column with Head-to-Head value.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>h2h_mat()</code> computes Head-to-Head values in
matrix format. It allows multiple Head-to-Head
functions in <code>...</code> but only first (if present) will be used. Basically, it
uses supplied function to compute long format of Head-to-Head values and then
transforms it naturally to matrix, filling missing values
with <code>fill</code>.
</p>
<p><code>to_h2h_mat()</code> takes <strong>object of h2h_long structure</strong> and converts it into
<code>h2h_mat</code> using column with name <code>value</code> for values and filling data for
implicitly missing (not explicitly provided in <code>tbl</code>) player pairs with
<code>fill</code>. If <code>value</code> is <code>NULL</code> it takes first non-player column. If there is no
such column, it will use vector of dummy values (<code>NA</code>s or <code>fill</code>s).
</p>


<h3>Value</h3>

<p>An object of class <code>h2h_mat</code> which is a matrix with row names
indicating first player in matchup, col names - second and values -
Head-to-Head values.
</p>


<h3>Head-to-Head value</h3>

<p>Head-to-Head value is a summary statistic of direct confrontation between two
players. It is assumed that this value can be computed based only on the
players' matchups. In other words, every game is converted
into series of "subgames" between ordered pairs of players (including
selfplay) which is stored as widecr object. After that, summary of item,
defined by columns <code>player1</code> and <code>player2</code>, is computed using
<code>summarise_item()</code>.
</p>
<p>That said, name-value pairs of Head-to-Head functions should be defined as
for <code>summarise_item()</code> applied to data with columns <code>game</code>, <code>player1</code>,
<code>score1</code>, <code>player2</code>, <code>score2</code>.
</p>


<h3>See Also</h3>

<p>Long format of Head-to-Head values.
</p>
<p>Common Head-to-Head functions.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Only first function is used
ncaa2005 %&gt;%
  h2h_mat(
    mean_score = mean(score1),
    mean_abs_score = mean(abs(score1 - score2))
  )

ncaa2005[-(1:2), ] %&gt;%
  h2h_mat(mean_score = mean(score1), fill = 0)
</code></pre>


</div>