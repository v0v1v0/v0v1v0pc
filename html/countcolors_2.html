<div class="container">

<table style="width: 100%;"><tr>
<td>countColors</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Count the number of pixels within a color range or ranges</h2>

<h3>Description</h3>

<p>Counts the pixels within a color range; ranges can be spherical (see
<code>sphericalRange</code>) or rectangular
(<code>rectangularRange</code>). If multiple ranges are specified, each one
is colored using a different indicator color.
</p>


<h3>Usage</h3>

<pre><code class="language-R">countColors(path, color.range = "spherical", center, radius, lower,
  upper, bg.lower = rep(0.8, 3), bg.upper = rep(1, 3),
  target.color = c("magenta", "cyan", "yellow"), plotting = FALSE,
  save.indicator = FALSE, dpi = 72, return.indicator = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>Path to the image (JPEG or PNG).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color.range</code></td>
<td>
<p>Type of range being specified. Must be either "spherical"
or "rectangular".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>center</code></td>
<td>
<p>A vector or n x 3 matrix of color centers (RGB triplets) around
which to search using spherical color range. RGB range 0-1 (not 0-255). See
details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>radius</code></td>
<td>
<p>Values between 0 and 1 specifying the size of the area around
<code>center</code> to search. The same number of centers and radii must be
specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lower, upper</code></td>
<td>
<p>RGB triplet(s) specifying the bounds of color space
to search. Must be the same length. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bg.lower, bg.upper</code></td>
<td>
<p>RGB triplets specifying the bounds of color space to
ignore as background, or <code>NULL</code> to use the entire image.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target.color</code></td>
<td>
<p>If an indicator image is created, the color with which to
replace specified pixels. Can be either an RGB triplet or one of the
colors listed by <code>colors</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotting</code></td>
<td>
<p>Logical. Should output be plotted in the plot window?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save.indicator</code></td>
<td>
<p>Logical OR path for saving indicator image. If TRUE,
saves image to the same directory as the original image as
'originalimagename_masked.png'; if a path is provided, saves it to that
directory/name instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dpi</code></td>
<td>
<p>Resolution (dots per image) for saving indicator image.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return.indicator</code></td>
<td>
<p>Logical. Should an indicator image (RGB array with
targeted pixels changed to indicator color) be returned?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>More than one set of ranges can be specified for the color search
space, but the same number of arguments must be provided in each case (so
the number of pixels and centers must be the same if using a spherical
range, and the number of upper and lower bounds must be the same if using a
rectangular one).
</p>
<p>For <code>center</code>, <code>upper</code>, and <code>lower</code>, which call for RGB
triplets, provide either a vector of RGB triplets in RGB order, i.e. c(R1,
G1, B1, R2, G2, B2, etc) or a 3-column matrix with one row per RGB triplet.
If a vector is provided, it is coerced to a 3-column matrix, and must
therefore be a multiple of 3.
</p>


<h3>Value</h3>

<p>A list with the following attributes:
</p>

<ul>
<li> <p><code>pixel.idx</code>: Unique coordinates of pixels within color range(s).
</p>
</li>
<li> <p><code>pixel.fraction</code>: Proportion of the non-background image within
color range(s), found by dividing the number of pixels in <code>pixel.idx</code>
by the number of non-background pixels in the image.
</p>
</li>
<li> <p><code>indicator.img</code>: If <code>return.indicator = TRUE</code>, RGB array with
color-swapped pixels.
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>countColorsInDirectory</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Try out a few different radii for white pelicans
pelicans &lt;- system.file("extdata", "pelicans.jpg", package = "countcolors")

white.ctr &lt;- rep(0.9, 9)
white.radii &lt;- c(0.5, 0.3, 0.1)

# Magenta = 50% threshold, cyan = 30% threshold, yellow = 10% threshold
pelican.example &lt;- countcolors::countColors(pelicans, center = white.ctr,
radius = white.radii, bg.lower = NULL, plotting = TRUE)

</code></pre>


</div>