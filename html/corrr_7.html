<div class="container">

<table style="width: 100%;"><tr>
<td>correlate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Correlation Data Frame</h2>

<h3>Description</h3>

<p>An implementation of stats::cor(), which returns a correlation data frame
rather than a matrix. See details below. Additional adjustment include the
use of pairwise deletion by default.
</p>


<h3>Usage</h3>

<pre><code class="language-R">correlate(
  x,
  y = NULL,
  use = "pairwise.complete.obs",
  method = "pearson",
  diagonal = NA,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a numeric vector, matrix or data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p><code>NULL</code> (default) or a vector, matrix or data frame with
compatible dimensions to <code>x</code>.   The default is equivalent to
<code>y = x</code> (but more efficient).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use</code></td>
<td>
<p>an optional character string giving a
method for computing covariances in the presence
of missing values.  This must be (an abbreviation of) one of the strings
<code>"everything"</code>, <code>"all.obs"</code>, <code>"complete.obs"</code>,
<code>"na.or.complete"</code>, or <code>"pairwise.complete.obs"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>a character string indicating which correlation
coefficient (or covariance) is to be computed.  One of
<code>"pearson"</code> (default), <code>"kendall"</code>, or <code>"spearman"</code>:
can be abbreviated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diagonal</code></td>
<td>
<p>Value (typically numeric or NA) to set the diagonal to</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>Set as TRUE to suppress message about <code>method</code> and <code>use</code>
parameters.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function returns a correlation matrix as a correlation data frame in
the following format:
</p>

<ul>
<li>
<p> A tibble (see <code>tibble</code>)
</p>
</li>
<li>
<p> An additional class, "cor_df"
</p>
</li>
<li>
<p> A "term" column
</p>
</li>
<li>
<p> Standardized variances (the matrix diagonal) set to missing values by
default (<code>NA</code>) so they can be ignored in calculations.
</p>
</li>
</ul>
<p>The <code>use</code> argument and its possible values are inherited from <code>stats::cor()</code>:
</p>

<ul>
<li>
<p> "everything": NAs will propagate conceptually, i.e. a resulting value will be NA whenever one of its contributing observations is NA
</p>
</li>
<li>
<p> "all.obs": the presence of missing observations will produce an error
</p>
</li>
<li>
<p> "complete.obs": correlations will be computed from complete observations, with an error being raised if there are no complete cases.
</p>
</li>
<li>
<p> "na.or.complete": correlations will be computed from complete observations, returning an NA if there are no complete cases.
</p>
</li>
<li>
<p> "pairwise.complete.obs": the correlation between each pair of variables is computed using all complete pairs of those particular variables.
</p>
</li>
</ul>
<p>As of version 0.4.3, the first column of a <code>cor_df</code> object is named "term".
In previous versions this first column was named "rowname".
</p>
<p>There is a <code>ggplot2::autoplot()</code> method for quickly visualizing the
correlation matrix, for more information see <code>autoplot.cor_df()</code>.
</p>


<h3>Value</h3>

<p>A correlation data frame <code>cor_df</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
correlate(iris)

## End(Not run)

correlate(iris[-5])

correlate(mtcars)
## Not run: 

# Also supports DB backend and collects results into memory

library(sparklyr)
sc &lt;- spark_connect(master = "local")
mtcars_tbl &lt;- copy_to(sc, mtcars)
mtcars_tbl %&gt;%
  correlate(use = "pairwise.complete.obs", method = "spearman")
spark_disconnect(sc)

## End(Not run)

</code></pre>


</div>