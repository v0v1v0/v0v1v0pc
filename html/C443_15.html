<div class="container">

<table style="width: 100%;"><tr>
<td>treesource</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Mapping the tree clustering solution to a known source of variation underlying the forest</h2>

<h3>Description</h3>

<p>A function that can be used to get insight into a clusterforest solution, in the case that there are known
sources of variation underlying the forest. These known sources of variation must be included in the clusterforest object
(and thus must be defined when running the clusterforest function)
In case of a categorical covariate, it visualizes the number of trees from each value of the covariate that belong to each cluster.
In case of a continuous covariate, it returns the mean and standard deviation of the covariate in each cluster.
</p>


<h3>Usage</h3>

<pre><code class="language-R">treesource(clusterforest, solution)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>clusterforest</code></td>
<td>
<p>The clusterforest object, indluding the treecov attribute.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>solution</code></td>
<td>
<p>The solution</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>multiplot</code></td>
<td>
<p>In case of categorical covariate, for each value of the covariate, a bar plot with the number of trees that belong to each cluster</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>heatmap</code></td>
<td>
<p>In case of a categorical covariate, a heatmap with for each value of the covariate, the number of trees that belong to each cluster</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clustermeans</code></td>
<td>
<p>In case of a continuous covariate, the mean of the covariate in each cluster</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clusterstds</code></td>
<td>
<p>In case of a continuous covariate, the standard deviation of the covariate in each cluster</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">require(rpart)
data_Amphet &lt;-drugs[,c ("Amphet","Age", "Gender", "Edu", "Neuro", "Extr", "Open", "Agree",
"Consc", "Impul","Sensat")]
data_cocaine &lt;-drugs[,c ("Coke","Age", "Gender", "Edu", "Neuro", "Extr", "Open", "Agree",
                         "Consc", "Impul","Sensat")]


#Function to draw a bootstrap sample from a dataset
DrawBoots &lt;- function(dataset, i){
set.seed(2394 + i)
Boot &lt;- dataset[sample(1:nrow(dataset), size = nrow(dataset), replace = TRUE),]
return(Boot)
}

#Function to grow a tree using rpart on a dataset
GrowTree &lt;- function(x,y,BootsSample, minsplit = 40, minbucket = 20, maxdepth =3){

 controlrpart &lt;- rpart.control(minsplit = minsplit, minbucket = minbucket, maxdepth = maxdepth,
 maxsurrogate = 0, maxcompete = 0)
 tree &lt;- rpart(as.formula(paste(noquote(paste(y, "~")), noquote(paste(x, collapse="+")))),
  data = BootsSample, control = controlrpart)
 return(tree)
}

#Draw bootstrap samples and grow trees
BootsA&lt;- lapply(1:5, function(k) DrawBoots(data_Amphet,k))
BootsC&lt;- lapply(1:5, function(k) DrawBoots(data_cocaine,k))
Boots = c(BootsA,BootsC)

TreesA &lt;- lapply(1:5, function (i) GrowTree(x=c ("Age", "Gender", "Edu", "Neuro",
"Extr", "Open", "Agree","Consc", "Impul","Sensat"), y="Amphet", BootsA[[i]] ))
TreesC &lt;- lapply(1:5, function (i) GrowTree(x=c ( "Age", "Gender", "Edu", "Neuro",
"Extr", "Open", "Agree", "Consc", "Impul","Sensat"), y="Coke", BootsC[[i]] ))
Trees=c(TreesA,TreesC)

#Cluster the trees
ClusterForest&lt;- clusterforest(observeddata=drugs,treedata=Boots,trees=Trees,m=1,
fromclus=2, toclus=2, treecov=rep(c("Amphet","Coke"),each=5), sameobs=FALSE, no_cores=2)

#Link cluster result to known source of variation
treesource(ClusterForest, 2)
</code></pre>


</div>