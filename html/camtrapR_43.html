<div class="container">

<table style="width: 100%;"><tr>
<td>surveyReport</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a report about a camera trapping survey and species detections</h2>

<h3>Description</h3>

<p>This function creates a report about a camera trapping survey and species
records. It uses a camera trap station information table and a record table
(generated with <code>recordTable</code>) as input. Output tables can be
saved and a zip file for simple data sharing can be created easily.
</p>


<h3>Usage</h3>

<pre><code class="language-R">surveyReport(
  recordTable,
  CTtable,
  camOp,
  speciesCol = "Species",
  stationCol = "Station",
  cameraCol,
  setupCol,
  retrievalCol,
  CTDateFormat = "ymd",
  CTHasProblems = "deprecated",
  recordDateTimeCol = "DateTimeOriginal",
  recordDateTimeFormat = "ymd HMS",
  Xcol,
  Ycol,
  sinkpath,
  makezip
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>recordTable</code></td>
<td>
<p>data.frame containing a species record table as given by
<code>recordTable</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CTtable</code></td>
<td>
<p>data.frame containing information about location and trapping
period of camera trap stations (equivalent to <code>camtraps</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>camOp</code></td>
<td>
<p>camera operation matrix created with
<code>cameraOperation</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>speciesCol</code></td>
<td>
<p>character. name of the column specifying Species ID in
<code>recordTable</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stationCol</code></td>
<td>
<p>character. name of the column specifying Station ID in
<code>CTtable</code> and <code>recordTable</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cameraCol</code></td>
<td>
<p>character. name of the column specifying Camera ID in
<code>CTtable</code> and <code>recordTable</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>setupCol</code></td>
<td>
<p>character. name of the column containing camera setup dates
in <code>CTtable</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>retrievalCol</code></td>
<td>
<p>character. name of the column containing camera
retrieval dates in <code>CTtable</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CTDateFormat</code></td>
<td>
<p>character. The format of columns <code>setupCol</code> and
<code>retrievalCol</code> (and potential problem columns) in <code>CTtable</code>. Must
be interpretable by either <code>as.Date</code> or the "orders" argument
<code>parse_date_time</code> in <span class="pkg">lubridate</span>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CTHasProblems</code></td>
<td>
<p>deprecated (since version 2.1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recordDateTimeCol</code></td>
<td>
<p>character. The name of the column containing date
and time of records in <code>recordTable</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recordDateTimeFormat</code></td>
<td>
<p>character. The date/time format of column
<code>recordDateTimeCol</code> in <code>recordTable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Xcol</code></td>
<td>
<p>character. name of the column specifying x coordinates in
<code>CTtable</code>. Used to create detection maps if <code>makezip</code> is TRUE.
(optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Ycol</code></td>
<td>
<p>character. name of the column specifying y coordinates in
<code>CTtable</code>. Used to create detection maps if <code>makezip</code> is TRUE.
(optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sinkpath</code></td>
<td>
<p>character. The directory into which the survey report is
saved (optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>makezip</code></td>
<td>
<p>logical. Create a zip file containing tables, plots and maps
in <code>sinkpath</code>?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>dateFormat</code> defaults to "YYYY-MM-DD", e.g. "2014-10-31". It can be
specified either in the format required by <code>strptime</code> or
the 'orders' argument in <code>parse_date_time</code> in
<span class="pkg">lubridate</span>. In the example above, "YYYY-MM-DD" would be specified as
"%Y-%m-%d" or "ymd".
</p>
<p><code>recordDateTimeFormat</code> defaults to the "YYYY-MM-DD HH:MM:SS"
convention, e.g. "2014-09-30 22:59:59". <code>recordDateTimeFormat</code> can be
interpreted either by base-R via <code>strptime</code> or in
<span class="pkg">lubridate</span> via <code>parse_date_time</code> (argument
"orders"). <span class="pkg">lubridate</span> will be used if there are no "%" characters in
<code>recordDateTimeFormat</code>.
</p>
<p>For "YYYY-MM-DD HH:MM:SS", <code>recordDateTimeFormat</code> would be either
"%Y-%m-%d %H:%M:%S" or "ymd HMS". For details on how to specify date
and time formats in R see <code>strptime</code> or
<code>parse_date_time</code>.
</p>
<p>Note: as of version 2.1, argument <code>CTHasProblems</code> is deprecated and
defunct. Please use <code>camOp</code> instead to provide information about
periods of camera activity and malfunction. If <code>camOp</code> is not provided
the legacy version of surveyReport (from camtrapR 2.0.3) will be run with a
warning.
</p>


<h3>Value</h3>

<p>An invisible list containing 5 <code>data.frames</code>.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>survey_dates</code></td>
<td>
<p>station and image date ranges, number of total and
active trap days (calendar days and taking into account independent effort
of multiple cameras, if applicable), number of cameras per station</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>species_by_station</code></td>
<td>
<p>species numbers by station</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>events_by_species</code></td>
<td>
<p>number of events and stations by species</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>events_by_station</code></td>
<td>
<p>number of events for every species by station (only
species that were recorded)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>events_by_station2</code></td>
<td>
<p>number of events for
all species at all stations (including species that were not recorded)</p>
</td>
</tr>
</table>
<p>The output will be saved to a .txt file if <code>sinkpath</code> is defined.
</p>
<p>If <code>makezip</code> is TRUE, a zip file will be created in <code>sinkpath</code>. It
contains single-species activity plots, detection maps (if <code>Xcol</code> and
<code>Ycol</code> are defined), the survey report tables, the record table and the
camera trap station table, and an example R script.
</p>


<h3>Author(s)</h3>

<p>Juergen Niedballa
</p>


<h3>See Also</h3>

<p><code>recordTable</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(camtraps)
data(recordTableSample)

# since version 2.1, camera operation matrix is required as input

camop_no_problem &lt;- cameraOperation(CTtable      = camtraps,
                                    stationCol   = "Station",
                                    setupCol     = "Setup_date",
                                    retrievalCol = "Retrieval_date",
                                    writecsv     = FALSE,
                                    hasProblems  = FALSE,
                                    dateFormat   = "dmy"
)

reportTest &lt;- surveyReport (recordTable          = recordTableSample,
                            CTtable              = camtraps,
                            camOp                = camop_no_problem,
                            speciesCol           = "Species",
                            stationCol           = "Station",
                            setupCol             = "Setup_date",
                            retrievalCol         = "Retrieval_date",
                            CTDateFormat         = "dmy", 
                            recordDateTimeCol    = "DateTimeOriginal",
                            recordDateTimeFormat = "ymd HMS")

class(reportTest)  # a list with
length(reportTest) # 5 elements

reportTest[[1]]    # camera trap operation times and image date ranges
reportTest[[2]]    # number of species by station
reportTest[[3]]    # number of events and number of stations by species
reportTest[[4]]    # number of species events by station
reportTest[[5]]    # number of species events by station including 0s (non-observed species)

# with camera problems

camop_problem &lt;- cameraOperation(CTtable      = camtraps,
                                 stationCol   = "Station",
                                 setupCol     = "Setup_date",
                                 retrievalCol = "Retrieval_date",
                                 writecsv     = FALSE,
                                 hasProblems  = TRUE,
                                 dateFormat   = "dmy"
)

reportTest_problem &lt;- surveyReport (recordTable          = recordTableSample,
                                    CTtable              = camtraps,
                                    camOp                = camop_problem,
                                    speciesCol           = "Species",
                                    stationCol           = "Station",
                                    setupCol             = "Setup_date",
                                    retrievalCol         = "Retrieval_date",
                                    CTDateFormat         = "dmy", 
                                    recordDateTimeCol    = "DateTimeOriginal",
                                    recordDateTimeFormat = "ymd HMS")

reportTest_problem$survey_dates



## if camOp is missing, the legacy version (from 2.0.3) will be used:

reportTest_problem_old &lt;- surveyReport (recordTable          = recordTableSample,
                                        CTtable              = camtraps,
                                       # camOp                = camop_problem,
                                        speciesCol           = "Species",
                                        stationCol           = "Station",
                                        setupCol             = "Setup_date",
                                        retrievalCol         = "Retrieval_date",
                                        CTDateFormat         = "dmy", 
                                        recordDateTimeCol    = "DateTimeOriginal",
                                        recordDateTimeFormat = "ymd HMS")

## Not run: 
# run again with sinkpath defined
reportTest &lt;- surveyReport (recordTable          = recordTableSample,
                            CTtable              = camtraps,
                            camOp                = camop_no_problem,
                            speciesCol           = "Species",
                            stationCol           = "Station",
                            setupCol             = "Setup_date",
                            retrievalCol         = "Retrieval_date",
                            CTDateFormat         = "dmy",, 
                            recordDateTimeCol    = "DateTimeOriginal",
                            recordDateTimeFormat = "ymd HMS",
                            sinkpath             = getwd())

# have a look at the text file
readLines(list.files(getwd(), pattern = paste("survey_report_", Sys.Date(), ".txt", sep = ""), 
					 full.names = TRUE))

## End(Not run)

</code></pre>


</div>