<div class="container">

<table style="width: 100%;"><tr>
<td>cfd.semipar.quantile</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Quantile Decomposition: semiparametric version</h2>

<h3>Description</h3>

<p>Decompose the difference in a quantile of some outcome Y between groups. In this semiparametric version, we do not assume a parametric model for the mediator: instead, we sample from the distribution of the mediator in the reference group; this can be done within strata of one or more third variables.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cfd.semipar.quantile(
  formula,
  mediator,
  group,
  strata = NA,
  nbin = 5,
  data,
  family = "Gaussian",
  bs.size = 1000,
  mc.size = 50,
  alpha = 0.05,
  probs = 0.5,
  print.iteration = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>the <code>formula</code> for the multivariable model (see <code>glm</code>) for the outcome Y.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mediator</code></td>
<td>
<p>the column name of the mediator M.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>column name of the variable containing the group identifier.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata</code></td>
<td>
<p>the name of a variable containing the strata of a third variable (or set of variables) within which we equalize mediator values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nbin</code></td>
<td>
<p>if a numeric (i.e. non-factor or character) strata variable is defined, how many bins should be made from it within which we equalize the mediator distribution?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame containing the variables in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>a description of the error distribution to be used in the model, see <code>family</code> for details. For the outcome variable any member of the <code>glm</code> family can be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bs.size</code></td>
<td>
<p>the number of bootstrap iterations to be performed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mc.size</code></td>
<td>
<p>the number of Monte Carlo iterations to be performed (more = more MC error reduction).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>the alpha level used to construct confidence intervals (0.05 = 95 percent confidence interval).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>probs</code></td>
<td>
<p>the quantiles of interest to be decomposed, should be values between 0 and 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print.iteration</code></td>
<td>
<p>print the bootstrap iteration</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>out_nc</code> returns the mean level of the outcome under the natural course, which is a value that should be close to the empirically observed value of the outcome for each group. <code>out_nc_quantile</code> provides the <code>alpha/2</code> and <code>1-alpha/2</code> bootstrap quantiles for this mean (AKA bootstrap percentile confidence intervals).Similarly, <code>out_cf</code>, <code>out_cf_quantile</code>,provide the corresponding values for the counterfactual scenario where the mediators of the groups are equalized. <code>mediation</code> returns the proportion mediated by setting the intervened on mediator to be equal in level to the reference group and <code>mediation_quantile</code> returns the 1-alpha confidence interval.
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(100)
# the decomposition functions in our package are computationally intensive
# to make the example run quick, I perform it on a subsample (n=175) of the data:
cfd.example.sample &lt;- cfd.example.data[sample(175),]
quantile.semipar.results.1 &lt;- cfd.semipar.quantile(formula='out.gauss ~ SES +
                                                  med.gauss + med.binom + age',
                                                  mediator='med.gauss',
                                                  group='SES',
                                                  strata='age',
                                                  nbin=5,
                                                  data=cfd.example.sample,
                                                  family='gaussian',
                                                  bs.size=50,
                                                  mc.size=10,
                                                  alpha=0.05,
                                                  probs=0.50)
# also note that normally we would recommend an bs.size of 250+
# and an mc.size of 50+
# see README.md for a more detailed description of the functions in this package.
</code></pre>


</div>