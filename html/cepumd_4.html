<div class="container">

<table style="width: 100%;"><tr>
<td>ce_mean</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate a CE weighted mean</h2>

<h3>Description</h3>

<p>Calculate a weighted mean using the method used to produce
official CE estimates.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ce_mean(ce_data)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>ce_data</code></td>
<td>
<p>A data frame containing at least a finlwt21 column,
44 replicate weight columns (wtrep01-44), a cost column, and a survey
indicator column. All but the survey column must be numeric.</p>
</td>
</tr></table>
<h3>Value</h3>

<p>A 1-row dataframe containing the following columns:
</p>

<ul>
<li>
<p> agg_exp - The estimated aggregate expenditure
</p>
</li>
<li>
<p> mean_exp - The estimated mean expenditure
</p>
</li>
<li>
<p> se - The estimated standard error of the estimated mean expenditure
</p>
</li>
<li>
<p> cv - The coefficient of variation of the estimated mean expenditure
</p>
</li>
</ul>
<h3>Note</h3>

<p>Estimates produced using PUMD, which is topcoded by the CE and has some
records suppressed to protect respondent confidentiality, will not match the
published estimates released by the CE in most cases. The CE's published
estimates are based on confidential data that are not topcoded nor have
records suppressed. You can learn more at
<a href="https://www.bls.gov/cex/pumd_disclosure.htm">CE Protection of Respondent Confidentiality</a>
</p>


<h3>See Also</h3>

<p><code>ce_quantiles()</code> <code>ce_prepdata()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Download the HG file keeping the section for expenditures on utilities
## Not run: 
utils_hg &lt;- ce_hg(2017, interview) |&gt;
  ce_uccs("Utilities, fuels, and public services", uccs_only = FALSE)

## End(Not run)

# Download and prepare interview data
## Not run: 
utils_interview &lt;- ce_prepdata(
  2017,
  interview,
  uccs = ce_uccs(utils_hg, "Utilities, fuels, and public services"),
  zp = NULL,
  integrate_data = FALSE,
  hg = utils_hg,
  bls_urbn
)

## End(Not run)

# Calculate the mean expenditure on utilities
## Not run: ce_mean(utils_interview)

# Calculate the mean expenditure on utilities by urbanicity
## Not run: 
utils_interview |&gt;
  tidyr::nest(-bls_urbn) |&gt;
  mutate(mean_utils = purrr::map(data, ce_mean)) |&gt;
  select(-data) |&gt;
  unnest(mean_utils)

## End(Not run)

</code></pre>


</div>