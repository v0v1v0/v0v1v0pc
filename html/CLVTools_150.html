<div class="container">

<table style="width: 100%;"><tr>
<td>SetDynamicCovariates</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add Dynamic Covariates to a CLV data object</h2>

<h3>Description</h3>

<p>Add dynamic covariate data to an existing data object of class <code>clv.data</code>.
The returned object can be used to fit models with dynamic covariates.
</p>
<p>No covariate data can be added to a clv data object which already has any covariate set.
</p>
<p>At least 1 covariate is needed for both processes and no categorical covariate may be of only a single category.
</p>


<h3>Usage</h3>

<pre><code class="language-R">SetDynamicCovariates(
  clv.data,
  data.cov.life,
  data.cov.trans,
  names.cov.life,
  names.cov.trans,
  name.id = "Id",
  name.date = "Date"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>clv.data</code></td>
<td>
<p>CLV data object to add the covariates data to.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.cov.life</code></td>
<td>
<p>Dynamic covariate data as <code>data.frame</code> or <code>data.table</code> for the lifetime process.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.cov.trans</code></td>
<td>
<p>Dynamic covariate data as <code>data.frame</code> or <code>data.table</code> for the transaction process.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names.cov.life</code></td>
<td>
<p>Vector with names of the columns in <code>data.cov.life</code> that contain the covariates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names.cov.trans</code></td>
<td>
<p>Vector with names of the columns in <code>data.cov.trans</code> that contain the covariates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name.id</code></td>
<td>
<p>Name of the column to find the Id data for both, <code>data.cov.life</code> and <code>data.cov.trans</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name.date</code></td>
<td>
<p>Name of the column to find the Date data for both, <code>data.cov.life</code> and <code>data.cov.trans</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>data.cov.life</code> and <code>data.cov.trans</code> are <code>data.frame</code>s or <code>data.table</code>s that
each contain exactly 1 row for every combination of timepoint and customer.
For each customer appearing in the transaction data
there needs to be covariate data at every timepoint that marks the start of a period as defined
by <code>time.unit</code>. It has to range from the start of the estimation sample (<code>timepoint.estimation.start</code>)
until the end of the period in which the end of the holdout sample (<code>timepoint.holdout.end</code>) falls.
See the the provided data <code>apparelDynCov</code> for illustration.
Covariates of class <code>character</code> or <code>factor</code> are converted to k-1 numeric dummies.
</p>
<p><code>Date as character</code>
If the Date column in the covariate data is of type <code>character</code>, the <code>date.format</code> given when
creating the the <code>clv.data</code> object is used for parsing.
</p>


<h3>Value</h3>

<p>An object of class <code>clv.data.dynamic.covariates</code>.
See the class definition clv.data.dynamic.covariates
for more details about the returned object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
data("apparelTrans")
data("apparelDynCov")

# Create a clv data object without covariates
clv.data.apparel &lt;- clvdata(apparelTrans, time.unit="w",
                            date.format="ymd")

# Add dynamic covariate data
clv.data.dyn.cov  &lt;-
   SetDynamicCovariates(clv.data.apparel,
                       data.cov.life  = apparelDynCov,
                       names.cov.life = c("High.Season", "Gender", "Channel"),
                       data.cov.trans = apparelDynCov,
                       names.cov.trans = c("High.Season", "Gender", "Channel"),
                       name.id = "Id",
                       name.date = "Cov.Date")

# summary output about covariates data
summary(clv.data.dyn.cov)

# fit pnbd model with dynamic covariates
pnbd(clv.data.dyn.cov)

## End(Not run)

</code></pre>


</div>