<div class="container">

<table style="width: 100%;"><tr>
<td>add_probs.glmerMod</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Response Probabilities for Generalized Linear Mixed Model Predictions</h2>

<h3>Description</h3>

<p>This function is one of the methods for <code>add_probs</code>, and is
called automatically when <code>add_probs</code> is used on a <code>fit</code>
of class <code>glmerMod</code>. Probabilities are approximate and
determined via a simulation. This function is experimental.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'glmerMod'
add_probs(
  df,
  fit,
  q,
  name = NULL,
  yhatName = "pred",
  comparison = "&lt;",
  type = "boot",
  includeRanef = TRUE,
  nSims = 10000,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A data frame of new data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>An object of class <code>glmerMod</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q</code></td>
<td>
<p>A double. A quantile of the response distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p><code>NULL</code> or character vector of length one. If
<code>NULL</code>, response probabilities automatically will be named
by <code>add_probs</code>,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yhatName</code></td>
<td>
<p><code>NULL</code> or a string. Name of the predictions
vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>comparison</code></td>
<td>
<p>A string. If <code>comparison = "&lt;"</code>, then
<code class="reqn">Pr(Y|x &lt; q)</code> is calculated for each observation in
<code>df</code>. Default is "&lt;". Must be "&lt;" or "&gt;" for objects of
class <code>lm</code> or <code>lmerMod</code>. If <code>fit</code> is a
<code>glm</code> or <code>glmerMod</code>, then <code>comparison</code> also may
be <code>"&lt;="</code> , <code>"&gt;="</code> , or <code>"="</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>A string. Must be <code>"boot"</code>, If <code>type =
"boot"</code>, then <code>add_ci</code> calls <code>lme4::simulate</code> to
calculate the probabilities.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>includeRanef</code></td>
<td>
<p>A logical. Default is <code>TRUE</code>. Set whether
the predictions and intervals should be made conditional on the
random effects. If <code>FALSE</code>, random effects will not be
included.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nSims</code></td>
<td>
<p>A positive integer.  Controls the number of bootstrap
replicates if <code>type = "boot"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If <code>IncludeRanef</code> is False, random slopes and intercepts are set to 0. Unlike in
'lmer' fits, settings random effects to 0 does not mean they are marginalized out. Consider
generalized estimating equations if this is desired.
</p>


<h3>Value</h3>

<p>A dataframe, <code>df</code>, with predicted values and estimated
probabilities attached.
</p>


<h3>See Also</h3>

<p><code>add_pi.glmerMod</code> for prediction intervals
of <code>glmerMod</code> objects, <code>add_ci.glmerMod</code> for
confidence intervals of <code>glmerMod</code> objects, and
<code>add_quantile.glmerMod</code> for response quantiles of
<code>glmerMod</code> objects.
</p>


<h3>Examples</h3>

<pre><code class="language-R">n &lt;- 300
x &lt;- runif(n)
f &lt;- factor(sample(1:5, size = n, replace = TRUE))
y &lt;- rpois(n, lambda = exp(1 - 0.05 * x * as.numeric(f) + 2 * as.numeric(f)))
df &lt;- data.frame(x = x, f = f, y = y)
fit &lt;- lme4::glmer(y ~ (1+x|f), data=df, family = "poisson")

add_probs(df, fit, name = "p0.6", q = 0.6, nSims = 500)

</code></pre>


</div>