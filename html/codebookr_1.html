<div class="container">

<table style="width: 100%;"><tr>
<td>cb_add_col_attributes</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add Attributes to Columns</h2>

<h3>Description</h3>

<p>Add arbitrary attributes to columns (e.g., description, source,
column type). These attributes can later be accessed to fill in the column
attributes table.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cb_add_col_attributes(df, .x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>Data frame of interest</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.x</code></td>
<td>
<p>Column of interest in df</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arbitrary list of attributes (i.e., attribute = "value")</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Typically, though not necessarily, the first step in creating your
codebook will be to add column attributes to your data. The
<code>cb_add_col_attributes()</code> function is a convenience function that allows
you to add arbitrary attributes to the columns of the data frame. These
attributes can later be accessed to fill in the column attributes table of
the codebook document. Column attributes <em>can</em> serve a similar function to
variable labels in SAS or Stata; however, you can assign many different
attributes to a column and they can contain any kind of information you want.
</p>
<p>Although the <code>cb_add_col_attributes()</code> function will allow you to add any
attributes you want, there are currently <strong>only five</strong> special attributes
that the <code>codebook()</code> function will recognize and add to the column
attributes table of the codebook document. They are:
</p>

<dl>
<dt>description:</dt>
<dd>
<p>Although you may add any text you desire to the
<code>description</code> attribute, it is intended to be used describe the
question/process that generated the data contained in the column.
Many statistical software packages refer to this as a variable label.
If the data was imported from SAS, Stata, or SPSS with variable labels
using the <code>haven</code> package, <code>codebook</code> will automatically recognize them.
There is no need to manually create them. However, you may overwrite the
imported variable label for any column by adding a <code>description</code>
attribute.</p>
</dd>
<dt>source:</dt>
<dd>
<p>Although you may add any text you desire to the <code>source</code>
attribute, it is intended to be used describe where the data contained
in the column originally came from. For example, if the current data
frame was created by merging multiple data sets together, you may want
to use the source attribute to identify the data set it originates from.
As another example, if the current data frame contains longitudinal
data, you may want to use the source attribute to identify the wave(s)
in which data for this column was collected.</p>
</dd>
<dt>col_type:</dt>
<dd>
<p>The <code>col_type</code> attribute is intended to provide additional
information above and beyond the <code style="white-space: pre;">⁠Data type⁠</code> (i.e., column class) about
the values in the column. For example, you may have a column of 0's
and 1's, which will have a <em>numeric</em> data type. However, you may want
to inform data users that this is really a dummy variable where the
0's and 1's represent discrete categories (No and Yes). Another way to
think about it is that the <code style="white-space: pre;">⁠Data type⁠</code> attribute is how <em>R</em>
understands the column and the <code style="white-space: pre;">⁠Column type⁠</code> attribute is how <em>humans</em>
should understand the column.
Currently accepted values are:
</p>

<ul>
<li>
<p><code>Numeric</code>
</p>
</li>
<li>
<p><code>Categorical</code>
</p>
</li>
<li>
<p><code>Time</code>
</p>
</li>
</ul>
<p>Perhaps even more importantly, setting the <code>col_type</code> attribute helps
R determine which descriptive statistics to calculate for the bottom
half of the column attributes table. Inside of the <code>codebook()</code>
function, the <code>cb_add_summary_stats()</code> function will attempt to figure
out whether the column is:
</p>

<ul>
<li>
<p>numeric
</p>
</li>
<li>
<p>categorical - many categories (e.g. participant id)
</p>
</li>
<li>
<p>categorical - few categories (e.g. sex)
</p>
</li>
<li>
<p>time - including dates
</p>
</li>
</ul>
<p>Again, this matters because the table of summary stats shown in the
codebook document depends on the value <code>cb_add_summary_stats()</code>
chooses. However, the user can directly tell <code>cb_add_summary_stats()</code>
which summary stats to calculate by providing a <code>col_type</code> attribute
to a column with one of the following values: <code>Numeric</code>,
<code>Categorical</code>, or <code>Time</code>.</p>
</dd>
<dt>value_labels:</dt>
<dd>
<p>Although you may pass any named vector you desire to the <code>value_labels</code>
attribute, it is intended to inform your data users about how to
correctly interpret numerically coded categorical variables. For
example, you may have a column of 0's and 1's that represent discrete
categories (i.e., "No" and "Yes") instead of numerical quantities. In
many other software packages (e.g., SAS, Stata, and SPSS), you can
layer "No" and "Yes" labels on top of the 0's and 1's to improve the
readability of your analysis output. These are commonly referred to
as <em>value labels</em>. The R programming language does not really have
value labels in the same way that other popular statistical software
applications do. R users can (and typically should) coerce numerically
coded categorical variables into factors; however, coercing a numeric
vector to a factor is not the same as adding value labels to a numeric
vector because the underlying numeric values can change in the process
of creating the factor. For this, and other reasons, many R programmers
choose to create a <em>new</em> factor version of a numerically encoded
variable as opposed to overwriting/transforming the numerically encoded
variable. In those cases, you may want to inform your data users about
how to correctly interpret numerically coded categorical variables.
Adding value labels to your codebook is one way of doing so.
</p>

<ul>
<li>
<p>Add value labels to columns as a named vector to the
<code>value_labels</code> attribute. For example, <code>value_labels</code> =
c("No" = 0, "Yes" = 1).

</p>
</li>
<li>
<p>If the data was imported from SAS, Stata, or SPSS with value labels
using the <code>haven</code> package, <code>codebook</code> will automatically recognize
them. There is no need to manually create them. However, you may
overwrite the imported value labels for any column by adding a
<code>value_labels</code> attribute as shown in the example below.

</p>
</li>
</ul>
</dd>
<dt>skip_pattern:</dt>
<dd>
<p>Although you may add any text you desire to the <code>skip_pattern</code>
attribute, it is intended to be used describe skip patterns in the
data collection tools that impact which study participants were exposed
to each study item. For example, If a question in your data was only
asked of participants who were enrolled in the study for at least
10 days, then you may want to add a note like "Not asked if
days &lt; 10" to the skip pattern section of
the column attributes table.</p>
</dd>
</dl>
<h3>Value</h3>

<p>Returns the same data frame (or tibble) passed to the <code>df</code> argument
with column attributes added.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(dplyr, warn.conflicts = FALSE)
library(codebookr)
data(study)

study &lt;- study %&gt;%
  cb_add_col_attributes(
    .x = likert,
    description = "An example Likert scale item",
    source = "Exposure questionnaire",
    col_type = "categorical",
    value_labels = c(
      "Very dissatisfied" = 1,
      "Somewhat dissatisfied" = 2,
      "Neither satisfied nor dissatisfied" = 3,
      "Somewhat satisfied" = 4,
      "Very satisfied" = 5
    ),
    skip_pattern = "Not asked if days &lt; 10"
  )
</code></pre>


</div>