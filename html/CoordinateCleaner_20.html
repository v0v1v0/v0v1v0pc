<div class="container">

<table style="width: 100%;"><tr>
<td>cd_round</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Identify Datasets with Rasterized Coordinates</h2>

<h3>Description</h3>

<p>Flags datasets with periodicity patterns indicative of a rasterized
(lattice) collection scheme, as often obtain from e.g. atlas data. Using a
combination of autocorrelation and sliding-window outlier detection to
identify periodicity patterns in the data. See 
<a href="https://besjournals.onlinelibrary.wiley.com/doi/full/10.1111/2041-210X.13152">https://besjournals.onlinelibrary.wiley.com/doi/full/10.1111/2041-210X.13152</a>
for further details and 
a description of the algorithm
</p>


<h3>Usage</h3>

<pre><code class="language-R">cd_round(
  x,
  lon = "decimalLongitude",
  lat = "decimalLatitude",
  ds = "dataset",
  T1 = 7,
  reg_out_thresh = 2,
  reg_dist_min = 0.1,
  reg_dist_max = 2,
  min_unique_ds_size = 4,
  graphs = TRUE,
  test = "both",
  value = "clean",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>data.frame. Containing geographical coordinates and species names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lon</code></td>
<td>
<p>character string. The column with the longitude coordinates.
Default = “decimalLongitude”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lat</code></td>
<td>
<p>character string. The column with the latitude coordinates.
Default = “decimalLatitude”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ds</code></td>
<td>
<p>a character string. The column with the dataset of each record. In
case <code>x</code> should be treated as a single dataset, identical for all
records.  Default = “dataset”.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>T1</code></td>
<td>
<p>numeric.  The threshold for outlier detection in a in an
interquantile range based test. This is the major parameter to specify the
sensitivity of the test: lower values, equal higher detection rate. Values
between 7-11 are recommended. Default = 7.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reg_out_thresh</code></td>
<td>
<p>numeric. Threshold on the number of equal distances
between outlier points.  See details.  Default = 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reg_dist_min</code></td>
<td>
<p>numeric.  The minimum detection distance between
outliers in degrees (the minimum resolution of grids that will be flagged).
Default = 0.1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reg_dist_max</code></td>
<td>
<p>numeric.  The maximum detection distance between
outliers in degrees (the maximum resolution of grids that will be flagged).
Default = 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_unique_ds_size</code></td>
<td>
<p>numeric.  The minimum number of unique locations
(values in the tested column) for datasets to be included in the test.
Default = 4.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>graphs</code></td>
<td>
<p>logical. If TRUE, diagnostic plots are produced.  Default =
TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test</code></td>
<td>
<p>character string.  Indicates which column to test. Either
“lat” for latitude, “lon” for longitude, or “both” for
both.  In the latter case datasets are only flagged if both test are failed.
Default = “both”</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>character string.  Defining the output value. See value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical. If TRUE reports the name of the test and the number
of records flagged.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Depending on the ‘value’ argument, either a <code>data.frame</code>
with summary statistics and flags for each dataset (“dataset”) or a
<code>data.frame</code> containing the records considered correct by the test
(“clean”) or a logical vector (“flagged”), with TRUE = test passed and FALSE =
test failed/potentially problematic. Default =
“clean”.
</p>


<h3>Note</h3>

<p>See <a href="https://ropensci.github.io/CoordinateCleaner/">https://ropensci.github.io/CoordinateCleaner/</a> for more
details and tutorials.
</p>


<h3>See Also</h3>

<p>Other Datasets: 
<code>cd_ddmm()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
#simulate bias grid, one degree resolution, 10% error on a 1000 records dataset
#simulate biased fraction of the data, grid resolution = 1 degree
#simulate non-biased fraction of the data
  bi &lt;- sample(3 + 0:5, size = 100, replace = TRUE)
  mu &lt;- runif(3, 0, 15)
  sig &lt;- runif(3, 0.1, 5)
  cl &lt;- rnorm(n = 900, mean = mu, sd = sig)
  lon &lt;- c(cl, bi)
  
  bi &lt;- sample(9:13, size = 100, replace = TRUE)
  mu &lt;- runif(3, 0, 15)
  sig &lt;- runif(3, 0.1, 5)
  cl &lt;- rnorm(n = 900, mean = mu, sd = sig)
  lat &lt;- c(cl, bi)
  
  #add biased data
  
  inp &lt;- data.frame(decimalLongitude = lon,
                    decimalLatitude = lat,
                    dataset = "test")
            
          
  #run test
  ## Not run: 
  cd_round(inp, value = "dataset")
  
## End(Not run)
  

</code></pre>


</div>