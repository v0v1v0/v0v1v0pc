<div class="container">

<table style="width: 100%;"><tr>
<td>ypsummary</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>The main function of the package provides five summary measures of the treatment effect for clinical trials.</h2>

<h3>Description</h3>

<p><code>ypsummary</code> provides estimates of several summary measures of the treatment effect for design and analysis of clinical trials with survival outcomes, introduced in Yang (2018). The function utilizes the short-term and long-term hazard ratio model proposed in Yang and Prentice (2005), which can acccomodate various nonproportional hazard scenarios. The asymptotic properties of the summary measures are also discussed in Yang and Prentice (2011), Yang (2013), and Yang (2018).
</p>


<h3>Usage</h3>

<pre><code class="language-R">## Default S3 method:
ypsummary(time, event, group, tau, alpha = 0.05, tie = TRUE, 
    bound = 50, repnum = 2000, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>for S4 method only.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>A numeric vector of observations pooled from the two groups</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event</code></td>
<td>
<p>A numeric vector of the right-censoring indicator (event = 1, censored = 0)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>A numeric vector of the group indicator (treatment = 1, control = 0)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau</code></td>
<td>
<p>the upper end of the range used in defining the summary measures. Must be user-specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Significance level. The default value is 0.05.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tie</code></td>
<td>
<p>The default is <code>TRUE</code>. Add very tiny values to the observations when sorting them to avoid ties.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bound</code></td>
<td>
<p>A boundary (<code>-bound</code>, <code>bound</code>) for estimating the parameters in the short-term and long-term hazard ratio model (Yang and Prentice, 2005). These parameters are <code class="reqn">\beta_1</code> and <code class="reqn">\beta_2</code> in their notations. The default boundary is <code class="reqn">(-50, 50)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repnum</code></td>
<td>
<p>the number of replications for the resampling method in obtaining the limiting variance estimators of the measures. The default value is 2000.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function <code>ypsummary</code> provides five summary measures of the treatment effect (see, Yang 2018), which can be utilized for various nonproportional haards scenarios:
</p>

<ul>
<li>
<p> the average hazard ratio (AHR): <code class="reqn">\int  hr(x) dx</code>
</p>
</li>
<li>
<p> the weighted average hazard ratio (WAHR): <code class="reqn">\int hr(x) dw(x)</code> where <code class="reqn">dw(x) = dF_c(x)/F_c(\tau)</code>
</p>
</li>
<li>
<p> the restricted superiority probability ratio (RSPR): <code class="reqn">\frac{\int Sc(x) dF_t(x)}{\int S_t(x) dF_c(x)}</code>
</p>
</li>
<li>
<p> the restricted mean survival difference (RMSD): <code class="reqn">\int S_t(x) dx - \int S_c(x) dx</code>
</p>
</li>
<li>
<p> the ratio of restricted mean times lost (RRMTL): <code class="reqn">\frac{\tau - \int S_t(x) dx}{\tau - \int S_c(x) dx}</code>
</p>
</li>
</ul>
<p>where <code class="reqn">hr(x)</code> is the hazard ratio of the treatment group over the control group, <code class="reqn">F_t(x)</code> and <code class="reqn">F_c(x)</code> are the distribution functions for the treatment group and control group, respectively, and <code class="reqn">S_t(x) = 1 - F_t(x)</code> and <code class="reqn">S_c(x) = 1 - F_c(x)</code>. Note that all integrals are taken from 0 to <code class="reqn">\tau</code>. 
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Estimate</code></td>
<td>
<p>The point estimate for the corresponding summary meausure</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI</code></td>
<td>
<p>The confidence interval constructed by a re-sampling method. If the measure is a ratio, the z-value is the standardized log of the estimate. If the measure is a difference, the z-value is the standardized estimate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z-value</code></td>
<td>
<p>Normally distributed value derived from the asymptotic results</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p-value</code></td>
<td>
<p>the (two-sided) p-value using <code>z-value</code></p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Yang, S. (2018). Improving testing and description of treatment effect in clinical trials with survival outcomes. Statistics in medicine.
</p>
<p>Yang S, and Ross L. Prentice (2005). Semiparametric analysis of short-term and long-term hazard ratios with two-sample survival data. Biometrika, 92.1:1-17.
</p>
<p>Yang S, and Ross L. Prentice (2011). Estimation of the 2-sample hazard ratio function using a semiparametric model. Biostatistics, 12.2:354-368.
</p>
<p>Yang S. (2013). Semiparametric inference on the absolute risk reduction and the restricted mean survival difference in clinical trials. Special issue on risk assessment. Lifetime Data analysis, 19:219-241.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(ClinicalTrialSummary)
data(ggas)
time &lt;- ggas$time
event &lt;- ggas$event
group &lt;- ggas$group
result &lt;- ypsummary(time, event, group, tau=8.2) # tau must be supplied.
result
summary(result)
</code></pre>


</div>