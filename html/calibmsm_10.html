<div class="container">

<table style="width: 100%;"><tr>
<td>plot.calib_mlr</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plots calibration scatter plots for objects of class <code>calib_mlr</code> estimated using
using <code>calib_msm</code>.</h2>

<h3>Description</h3>

<p>Plots calibration scatter plots for the transition probabilities of a multistate model
estimated using the MLR-IPCW approach.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'calib_mlr'
plot(
  x,
  ...,
  combine = TRUE,
  ncol = NULL,
  nrow = NULL,
  size.point = 0.5,
  size.text = 12,
  transparency.plot = 0.25,
  marg.density = FALSE,
  marg.density.size = 5,
  marg.density.type = "density",
  marg.rug = FALSE,
  marg.rug.transparency = 0.1,
  titles.include = TRUE,
  titles = NULL,
  axis.titles.x = NULL,
  axis.titles.text.x = "Predicted risk",
  axis.titles.y = NULL,
  axis.titles.text.y = "Observed risk"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Object of class <code>calib_mlr</code> generated from <code>calib_msm</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>combine</code></td>
<td>
<p>Whether to combine into one plot using ggarrange, or return as a list of individual plots</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncol</code></td>
<td>
<p>Number of columns for combined calibration plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nrow</code></td>
<td>
<p>Number of rows for combined calibration plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size.point</code></td>
<td>
<p>Size of points in scatter plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size.text</code></td>
<td>
<p>Size of text in plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transparency.plot</code></td>
<td>
<p>Degree of transparency for points in the calibration scatter plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marg.density</code></td>
<td>
<p>Whether to produce marginal density plots TRUE/FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marg.density.size</code></td>
<td>
<p>Size of the main plot relative to the density plots (see <code>ggMarginal</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marg.density.type</code></td>
<td>
<p>What type of marginal plot to show (see <code>ggMarginal</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marg.rug</code></td>
<td>
<p>Whether to produce marginal rug plots TRUE/FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marg.rug.transparency</code></td>
<td>
<p>Degree of transparency for the density rug plot along each axis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>titles.include</code></td>
<td>
<p>Whether to include titles for each individual calibration plots</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>titles</code></td>
<td>
<p>Vector of titles for the calibration plots. Defaults to "State k" for each plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis.titles.x</code></td>
<td>
<p>Position of plots for which to include title on x-axis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis.titles.text.x</code></td>
<td>
<p>x-axis title</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis.titles.y</code></td>
<td>
<p>Position of plots for which to include title on y-axis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis.titles.text.y</code></td>
<td>
<p>y-axis title</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If <code>combine = TRUE</code>, returns an object of classes <code>gg</code>, <code>ggplot</code>, and <code>ggarrange</code>,
as all ggplots have been combined into one object. If <code>combine = FALSE</code>, returns an object of
class <code>list</code>, each element containing an object of class <code>gg</code> and <code>ggplot</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Using competing risks data out of initial state (see vignette: ... -in-competing-risk-setting).
# Estimate and plot MLR-IPCW calibration scatter plots for the predicted transition
# probabilities at time t = 1826, when predictions were made at time
# s = 0 in state j = 1. These predicted transition probabilities are stored in tp.cmprsk.j0.

# To minimise example time we reduce the datasets to 150 individuals.
# Extract the predicted transition probabilities out of state j = 1 for first 150 individuals
tp.pred &lt;- tp.cmprsk.j0 |&gt;
 dplyr::filter(id %in% 1:150) |&gt;
 dplyr::select(any_of(paste("pstate", 1:6, sep = "")))
# Reduce ebmtcal to first 150 individuals
ebmtcal &lt;- ebmtcal |&gt; dplyr::filter(id %in% 1:150)
# Reduce msebmtcal.cmprsk to first 150 individuals
msebmtcal.cmprsk &lt;- msebmtcal.cmprsk |&gt; dplyr::filter(id %in% 1:150)

# Now estimate the observed event probabilities for each possible transition.
dat.calib &lt;-
calib_msm(data.ms = msebmtcal.cmprsk,
 data.raw = ebmtcal,
 j=1,
 s=0,
 t = 1826,
 tp.pred = tp.pred,
 calib.type = "mlr",
 w.covs = c("year", "agecl", "proph", "match"),
 mlr.ps.int = 2,
 mlr.degree = 2)

 # These are then plotted
 plot(dat.calib, combine = TRUE, nrow = 2, ncol = 3)

</code></pre>


</div>