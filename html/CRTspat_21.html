<div class="container">

<table style="width: 100%;"><tr>
<td>specify_clusters</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Assign locations to clusters in a CRT</h2>

<h3>Description</h3>

<p><code>specify_clusters</code> algorithmically assigns locations to clusters by grouping them geographically
</p>


<h3>Usage</h3>

<pre><code class="language-R">specify_clusters(
  trial = trial,
  c = NULL,
  h = NULL,
  algorithm = "NN",
  reuseTSP = FALSE,
  auxiliary = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>trial</code></td>
<td>
<p>A CRT object or data frame containing (x,y) coordinates of
households</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>c</code></td>
<td>
<p>integer: number of clusters in each arm</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>h</code></td>
<td>
<p>integer: number of locations per cluster</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>algorithm</code></td>
<td>
<p>algorithm for cluster boundaries, with options:
</p>

<table>
<tr>
<td style="text-align: left;">
<code>NN</code>
</td>
<td style="text-align: left;"> Nearest neighbour: assigns equal numbers of locations to each cluster </td>
</tr>
<tr>
<td style="text-align: left;">
<code>kmeans</code>
</td>
<td style="text-align: left;"> kmeans clustering: aims to partition locations so that each
belongs to the cluster with the nearest centroid.</td>
</tr>
<tr>
<td style="text-align: left;">
<code>TSP</code>
</td>
<td style="text-align: left;"> travelling salesman problem heuristic: Assigns locations sequentially
along a travelling salesman path.</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reuseTSP</code></td>
<td>
<p>logical: indicator of whether a pre-existing path should be used by
the TSP algorithm</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auxiliary</code></td>
<td>
<p><code>"CRTsp"</code> object containing external cluster and or arm assignments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Either <code>c</code> or <code>h</code> must be specified. If both are specified
the input value of <code>c</code> is ignored.<br><br>
The <code>reuseTSP</code> parameter is used to allow the path to be reused
for creating alternative allocations with different cluster sizes.<br><br>
If an auxiliary <code>auxiliary</code> <code>"CRTsp"</code> object is specified then the other options are ignored
and the cluster assignments (and arm assignments if available) are taken from the auxiliary object.
The trial data frame is augmented with a column <code>"nearestPixel"</code> containing the distance to boundary of the nearest
grid pixel in the auxiliary. If the auxiliary is a grid with <code>design$geometry</code> set to <code>'triangle'</code>,
<code>'square'</code> or <code>'hexagon'</code> then the distance is computed to the edge of the nearest grid pixel in the discordant arm
(using a circular approximation for the perimeter) rather than to the point location itself. If the point is within
the pixel then the distance is given a negative sign.<br></p>


<h3>Value</h3>

<p>A list of class <code>"CRTsp"</code> containing the following components:
</p>

<table>
<tr>
<td style="text-align: left;">
<code>geom_full</code>   </td>
<td style="text-align: left;"> list: </td>
<td style="text-align: left;"> summary statistics describing the site,
and cluster assignments.</td>
</tr>
<tr>
<td style="text-align: left;">
<code>trial</code> </td>
<td style="text-align: left;"> data frame: </td>
<td style="text-align: left;"> rows correspond to geolocated points, as follows:</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
<td style="text-align: left;"> <code>x</code> </td>
<td style="text-align: left;"> numeric vector: x-coordinates of locations </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
<td style="text-align: left;"> <code>y</code> </td>
<td style="text-align: left;"> numeric vector: y-coordinates of locations </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
<td style="text-align: left;"> <code>cluster</code> </td>
<td style="text-align: left;"> factor: assignments to cluster of each location  </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
<td style="text-align: left;"> <code>...</code> </td>
<td style="text-align: left;"> other objects included in the input <code>"CRTsp"</code> object or data frame </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">#Assign clusters of average size h = 40 to a test set of co-ordinates, using the kmeans algorithm
exampletrial &lt;- specify_clusters(trial = readdata('exampleCRT.txt'),
                            h = 40, algorithm = 'kmeans', reuseTSP = FALSE)
</code></pre>


</div>