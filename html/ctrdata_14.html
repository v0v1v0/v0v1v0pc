<div class="container">

<table style="width: 100%;"><tr>
<td>dfName2Value</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get value for variable of interest</h2>

<h3>Description</h3>

<p>Get information for variable of interest  (e.g., clinical endpoints)
from long data frame of protocol- or result-related trial information
as returned by dfTrials2Long.
Parameters 'valuename', 'wherename' and 'wherevalue' are
matched using Perl regular expressions and ignoring case.
</p>


<h3>Usage</h3>

<pre><code class="language-R">dfName2Value(df, valuename = "", wherename = "", wherevalue = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A data frame (or tibble) with four columns ('_id',
'identifier', 'name', 'value') as returned by dfTrials2Long</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>valuename</code></td>
<td>
<p>A character string for the name of the field
that holds the value of the variable of interest
(e.g., a summary measure such as "endPoints.*tendencyValue.value")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wherename</code></td>
<td>
<p>(optional) A character string to identify the
variable of interest among those that repeatedly occur in a
trial record (e.g., "endPoints.endPoint.title")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wherevalue</code></td>
<td>
<p>(optional) A character string with the value of
the variable identified by 'wherename' (e.g., "response")</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data frame (or tibble, if <code>tibble</code> is loaded)
that includes the values of interest, with columns
'_id', 'identifier', 'name', 'value' and 'where' (with the
contents of 'wherevalue' found at 'wherename').
Contents of 'value' are strings unless all its elements
are numbers. The 'identifier' is generated by
function dfTrials2Long to identify matching elements,
e.g endpoint descriptions and measurements.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
dbc &lt;- nodbi::src_sqlite(
    dbname = system.file("extdata", "demo.sqlite", package = "ctrdata"),
    collection = "my_trials"
)

dfwide &lt;- dbGetFieldsIntoDf(
    fields = c(
        ## ctgov - typical results fields
        # "clinical_results.baseline.analyzed_list.analyzed.count_list.count",
        # "clinical_results.baseline.group_list.group",
        # "clinical_results.baseline.analyzed_list.analyzed.units",
        "clinical_results.outcome_list.outcome",
        "study_design_info.allocation",
        ## euctr - typical results fields
        # "trialInformation.fullTitle",
        # "baselineCharacteristics.baselineReportingGroups.baselineReportingGroup",
        # "trialChanges.hasGlobalInterruptions",
        # "subjectAnalysisSets",
        # "adverseEvents.seriousAdverseEvents.seriousAdverseEvent",
        "endPoints.endPoint",
        "subjectDisposition.recruitmentDetails"
    ), con = dbc
)

dflong &lt;- dfTrials2Long(df = dfwide)

## get values for the endpoint 'response'
dfName2Value(
    df = dflong,
    valuename = paste0(
        "clinical_results.*measurement.value|",
        "clinical_results.*outcome.measure.units|",
        "endPoints.endPoint.*tendencyValue.value|",
        "endPoints.endPoint.unit"
    ),
    wherename = paste0(
        "clinical_results.*outcome.measure.title|",
        "endPoints.endPoint.title"
    ),
    wherevalue = "response"
)

</code></pre>


</div>