<div class="container">

<table style="width: 100%;"><tr>
<td>cdmFlatten</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Flatten a cdm into a single observation table</h2>

<h3>Description</h3>

<p>This experimental function transforms the OMOP CDM into a single observation
table. This is only recommended for use with a filtered CDM or a cdm that is
small in size.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cdmFlatten(
  cdm,
  domain = c("condition", "drug", "procedure"),
  includeConceptName = TRUE
)

cdm_flatten(
  cdm,
  domain = c("condition", "drug", "procedure"),
  include_concept_name = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>cdm</code></td>
<td>
<p>A cdm_reference object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>domain</code></td>
<td>
<p>Domains to include. Must be a subset of "condition", "drug",
"procedure", "measurement", "visit", "death", "observation".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include_concept_name, includeConceptName</code></td>
<td>
<p>Should concept_name and type_concept_name be
include in the output table? TRUE (default) or FALSE</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt="[Experimental]"></a>
</p>


<h3>Value</h3>

<p>A lazy query that when evaluated will result in a single cdm table
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
library(CDMConnector)
library(dplyr, warn.conflicts = FALSE)

con &lt;- DBI::dbConnect(duckdb::duckdb(), eunomia_dir())

cdm &lt;- cdm_from_con(con, cdm_schema = "main")

all_observations &lt;- cdmSubset(cdm, personId = c(2, 18, 42)) %&gt;%
  cdmFlatten() %&gt;%
  collect()

all_observations
#&gt; # A tibble: 213 Ã— 8
#&gt;    person_id observation_.  start_date end_date   type_.  domain obser.  type_.
#&gt;        &lt;dbl&gt;          &lt;dbl&gt; &lt;date&gt;     &lt;date&gt;       &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;
#&gt;  1         2       40213201 1986-09-09 1986-09-09  5.81e5 drug   pneumo  &lt;NA&gt;
#&gt;  2        18        4116491 1997-11-09 1998-01-09  3.20e4 condi  Escher  &lt;NA&gt;
#&gt;  3        18       40213227 2017-01-04 2017-01-04  5.81e5 drug   tetanu  &lt;NA&gt;
#&gt;  4        42        4156265 1974-06-13 1974-06-27  3.20e4 condi  Facial  &lt;NA&gt;
#&gt;  5        18       40213160 1966-02-23 1966-02-23  5.81e5 drug   poliov  &lt;NA&gt;
#&gt;  6        42        4198190 1933-10-29 1933-10-29  3.80e7 proce  Append  &lt;NA&gt;
#&gt;  7         2        4109685 1952-07-13 1952-07-27  3.20e4 condi  Lacera  &lt;NA&gt;
#&gt;  8        18       40213260 2017-01-04 2017-01-04  5.81e5 drug   zoster  &lt;NA&gt;
#&gt;  9        42        4151422 1985-02-03 1985-02-03  3.80e7 proce  Sputum  &lt;NA&gt;
#&gt; 10         2        4163872 1993-03-29 1993-03-29  3.80e7 proce  Plain   &lt;NA&gt;
#&gt; # ... with 203 more rows, and abbreviated variable names observation_concept_id,
#&gt; #   type_concept_id, observation_concept_name, type_concept_name

DBI::dbDisconnect(con, shutdown = TRUE)

## End(Not run)
</code></pre>


</div>