<div class="container">

<table style="width: 100%;"><tr>
<td>update_current_test</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Update current test if unit test expression has progressed</h2>

<h3>Description</h3>

<p>Updating a test logs some metadata regarding the current call stack, noteably
trying to capture information about the call stack prior to the covr::count
call being traced.
</p>


<h3>Usage</h3>

<pre><code class="language-R">update_current_test()
</code></pre>


<h3>Details</h3>

<p>There are a couple patterns of behavior, which try to accommodate a variety
of testing suites:
</p>

<ul>
<li> <p><code>testthat</code>: During execution of <code>testthat</code>'s <code style="white-space: pre;">⁠test_*⁠</code> functions,
files are sourced and the working directory is temporarily changed to the
package <code style="white-space: pre;">⁠/tests⁠</code> directory. Knowing this, calls in the call stack which
are relative to this directory are extracted and recorded.
</p>
</li>
<li> <p><code>RUnit</code>:
</p>
</li>
<li> <p><code>custom</code>: Any other custom test suites may not have source kept with
their execution, in which case the entire test call stack is kept.
</p>
</li>
</ul>
<p>checks to see if the current call stack has the same
<code>srcref</code> (or expression, if no source is available) at the same frame prior
to entering into a package where <code>covr:::count</code> is called.
</p>


</div>