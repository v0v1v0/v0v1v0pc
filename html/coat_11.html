<div class="container">

<table style="width: 100%;"><tr>
<td>print.coat</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Methods for Conditional Method Agreement Trees (COAT)</h2>

<h3>Description</h3>

<p>Extracting information from or visualization of conditional method agreement trees.
Visualizations use trees with Bland-Altman plots in terminal nodes, drawn either
via grid graphics directly or via ggplot2.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'coat'
print(
  x,
  digits = 2L,
  header = TRUE,
  footer = TRUE,
  title = "Conditional method agreement tree (COAT)",
  ...
)

## S3 method for class 'coat'
coef(object, node = NULL, drop = TRUE, ...)

## S3 method for class 'coat'
plot(x, terminal_panel = node_baplot, tnex = 2, drop_terminal = TRUE, ...)

node_baplot(
  obj,
  level = 0.95,
  digits = 2,
  pch = 1,
  cex = 0.5,
  col = 1,
  linecol = 4,
  lty = c(1, 2),
  bg = "white",
  confint = FALSE,
  B = 500,
  cilevel = 0.95,
  cicol = "lightgray",
  xscale = NULL,
  yscale = NULL,
  ylines = 3,
  id = TRUE,
  mainlab = NULL,
  gp = gpar()
)

## S3 method for class 'coat'
autoplot(
  object,
  digits = 2,
  xlim.max = NULL,
  level = 0.95,
  label.align = 0.95,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x, object, obj</code></td>
<td>
<p>a <code>coat</code> object as returned by <code>coat</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>numeric. Number of digits used for rounding the displayed coefficients
or limits of agreement.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>header, footer</code></td>
<td>
<p>logical. Should a header/footer be printed for the tree?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>character with the title for the tree.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments passed to methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>node</code></td>
<td>
<p>integer. ID of the node for which the Bland-Altman parameters
(coefficients) should be extracted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop</code></td>
<td>
<p>logical. Should the matrix attribute be dropped if the parameters
from only a single node are extracted?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>terminal_panel</code></td>
<td>
<p>a panel function or panel-generating function passed to
<code>plot.party</code>. By default, <code>node_baplot</code> is used to
generate a suitable panel function for drawing Bland-Altman plots based on the
the provided <code>coat</code> object. It can be customized using the <code>tp_args</code> argument
(passed through <code>...</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tnex</code></td>
<td>
<p>numeric specification of the terminal node extension
relative to the inner nodes (default is twice the size).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop_terminal</code></td>
<td>
<p>logical. Should all terminal nodes be "dropped" to
the bottom row?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>numeric level for the limits of agreement.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pch, cex, col, linecol, lty, bg</code></td>
<td>
<p>graphical parameters for the scatter plot and limits
of agreement in the Bland-Altman plot (scatter plot character, character extension, plot color,
line color, line types, and background color).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>confint</code></td>
<td>
<p>logical. Should nonparametric bootstrap percentile confidence intervals be plotted?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>numeric. Number of bootstrap samples to be used if <code>confint = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cilevel</code></td>
<td>
<p>numeric. Level of the confidence intervals if <code>confint = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cicol</code></td>
<td>
<p>color specification for the confidence intervals if <code>confint = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xscale, yscale</code></td>
<td>
<p>numeric specification of scale of x-axis and y-axis, respectively.
By default the range of all scatter plots and limits of agreement across all nodes
are used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylines</code></td>
<td>
<p>numeric. Number of lines for spaces in y-direction.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>logical. Should node IDs be plotted?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mainlab</code></td>
<td>
<p>character or function. An optional title for the plots. Either
a character or a <code>function(id, nobs)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gp</code></td>
<td>
<p>grid graphical parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim.max</code></td>
<td>
<p>numeric. Optional value to define the upper limit of the x-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label.align</code></td>
<td>
<p>numeric. Specification between 0 and 1 for the alignment of labels
relative to the plot width or <code>xlim.max</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Various methods are provided for trees fitted by <code>coat</code>,
in particular <code>print</code>, <code>plot</code> (via <span class="pkg">grid</span>/<span class="pkg">partykit</span>),
<code>autoplot</code> (via <span class="pkg">ggplot2</span>/<span class="pkg">ggparty</span>),
<code>coef</code>. The <code>plot</code> method draws Bland-Altman plots in the terminal panels by default,
using the function <code>node_baplot</code>. The <code>autoplot</code> draws very similar plots by
customizing the <code>geom_node_plot</code> "from scratch".
</p>
<p>In addition to these dedicated <code>coat</code> methods, further methods are inherited
from <code>ctree</code> or <code>mob</code>, respectively,
depending on which <code>type</code> of <code>coat</code> was fitted.
</p>


<h3>Value</h3>

<p>The <code>print()</code> method returns the printed object invisibly.
The <code>coef()</code> method returns the vector (for a single node) or matrix (for multiple nodes) of estimated parameters (bias and standard deviation).
The <code>plot()</code> method returns <code>NULL</code>.
The <code>node_baplot()</code> panel-generating function returns a function that can be plugged into the <code>plot()</code> method.
The <code>autoplot()</code> method returns a <code>ggplot</code> object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## package and data (reshaped to wide format)
library("coat")
data("scint", package = "MethComp")
scint_wide &lt;- reshape(scint, v.names = "y", timevar = "meth", idvar = "item", direction = "wide")

## conditional method agreement tree
tr &lt;- coat(y.DTPA + y.DMSA ~ age + sex, data = scint_wide)

## illustration of methods (including some customization)

## printing
print(tr)
print(tr, header = FALSE, footer = FALSE)

## extracting Bland-Altman parameters
coef(tr)
coef(tr, node = 1)

## visualization (via grid with node_baplot)
plot(tr)
plot(tr, ip_args = list(id = FALSE),
  tp_args = list(col = "slategray", id = FALSE, digits = 3, pch = 19))

## visualization (via ggplot2 with ggparty)
library("ggplot2")
autoplot(tr)
autoplot(tr, digits = 3) + ggtitle("Conditional method agreement tree") +
  theme(plot.title = element_text(hjust = 0.5))
</code></pre>


</div>