<div class="container">

<table style="width: 100%;"><tr>
<td>crew_class_definition_aws_batch</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>AWS Batch definition class</h2>

<h3>Description</h3>

<p>AWS Batch definition <code>R6</code> class
</p>


<h3>Details</h3>

<p>See <code>crew_definition_aws_batch()</code>.
</p>


<h3>IAM policies</h3>

<p>In order for the AWS Batch <code>crew</code> job definition class to function
properly, your IAM policy needs permission to perform the
<code>RegisterJobDefinition</code>, <code>DeregisterJobDefinition</code>, and
<code>DescribeJobDefinitions</code> AWS Batch API calls.
For more information on AWS policies and permissions, please visit
<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html">https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html</a>.
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>job_queue</code></dt>
<dd>
<p>See <code>crew_definition_aws_batch()</code>.</p>
</dd>
<dt><code>job_definition</code></dt>
<dd>
<p>See <code>crew_definition_aws_batch()</code>.</p>
</dd>
<dt><code>log_group</code></dt>
<dd>
<p>See <code>crew_definition_aws_batch()</code>.</p>
</dd>
<dt><code>config</code></dt>
<dd>
<p>See <code>crew_definition_aws_batch()</code>.</p>
</dd>
<dt><code>credentials</code></dt>
<dd>
<p>See <code>crew_definition_aws_batch()</code>.</p>
</dd>
<dt><code>endpoint</code></dt>
<dd>
<p>See <code>crew_definition_aws_batch()</code>.</p>
</dd>
<dt><code>region</code></dt>
<dd>
<p>See <code>crew_definition_aws_batch()</code>.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-crew_class_definition_aws_batch-new"><code>crew_class_definition_aws_batch$new()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_definition_aws_batch-validate"><code>crew_class_definition_aws_batch$validate()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_definition_aws_batch-register"><code>crew_class_definition_aws_batch$register()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_definition_aws_batch-deregister"><code>crew_class_definition_aws_batch$deregister()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_definition_aws_batch-describe"><code>crew_class_definition_aws_batch$describe()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_definition_aws_batch-submit"><code>crew_class_definition_aws_batch$submit()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-crew_class_definition_aws_batch-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>AWS Batch job definition constructor.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_definition_aws_batch$new(
  job_queue = NULL,
  job_definition = NULL,
  log_group = NULL,
  config = NULL,
  credentials = NULL,
  endpoint = NULL,
  region = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>job_queue</code></dt>
<dd>
<p>See <code>crew_definition_aws_batch()</code>.</p>
</dd>
<dt><code>job_definition</code></dt>
<dd>
<p>See <code>crew_definition_aws_batch()</code>.</p>
</dd>
<dt><code>log_group</code></dt>
<dd>
<p>See <code>crew_definition_aws_batch()</code>.</p>
</dd>
<dt><code>config</code></dt>
<dd>
<p>See <code>crew_definition_aws_batch()</code>.</p>
</dd>
<dt><code>credentials</code></dt>
<dd>
<p>See <code>crew_definition_aws_batch()</code>.</p>
</dd>
<dt><code>endpoint</code></dt>
<dd>
<p>See <code>crew_definition_aws_batch()</code>.</p>
</dd>
<dt><code>region</code></dt>
<dd>
<p>See <code>crew_definition_aws_batch()</code>.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>AWS Batch job definition object.
</p>


<hr>
<a id="method-crew_class_definition_aws_batch-validate"></a>



<h4>Method <code>validate()</code>
</h4>

<p>Validate the object.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_definition_aws_batch$validate()</pre></div>



<h5>Returns</h5>

<p><code>NULL</code> (invisibly). Throws an error if a field is invalid.
</p>


<hr>
<a id="method-crew_class_definition_aws_batch-register"></a>



<h4>Method <code>register()</code>
</h4>

<p>Register a job definition.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_definition_aws_batch$register(
  image,
  platform_capabilities = "EC2",
  memory_units = "gigabytes",
  memory = NULL,
  cpus = NULL,
  gpus = NULL,
  seconds_timeout = NULL,
  scheduling_priority = NULL,
  tags = NULL,
  propagate_tags = NULL,
  parameters = NULL,
  job_role_arn = NULL,
  execution_role_arn = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>image</code></dt>
<dd>
<p>Character of length 1, Docker image used for each job.
You can supply a path to an image in Docker Hub or the full URI
of an image in an Amazon ECR repository.</p>
</dd>
<dt><code>platform_capabilities</code></dt>
<dd>
<p>Optional character of length 1, either
<code>"EC2"</code> to run on EC2 or <code>"FARGATE"</code> to run on Fargate.</p>
</dd>
<dt><code>memory_units</code></dt>
<dd>
<p>Character of length 1,
either <code>"gigabytes"</code> or <code>"mebibytes"</code> to set the units of the
<code>memory</code> argument. <code>"gigabytes"</code> is simpler for EC2 jobs, but
Fargate has strict requirements about specifying exact amounts of
mebibytes (MiB). for details, read
<a href="https://docs.aws.amazon.com/cli/latest/reference/batch/register-job-definition.html">https://docs.aws.amazon.com/cli/latest/reference/batch/register-job-definition.html</a> # nolint</p>
</dd>
<dt><code>memory</code></dt>
<dd>
<p>Positive numeric of length 1, amount of memory to request
for each job.</p>
</dd>
<dt><code>cpus</code></dt>
<dd>
<p>Positive numeric of length 1, number of virtual
CPUs to request for each job.</p>
</dd>
<dt><code>gpus</code></dt>
<dd>
<p>Positive numeric of length 1, number of GPUs to
request for each job.</p>
</dd>
<dt><code>seconds_timeout</code></dt>
<dd>
<p>Optional positive numeric of length 1,
number of seconds until a job times out.</p>
</dd>
<dt><code>scheduling_priority</code></dt>
<dd>
<p>Optional nonnegative integer of length 1
between <code>0</code> and <code>9999</code>, priority of jobs. Jobs with higher-valued
priorities are scheduled first.
The priority only applies if the job queue has a fair share
policy. Set to <code>NULL</code> to omit.</p>
</dd>
<dt><code>tags</code></dt>
<dd>
<p>Optional character vector of tags.</p>
</dd>
<dt><code>propagate_tags</code></dt>
<dd>
<p>Optional logical of length 1, whether to propagate
tags from the job or definition to the ECS task.</p>
</dd>
<dt><code>parameters</code></dt>
<dd>
<p>Optional character vector of key-value pairs
designating parameters for job submission.</p>
</dd>
<dt><code>job_role_arn</code></dt>
<dd>
<p>Character of length 1,
Amazon resource name (ARN) of the job role.</p>
</dd>
<dt><code>execution_role_arn</code></dt>
<dd>
<p>Character of length 1,
Amazon resource name (ARN) of the execution role.</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>The <code>register()</code> method registers a simple
job definition using the job definition name and log group originally
supplied to <code>crew_definition_aws_batch()</code>.
Job definitions created with <code style="white-space: pre;">⁠$register()⁠</code> are container-based
and use the AWS log driver.
For more complicated
kinds of jobs, we recommend skipping <code>register()</code>: first call
<a href="https://www.paws-r-sdk.com/docs/batch_register_job_definition/">https://www.paws-r-sdk.com/docs/batch_register_job_definition/</a>
to register the job definition, then supply the job definition
name to the <code>job_definition</code> argument of <code>crew_definition_aws_batch()</code>.
</p>



<h5>Returns</h5>

<p>A one-row <code>tibble</code> with the job definition name, ARN, and
revision number of the registered job definition.
</p>


<hr>
<a id="method-crew_class_definition_aws_batch-deregister"></a>



<h4>Method <code>deregister()</code>
</h4>

<p>Attempt to deregister a revision of the job definition.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_definition_aws_batch$deregister(revision = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>revision</code></dt>
<dd>
<p>Finite positive integer of length 1, optional revision
number to deregister. If <code>NULL</code>, then only the highest revision
number of the job definition is deregistered, if it exists.</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>Attempt to deregister the job definition whose name was
originally supplied to the <code>job_definition</code> argument of
<code>crew_definition_aws_batch()</code>.
</p>



<h5>Returns</h5>

<p><code>NULL</code> (invisibly).
</p>


<hr>
<a id="method-crew_class_definition_aws_batch-describe"></a>



<h4>Method <code>describe()</code>
</h4>

<p>Describe the revisions of the job definition.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_definition_aws_batch$describe(revision = NULL, active = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>revision</code></dt>
<dd>
<p>Positive integer of length 1, optional revision
number to describe.</p>
</dd>
<dt><code>active</code></dt>
<dd>
<p>Logical of length 1, whether to filter on just
the active job definition.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>A <code>tibble</code> with job definition information.
There is one row per revision.
Some fields may be nested lists.
</p>


<hr>
<a id="method-crew_class_definition_aws_batch-submit"></a>



<h4>Method <code>submit()</code>
</h4>

<p>Submit an AWS Batch job with the given job definition.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_definition_aws_batch$submit(
  command = c("sleep", "300"),
  name = paste0("crew-aws-batch-job-", crew::crew_random_name()),
  memory_units = "gigabytes",
  memory = NULL,
  cpus = NULL,
  gpus = NULL,
  seconds_timeout = NULL,
  share_identifier = NULL,
  scheduling_priority_override = NULL,
  tags = NULL,
  propagate_tags = NULL,
  parameters = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>command</code></dt>
<dd>
<p>Character vector with the command
to submit for the job. Usually a Linux shell command
with each term in its own character string.</p>
</dd>
<dt><code>name</code></dt>
<dd>
<p>Character of length 1 with the job name.</p>
</dd>
<dt><code>memory_units</code></dt>
<dd>
<p>Character of length 1,
either <code>"gigabytes"</code> or <code>"mebibytes"</code> to set the units of the
<code>memory</code> argument. <code>"gigabytes"</code> is simpler for EC2 jobs, but
Fargate has strict requirements about specifying exact amounts of
mebibytes (MiB). for details, read
<a href="https://docs.aws.amazon.com/cli/latest/reference/batch/register-job-definition.html">https://docs.aws.amazon.com/cli/latest/reference/batch/register-job-definition.html</a> # nolint</p>
</dd>
<dt><code>memory</code></dt>
<dd>
<p>Positive numeric of length 1, amount of memory to request
for each job.</p>
</dd>
<dt><code>cpus</code></dt>
<dd>
<p>Positive numeric of length 1, number of virtual
CPUs to request for each job.</p>
</dd>
<dt><code>gpus</code></dt>
<dd>
<p>Positive numeric of length 1, number of GPUs to
request for each job.</p>
</dd>
<dt><code>seconds_timeout</code></dt>
<dd>
<p>Optional positive numeric of length 1,
number of seconds until a job times out.</p>
</dd>
<dt><code>share_identifier</code></dt>
<dd>
<p>Character of length 1 with the share
identifier of the job. Only applies if the job queue has a
scheduling policy. Read the official AWS Batch documentation
for details.</p>
</dd>
<dt><code>scheduling_priority_override</code></dt>
<dd>
<p>Optional nonnegative integer
of length between <code>0</code> and <code>9999</code>, priority of the job.
This value overrides the priority in the job definition.
Jobs with higher-valued priorities are scheduled first.
The priority applies if the job queue has a fair share policy.
Set to <code>NULL</code> to omit.</p>
</dd>
<dt><code>tags</code></dt>
<dd>
<p>Optional character vector of tags.</p>
</dd>
<dt><code>propagate_tags</code></dt>
<dd>
<p>Optional logical of length 1, whether to propagate
tags from the job or definition to the ECS task.</p>
</dd>
<dt><code>parameters</code></dt>
<dd>
<p>Optional character vector of key-value pairs
designating parameters for job submission.</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>This method uses the job queue and job definition
that were supplied through <code>crew_definition_aws_batch()</code>.
Any jobs submitted this way are different from the
<code>crew</code> workers that the <code>crew</code> controller starts automatically
using the AWS Batch launcher plugin.
You may use the <code>submit()</code> method in the definition for different
purposes such as testing.
</p>



<h5>Returns</h5>

<p>A one-row <code>tibble</code> with the name, ID, and
Amazon resource name (ARN) of the job.
</p>




<h3>See Also</h3>

<p>Other definition: 
<code>crew_definition_aws_batch()</code>
</p>


</div>