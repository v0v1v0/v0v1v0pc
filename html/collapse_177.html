<div class="container">

<table style="width: 100%;"><tr>
<td>fdroplevels</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Fast Removal of Unused Factor Levels
</h2>

<h3>Description</h3>

<p>A substantially faster replacement for <code>droplevels</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fdroplevels(x, ...)

## S3 method for class 'factor'
fdroplevels(x, ...)

## S3 method for class 'data.frame'
fdroplevels(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a factor, or data frame / list containing one or more factors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>not used.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>droplevels</code> passes a factor from which levels are to be dropped to <code>factor</code>, which first calls <code>unique</code> and then <code>match</code> to drop unused levels. Both functions internally use a hash table, which is highly inefficient. <code>fdroplevels</code> does not require mapping values at all, but uses a super fast boolean vector method to determine which levels are unused and remove those levels. In addition, if no unused levels are found, <code>x</code> is simply returned. Any missing values found in <code>x</code> are efficiently skipped in the process of checking and replacing levels. All other attributes of <code>x</code> are preserved.
</p>


<h3>Value</h3>

<p><code>x</code> with unused factor levels removed.
</p>


<h3>Note</h3>

<p>If <code>x</code> is malformed e.g. has too few levels, this function can cause a segmentation fault terminating the R session, thus only use with ordinary / proper factors.
</p>


<h3>See Also</h3>

<p><code>qF</code>, <code>funique</code>, Fast Grouping and Ordering, Collapse Overview
</p>


<h3>Examples</h3>

<pre><code class="language-R">f &lt;- iris$Species[1:100]
fdroplevels(f)
identical(fdroplevels(f), droplevels(f))

fNA &lt;- na_insert(f)
fdroplevels(fNA)
identical(fdroplevels(fNA), droplevels(fNA))

identical(fdroplevels(ss(iris, 1:100)), droplevels(ss(iris, 1:100)))
</code></pre>


</div>