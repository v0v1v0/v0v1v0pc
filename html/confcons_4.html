<div class="container">

<table style="width: 100%;"><tr>
<td>thresholds</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Thresholds needed to create the extended confusion matrix</h2>

<h3>Description</h3>

<p>Calculate the two thresholds distinguishing certain negatives/positives from
uncertain predictions. The thresholds are needed to create the extended
confusion matrix and are further used for confidence calculation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">thresholds(observations, predictions = NULL, type = "mean", range = 0.5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>observations</code></td>
<td>
<p>Either an integer or logical vector containing the binary
observations where presences are encoded as <code>1</code>s/<code>TRUE</code>s and
absences as <code>0</code>s/<code>FALSE</code>s.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predictions</code></td>
<td>
<p>A numeric vector containing the predicted probabilities of
occurrence typically within the <code>[0, 1]</code> interval.
<code>length(predictions)</code> should be equal to <code>length(observations)</code>
and the order of the elements should match. <code>predictions</code> is optional:
needed and used only if <code>type</code> is 'mean' and ignored otherwise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>A character vector of length one containing the value 'mean' (for
calculating mean of the predictions within known presences and absences) or
'information' (for calculating thresholds based on relative information
gain) . Defaults to 'mean'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>range</code></td>
<td>
<p>A numeric vector of length one containing a value from the
<code>]0, 0.5]</code> interval. It is the parameter of the information-based
method and is used only if <code>type</code> is 'information'. The larger the
<code>range</code> is, the more predictions are treated as uncertain. Defaults to
0.5.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A named numeric vector of length 2. The first element
('<code>threshold1</code>') is the mean of probabilities predicted to the absence
locations distinguishing certain negatives (certain absences) from
uncertain predictions. The second element ('<code>threshold2</code>') is the mean
of probabilities predicted to the presence locations distinguishing certain
positives (certain presences) from uncertain predictions. For a typical
model better than the random guess, the first element is smaller than the
second one. The returned value might contain <code>NaN</code>(s) if the number of
observed presences and/or absences is 0.
</p>


<h3>Note</h3>

<p><code>thresholds()</code> should be called using the whole dataset containing
both training and evaluation locations.
</p>


<h3>See Also</h3>

<p><code>confidence</code> for calculating confidence,
<code>consistency</code> for calculating consistency
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(12345)

# Using logical observations:
observations_1000_logical &lt;- c(rep(x = FALSE, times = 500),
                               rep(x = TRUE, times = 500))
predictions_1000 &lt;- c(runif(n = 500, min = 0, max = 0.7),
                      runif(n = 500, min = 0.3, max = 1))
thresholds(observations = observations_1000_logical,
           predictions = predictions_1000) # 0.370 0.650

# Using integer observations:
observations_4000_integer &lt;- c(rep(x = 0L, times = 3000),
                               rep(x = 1L, times = 1000))
predictions_4000 &lt;- c(runif(n = 3000, min = 0, max = 0.8),
                      runif(n = 1000, min = 0.2, max = 0.9))
thresholds(observations = observations_4000_integer,
           predictions = predictions_4000) # 0.399 0.545

# Wrong parameterization:
try(thresholds(observations = observations_1000_logical,
               predictions = predictions_4000)) # error
set.seed(12345)
observations_4000_numeric &lt;- c(rep(x = 0, times = 3000),
                               rep(x = 1, times = 1000))
predictions_4000_strange &lt;- c(runif(n = 3000, min = -0.3, max = 0.4),
                              runif(n = 1000, min = 0.6, max = 1.5))
try(thresholds(observations = observations_4000_numeric,
               predictions = predictions_4000_strange)) # multiple warnings
mask_of_normal_predictions &lt;- predictions_4000_strange &gt;= 0 &amp; predictions_4000_strange &lt;= 1
thresholds(observations = as.integer(observations_4000_numeric)[mask_of_normal_predictions],
           predictions = predictions_4000_strange[mask_of_normal_predictions]) # OK
</code></pre>


</div>