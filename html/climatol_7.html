<div class="container">

<table style="width: 100%;"><tr>
<td>csv2climatol</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert data in a single CSV file to <code>climatol</code> input format</h2>

<h3>Description</h3>

<p>This function helps to prepare the <code>climatol</code> input files when the users
have their data in a single CSV file, as the output of xls2csv().
</p>


<h3>Usage</h3>

<pre><code class="language-R">  csv2climatol(csvfile, datacol=6:8, stnfile=csvfile, stncol=1:5, varcli,
  anyi=NA, anyf=NA, mindat=NA, sep=',', dec='.', na.strings='NA',
  dateformat='%Y-%m-%d', cf=1, ndec=1, header=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>csvfile</code></td>
<td>
<p>name of the CSV file containing the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datacol</code></td>
<td>
<p>column(s) holding station codes, dates and data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stnfile</code></td>
<td>
<p>name of the CSV file containing station codes, names and
coordinates (if these data are not in the csvfile).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stncol</code></td>
<td>
<p>columns holding longitudes, latitudes, elevations and station
codes and names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varcli</code></td>
<td>
<p>short name of the climatic variable under study.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>anyi</code></td>
<td>
<p>first year to study.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>anyf</code></td>
<td>
<p>last year to study.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mindat</code></td>
<td>
<p>minimum required number of data per station (by default,
60 monthly data or 365 daily data).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>data separator (',' by default: Comma Separated Values).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dec</code></td>
<td>
<p>decimal point ('.' by default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.strings</code></td>
<td>
<p>strings coding missing data ('NA' by default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dateformat</code></td>
<td>
<p>format of dates (if not in separate columns.
Default: <code>'%Y-%m-%d')</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cf</code></td>
<td>
<p>conversion factor to apply if data units need to be changed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ndec</code></td>
<td>
<p>no. of decimals to round to.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>header</code></td>
<td>
<p><code>TRUE</code> by default, set to <code>FALSE</code> if <code>csvfile</code> has no header.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If <code>datacol</code> holds  4 (or 5) values, dates are expected to appear as
year, month (and days) in separate columns. Otherwise, dates will be provided
as character strings (see parameter <code>dateformat</code>).
Station codes, names and coordinates can go in a separate file
<code>stnfile</code>. At least coordinates and station codes must be present in
either <code>csvfile</code> or <code>stnfile</code>. Put a zero for any inexistent
columns. Example when <code>stnfile</code> contains only, in this order, latitudes,
longitudes and station names: <code>stncol=c(2,1,0,3,0)</code>.
Note that if a stnfile is provided, then sep, dec, na.strings and header
defined for csvfile will also be applied to stnfile.
</p>


<h3>See Also</h3>

<p><code>xls2csv</code>, <code>homogen</code></p>


<h3>Examples</h3>

<pre><code class="language-R">## Set a temporal working directory:
wd &lt;- tempdir()
wd0 &lt;- setwd(wd)

## Create origin and destination directories and copy example input files:
dir.create('dir1'); dir.create('dir2')
file.copy(exampleFiles('p064.xlsx'),'dir1')
file.copy(exampleFiles('p082.xlsx'),'dir1')
file.copy(exampleFiles('p084.xlsx'),'dir1')

## Create input files for csv2climatol with the function xls2csv:
xls2csv('dir1','dir2','RR')

## Add bogus coordinates and elevations to the station file:
est=read.table('xls_RR_stations.csv',sep=',')
est=data.frame(1:3,21:23,101:103,est)
write.table(est,'xls_RR_stations.csv',sep=',',row.names=FALSE,col.names=FALSE)

## Now run the example of csv2climatol:
csv2climatol('xls_RR_data.csv', datacol=1:5, stnfile='xls_RR_stations.csv',
  varcli='RR',header=FALSE)

## Return to user's working directory:
setwd(wd0)

## Input and output files can be found in directory:
print(wd)
</code></pre>


</div>