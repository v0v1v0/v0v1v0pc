<div class="container">

<table style="width: 100%;"><tr>
<td>cvfit</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Automatically select curve type and explanatory variables</h2>

<h3>Description</h3>

<p>Using cross-validation automatically select explanatory variables jointly with curve type.
When running <code>cvfit</code> there is no need to use <code>varselect</code> separately.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cvfit(
  x,
  y,
  folds = 10,
  constant = c(TRUE, FALSE),
  sign = NULL,
  reps = 3,
  parallel = c(FALSE, TRUE),
  usepbapply = c(FALSE, TRUE),
  alltype = c("logistic", "redLogistic", "doubleExp", "exponential", "arctan", "linear"),
  search = c("backward", "forward"),
  wsel = c("select", "combine"),
  dummy = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A matrix of explanatory variables. Excess reserve must be the first input.Additional regressor follow (optional).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A vector of normalised interest rates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>folds</code></td>
<td>
<p>Folds to use for cross-validation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constant</code></td>
<td>
<p>A logical (<code>TRUE</code> or <code>FALSE</code>) whether to include a constant or not.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sign</code></td>
<td>
<p>A vector of equal length to the number of additional regressors in <code>x</code> (excluding the constant (if used) and the excess reserves) of positive and negative values (any) that will be used to obtain signs to restrict the values of the estimated parameters. Use <code>NULL</code> for no restrictions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reps</code></td>
<td>
<p>Number of repetitions for the particle swarm optimisation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parallel</code></td>
<td>
<p>Initialise and use parallel processing for the cross-validation. Note that the maximum number of cores that will be used is equal to the alternative types of curves that are evaluated (<code>alltype</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>usepbapply</code></td>
<td>
<p>A logical to indicate whether to use pbapply to report on the parallel calculation progress. Note that pbapply does not support load balancing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alltype</code></td>
<td>
<p>A vector of the curve types to consider in the selection process.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>search</code></td>
<td>
<p>Search strategy for variable inclusion. With <code>forward</code> the model starts from no explanatory variables, and evaluates potential additions. With <code>backward</code> the model starts with all variables and evaluates for potential exclusions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wsel</code></td>
<td>
<p>Use the minimum error set of parameters (<code>select</code>) or the combination of the pool parameters using the heuristic in Kourentzes et al., (2019) (<code>combine</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dummy</code></td>
<td>
<p>Optional input to signify a regime change (vertical shifts in the curve). Must be a vector of equal length to the rows of <code>x</code>. If not needed use <code>NULL</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a list with the recommended variable selection choice:
</p>

<ul>
<li> <p><code>type</code> the type of selected curve.
</p>
</li>
<li> <p><code>keep</code> a logical vector with which variables to keep.
</p>
</li>
<li> <p><code>varRes</code> the result from <code>varselect</code> for each evaluated curve type.
</p>
</li>
<li> <p><code>cvIndex</code> a matrix detailing how the sample was split for the cross-validation. First column is the fold number and second column is the index of the observation.
</p>
</li>
</ul>
<p>Use <code>cvfitplot</code> to visualise the output.
</p>


<h3>Author(s)</h3>

<p>Nikolaos Kourentzes, <a href="mailto:nikolaos@kourentzes.com">nikolaos@kourentzes.com</a>
</p>


<h3>References</h3>

<p>Chen, Z., Kourentzes, N., &amp; Veyrune, R. (2023). <a href="https://www.imf.org/en/Publications/WP/Issues/2023/09/01/Modeling-the-Reserve-Demand-to-Facilitate-Central-Bank-Operations-538754">Modeling the Reserve Demand to Facilitate Central Bank Operations.</a> IMF Working Papers, 2023(179).
</p>


<h3>See Also</h3>

<p><code>cvfitplot</code>, <code>curve</code>, and <code>varselect</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
  # Use ECB example data
  rate &lt;- ecb$rate
  x &lt;- ecb$x[,1:3,drop=FALSE]
  cvKeep &lt;- cvfit(x,rate,folds=5,alltype=c("logistic","arctan"),parallel=TRUE)
  # Print result
  print(cvKeep)
  # Fit curve with the selected variables
  curve(x[,cvKeep$keep,drop=FALSE],rate,type=cvKeep$type)


</code></pre>


</div>