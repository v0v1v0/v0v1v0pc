<div class="container">

<table style="width: 100%;"><tr>
<td>cmd_help_parse_flags</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Parses commandline help options to return vector of valid flag names</h2>

<h3>Description</h3>

<p>When using cmdfun to write lazy shell wrappers, the user can easily mistype
a commandline flag since there is not text completion. Some programs behave
unexpectedly when flags are typed incorrectly, and for this reason return uninformative error messages.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cmd_help_parse_flags(help_lines, split_newline = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>help_lines</code></td>
<td>
<p><code>character</code> vector containing the output of "command
–help", or similar output. Optional: pass either <code>stdout</code>, or <code>stderr</code> output from
processx::run(), must set <code>processx = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>split_newline</code></td>
<td>
<p><code>logical(1)</code> if set to TRUE will split string on "\n" before
parsing (useful when parsing output from <code>processx</code>).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>cmd_help_parse_flags</code> tries to grab flags from –help documentation which
can be used for error checking. It will try to parse flags following "-" or
"–" while ignoring hyphenated words in help text. Although this should cover
most use-cases, it may be necessary to write a custom help-text parser for
nonstandard tools. Inspect this output <strong>carefully</strong> before proceeding. Most
often, characters are leftover at the <strong>end</strong> of parsed names, which will
require additional parsing.
</p>


<h3>Value</h3>

<p>character vector of flag names parsed from help text
</p>


<h3>See Also</h3>

<p><code>cmd_help_flags_similar</code> <code>cmd_help_flags_suggest</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (.Platform$OS.type == "unix" &amp; file.exists("/bin/tar")) {
# below are two examples parsing the --help method of GNU tar 

# with processx
if (require(processx)) {
out &lt;- processx::run("tar", "--help", error_on_status = FALSE)
fn_flags &lt;- cmd_help_parse_flags(out$stdout, split_newline = TRUE)
}

# with system2
lines &lt;- system2("tar", "--help", stderr = TRUE)
fn_flags &lt;- cmd_help_parse_flags(lines)

# NOTE: some of the "tar" flags contain the extra characters: "\[", "\)", and ";"
# ie "one-top-level\[" which should be "one-top-level"
# These can be additionally parsed using
gsub("[\\[;\\)]", "", fn_flags)
}

</code></pre>


</div>