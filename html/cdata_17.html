<div class="container">

<table style="width: 100%;"><tr>
<td>convert_records</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>General transform from arbitrary record shape to arbitrary record shape.</h2>

<h3>Description</h3>

<p>General transform from arbitrary record shape to arbitrary record shape.
</p>


<h3>Usage</h3>

<pre><code class="language-R">convert_records(
  table,
  incoming_shape = NULL,
  outgoing_shape = NULL,
  ...,
  keyColumns = NULL,
  columnsToCopy_in = NULL,
  checkNames = TRUE,
  checkKeys = FALSE,
  strict = FALSE,
  incoming_controlTableKeys = colnames(incoming_shape)[[1]],
  outgoing_controlTableKeys = colnames(outgoing_shape)[[1]],
  tmp_name_source = wrapr::mk_tmp_name_source("crec"),
  temporary = TRUE,
  allow_rqdatatable_in = FALSE,
  allow_rqdatatable_out = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>table</code></td>
<td>
<p>data.frame or relop.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>incoming_shape</code></td>
<td>
<p>data.frame, definition of incoming record shape.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outgoing_shape</code></td>
<td>
<p>data.frame, defintion of outgoing record shape.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>force later arguments to bind by name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keyColumns</code></td>
<td>
<p>character vector of column defining incoming row groups</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>columnsToCopy_in</code></td>
<td>
<p>character array of incoming column names to copy.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>checkNames</code></td>
<td>
<p>logical, if TRUE check names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>checkKeys</code></td>
<td>
<p>logical, if TRUE check columnsToCopy form row keys (not a requirement, unless you want to be able to invert the operation).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strict</code></td>
<td>
<p>logical, if TRUE check control table name forms.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>incoming_controlTableKeys</code></td>
<td>
<p>character, which column names of the incoming control table are considered to be keys.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outgoing_controlTableKeys</code></td>
<td>
<p>character, which column names of the outgoing control table are considered to be keys.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tmp_name_source</code></td>
<td>
<p>a tempNameGenerator from cdata::mk_tmp_name_source()</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>temporary</code></td>
<td>
<p>logical, if TRUE use temporary tables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allow_rqdatatable_in</code></td>
<td>
<p>logical, if TRUE allow rqdatatable shortcutting on simple conversions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allow_rqdatatable_out</code></td>
<td>
<p>logical, if TRUE allow rqdatatable shortcutting on simple conversions.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>processing pipeline or transformed table
</p>


<h3>Examples</h3>

<pre><code class="language-R">

incoming_shape &lt;- qchar_frame(
  "row",  "col1", "col2", "col3" |
  "row1",   v11,     v12,  v13   |
  "row2",   v21,     v22,  v23   |
  "row3",   v31,     v32,  v33   )


outgoing_shape &lt;- qchar_frame(
  "column", "row1", "row2", "row3" |
  "col1",      v11,  v21  ,  v31   |
  "col2",      v12,  v22  ,  v32   |
  "col3",      v13,  v23  ,  v33   )

data &lt;- build_frame(
  'record_id', 'row',  'col1', 'col2', 'col3'  |
  1,           'row1',  1,      2,      3      |
  1,           'row2',  4,      5,      6      |
  1,           'row3',  7,      8,      9      |
  2,           'row1',  11,     12,     13     |
  2,           'row2',  14,     15,     16     |
  2,           'row3',  17,     18,     19     )

print(data)

convert_records(
  data,
  keyColumns = 'record_id',
  incoming_shape = incoming_shape,
  outgoing_shape = outgoing_shape)

td &lt;- rquery::local_td(data)

ops &lt;- convert_records(
  td,
  keyColumns = 'record_id',
  incoming_shape = incoming_shape,
  outgoing_shape = outgoing_shape)

cat(format(ops))



</code></pre>


</div>