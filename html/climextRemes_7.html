<div class="container">

<table style="width: 100%;"><tr>
<td>calc_riskRatio_binom</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute risk ratio and uncertainty based on binomial models for counts of events relative to possible number of events</h2>

<h3>Description</h3>

<p>Compute risk ratio and uncertainty by fitting binomial models to counts of events relative to possible number of events. The risk ratio is the ratio of the probability of an event under the model fit to the first dataset to the probability under the model fit to the second dataset. Default standard errors are based on the usual MLE asymptotics using a delta-method-based approximation, but standard errors based on the nonparametric bootstrap and on a likelihood ratio procedure can also be computed.
</p>


<h3>Usage</h3>

<pre><code class="language-R">calc_riskRatio_binom(
  y,
  n,
  ciLevel = 0.9,
  ciType,
  bootSE,
  bootControl = NULL,
  lrtControl = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>vector of two values, the number of events in the two scenarios</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>vector of two values, the number of samples (possible occurrences of events) in the two scenarios</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ciLevel</code></td>
<td>
<p>statistical confidence level for confidence intervals; in repeated experimentation, this proportion of confidence intervals should contain the true risk ratio. Note that if only one endpoint of the resulting interval is used, for example the lower bound, then the effective confidence level increases by half of one minus <code>ciLevel</code>. For example, a two-sided 0.90 confidence interval corresponds to a one-sided 0.95 confidence interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ciType</code></td>
<td>
<p>character vector indicating which type of confidence intervals to compute. See <code>Details</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bootSE</code></td>
<td>
<p>logical indicating whether to use the bootstrap to estimate the standard error of the risk ratio</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bootControl</code></td>
<td>
<p>a list of control parameters for the bootstrapping, used only when at least one bootstrap confidence interval is requested via <code>ciType</code>. See <code>Details</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lrtControl</code></td>
<td>
<p>list containing a single component, <code>bounds</code>, which sets the range inside which the algorithm searches for the endpoints of the likelihood ratio-based confidence interval. This avoids numerical issues with endpoints converging to zero and infinity. If an endpoint is not found within the interval, it is set to <code>NA</code>. Used only when <code>'lrt'</code> is one of the <code>ciType</code> values. Default is (0.01, 100).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>ciType</code> can include one or more of the following: <code>'delta'</code>, <code>'koopman'</code>, <code>'lrt'</code>, <code>'boot_norm'</code>, <code>'boot_perc'</code>, <code>'boot_basic'</code>, <code>'boot_stud'</code>, <code>'boot_bca'</code>. <code>'delta'</code> uses the delta method to compute an asymptotic interval based on the standard error of the log risk ratio. <code>'koopman'</code> uses the method described in Koopman (1984), following the implementation discussed in Fageland et al. (2015), including the calculation of Nam (1995). <code>'lrt'</code> inverts a likelihood-ratio test. Bootstrap-based options are the normal-based interval using the bootstrap standard error (<code>'boot_norm'</code>), the percentile bootstrap (<code>'boot_perc'</code>), the basic bootstrap (<code>'boot_basic'</code>), the bootstrap-t (<code>'boot_stud'</code>), and the bootstrap BCA method (<code>'boot_bca'</code>). See Paciorek et al. for more details. 
</p>
<p>See <code>fit_pot</code> for information on the <code>bootControl</code> argument.
</p>


<h3>Value</h3>

<p>The primary outputs of this function are as follows: the log of the risk ratio and standard error of that log risk ratio (<code>logRiskRatio</code> and <code>se_logRiskRatio</code>) as well the risk ratio itself (<code>riskRatio</code>). The standard error is based on the usual MLE asymptotics using a delta-method-based approximation. If requested via <code>ciType</code>, confidence intervals will be returned, as discussed in <code>Details</code>.
</p>


<h3>Author(s)</h3>

<p>Christopher J. Paciorek
</p>


<h3>References</h3>

<p>Paciorek, C.J., D.A. Stone, and M.F. Wehner. 2018. Quantifying uncertainty in the attribution of human influence on severe weather. Weather and Climate Extremes 20:69-80. arXiv preprint &lt;https://arxiv.org/abs/1706.03388&gt;.
</p>
<p>Koopman, P.A.R. 1984. Confidence intervals for the ratio of two binomial proportions. Biometrics 40: 513-517.
</p>
<p>Fagerland, M.W., S. Lydersen, and P. Laake. 2015. Recommended confidence intervals for two independent binomial proportions. Statistical Methods in Medical Research 24: 224-254.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># risk ratio for 40/400 compared to 8/400 events and for
# 4/100 compared to 0/100 events
calc_riskRatio_binom(c(40, 8), c(400, 400), ciType = c('lrt', 'boot_stud', 'koopman'))
# LRT and Koopman methods can estimate lower confidence interval endpoint
# even if estimated risk ratio is infinity:
calc_riskRatio_binom(c(4,0), c(100, 100), ciType = c('lrt', 'boot_stud', 'koopman'))
</code></pre>


</div>