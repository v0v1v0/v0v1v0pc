<div class="container">

<table style="width: 100%;"><tr>
<td>samplesize_tte</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sample size for composite time to event endpoints</h2>

<h3>Description</h3>

<p>This function calculates the required sample size for trials with a composite time to event endpoint as primary endpoint.
The primary endpoint is assumed to be a composite time to event endpoint formed by a combination of two events (E1 and E2).
The sample size is computed to evaluate differences between two groups based on the log rank test.
The sample size is calculated on the basis of anticipated information on the composite components and the correlation between them.
</p>


<h3>Usage</h3>

<pre><code class="language-R">samplesize_tte(
  p0_e1,
  p0_e2,
  HR_e1,
  HR_e2,
  beta_e1 = 1,
  beta_e2 = 1,
  case,
  copula = "Frank",
  rho = 0.3,
  rho_type = "Spearman",
  alpha = 0.05,
  power = 0.8,
  ss_formula = "schoenfeld",
  subdivisions = 50,
  plot_res = FALSE,
  plot_store = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>p0_e1</code></td>
<td>
<p>numeric parameter between 0 and 1, expected proportion of observed events for the endpoint E1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p0_e2</code></td>
<td>
<p>numeric parameter between 0 and 1, expected proportion of observed events for the endpoint E2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HR_e1</code></td>
<td>
<p>numeric parameter between 0 and 1, expected cause specific hazard Ratio the endpoint E1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HR_e2</code></td>
<td>
<p>numeric parameter between 0 and 1, expected cause specific hazard Ratio the endpoint E2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta_e1</code></td>
<td>
<p>numeric positive parameter, shape parameter (<code class="reqn">\beta_1</code>) for a Weibull distribution for the endpoint E1 in the control group. See details for more info.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta_e2</code></td>
<td>
<p>numeric positive parameter, shape parameter (<code class="reqn">\beta_2</code>) for a Weibull distribution for the endpoint E2 in the control group. See details for more info.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>case</code></td>
<td>
<p>integer parameter in {1,2,3,4}: (1) none of the endpoints is death; (2) endpoint 2 is death; (3) endpoint 1 is death; (4) both endpoints are death by different causes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>copula</code></td>
<td>
<p>character indicating the copula to be used: "Frank" (default), "Gumbel" or "Clayton". See details for more info.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho</code></td>
<td>
<p>numeric parameter between -1 and 1, Spearman's correlation coefficient o Kendall Tau between the marginal distribution of the times to the two events E1 and E2. See details for more info.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho_type</code></td>
<td>
<p>character indicating the type of correlation to be used: "Spearman" (default) or "Tau". See details for more info.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>numeric parameter. The probability of type I error. By default <code class="reqn">\alpha=0.05</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>power</code></td>
<td>
<p>numeric parameter. The power to detect the treatment effect. By default <code class="reqn">1-\beta=0.80</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ss_formula</code></td>
<td>
<p>character indicating the formula to be used for the sample size calculation on the single components: 'schoenfeld' (default) or 'freedman'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subdivisions</code></td>
<td>
<p>integer parameter greater than or equal to 10. Number of points used to plot the sample size according to correlation. The default is 50. Ignored if plot_res=FALSE and plot_store=FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_res</code></td>
<td>
<p>logical indicating if the sample size according to the correlation should be displayed. The default is FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_store</code></td>
<td>
<p>logical indicating if the plot of sample size according to the correlation is stored for future customization. The default is FALSE</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Some parameters might be difficult to anticipate, especially the shape parameters of Weibull distributions and those referred to the relationship between the marginal distributions. 
For the shape parameters (beta_e1, beta_e2) of the Weibull distribution, we recommend to use <code class="reqn">\beta_j=0.5</code>, <code class="reqn">\beta_j=1</code> or <code class="reqn">\beta_j=2</code> if a decreasing, constant or increasing rates over time are expected, respectively.
For the correlation (rho) between both endpoints, generally a positive value is expected as it has no sense to design an study with two endpoints negatively correlated. We recommend to use <code class="reqn">\rho=0.1</code>, <code class="reqn">\rho=0.3</code> or <code class="reqn">\rho=0.5</code> for weak, mild and moderate correlations, respectively.
For the type of correlation (rho_type), although two different type of correlations are implemented, we recommend the use of the Spearman's correlation.
In any case, if no information is available on these parameters, we recommend to use the default values provided by the function.
</p>
<p>The user can choose between the two most common formulae (Schoenfeld and Freedman) for the sample size calculation for the single components. 
Schoenfeld formula always be used for the composite endpoint.
</p>


<h3>Value</h3>

<p>A list containing the following components:
</p>

<dl>
<dt><code>ss_E1</code></dt>
<dd>
<p>Total sample size (both groups) for a trial using endpoint 1 as primary endpoint</p>
</dd>
<dt><code>ss_E2</code></dt>
<dd>
<p>Total sample size (both groups) for a trial using endpoint 2 as primary endpoint</p>
</dd>
<dt><code>ss_Ec</code></dt>
<dd>
<p>Total sample size (both groups) for a trial using composite endpoint as primary endpoint</p>
</dd>
</dl>
<p>In addition, if <code>plot_store=TRUE</code> an object of class <code>ggplot</code> with
the sample size for composite endpoint according to correlation is stored 
in the list.
</p>


<h3>References</h3>

<p>Friedman L.M., Furberg C.D., DeMets D.L. Fundamentals of Clinical Trials. 3rd ed. New York: Springer; 1998.
Cortés Martínez, J., Geskus, R.B., Kim, K. et al. Using the geometric average hazard ratio in sample size calculation for time-to-event data with composite endpoints. BMC Med Res Methodol 21, 99 (2021). https://doi.org/10.1186/s12874-021-01286-x
</p>


</div>