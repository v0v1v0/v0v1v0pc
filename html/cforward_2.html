<div class="container">

<table style="width: 100%;"><tr>
<td>cforward</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Forward Selection Based on C-Index/Concordance</h2>

<h3>Description</h3>

<p>Forward Selection Based on C-Index/Concordance
</p>


<h3>Usage</h3>

<pre><code class="language-R">cforward(
  data,
  event_time = "event_time_years",
  event_status = "mortstat",
  weight_column = "WTMEC4YR_norm",
  variables = NULL,
  included_variables = NULL,
  n_folds = 10,
  seed = 1989,
  max_model_size = 50,
  c_threshold = NULL,
  verbose = TRUE,
  cfit_args = list(),
  save_memory = FALSE,
  ...
)

cforward_one(
  data,
  event_time = "event_time_years",
  event_status = "mortstat",
  weight_column = "WTMEC4YR_norm",
  variables,
  included_variables = NULL,
  verbose = TRUE,
  cfit_args = list(),
  save_memory = FALSE,
  ...
)

make_folds(data, event_status = "mortstat", n_folds = 10, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data set to perform model selection and cross-validation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event_time</code></td>
<td>
<p>Character vector of length 1 with event times, passed to
<code>Surv</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event_status</code></td>
<td>
<p>Character vector of length 1 with event status, passed to
<code>Surv</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight_column</code></td>
<td>
<p>Character vector of length 1 with weights for
model.  If no weights are available, set to <code>NULL</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variables</code></td>
<td>
<p>Character vector of variables to perform selection.
Must be in <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>included_variables</code></td>
<td>
<p>Character vector of variables
forced to have in the model.  Must be in <code>data</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_folds</code></td>
<td>
<p>Number of folds for Cross-validation.  If you want to run on
the full data, set to 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Seed set before folds are created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_model_size</code></td>
<td>
<p>maximum number of variables in the model.  Selection
will stop if reached. Note, this does not correspond to the number
of coefficients, due to categorical variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>c_threshold</code></td>
<td>
<p>threshold for concordance.  If the difference in the best
concordance and this one does not reach a certain threshold, break.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>print diagnostic messages</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cfit_args</code></td>
<td>
<p>Arguments passed to <code>concordancefit</code>.  If
<code>strata</code> is to be passed, set <code>strata_column</code> in this list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save_memory</code></td>
<td>
<p>save only a minimal amount of information, discard
the fitted models</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments to pass to <code>coxph</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of lists, with elements of:
</p>

<dl>
<dt>full_concordance</dt>
<dd>
<p>Concordance when fit on the full data</p>
</dd>
<dt>models</dt>
<dd>
<p>Cox model from full data set fit, stripped of large memory
elements</p>
</dd>
<dt>cv_concordance</dt>
<dd>
<p>Cross-validated Concordance</p>
</dd>
<dt>included_variables</dt>
<dd>
<p>Variables included in the model, other than
those being selection upon</p>
</dd>
</dl>
<h3>Examples</h3>

<pre><code class="language-R">variables = c("gender",
              "age_years_interview", "education_adult")

res = cforward(nhanes_example,
               event_time = "event_time_years",
               event_status = "mortstat",
               weight_column = "WTMEC4YR_norm",
               variables = variables,
               included_variables = NULL,
               n_folds = 5,
               c_threshold = 0.02,
               seed = 1989,
               max_model_size = 50,
               verbose = TRUE)
conc = sapply(res, `[[`, "best_concordance")



res = cforward(nhanes_example,
               event_time = "event_time_years",
               event_status = "mortstat",
               weight_column = "WTMEC4YR_norm",
               variables = variables,
               included_variables = NULL,
               n_folds = 5,
               seed = 1989,
               max_model_size = 50,
               verbose = TRUE)
conc = sapply(res, `[[`, "best_concordance")
threshold = 0.01
included_variables = names(conc)[c(1, diff(conc)) &gt; threshold]

new_variables = c("diabetes", "stroke")
second_level = cforward(nhanes_example,
               event_time = "event_time_years",
               event_status = "mortstat",
               weight_column = "WTMEC4YR_norm",
               variables = new_variables,
               included_variables = included_variables,
               n_folds = 5,
               seed = 1989,
               max_model_size = 50,
               verbose = TRUE)
second_conc = sapply(second_level, `[[`, "best_concordance")
result = second_level[[which.max(second_conc)]]
final_model = result$models[[which.max(result$cv_concordance)]]
</code></pre>


</div>