<div class="container">

<table style="width: 100%;"><tr>
<td>gg</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Gamma/Gamma Spending model</h2>

<h3>Description</h3>

<p>Fits the Gamma-Gamma model on a given object of class <code>clv.data</code> to predict customers' mean
spending per transaction.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'clv.data'
gg(
  clv.data,
  start.params.model = c(),
  remove.first.transaction = TRUE,
  optimx.args = list(),
  verbose = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>clv.data</code></td>
<td>
<p>The data object on which the model is fitted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start.params.model</code></td>
<td>
<p>Named start parameters containing the optimization start parameters for the model without covariates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove.first.transaction</code></td>
<td>
<p>Whether customer's first transaction are removed. If <code>TRUE</code> all zero-repeaters are excluded from model fitting.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optimx.args</code></td>
<td>
<p>Additional arguments to control the optimization which are forwarded to <code>optimx::optimx</code>.
If multiple optimization methods are specified, only the result of the last method is further processed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Show details about the running of the function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Ignored</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Model parameters for the G/G model are <code>p, q, and gamma</code>. <br><code>p</code>: shape parameter of the Gamma distribution of the spending process. <br><code>q</code>: shape parameter of the Gamma distribution to account for customer heterogeneity. <br><code>gamma</code>: scale parameter of the Gamma distribution to account for customer heterogeneity.<br>
If no start parameters are given, p=0.5, q=15, gamma=2 is used for all model parameters. All parameters are required
to be &gt; 0.
</p>
<p>The Gamma-Gamma model cannot be estimated for data that contains negative prices.
Customers with a mean spending of zero or a transaction count of zero are ignored during model fitting.
</p>


<h4>The G/G model</h4>

<p>The G/G model allows to predict a value for future customer transactions. Usually, the G/G model is used
in combination with a probabilistic model predicting customer transaction such as the Pareto/NBD or the BG/NBD model.
</p>



<h3>Value</h3>

<p>An object of class clv.gg is returned.
</p>
<p>The function <code>summary</code> can be used to obtain and print a summary of the results.
The generic accessor functions <code>coefficients</code>, <code>vcov</code>, <code>fitted</code>,
<code>logLik</code>, <code>AIC</code>, <code>BIC</code>, and <code>nobs</code> are available.
</p>


<h3>References</h3>

<p>Colombo R, Jiang W (1999). “A stochastic RFM model.”
Journal of Interactive Marketing, 13(3), 2-12.
</p>
<p>Fader PS, Hardie BG, Lee K (2005). “RFM and CLV: Using Iso-Value Curves for
Customer Base Analysis.” Journal of Marketing Research, 42(4), 415-430.
</p>
<p>Fader PS, Hardie BG (2013). “The Gamma-Gamma Model of Monetary Value.”
URL <a href="http://www.brucehardie.com/notes/025/gamma_gamma.pdf">http://www.brucehardie.com/notes/025/gamma_gamma.pdf</a>.
</p>


<h3>See Also</h3>

<p><code>clvdata</code> to create a clv data object.
</p>
<p><code>plot</code> to plot diagnostics of the transaction data, incl. of spending.
</p>
<p><code>predict</code> to predict expected mean spending for every customer.
</p>
<p><code>plot</code> to plot the density of customer's mean transaction value compared to the model's prediction.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data("apparelTrans")
clv.data.apparel &lt;- clvdata(apparelTrans, date.format = "ymd",
                            time.unit = "w", estimation.split = 52)

# Fit the gg model
gg(clv.data.apparel)

# Give initial guesses for the model parameters
gg(clv.data.apparel,
     start.params.model = c(p=0.5, q=15, gamma=2))


# pass additional parameters to the optimizer (optimx)
#    Use Nelder-Mead as optimization method and print
#    detailed information about the optimization process
apparel.gg &lt;- gg(clv.data.apparel,
                     optimx.args = list(method="Nelder-Mead",
                                        control=list(trace=6)))

# estimated coefs
coef(apparel.gg)

# summary of the fitted model
summary(apparel.gg)

# Plot model vs empirical distribution
plot(apparel.gg)

# predict mean spending and compare against
#    actuals in the holdout period
predict(apparel.gg)

</code></pre>


</div>