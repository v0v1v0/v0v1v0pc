<div class="container">

<table style="width: 100%;"><tr>
<td>triangle S3 Methods</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Generic functions for triangles
</h2>

<h3>Description</h3>

<p>Functions to ease the work with triangle shaped matrix data. A
'triangle' is a matrix with some generic functions.
</p>
<p><code>triangle</code> creates a triangle from the given set of vectors of
observed data.
</p>
<p><code>as.triangle</code> attempts to turn its argument into a triangle.
Triangles are usually stored in a “long” format in data bases. The
function can transform a <code>data.frame</code> into a triangle shape.
</p>
<p><code>as.data.frame</code> turns a triangle into a data frame.
</p>


<h3>Usage</h3>

<pre><code class="language-R">triangle(..., bycol=FALSE, origin="origin", dev="dev", value="value")

## S3 method for class 'matrix'
as.triangle(Triangle, origin="origin", dev="dev", value="value", ...)
## S3 method for class 'data.frame'
as.triangle(Triangle, origin="origin", dev="dev", value="value", ...)
## S3 method for class 'triangle'
as.data.frame(x, row.names=NULL, optional, lob=NULL, na.rm=FALSE, ...)
as.triangle(Triangle, origin="origin", dev="dev", value="value", ...)
## S3 method for class 'triangle'
plot(x, type = "b", xlab = "dev. period", ylab = NULL, lattice=FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Triangle</code></td>
<td>
<p>a triangle</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bycol</code></td>
<td>
<p>logical. If <code>FALSE</code> (the default) the triangle is filled by
rows, otherwise the triangle is filled by columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>origin</code></td>
<td>
<p>name of the origin period, default is <code>"origin"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dev</code></td>
<td>
<p>name of the development period, default is <code>"dev"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>name of the value, default is <code>"value"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row.names</code></td>
<td>
<p>default is set to <code>NULL</code> and will merge origin
and dev. period to create row names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lob</code></td>
<td>
<p>default is <code>NULL</code>. The idea is to use <code>lob</code> (line
of business) as an additional column to label a triangle in a long format, see the
examples for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optional</code></td>
<td>
<p>not used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>logical. Remove missing values?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a matrix of class 'triangle'</p>
</td>
</tr>
</table>
<table>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>a label for the x axis, defaults to 'dev. period'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>a label for the y axis, defaults to NULL</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lattice</code></td>
<td>
<p>logical. If <code>FALSE</code> the function
<code>matplot</code> is used to plot the developments of the
triangle in one graph, otherwise the <code>xyplot</code> function
of the lattice package is used, to plot developments of each origin
period in a different panel.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>type, see <code>plot.default</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>vectors of data in <code>triangle</code>, see details;
arguments to be passed to other methods everywhere else.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Function <code>triangle</code> builds a triangle matrix from the vectors of
<em>known</em> data provided in <code>...</code>. Normally, each of these
vectors should be one shorter than the preceeding one. The length of
the first vector dictates the number of development periods or origin
periods (respectively when <code>bycol</code> is <code>FALSE</code> or
<code>TRUE</code>). As a special case, the function will build an <code class="reqn">n
    \times n</code> triangle from a single vector of <code class="reqn">n(n + 1)/2</code> data
points.
</p>
<p>The names of the arguments in <code>...</code> for function
<code>triangle</code> (when there are more than one) are retained for
row/column names. Similarly, the names of the elements of the
<em>first</em> argument are used as column/row names.
</p>


<h3>Warning</h3>

<p>Please note that for the function <code>as.triangle</code> the origin and
dev. period columns have to be of type numeric or a character which can be
converted into numeric.
</p>
<p>Also note that when converting from a data.frame to a matrix with 
<code>as.triangle</code>, multiple records with the same <code>origin</code> and 
<code>dev</code> will be aggregated.
</p>


<h3>Author(s)</h3>

<p>Markus Gesmann, Dan Murphy, Vincent Goulet
</p>


<h3>Examples</h3>

<pre><code class="language-R">GenIns
plot(GenIns)
plot(GenIns, lattice=TRUE)


## Convert long format into triangle
## Triangles are usually stored as 'long' tables in data bases
head(GenInsLong)
as.triangle(GenInsLong, origin="accyear", dev="devyear", "incurred claims")

X &lt;- as.data.frame(RAA)
head(X)

Y &lt;- as.data.frame(RAA, lob="General Liability")
head(Y)

## Basic creation of a triangle from loss development data
triangle(c(100, 150, 175, 180, 200),
         c(110, 168, 192, 205),
         c(115, 169, 202),
         c(125, 185),
         150)

## Same, with named origin periods
triangle("2012" = c(100, 150, 175, 180, 200),
         "2013" = c(110, 168, 192, 205),
         "2014" = c(115, 169, 202),
         "2015" = c(125, 185),
         "2016" = 150)

## Again, with also named development periods
triangle("2012" = c("12 months" = 100,
                    "24 months" = 150,
                    "36 months" = 175,
                    "48 months" = 180,
                    "60 months" = 200),
         "2013" = c(110, 168, 192, 205),
         "2014" = c(115, 169, 202),
         "2015" = c(125, 185),
         "2016" = 150)

## Quick, simplified usage
triangle(c(100, 150, 175, 110, 168, 115))
</code></pre>


</div>