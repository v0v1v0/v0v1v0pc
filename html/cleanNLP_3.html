<div class="container">

<table style="width: 100%;"><tr>
<td>cnlp_annotate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Run the annotation pipeline on a set of documents</h2>

<h3>Description</h3>

<p>Runs the clean_nlp annotators over a given corpus of text
using the desired backend. The details for which annotators to run and
how to run them are specified by using one of:
<code>cnlp_init_stringi</code>, <code>cnlp_init_spacy</code>, or
<code>cnlp_init_udpipe</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cnlp_annotate(
  input,
  backend = NULL,
  verbose = 10,
  text_name = "text",
  doc_name = "doc_id"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>input</code></td>
<td>
<p>an object containing the data to parse. Either a
character vector with the texts (optional names can
be given to provide document ids) or a data frame. The
data frame should have a column named 'text' containing
the raw text to parse; if there is a column named
'doc_id', it is treated as a a document identifier.
The name of the text and document id columns can be
changed by setting <code>text_name</code> and <code>doc_name</code>
This conforms with corpus objects respecting the Text
Interchange Format (TIF), while allowing for some
variation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>backend</code></td>
<td>
<p>name of the backend to use. Will default to the last
model to be initalized.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>set to a positive integer n to display a progress
message to display every n'th record. The default is
10. Set to a non-positive integer to turn off messages.
Logical input is converted to an integer, so it also
possible to set to TRUE (1) to display a message for
every document and FALSE (0) to turn off messages.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_name</code></td>
<td>
<p>column name containing the text input. The default
is 'text'. This parameter is ignored when <code>input</code>
is a character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>doc_name</code></td>
<td>
<p>column name containing the document ids. The default
is 'doc_id'. This parameter is ignored when
<code>input</code> is a character vector.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The returned object is a named list where each element containing a data
frame. The document table contains one row for each document, along with
with all of the metadata that was passed as an input. The tokens table
has one row for each token detected in the input. The first three columns
are always "doc_id" (to index the input document), "sid" (an integer index
for the sentence number), and "tid" (an integer index to the specific
token). Together, these are a primary key for each row.
</p>
<p>Other columns provide extracted data about each token, which differ slightly
based on which backend, language, and options are supplied.
</p>

<ul>
<li> <p><b>token</b>: detected token, as given in the original input
</p>
</li>
<li> <p><b>token_with_ws</b>: detected token along with white space; in,
theory, collapsing this field through an entire document will yield
the original text
</p>
</li>
<li> <p><b>lemma</b>: lemmatised version of the token; the exact form
depends on the choosen language and backend
</p>
</li>
<li> <p><b>upos</b>: the universal part of speech code; see
<a href="https://universaldependencies.org/u/pos/all.html">https://universaldependencies.org/u/pos/all.html</a>
for more information
</p>
</li>
<li> <p><b>xpos</b>: language dependent part of speech code; the specific
categories and their meaning depend on the choosen backend, model
and language
</p>
</li>
<li> <p><b>feats</b>: other extracted linguistic features, typically given
as Universal Dependencies
(<a href="https://universaldependencies.org/u/feat/index.html">https://universaldependencies.org/u/feat/index.html</a>), but can
be model dependent; currently only provided by the udpipe backend
</p>
</li>
<li> <p><b>tid_source</b>: the token id (tid) of the head word for the
dependency relationship starting from this token; for the token
attached to the root, this will be given as zero
</p>
</li>
<li> <p><b>relation</b>: the dependency relation, usually provided using
Universal Dependencies (more information available here
<a href="https://universaldependencies.org/">https://universaldependencies.org/</a>
), but could be different for a specific model
</p>
</li>
</ul>
<h3>Value</h3>

<p>a named list with components "token", "document" and (when
running spacy with NER) "entity".
</p>


<h3>Author(s)</h3>

<p>Taylor B. Arnold, <a href="mailto:taylor.arnold@acm.org">taylor.arnold@acm.org</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">cnlp_init_stringi()
cnlp_annotate(un)

</code></pre>


</div>