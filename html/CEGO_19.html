<div class="container">

<table style="width: 100%;"><tr>
<td>createSimulatedTestFunction</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulation-based Test Function Generator, Object Interface</h2>

<h3>Description</h3>

<p>Generate test functions for assessment of optimization algorithms with
non-conditional or conditional simulation, based on real-world data.
For a more streamlined interface, see <code>testFunctionGeneratorSim</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">createSimulatedTestFunction(
  xsim,
  fit,
  nsim = 10,
  conditionalSimulation = TRUE,
  seed = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>xsim</code></td>
<td>
<p>list of samples in input space, for simulation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>an object generated by <code>modelKriging</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nsim</code></td>
<td>
<p>the number of simulations, or test functions, to be created</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conditionalSimulation</code></td>
<td>
<p>whether (TRUE) or not (FALSE) to use conditional simulation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>a random number generator seed. Defaults to NA; which means no seed is set. For sake of reproducibility, set this to some integer value.<br></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a list of functions, where each function is the interpolation of one simulation realization. The length of the list depends on the nsim parameter.
</p>


<h3>References</h3>

<p>N. A. Cressie. Statistics for Spatial Data. JOHN WILEY &amp; SONS INC, 1993.
</p>
<p>C. Lantuejoul. Geostatistical Simulation - Models and Algorithms. Springer-Verlag Berlin Heidelberg, 2002.
</p>
<p>Zaefferer, M.; Fischbach, A.; Naujoks, B. &amp; Bartz-Beielstein, T. Simulation Based Test Functions for Optimization Algorithms Proceedings of the Genetic and Evolutionary Computation Conference 2017, ACM, 2017, 8.
</p>


<h3>See Also</h3>

<p><code>modelKriging</code>, <code>simulate.modelKriging</code>, <code>testFunctionGeneratorSim</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">nsim &lt;- 10
seed &lt;- 12345
n &lt;- 6
set.seed(seed)
#target function:
fun &lt;- function(x){
  exp(-20* x) + sin(6*x^2) + x
}
# "vectorize" target
f &lt;- function(x){sapply(x,fun)}
# distance function
dF &lt;- function(x,y)(sum((x-y)^2)) #sum of squares 
#start pdf creation
# plot params
par(mfrow=c(4,1),mar=c(2.3,2.5,0.2,0.2),mgp=c(1.4,0.5,0))
#test samples for plots
xtest &lt;- as.list(seq(from=-0,by=0.005,to=1))
plot(xtest,f(xtest),type="l",xlab="x",ylab="Obj. function")
#evaluation samples (training)
xb &lt;- as.list(runif(n)) 
yb &lt;- f(xb)
# support samples for simulation
x &lt;- as.list(sort(c(runif(100),unlist(xb))))
# fit the model	
fit &lt;- modelKriging(xb,yb,dF,control=list(
   algThetaControl=list(method="NLOPT_GN_DIRECT_L",funEvals=100),useLambda=FALSE))
fit
#predicted obj. function values
ypred &lt;- predict(fit,as.list(xtest))$y
plot(unlist(xtest),ypred,type="l",xlab="x",ylab="Estimation")
points(unlist(xb),yb,pch=19)
##############################	
# create test function non conditional
##############################
fun &lt;- createSimulatedTestFunction(x,fit,nsim,FALSE,seed=1)
ynew &lt;- NULL
for(i in 1:nsim)
  ynew &lt;- cbind(ynew,fun[[i]](xtest))
rangeY &lt;- range(ynew)
plot(unlist(xtest),ynew[,1],type="l",ylim=rangeY,xlab="x",ylab="Simulation")
for(i in 2:nsim){
  lines(unlist(xtest),ynew[,i],col=i,type="l")
}
##############################	
# create test function conditional
##############################
fun &lt;- createSimulatedTestFunction(x,fit,nsim,TRUE,seed=1)
ynew &lt;- NULL
for(i in 1:nsim)
  ynew &lt;- cbind(ynew,fun[[i]](xtest))
rangeY &lt;- range(ynew)
plot(unlist(xtest),ynew[,1],type="l",ylim=rangeY,xlab="x",ylab="Conditional sim.")
for(i in 2:nsim){
  lines(unlist(xtest),ynew[,i],col=i,type="l")
}
points(unlist(xb),yb,pch=19)
dev.off()

</code></pre>


</div>