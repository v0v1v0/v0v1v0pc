<div class="container">

<table style="width: 100%;"><tr>
<td>get_noisy_weights</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Noisy replications of weights</h2>

<h3>Description</h3>

<p>Given a data frame of weights, this function returns multiple replicates of the weights, with added
noise. This is intended for use in uncertainty and sensitivity analysis.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_noisy_weights(w, noise_specs, Nrep)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>w</code></td>
<td>
<p>A data frame of weights, in the format found in <code>.$Meta$Weights</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>noise_specs</code></td>
<td>
<p>a data frame with columns:
</p>

<ul>
<li> <p><code>Level</code>: The aggregation level to apply noise to
</p>
</li>
<li> <p><code>NoiseFactor</code>: The size of the perturbation: setting e.g. 0.2 perturbs by +/- 20% of nominal values.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Nrep</code></td>
<td>
<p>The number of weight replications to generate.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Weights are expected to be in a data frame format with columns <code>Level</code>, <code>iCode</code> and <code>Weight</code>, as
used in <code>iMeta</code>. Note that no <code>NA</code>s are allowed anywhere in the data frame.
</p>
<p>Noise is added using the <code>noise_specs</code> argument, which is specified by a data frame with columns
<code>Level</code> and <code>NoiseFactor</code>. The aggregation level refers to number of the aggregation level to target
while the <code>NoiseFactor</code> refers to the size of the perturbation. If e.g. a row is <code>Level = 1</code> and
<code>NoiseFactor = 0.2</code>, this will allow the weights in aggregation level 1 to deviate by +/- 20% of their
nominal values (the values in <code>w</code>).
</p>
<p>This function replaces the now-defunct <code>noisyWeights()</code> from COINr &lt; v1.0.
</p>


<h3>Value</h3>

<p>A list of <code>Nrep</code> sets of weights (data frames).
</p>


<h3>See Also</h3>


<ul><li> <p><code>get_sensitivity()</code> Perform global sensitivity or uncertainty analysis on a COIN
</p>
</li></ul>
<h3>Examples</h3>

<pre><code class="language-R"># build example coin
coin &lt;- build_example_coin(up_to = "new_coin", quietly = TRUE)

# get nominal weights
w_nom &lt;- coin$Meta$Weights$Original

# build data frame specifying the levels to apply the noise at
# here we vary at levels 2 and 3
noise_specs = data.frame(Level = c(2,3),
                         NoiseFactor = c(0.25, 0.25))

# get 100 replications
noisy_wts &lt;- get_noisy_weights(w = w_nom, noise_specs = noise_specs, Nrep = 100)

# examine one of the noisy weight sets, last few rows
tail(noisy_wts[[1]])

</code></pre>


</div>