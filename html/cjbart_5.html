<div class="container">

<table style="width: 100%;"><tr>
<td>pIMCE</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Population-Weighted Heterogeneous Effects Analysis of Conjoint Results</h2>

<h3>Description</h3>

<p><code>pIMCE</code> calculates the population individual-level marginal component effects from a BART-estimated conjoint model, using marginal attribute distributions specified by the researcher.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pIMCE(
  model,
  covar_data,
  attribs,
  l,
  l_1,
  l_0,
  marginals,
  method = "bayes",
  alpha = 0.05,
  cores = 1,
  skip_checks = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>A model object, the result of running <code>cjbart()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covar_data</code></td>
<td>
<p>A data.frame of covariate information to predict pIMCEs over</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>attribs</code></td>
<td>
<p>Vector of attribute names</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>l</code></td>
<td>
<p>Name of the attribute of interest</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>l_1</code></td>
<td>
<p>Attribute-level of interest for attribute <em>l</em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>l_0</code></td>
<td>
<p>Reference level for attribute <em>l</em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marginals</code></td>
<td>
<p>A named list where every element is a named vector of marginal probabilities for each corresponding attribute-level.  For example, <code>marginals = list("A1" = c("q" = 0.4, "r" = 0.6), "A2" = c("x" = 0.7, "y" = 0.2, "z" = 0.1))</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Character string, setting the variance estimation method to use. When method is "parametric", a typical combined variance estimate is employed; when <code>method = "bayes"</code>, the 95% posterior interval is calculated; and when <code>method = "rubin"</code>, combination rules are used to combine the variance analogous to in multiple imputation analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Number between 0 and 1 â€“ the significance level used to compute confidence/posterior intervals. When <code>method = "bayes"</code>, the posterior interval is calculated by taking the alpha/2 and (1-alpha/2) quantiles of the posterior draws. When <code>method = "rubin"</code>, the confidence interval equals the IMCE +/- <code>qnorm(alpha/2)</code>. By default, alpha is 0.05 i.e. generating a 95% confidence/posterior interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cores</code></td>
<td>
<p>Number of CPU cores used during prediction phase</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skip_checks</code></td>
<td>
<p>Boolean, indicating whether to check the structure of the data (default = <code>FALSE</code>). Only set this to <code>TRUE</code> if you are confident that the data is structured appropriately</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Boolean, indicating whether to print progress (default = TRUE)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function calculates the population-weighted IMCE, which takes into account the population distribution of profiles. Rather than average over the multiple OMCE estimates, this function generates estimated treatment effects for <em>all</em> possible potential outcomes along all attributes except the attribute of interest, and then marginalizes these over the supplied marginal distributions. Uncertainty estimates are recovered using credible intervals.
</p>


<h3>Value</h3>

<p><code>pIMCE</code> returns a data.frame of population-weighted estimates, credible interval bounds, and the covariate information supplied
</p>


<h3>See Also</h3>

<p><code>cjbart()</code>
</p>


</div>