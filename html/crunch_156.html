<div class="container">

<table style="width: 100%;"><tr>
<td>makeCaseVariable</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Make a case variable</h2>

<h3>Description</h3>

<p>The <code>makeCaseVariable</code> function derives a variable using values from other
variables. These are evaluated in the order they are supplied in the list
as the <code>cases</code> argument (they proceed in an IF, ELSE IF, ELSE IF, ..., ELSE
fashion); the first one that matches selects the corresponding value from
the case list. <code>caseExpr()</code> is a version that returns an expression that
could be used when creating complex variables, see <code>expressions</code> for
more details.
</p>


<h3>Usage</h3>

<pre><code class="language-R">makeCaseVariable(..., cases, data = NULL, name)

caseExpr(..., cases)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>a sequence of named expressions to use as cases as well as other
properties to pass about the case variable (i.e. alias, description)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cases</code></td>
<td>
<p>a list of lists with each case condition to use each must
include at least a <code>name</code> and an <code>expression</code> element. Cases may also include
<code>missing</code> (logical) and <code>numeric_value</code> (numeric).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>(optional) a crunch dataset to use. Specifying this means you
don't have to put <code style="white-space: pre;">⁠dataset$⁠</code> in front of each variable name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>a character to use as the name of the case variable to create</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>There are two ways to specify cases, but you must pick only one (note these
two will produce the same case variable):
</p>

<ol>
<li>
<p> When you just want to specify conditions, you can use named conditions:
<code>makeCaseVariable(case1=ds$v1 == 1, case2=ds$v2 == 2, name="new case")</code>
</p>
</li>
<li>
<p> You can also use the <code>cases</code> argument, which is useful when you want to
provide category ids, numeric values, or missingness:
<code>makeCaseVariable(   cases=list( list(expression=ds$v1 == 1, name="case1"), list(expression=ds$v2 == 2, name="case2")   ),   name="new case" )</code>
</p>
</li>
</ol>
<p>Rows in the dataset that do not match any of the provided "cases" will
be assigned to an "else" category. By default, Crunch will use the system
missing "No Data" category. Alternatively, you can provide an else
case definition for these rows by including as the last "case" you provide
one with its <code>expression</code> set to the string "else". See the examples for
details.
</p>


<h3>Value</h3>

<p>A <code>VariableDefinition</code> that will create the new
case variable when assigned into the Dataset.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
makeCaseVariable(case1 = ds$v1 == 1, case2 = ds$v2 == 2, name = "new case")
makeCaseVariable(
    cases = list(
        list(expression = ds$v1 == 1, name = "case1"),
        list(expression = ds$v2 == 2, name = "case2")
    ),
    name = "new case"
)

# different ways to specify else cases
makeCaseVariable(
    cases = list(
        list(expression = ds$v1 == 1, name = "case1"),
        list(expression = ds$v2 == 2, name = "case2"),
        list(expression = "else", name = "other")
    ),
    name = "new case"
)
makeCaseVariable(case1 = ds$v1 == 1, case2 = ds$v2 == 2, other = "else", name = "new case")

# the dataset can be specified with data=
makeCaseVariable(case1 = v1 == 1, case2 = v2 == 2, data = ds, name = "new case")

## End(Not run)
</code></pre>


</div>