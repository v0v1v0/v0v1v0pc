<div class="container">

<table style="width: 100%;"><tr>
<td>seqid</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Generate Group-Id from Integer Sequences
</h2>

<h3>Description</h3>

<p><code>seqid</code> can be used to group sequences of integers in a vector, e.g. <code>seqid(c(1:3, 5:7))</code> becomes <code>c(rep(1,3), rep(2,3))</code>. It also supports increments <code>&gt; 1</code>, unordered sequences, and missing values in the sequence.
</p>
<p>Some applications are to facilitate identification of, and grouped operations on, (irregular) time series and panels.
</p>


<h3>Usage</h3>

<pre><code class="language-R">seqid(x, o = NULL, del = 1L, start = 1L, na.skip = FALSE,
      skip.seq = FALSE, check.o = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a factor or integer vector. Numeric vectors will be converted to integer i.e. rounded downwards.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>o</code></td>
<td>
<p>an (optional) integer ordering vector specifying the order by which to pass through <code>x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>del</code></td>
<td>
<p>integer. The integer deliminating two consecutive points in a sequence. <code>del = 1</code> lets <code>seqid</code> track sequences of the form <code>c(1,2,3,..)</code>, <code>del = 2</code> tracks sequences <code>c(1,3,5,..)</code> etc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p>integer. The starting value of the resulting sequence id. Default is starting from 1. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.skip</code></td>
<td>
<p>logical. <code>TRUE</code> skips missing values in the sequence. The default behavior is skipping such that <code>seqid(c(1, NA, 2))</code> is regarded as one sequence and coded as <code>c(1, NA, 1)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skip.seq</code></td>
<td>
<p>logical. If <code>na.skip = TRUE</code>, this changes the behavior such that missing values are viewed as part of the sequence, i.e. <code>seqid(c(1, NA, 3))</code> is regarded as one sequence and coded as <code>c(1, NA, 1)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check.o</code></td>
<td>
<p>logical. Programmers option: <code>FALSE</code> prevents checking that each element of <code>o</code> is in the range <code>[1, length(x)]</code>, it only checks the length of <code>o</code>. This gives some extra speed, but will terminate R if any element of <code>o</code> is too large or too small. </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>seqid</code> was created primarily as a workaround to deal with problems of computing lagged values, differences and growth rates on irregularly spaced time series and panels before <em>collapse</em> version 1.5.0 (<a href="https://github.com/SebKrantz/collapse/issues/26">#26</a>). Now <code>flag</code>, <code>fdiff</code> and <code>fgrowth</code> natively support irregular data so this workaround is superfluous, except for iterated differencing which is not yet supported with irregular data.
</p>

<p>The theory of the workaround was to express an irregular time series or panel series as a regular panel series with a group-id created such that the time-periods within each group are consecutive. <code>seqid</code> makes this very easy: For an irregular panel with some gaps or repeated values in the time variable, an appropriate id variable can be generated using <code>settransform(data, newid = seqid(time, radixorder(id, time)))</code>. Lags can then be computed using <code>L(data, 1, ~newid, ~time)</code> etc.
</p>


<p>In general, for any regularly spaced panel the identity given by <code>identical(groupid(id, order(id, time)), seqid(time, order(id, time)))</code> should hold.
</p>







<p>For the opposite operation of creating a new time-variable that is consecutive in each group, see <code>data.table::rowid</code>.
</p>


<h3>Value</h3>

<p>An integer vector of class 'qG'. See <code>qG</code>.
</p>


<h3>See Also</h3>

<p><code>timeid</code>, <code>groupid</code>, <code>qG</code>, Fast Grouping and Ordering, Collapse Overview
</p>


<h3>Examples</h3>

<pre><code class="language-R">## This creates an irregularly spaced panel, with a gap in time for id = 2
data &lt;- data.frame(id = rep(1:3, each = 4),
                   time = c(1:4, 1:2, 4:5, 1:4),
                   value = rnorm(12))
data

## This gave a gaps in time error previous to collapse 1.5.0
L(data, 1, value ~ id, ~time)

## Generating new id variable (here seqid(time) would suffice as data is sorted)
settransform(data, newid = seqid(time, order(id, time)))
data

## Lag the panel this way
L(data, 1, value ~ newid, ~time)

## A different possibility: Creating a consecutive time variable
settransform(data, newtime = data.table::rowid(id))
data
L(data, 1, value ~ id, ~newtime)

## With sorted data, the time variable can also just be omitted..
L(data, 1, value ~ id)

</code></pre>


</div>