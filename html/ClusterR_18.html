<div class="container">

<table style="width: 100%;"><tr>
<td>Optimal_Clusters_KMeans</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Optimal number of Clusters for Kmeans or Mini-Batch-Kmeans</h2>

<h3>Description</h3>

<p>Optimal number of Clusters for Kmeans or Mini-Batch-Kmeans
</p>


<h3>Usage</h3>

<pre><code class="language-R">Optimal_Clusters_KMeans(
  data,
  max_clusters,
  criterion = "variance_explained",
  fK_threshold = 0.85,
  num_init = 1,
  max_iters = 200,
  initializer = "kmeans++",
  tol = 1e-04,
  plot_clusters = TRUE,
  verbose = FALSE,
  tol_optimal_init = 0.3,
  seed = 1,
  mini_batch_params = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>matrix or data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_clusters</code></td>
<td>
<p>either a numeric value, a contiguous or non-continguous numeric vector specifying the cluster search space</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>criterion</code></td>
<td>
<p>one of <em>variance_explained</em>, <em>WCSSE</em>, <em>dissimilarity</em>, <em>silhouette</em>, <em>distortion_fK</em>, <em>AIC</em>, <em>BIC</em> and <em>Adjusted_Rsquared</em>. See details for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fK_threshold</code></td>
<td>
<p>a float number used in the 'distortion_fK' criterion</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_init</code></td>
<td>
<p>number of times the algorithm will be run with different centroid seeds</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_iters</code></td>
<td>
<p>the maximum number of clustering iterations</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initializer</code></td>
<td>
<p>the method of initialization. One of, <em>optimal_init</em>, <em>quantile_init</em>, <em>kmeans++</em> and <em>random</em>. See details for more information</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>a float number. If, in case of an iteration (iteration &gt; 1 and iteration &lt; max_iters) 'tol' is greater than the squared norm of the centroids, then kmeans has converged</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_clusters</code></td>
<td>
<p>either TRUE or FALSE, indicating whether the results of the <em>Optimal_Clusters_KMeans</em> function should be plotted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>either TRUE or FALSE, indicating whether progress is printed during clustering</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol_optimal_init</code></td>
<td>
<p>tolerance value for the 'optimal_init' initializer. The higher this value is, the far appart from each other the centroids are.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>integer value for random number generator (RNG)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mini_batch_params</code></td>
<td>
<p>either NULL or a list of the following parameters : <em>batch_size</em>, <em>init_fraction</em>, <em>early_stop_iter</em>. If not NULL then the optimal number of clusters will be found based on the Mini-Batch-Kmeans. See the details and examples sections for more information.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>—————criteria————————–
</p>
<p><strong>variance_explained</strong> : the sum of the within-cluster-sum-of-squares-of-all-clusters divided by the total sum of squares
</p>
<p><strong>WCSSE</strong>              : the sum of the within-cluster-sum-of-squares-of-all-clusters
</p>
<p><strong>dissimilarity</strong>      : the average intra-cluster-dissimilarity of all clusters (the distance metric defaults to euclidean)
</p>
<p><strong>silhouette</strong>         : the average silhouette width where first the average per cluster silhouette is computed and then the global average (the distance metric defaults to euclidean). To compute the silhouette width for each cluster separately see the 'silhouette_of_clusters()' function
</p>
<p><strong>distortion_fK</strong>      : this criterion is based on the following paper, 'Selection of K in K-means clustering' (https://www.ee.columbia.edu/~dpwe/papers/PhamDN05-kmeans.pdf)
</p>
<p><strong>AIC</strong>                : the Akaike information criterion
</p>
<p><strong>BIC</strong>                : the Bayesian information criterion
</p>
<p><strong>Adjusted_Rsquared</strong>  : the adjusted R^2 statistic
</p>
<p>—————initializers———————-
</p>
<p><strong>optimal_init</strong>   : this initializer adds rows of the data incrementally, while checking that they do not already exist in the centroid-matrix  [ experimental ]
</p>
<p><strong>quantile_init</strong>  : initialization of centroids by using the cummulative distance between observations and by removing potential duplicates   [ experimental ]
</p>
<p><strong>kmeans++</strong>       : kmeans++ initialization. Reference : http://theory.stanford.edu/~sergei/papers/kMeansPP-soda.pdf AND http://stackoverflow.com/questions/5466323/how-exactly-does-k-means-work
</p>
<p><strong>random</strong>         : random selection of data rows as initial centroids
</p>
<p>If the <em>mini_batch_params</em> parameter is not NULL then the optimal number of clusters will be found based on the Mini-batch-Kmeans algorithm, otherwise based on the Kmeans. The higher the <em>init_fraction</em>
parameter is the more close the results between Mini-Batch-Kmeans and Kmeans will be.
</p>
<p>In case that the <em>max_clusters</em> parameter is a contiguous or non-contiguous vector then plotting is disabled. Therefore, plotting is enabled only if the <em>max_clusters</em> parameter is of length 1.
Moreover, the <em>distortion_fK</em> criterion can't be computed if the <em>max_clusters</em> parameter is a contiguous or non-continguous vector ( the <em>distortion_fK</em> criterion requires consecutive clusters ).
The same applies also to the <em>Adjusted_Rsquared</em> criterion which returns incorrect output.
</p>


<h3>Value</h3>

<p>a vector with the results for the specified criterion. If plot_clusters is TRUE then it plots also the results.
</p>


<h3>Author(s)</h3>

<p>Lampros Mouselimis
</p>


<h3>References</h3>

<p>https://www.ee.columbia.edu/~dpwe/papers/PhamDN05-kmeans.pdf
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(dietary_survey_IBS)

dat = dietary_survey_IBS[, -ncol(dietary_survey_IBS)]

dat = center_scale(dat)


#-------
# kmeans
#-------

opt_km = Optimal_Clusters_KMeans(dat, max_clusters = 10, criterion = "distortion_fK",

                                 plot_clusters = FALSE)

#------------------
# mini-batch-kmeans
#------------------


params_mbkm = list(batch_size = 10, init_fraction = 0.3, early_stop_iter = 10)

opt_mbkm = Optimal_Clusters_KMeans(dat, max_clusters = 10, criterion = "distortion_fK",

                                   plot_clusters = FALSE, mini_batch_params = params_mbkm)


#----------------------------
# non-contiguous search space
#----------------------------

search_space = c(2,5)

opt_km = Optimal_Clusters_KMeans(dat, max_clusters = search_space,

                                 criterion = "variance_explained",

                                 plot_clusters = FALSE)

</code></pre>


</div>