<div class="container">

<table style="width: 100%;"><tr>
<td>prepareCGPairedDifferenceData</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Prepare data object from a data frame for Paired Samples evaluations
</h2>

<h3>Description</h3>

<p>The function <code>prepareCGPairedDifferenceData</code> reads in a data frame and
settings
in order to create a
<code>cgPairedDifferenceData</code> object. The created object is designed to have exploratory and
fit methods applied to it. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">prepareCGPairedDifferenceData(dfr, format = "listed", analysisname = "",
 endptname = "", endptunits = "", logscale = TRUE, zeroscore = NULL,
 addconstant = NULL, digits = NULL, expunitname= "",
 refgrp = NULL, stamps = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dfr </code></td>
<td>
<p>A valid data frame, see the <code>format</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format </code></td>
<td>
<p>Default value of <code>"listed"</code>. Either <code>"listed"</code> or
<code>"groupcolumns"</code>
must be used. Abbreviations of <code>"l"</code> or <code>"g"</code>, respectively,
or otherwise sufficient matching values can be used:
</p>

<dl>
<dt><code>"listed"</code></dt>
<dd>
<p>At least two columns, with the two and only
two levels of a factor to represent the samples. These factor
levels would need to be in the first column and response values
in the second column. If there are three columns, then an
experimental unit identifier need to be defined in the first
column instead, with the second column having the two level
factor, and the third column having the response values.
See the Details Input Data Frame section below.</p>
</dd>
<dt><code>"groupcolumns"</code></dt>
<dd>
<p>At least two columns and no more than
three are permitted. In the two columns case, each column must
uniquely represent one of the two samples, implying a factor
with two and only two levels. The levels of the factor
make up the column headers. The values in the data frame are for
the response. Each row assumes the pairing of
the observation within an experimental unit, such as the same
subject. If there are three columns, then an
experimental unit identifier need to be defined in the first
column instead, with the second and third column having the
response values and headers to represent the two factor levels.
See the Details Input Data Frame section below.
</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>analysisname </code></td>
<td>
<p><em>Optional</em>, a character text or
math-valid expression that will be set for
default use in graph title and table methods. The default
value is the empty <code>""</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>endptname </code></td>
<td>
<p><em>Optional</em>, a character text or math-valid expression
that will be set for default use as the y-axis label of graph
methods, and also used for table methods. The default
value is the empty <code>""</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>endptunits </code></td>
<td>
<p><em>Optional</em>, a character text or math-valid
expression that can be used in combination with the endptname
argument.
Parentheses are
automatically added to this input, which will be added to the end
of the endptname character value or expression. The default
value is the empty <code>""</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logscale </code></td>
<td>
<p>Apply a log-transformation to the data for
evaluations. The default value is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zeroscore </code></td>
<td>
<p><em>Optional</em>,
replace response values of zero with a derived or specified
numeric value, as an approach to overcome the presence of zeroes
when evaluation in the
logarithmic scale (<code>logscale=TRUE</code>) is specified. The default value
is <code>NULL</code>. To derive a score value to replace zero,
<code>"estimate"</code> can be specified, see Details below on the algorithm used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addconstant </code></td>
<td>
<p><em>Optional</em>,
add a numeric constant to all response values, as an
approach to overcome the presence of zeroes when evaluation in the
logarithmic scale <code>logscale=TRUE</code> is desired. The default value is
<code>NULL</code>. A positive numeric value can be specified to be added, or a "simple"
algorthm specified to estimate a value to add. See Details secion
below on the algorithm used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits </code></td>
<td>
<p><em>Optional</em>, for output display purposes in graphs
and table methods, values will be rounded to this numeric
value. Only the integers of 0, 1, 2, 3, and 4 are accepted. No
rounding is done during any calculations. The default value is
<code>NULL</code>, which will examine each individual data value and choose the
one that has the maximum number of digits after any trailing
zeroes are ignored. The max number of digits will be 4.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expunitname </code></td>
<td>
<p><em>Optional</em>, a character text
that will be set for default use as the experimental unit label of graph
methods, and also used for table methods. The default
value is the empty <code>""</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>refgrp</code></td>
<td>
<p><em>Optional</em>, specify one of the factor levels to be the
“reference group”, such as a “control” group.
The default value is <code>NULL</code>,
which will just use the first level determined in the data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stamps </code></td>
<td>
<p><em>Optional</em>, specify a time stamp in graphs, along
with <span class="pkg">cg</span> package
version identification. The default value is <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>


<dl>
<dt><b>Input Data Frame</b></dt>
<dd>
<p>The input data frame <code>dfr</code> can be of the format
<code>"listed"</code> or <code>"groupcolumns"</code>.
</p>
<p>If <code>format="listed"</code> for <code>dfr</code> is specified, then there
must be three columns for an input data frame. The first column
needs to be the experimental unit identifier,
the second column needs to be the group identifier,
and the third is the endpoint. The first column of the listed input data format,
needs to have two sets of distinct values since it is the
experimental unit identifier of response pairs. The second column of the listed
input data format needs to have exactly 2 distinct values since
it is the group identifier.
</p>
<p>If <code>format="groupcolumns"</code> for <code>dfr</code> is specified, then
there can be two columns or three columns. 
</p>

<dl>
<dt><b>two columns</b></dt>
<dd>
<p>The column headers specify the two
paired group names. Each row contains the experimental unit
of paired numeric values under those two groups. In the
course of creating the <code>cgPairedDifferenceData</code> object,
another column will be binded from the left and become the
first column, with the column header of
<code>expunitname</code> is specified, and "expunit" if the default
<code>expunitname=""</code> is specified. A sequence of integers
starting with 1 up to the number of pairs/rows will be
generated to uniquely identify each experimental unit pair. 
</p>
</dd>
<dt><b>three columns</b></dt>
<dd>
<p>The first column needs to be unique
experimental unit identifiers of the paired numeric values in
the second and third columns. The second and third column
headers will be used to identify the two paired group names.
Each row's second and third column needs to contain the experimental unit
of paired numeric values under those two groups. The name of
the first column will be assigned to the <code>expunitname</code>
setting if <code>expunitname</code> is not explicity specified to
something else instead of its default <code>expunitname=""</code>. 
</p>
</dd>
</dl>
<p>As the evaluation data set is prepared for 
<code>cgPairedDifferenceData</code> object, any experimental unit
pairs/rows with
missing values in the
endpoint are flagged. This includes a check to make sure that each
experimental unit identified has a complete pair of numeric observations.
</p>
</dd>
<dt><b>zeroscore</b></dt>
<dd>
<p>If <code>zeroscore="estimate"</code> is specified, a number 
close to zero is derived to replace all zeroes for subsequent
log-scale analyses. A spline fit (using <code>spline</code> and
<code>method="natural"</code>)
of the log of the
response vector on the original response vector is performed. The
zeroscore is then derived from the log-scale value of the spline curve at the original
scale value of zero. This approach comes from the concept of
arithmetic-logarithmic scaling discussed in Tukey, Ciminera, and
Heyse (1985).
</p>
</dd>
<dt><b>addconstant</b></dt>
<dd>
<p>If <code>addconstant="simple"</code>  is specified, a number is derived and added
to all response values. The approach taken is
from the "white" book on S (Chambers and Hastie, 1992),
page 68. The range (<code>max - min</code>) of the response values is
</p>
<p>multiplied by <code>0.0001</code> to derive the number to add to all the
response values.
</p>
</dd>
</dl>
<h3>Value</h3>

<p>A <code>cgPairedDifferenceData</code> object is returned, with the following slots:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>dfr </code></td>
<td>
<p>The original input data frame that is the specified value of the
<code>dfr</code> argument in the function call.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dfru </code></td>
<td>
<p>Processed version of the input data frame, which will be
used for the various evaluation methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dfr.gcfmt </code></td>
<td>
<p>A groupcolumns version of the input data frame with
an additional column of the differences between groups, where the
<code>regfrp</code> column of values is the subtrahend (second term) in the subtraction.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>settings </code></td>
<td>
<p>A list of properties associated with the data
frame:
</p>

<dl>
<dt><code>analysisname</code></dt>
<dd>
<p>Drawn from the input argument value of
<code>analysisname</code>.</p>
</dd>
<dt><code>endptname</code></dt>
<dd>
<p>Drawn from the input argument value of
<code>endptname</code>, and set to <code>"Endpoint"</code> if input was left
at the default <code>""</code>.</p>
</dd>
<dt><code>endptunits</code></dt>
<dd>
<p>Drawn from the input argument value of
<code>endptunits</code>.</p>
</dd>
<dt><code>endptscale</code></dt>
<dd>
<p>Has the value of <code>"log"</code> if
<code>logscale=TRUE</code> and <code>"original"</code> if
<code>logscale=FALSE</code>.</p>
</dd>
<dt><code>zeroscore</code></dt>
<dd>
<p>Has the value of <code>NULL</code> if the input argument
was <code>NULL</code>. Otherwise has the derived (from
<code>zeroscore="estimate"</code>)
or specified numeric value.</p>
</dd>
<dt><code>addconstant</code></dt>
<dd>
<p>Has the value of <code>NULL</code> if the input argument
was <code>NULL</code>. Otherwise has the specified or derived numeric
value.</p>
</dd>
<dt><code>digits</code></dt>
<dd>
<p>Has the value of the input argument
<code>digits</code> or is set to the determined value of digits from the
input data. Will be an integer of 0, 1, 2, 3, or 4.</p>
</dd>
<dt><code>grpnames</code></dt>
<dd>
<p>Of length 2 and determined from the single factor identified of the
group names. The order is determined by the first occurence in the
input data frame header in <code>dfr</code> and the <code>refgrp</code> specification.</p>
</dd>
<dt><code>expunitname</code></dt>
<dd>
<p>Drawn from the input argument value of
<code>expunitname</code> and processing of the data frame.</p>
</dd>
<dt><code>refgrp</code></dt>
<dd>
<p>Drawn from the input argument of <code>refgrp</code>.</p>
</dd>
<dt><code>stamps</code></dt>
<dd>
<p>Drawn from the input argument of <code>stamps</code>.</p>
</dd>
</dl>
</td>
</tr>
</table>
<h3>Note</h3>

<p>Contact <a href="mailto:cg@billpikounis.net">cg@billpikounis.net</a> for bug reports, questions,
concerns, and comments.
</p>


<h3>Author(s)</h3>

<p>Bill Pikounis [aut, cre, cph], John Oleynick [aut], Eva Ye [ctb] 
</p>


<h3>References</h3>

<p>Tukey, J.W., Ciminera, J.L., and Heyse, J.F. (1985). "Testing the
Statistical Certainty of a Response to Increasing Doses of a
Drug," <em>Biometrics</em>, Volume 41, 295-301.
</p>
<p>Chambers, J.M, and Hastie, T.R. (1992), 
<em>Statistical Modeling in S.</em>  Chapman&amp;Hall/CRC.
</p>


<h3>See Also</h3>

<p><code>prepare</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(anorexiaFT)
anorexiaFT.data &lt;- prepareCGPairedDifferenceData(anorexiaFT, format="groupcolumns",
                                                 analysisname="Anorexia FT",
                                                 endptname="Weight",
                                                 endptunits="lbs",
                                                 expunitname="Patient",
                                                 digits=1, logscale=TRUE)
</code></pre>


</div>