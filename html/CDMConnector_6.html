<div class="container">

<table style="width: 100%;"><tr>
<td>assert_tables</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Assert that tables exist in a cdm object</h2>

<h3>Description</h3>

<p>A cdm object is a list of references to a subset of tables in the
OMOP Common Data Model.
If you write a function that accepts a cdm object as a parameter
<code>assert_tables</code>/<code>assertTables</code> will help you check that the tables you need
are in the cdm object, have the correct columns/fields,
and (optionally) are not empty.
</p>


<h3>Usage</h3>

<pre><code class="language-R">assert_tables(cdm, tables, empty.ok = FALSE, add = NULL)

assertTables(cdm, tables, empty.ok = FALSE, add = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>cdm</code></td>
<td>
<p>A cdm object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tables</code></td>
<td>
<p>A character vector of table names to check.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>empty.ok</code></td>
<td>
<p>Should an empty table (0 rows) be considered an error?
TRUE or FALSE (default)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add</code></td>
<td>
<p>An optional AssertCollection created by
<code>checkmate::makeAssertCollection()</code> that errors should be added to.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Invisibly returns the cdm object
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Use assertTables inside a function to check that tables exist
countDrugsByGender &lt;- function(cdm) {
  assertTables(cdm, tables = c("person", "drug_era"), empty.ok = FALSE)

  cdm$person %&gt;%
    dplyr::inner_join(cdm$drug_era, by = "person_id") %&gt;%
    dplyr::count(.data$gender_concept_id, .data$drug_concept_id) %&gt;%
    dplyr::collect()
}

library(CDMConnector)
con &lt;- DBI::dbConnect(duckdb::duckdb(), dbdir = eunomia_dir())
cdm &lt;- cdm_from_con(con)

countDrugsByGender(cdm)

DBI::dbDisconnect(con, shutdown = TRUE)


## End(Not run)
</code></pre>


</div>