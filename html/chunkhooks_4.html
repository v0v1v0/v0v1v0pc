<div class="container">

<table style="width: 100%;"><tr>
<td>benchmark</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Benchmark chunks</h2>

<h3>Description</h3>

<p><code>hook_benchmark</code> sets a hook to benchmark chunks with the <code>benchmark=TRUE</code>
option. The name of the trigger chunk option can be changed via the
<code>chunk_option</code> parameter. The result is printed right after chunk outputs.
See examples for the default printing format by <code>format_benchmark</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">hook_benchmark(
  trigger = "benchmark",
  default = NULL,
  format = format_benchmark,
  .set = TRUE
)

format_benchmark(result, options)

benchmarks
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>trigger</code></td>
<td>
<p>A name of chunk option that triggers benchmark (default:
<code>"benchmark"</code>). In order to trigger benchmark, specify <code>TRUE</code> as a
value of this option.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>default</code></td>
<td>
<p>A default value for the chunk option that <code>trigger</code>s
the hook (default: <code>NULL</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>A function to format a benchmark result (default:
<code>format_benchmark</code>). It must accept two arguments, where the first is the
benchmark result and the second is the list of current chunk options.
<code>NULL</code> suppresses printing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.set</code></td>
<td>
<p><code>TRUE</code> or <code>FALSE</code> to set the hook.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>result</code></td>
<td>
<p>A result of benchmark</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>options</code></td>
<td>
<p>A list of current chunk options</p>
</td>
</tr>
</table>
<h3>Format</h3>

<p>An object of class <code>environment</code> of length 0.
</p>


<h3>Details</h3>

<p><code>benchmarks</code> records the results of benchmarks from chunks as a list named by
chunk labels. If one requires complex formatting of benchmark results, then
suppress automatic formatting by <code>hook_benchmark(format = NULL)</code>. Then,
retrieve benchmark results from <code>benchmarks[["chunk-label"]]</code>. Furthermore,
<code>format</code> can happen conditionally by utilizing current chunk options via
the second argument of the <code>format</code>ting function.
</p>


<h3>Value</h3>

<p>invisible hook function
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Set a hook that triggers benchmarks if the `time` chunk option is not `NULL`.
hook_benchmark("time")

# Example of the default output format
# Input is sec. Output is prettified.
format_benchmark(1234, options = list(label = "example-chunk"))

</code></pre>


</div>