<div class="container">

<table style="width: 100%;"><tr>
<td>add_ci</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add Confidence Intervals for Fitted Values to Data Frames</h2>

<h3>Description</h3>

<p>This is a generic function to append confidence intervals for
predictions of a model fit to a data frame. A confidence interval
is generated for the fitted value of each observation in
<code>df</code>. These confidence intervals are then appended to
<code>df</code> and returned to the user as a data frame. The <code>fit</code> may
be a linear, log-linear, linear mixed, generalized linear model,
generalized linear mixed, or accelerated failure time model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_ci(df, fit, alpha = 0.05, names = NULL, yhatName = "pred", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A data frame of new data. <code>df</code> can be the
original data or new data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>An object of class <code>lm</code>, <code>glm</code>,
<code>lmerMod</code>, <code>glmerMod</code>, or <code>survreg</code>. Predictions
are made with this object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>A real number between 0 and 1. Controls the confidence
level of the interval estimates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names</code></td>
<td>
<p><code>NULL</code> or character vector of length two. If
<code>NULL</code>, confidence bounds automatically will be named by
<code>add_ci</code>, otherwise, the lower confidence bound will be
named <code>names[1]</code> and the upper confidence bound will be
named <code>names[2]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yhatName</code></td>
<td>
<p>A character vector of length one. Name of the
vector of the predictions made for each observation in <code>df</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For more specific information about the arguments that are applicable
in each method, consult:
</p>

<ul>
<li> <p><code>add_ci.lm</code> for linear model confidence intervals
</p>
</li>
<li> <p><code>add_ci.glm</code> for generalized linear model confidence intervals
</p>
</li>
<li> <p><code>add_ci.lmerMod</code> for linear mixed model confidence intervals
</p>
</li>
<li> <p><code>add_ci.glmerMod</code> for generalized linear mixed model confidence intervals
</p>
</li>
<li> <p><code>add_ci.survreg</code> for accelerated failure time confidence intervals
</p>
</li>
</ul>
<p>Note that <code>add_ci</code> calculates confidence intervals for
<em>fitted values</em>, not model coefficients. For confidence
intervals of model coefficients, see <code>confint</code>.
</p>


<h3>Value</h3>

<p>A dataframe, <code>df</code>, with predicted values, upper and lower
confidence bounds attached.
</p>


<h3>See Also</h3>

<p><code>add_pi</code> for prediction intervals,
<code>add_probs</code> for response level probabilities, and
<code>add_quantile</code> for quantiles of the conditional
response distribution.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Fit a linear model
fit &lt;- lm(dist ~ speed, data = cars)
# Make a confidence interval for each observation in cars, and
# append to the data frame
add_ci(cars, fit)

# Make new data
new_data &lt;- cars[sample(NROW(cars), 10), ]
add_ci(new_data, fit)

# Fit a Poisson model
fit2 &lt;- glm(dist ~ speed, family = "poisson", data = cars)
# Append CIs
add_ci(cars, fit2)

# Fit a linear mixed model using lme4
fit3 &lt;- lme4::lmer(Reaction ~ Days + (1|Subject), data = lme4::sleepstudy)
# Append CIs
# Generally, you should use more than 100 bootstrap replicates
add_ci(lme4::sleepstudy, fit3, nSims = 100)

# Fit a logistic model
fit4 &lt;- glm(I(dist &gt; 20) ~ speed, family = "binomial", data = cars)
# Append CIs
add_ci(cbind(cars, I(cars$dist &gt; 20)), fit4)


</code></pre>


</div>