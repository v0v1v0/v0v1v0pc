<div class="container">

<table style="width: 100%;"><tr>
<td>writeMTZ</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Write data to an MTZ file</h2>

<h3>Description</h3>

<p>Write reflections and experimental information
to an MTZ file
</p>


<h3>Usage</h3>

<pre><code class="language-R">writeMTZ(reflections, header, filename, title = NULL, batch_header = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>reflections</code></td>
<td>
<p>A data frame containing all reflection
records in columns. This is usually derived
from modifications of a previously existing
data frame obtained using
<code>readMTZ</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>header</code></td>
<td>
<p>A list whose components are other R objects. This
is normally derived from the reading of another
MTZ file using <code>readMTZ</code>. See further
details at <code>readMTZHeader</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>A character string. The path to a valid mtz
file. If a file with the same name exists, it
will be deleted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>A character string. The character string
associated with the TITLE keyword in an MTZ file.
This feature makes it easy to quickly identify the
data file in <a href="https://www.ccp4.ac.uk">CCP4</a>
programs. Default (NULL) is for the output file
to have the same title as the input file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>batch_header</code></td>
<td>
<p>A named list including information at data
collection time. This component is present
only for raw (unmerged) intensity data
produce after the diffraction images
integration. Merged MTZ reflection files
have <code>batch_header=NULL</code>.
Names and types depend on
the type of experiment (more information
on this can be found at
<a href="https://www.ccp4.ac.uk">CCP4</a>.)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>This function does not return any R object. It outputs
an MTZ reflection file to some target location.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Read the 1dei_phases data included in the package
datadir &lt;- system.file("extdata",package="cry")
filename &lt;- file.path(datadir,"1dei_phases.mtz")
lMTZ &lt;- readMTZ(filename)

# Change dataset name
print(lMTZ$header$DATASET)
lMTZ$header$DATASET[2,2] &lt;- "New CRY dataset"

# Add one HISTORY line (string has to be 80-letters long)
addhist &lt;- "From CRY 0.3.0 - run on Apr 2 20:12:00 2021"
n &lt;- nchar(addhist)
nblanks &lt;- 80-n
for (i in 1:nblanks) addhist &lt;- paste0(addhist," ")
lMTZ$header$HISTORY &lt;- c(lMTZ$header$HISTORY,addhist)

# Write to a new MTZ file
wd &lt;- tempdir()
fname &lt;- file.path(wd,"new.mtz")
writeMTZ(lMTZ$reflections,lMTZ$header,fname)

</code></pre>


</div>