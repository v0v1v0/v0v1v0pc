<div class="container">

<table style="width: 100%;"><tr>
<td>ch_wbt_catchment_onestep</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Delineates a catchment in a single step</h2>

<h3>Description</h3>

<p>Calls all of the <code>ch_wbt</code> and other functions required to do the sub-tasks
required to delineate a catchment. The names of files to be created
are taken from the list created by the function <code>ch_wbt_filenames</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ch_wbt_catchment_onestep(
  wd,
  in_dem,
  pp_sf,
  sink_method = "breach_leastcost",
  dist = NULL,
  check_catchment = TRUE,
  threshold = NULL,
  snap_dist = NULL,
  cb_colour = "red",
  pp_colour = "red",
  channel_colour = "blue",
  contour_colour = "grey",
  plot_na = TRUE,
  plot_scale = TRUE,
  na_location = "tr",
  scale_location = "bl",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>wd</code></td>
<td>
<p>Name of working directory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>in_dem</code></td>
<td>
<p>File name for original DEM.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pp_sf</code></td>
<td>
<p>Vector containing pour points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sink_method</code></td>
<td>
<p>Method for sink removal as used by <code>ch_wbt_removesinks</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist</code></td>
<td>
<p>Maximum search distance for breach paths in cells. Required if <code>sink_method = "breach_leastcost"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_catchment</code></td>
<td>
<p>If <code>TRUE</code> (the default) <code>ch_checkcatchment</code> will be called
after the catchment is created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>Threshold for channel initiation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>snap_dist</code></td>
<td>
<p>Maximum pour point snap distance in map units.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cb_colour</code></td>
<td>
<p>Colour for catchment outline. Default is "red".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pp_colour</code></td>
<td>
<p>Colour for catchment pour points. Default is "red".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>channel_colour</code></td>
<td>
<p>Colour for channel. Default is "blue".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>contour_colour</code></td>
<td>
<p>Colour for contours Default is "grey".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_na</code></td>
<td>
<p>If <code>TRUE</code> (the default) a north arrow is added to the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_scale</code></td>
<td>
<p>If <code>TRUE</code> (the default) a scale bar is added to the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na_location</code></td>
<td>
<p>Location for the north arrow. Default is <span class="option">tr</span>, i.e. top-right.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale_location</code></td>
<td>
<p>Location for the scale bar. Default is <span class="option">bl</span>, i.e. bottom-left.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Extra parameters for <code>ch_wbt_removesinks</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns an <span class="pkg">sp</span> object of the delineated catchment.
</p>


<h3>Author(s)</h3>

<p>Dan Moore and Kevin Shook
</p>


<h3>See Also</h3>

<p><code>ch_wbt_filenames</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Only proceed if Whitebox executable is installed
library(whitebox)
if (check_whitebox_binary()){
  library(raster)
  test_raster &lt;- ch_volcano_raster()
  dem_raster_file &lt;- tempfile(fileext = c(".tif"))
  # write test raster to file
  writeRaster(test_raster, dem_raster_file, format = "GTiff")
  wd &lt;- tempdir()
  pourpoint_file &lt;- tempfile("volcano_pourpoints", fileext = ".shp")
  pourpoints &lt;- ch_volcano_pourpoints(pourpoint_file)
  catchment &lt;- ch_wbt_catchment_onestep(wd = wd, in_dem = dem_raster_file, 
  pp_sf = pourpoints, sink_method = "fill", threshold = 1, snap_dist = 10)
} else {
  message("Examples not run as Whitebox executable not found")
}
</code></pre>


</div>