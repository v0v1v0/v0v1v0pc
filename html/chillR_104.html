<div class="container">

<table style="width: 100%;"><tr>
<td>stage_transitions</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute what it takes to advance through development stages</h2>

<h3>Description</h3>

<p>Function to compute the thermal requirements of transitioning
through a series of developmental stages.
</p>


<h3>Usage</h3>

<pre><code class="language-R">stage_transitions(
  observations,
  hourtemps,
  stages,
  models = list(Chill_Portions = Dynamic_Model, GDH = GDH),
  max_steps = length(stages)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>observations</code></td>
<td>
<p>data.frame containing observed developmental dates,
e.g. different stages of flower or leaf development. Should contain the
columns 'Stage' (containing the names of the development stages), 'Season'
(containing the 'development year' the observation belongs to, e.g. budbreak
for trees may be considered a stage of the 'dormancy year' that started
in the previous calendar year), 'Year' (the calendar year the observation
was made), 'JDay' (the Julian Date, a.k.a. day of the year, that the stage
was observed).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hourtemps</code></td>
<td>
<p>a list of two elements, with element 'hourtemps' being a
dataframe of hourly temperatures (e.g. produced by stack_hourly_temps). This
data frame must have a column for Year, a column for JDay (Julian date, or
day of the year), a column for Hour and a column for Temp (hourly
temperature). The second (optional) element is QC, which is a data.frame
indicating completeness of the dataset. This is automatically produced by
stack_hourly_temps. This also works if only the 'hourtemps' dataframe is
passed to the function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stages</code></td>
<td>
<p>character vector containing the relevant development stages
in their order of occurrence.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>models</code></td>
<td>
<p>named list of models that should be applied to the hourly
temperature data. These should be functions that take as input a vector of
hourly temperatures. This defaults to list(Chill_Portions=Dynamic_Model,
GDH=GDH), models that are often used for describing chill and heat
accumulation in temperate fruit trees.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_steps</code></td>
<td>
<p>integer indicating the maximum number of stage steps
(i.e. transitions from one step to the next), for which thermal requirements
should be calculated. This defaults to length(stages), which is also the
maximum value. If only requirements between each stage and the following
stage are of interest, this should be set to 1.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>data frame with rows for all transitions that occurred during the
observed records and the values of the metrics specified in 'models' that
accrued between the respective dates. Columns are c('Season','Stage',
'to_Stage','stage_steps') and one column for each thermal metrics.
</p>


<h3>Author(s)</h3>

<p>Eike Luedeling
</p>


<h3>Examples</h3>

<pre><code class="language-R">hourtemps&lt;-stack_hourly_temps(KA_weather)
observations&lt;-data.frame(Stage=c("V1","V2","V3","V1","V2","V3","V1","V3"),
                        Season=c(2001,2001,2001,2002,2002,2002,2003,2003),
                        Year=c(2001,2001,2001,2002,2002,2002,2003,2003),
                        JDay=c(30,45,60,35,42,55,37,62))
stages&lt;-c("V1","V2","V3") 

stage_transitions(observations,hourtemps,stages)

</code></pre>


</div>