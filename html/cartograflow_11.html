<div class="container">

<table style="width: 100%;"><tr>
<td>flowreduct</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Flow matrix reduction according to another matrix</h2>

<h3>Description</h3>

<p>Reduces a flow dataset according to an external matrix, eg. a matrix of travelled distance.<br> 
Builds geographical movements,  by weighting a flow dataset according to a distance criterion.
</p>


<h3>Usage</h3>

<pre><code class="language-R">flowreduct(tab, tab.metric, metric, d.criteria, d)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tab</code></td>
<td>
<p>is the input flowdata set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tab.metric</code></td>
<td>
<p>the distance dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric</code></td>
<td>
<p>select "continuous" or "ordinal" metric. See Details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d.criteria</code></td>
<td>
<p>is for selecting "dmin" or "dmax" distance criteria for "continuous" metric. See Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>is the value of the selected "dmin" or "dmax". see Details</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The involved metric can be continous or not.<br></p>
<p>(1) Metric is 'continous" for distance as euclidian, maximum, manhattan, etc.<br>
See flowdist <br>
- Metric is 'ordinal" for computing neighbourhood ordinal distance matrix.
– Select ="dmin" for reducing flow dataset to flow values that are up or equal to the dmin distance parameter  (Fij&gt;=dmin);<br>
– select ="dmax" for reducing flow dataset to values that are less or equal to the dmax distance parameter(Fij=&lt;dmin).<br><br></p>
<p>- Metric is 'ordinal' for computing neighbourhood ordinal distance with k contiguity.<br>
See flowcontig for computing ordinal distance matrix <br></p>


<h3>Value</h3>

<p>A flow dataset with distances computations and flow reduction
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(cartograflow)
library(sf)
library(dplyr)
data(flowdata)
map &lt;- st_read(system.file("shape/MGP_TER.shp", package = "cartograflow"))

tab &lt;- flowjointure(
  geom = "area", bkg = map, DF.flow = flows, origin = "i", destination = "j",
  id = "EPT_NUM", x = "X", y = "Y"
)

# Example for reducing a flow matrice with a distance matrice, in long format (i,j, distance)
## 1/2: Computes the matrice distances
tab.distance &lt;- flowdist(tab, dist.method = "euclidian", result = "dist")
tab.distance &lt;- tab.distance %&gt;% select(i, j, distance)
## 2/2: Reduce the flow matrice
tab.flow &lt;- flowreduct(flows, tab.distance,
  metric = "continous",
  d.criteria = "dmax", d = 8567
)
</code></pre>


</div>