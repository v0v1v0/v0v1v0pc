<div class="container">

<table style="width: 100%;"><tr>
<td>crew_class_client</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
<code>R6</code> client class.</h2>

<h3>Description</h3>

<p><code>R6</code> class for <code>mirai</code> clients.
</p>


<h3>Details</h3>

<p>See <code>crew_client()</code>.
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>name</code></dt>
<dd>
<p>See <code>crew_client()</code>.</p>
</dd>
<dt><code>workers</code></dt>
<dd>
<p>See <code>crew_client()</code>.</p>
</dd>
<dt><code>host</code></dt>
<dd>
<p>See <code>crew_client()</code>.</p>
</dd>
<dt><code>port</code></dt>
<dd>
<p>See <code>crew_client()</code>.</p>
</dd>
<dt><code>tls</code></dt>
<dd>
<p>See <code>crew_client()</code>.</p>
</dd>
<dt><code>seconds_interval</code></dt>
<dd>
<p>See <code>crew_client()</code>.</p>
</dd>
<dt><code>seconds_timeout</code></dt>
<dd>
<p>See <code>crew_client()</code>.</p>
</dd>
<dt><code>retry_tasks</code></dt>
<dd>
<p>See <code>crew_client()</code></p>
</dd>
<dt><code>relay</code></dt>
<dd>
<p>Relay object for event-driven programming on a downstream
condition variable.</p>
</dd>
<dt><code>started</code></dt>
<dd>
<p>Whether the client is started.</p>
</dd>
<dt><code>client</code></dt>
<dd>
<p>Process ID of the local process running the client.</p>
</dd>
<dt><code>dispatcher</code></dt>
<dd>
<p>Process ID of the <code>mirai</code> dispatcher</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-crew_class_client-new"><code>crew_class_client$new()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_client-validate"><code>crew_class_client$validate()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_client-start"><code>crew_class_client$start()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_client-terminate"><code>crew_class_client$terminate()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_client-condition"><code>crew_class_client$condition()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_client-resolved"><code>crew_class_client$resolved()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_client-summary"><code>crew_class_client$summary()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_client-pids"><code>crew_class_client$pids()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-crew_class_client-new"></a>



<h4>Method <code>new()</code>
</h4>

<p><code>mirai</code> client constructor.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_client$new(
  name = NULL,
  workers = NULL,
  host = NULL,
  port = NULL,
  tls = NULL,
  seconds_interval = NULL,
  seconds_timeout = NULL,
  retry_tasks = NULL,
  relay = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt>
<dd>
<p>Argument passed from <code>crew_client()</code>.</p>
</dd>
<dt><code>workers</code></dt>
<dd>
<p>Argument passed from <code>crew_client()</code>.</p>
</dd>
<dt><code>host</code></dt>
<dd>
<p>Argument passed from <code>crew_client()</code>.</p>
</dd>
<dt><code>port</code></dt>
<dd>
<p>Argument passed from <code>crew_client()</code>.</p>
</dd>
<dt><code>tls</code></dt>
<dd>
<p>Argument passed from <code>crew_client()</code>.</p>
</dd>
<dt><code>seconds_interval</code></dt>
<dd>
<p>Argument passed from <code>crew_client()</code>.</p>
</dd>
<dt><code>seconds_timeout</code></dt>
<dd>
<p>Argument passed from <code>crew_client()</code>.</p>
</dd>
<dt><code>retry_tasks</code></dt>
<dd>
<p>Argument passed from <code>crew_client()</code>.</p>
</dd>
<dt><code>relay</code></dt>
<dd>
<p>Argument passed from <code>crew_client()</code>.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>An <code>R6</code> object with the client.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>if (identical(Sys.getenv("CREW_EXAMPLES"), "true")) {
client &lt;- crew_client()
client$start()
client$log()
client$terminate()
}
</pre>
</div>


<hr>
<a id="method-crew_class_client-validate"></a>



<h4>Method <code>validate()</code>
</h4>

<p>Validate the client.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_client$validate()</pre></div>



<h5>Returns</h5>

<p><code>NULL</code> (invisibly).
</p>


<hr>
<a id="method-crew_class_client-start"></a>



<h4>Method <code>start()</code>
</h4>

<p>Start listening for workers on the available sockets.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_client$start()</pre></div>



<h5>Returns</h5>

<p><code>NULL</code> (invisibly).
</p>


<hr>
<a id="method-crew_class_client-terminate"></a>



<h4>Method <code>terminate()</code>
</h4>

<p>Stop the mirai client and disconnect from the
worker websockets.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_client$terminate()</pre></div>



<h5>Returns</h5>

<p><code>NULL</code> (invisibly).
</p>


<hr>
<a id="method-crew_class_client-condition"></a>



<h4>Method <code>condition()</code>
</h4>

<p>Get the <code>nanonext</code> condition variable which tasks signal
on resolution.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_client$condition()</pre></div>



<h5>Returns</h5>

<p>The <code>nanonext</code> condition variable which tasks signal
on resolution. The return value is <code>NULL</code> if the client
is not running.
</p>


<hr>
<a id="method-crew_class_client-resolved"></a>



<h4>Method <code>resolved()</code>
</h4>

<p>Get the true value of the <code>nanonext</code> condition variable.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_client$resolved()</pre></div>



<h5>Returns</h5>

<p>The value of the <code>nanonext</code> condition variable.
</p>


<hr>
<a id="method-crew_class_client-summary"></a>



<h4>Method <code>summary()</code>
</h4>

<p>Show an informative worker log.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_client$summary()</pre></div>



<h5>Returns</h5>

<p>A <code>tibble</code> with information on the workers, or <code>NULL</code>
if the client is not started. The <code>tibble</code> has 1 row
per worker and the following columns:
</p>

<ul>
<li> <p><code>worker</code>: integer index of the worker.
</p>
</li>
<li> <p><code>online</code>: <code>TRUE</code> if the worker is online and connected to the
websocket URL, <code>FALSE</code> otherwise.
</p>
</li>
<li> <p><code>instances</code>: integer, number of instances of <code>mirai</code> daemons
(<code>crew</code> workers) that have connected to the websocket URL
during the life cycle of the listener.
</p>
</li>
<li> <p><code>assigned</code>: number of tasks assigned to the current websocket URL.
</p>
</li>
<li> <p><code>complete</code>: number of tasks completed at the current websocket URL.
</p>
</li>
<li> <p><code>socket</code>: websocket URL. <code>crew</code> changes the token at the end of the
URL path periodically as a safeguard while managing workers.
</p>
</li>
</ul>
<hr>
<a id="method-crew_class_client-pids"></a>



<h4>Method <code>pids()</code>
</h4>

<p>Get the process IDs of the local process and the
<code>mirai</code> dispatcher (if started).
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_client$pids()</pre></div>



<h5>Returns</h5>

<p>An integer vector of process IDs of the local process and the
<code>mirai</code> dispatcher (if started).
</p>




<h3>See Also</h3>

<p>Other client: 
<code>crew_client()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (identical(Sys.getenv("CREW_EXAMPLES"), "true")) {
client &lt;- crew_client()
client$start()
client$log()
client$terminate()
}

## ------------------------------------------------
## Method `crew_class_client$new`
## ------------------------------------------------

if (identical(Sys.getenv("CREW_EXAMPLES"), "true")) {
client &lt;- crew_client()
client$start()
client$log()
client$terminate()
}
</code></pre>


</div>