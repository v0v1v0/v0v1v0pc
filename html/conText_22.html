<div class="container">

<table style="width: 100%;"><tr>
<td>embed_target</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Embed target using either: (a) a la carte OR (b) simple (untransformed) averaging of context embeddings</h2>

<h3>Description</h3>

<p>For a vector of contexts (generally the context variable in get_context output), return
the transformed (or untransformed) additive embeddings, aggregated or by instance, along with
the local vocabulary. Keep track of which contexts were embedded and which were excluded.
</p>


<h3>Usage</h3>

<pre><code class="language-R">embed_target(
  context,
  pre_trained,
  transform = TRUE,
  transform_matrix,
  aggregate = TRUE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>context</code></td>
<td>
<p>(character) vector of texts - <code>context</code> variable in get_context output</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pre_trained</code></td>
<td>
<p>(numeric) a F x D matrix corresponding to pretrained embeddings.
F = number of features and D = embedding dimensions.
rownames(pre_trained) = set of features for which there is a pre-trained embedding.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transform</code></td>
<td>
<p>(logical) if TRUE (default) apply the 'a la carte' transformation,
if FALSE ouput untransformed averaged embeddings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transform_matrix</code></td>
<td>
<p>(numeric) a D x D 'a la carte' transformation matrix.
D = dimensions of pretrained embeddings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggregate</code></td>
<td>
<p>(logical) - if TRUE (default) output will return one embedding (i.e. averaged over all instances of target)
if FALSE output will return one embedding per instance</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>(logical) - report the observations that had no overlap the provided pre-trained embeddings</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>required packages: quanteda
</p>


<h3>Value</h3>

<p>list with three elements:
</p>

<dl>
<dt><code>target_embedding</code></dt>
<dd>
<p>the target embedding(s). Values and dimensions will vary with the above settings.</p>
</dd>
<dt><code>local_vocab</code></dt>
<dd>
<p>(character) vocabulary that appears in the set of contexts provided.</p>
</dd>
<dt><code>obs_included</code></dt>
<dd>
<p>(integer) rows of the context vector that were included in the computation.
A row (context) is excluded when none of the words in the context are present in the pre-trained embeddings provided.</p>
</dd>
</dl>
<h3>Examples</h3>

<pre><code class="language-R"># find contexts for term immigration
context_immigration &lt;- get_context(x = cr_sample_corpus, target = 'immigration',
                        window = 6, valuetype = "fixed", case_insensitive = TRUE,
                        hard_cut = FALSE, verbose = FALSE)

contexts_vectors &lt;- embed_target(context = context_immigration$context,
pre_trained = cr_glove_subset,
transform = TRUE, transform_matrix = cr_transform,
aggregate = FALSE, verbose = FALSE)
</code></pre>


</div>