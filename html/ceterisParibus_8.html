<div class="container">

<table style="width: 100%;"><tr>
<td>local_conditional_expectations</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Local Conditional Expectation Explainer</h2>

<h3>Description</h3>

<p>This explainer works for individual observations.
For each observation it calculates Local Conditional Expectation (LCE) profiles for selected variables.
</p>


<h3>Usage</h3>

<pre><code class="language-R">local_conditional_expectations(
  explainer,
  observations,
  y = NULL,
  variable_splits = NULL,
  variables = NULL,
  grid_points = 101
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>explainer</code></td>
<td>
<p>a model to be explained, preprocessed by function 'DALEX::explain()'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>observations</code></td>
<td>
<p>set of observarvation for which profiles are to be calculated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>true labels for 'observations'. If specified then will be added to local conditional expectations plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variable_splits</code></td>
<td>
<p>named list of splits for variables, in most cases created with 'calculate_variable_splits()'. If NULL then it will be calculated based on validation data avaliable in the 'explainer'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variables</code></td>
<td>
<p>names of variables for which profiles shall be calculated. Will be passed to 'calculate_variable_splits()'. If NULL then all variables from the validation data will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid_points</code></td>
<td>
<p>number of points for profile. Will be passed to 'calculate_variable_splits()'.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of the class 'ceteris_paribus_explainer'.
A data frame with calculated LCE profiles.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library("DALEX")
 ## Not run: 
library("randomForest")
set.seed(59)

apartments_rf_model &lt;- randomForest(m2.price ~ construction.year + surface + floor +
      no.rooms + district, data = apartments)

explainer_rf &lt;- explain(apartments_rf_model,
      data = apartments[,2:6], y = apartments$m2.price)

new_apartment &lt;- apartments[1, ]

cp_rf &lt;- ceteris_paribus(explainer_rf, new_apartment)
lce_rf &lt;- local_conditional_expectations(explainer_rf, new_apartment)
lce_rf

lce_rf &lt;- local_conditional_expectations(explainer_rf, new_apartment, y = new_apartment$m2.price)
lce_rf

# Plot LCE
sel_vars &lt;- c("surface", "no.rooms")
plot(lce_rf, selected_variables = sel_vars)

# Compare ceteris paribus profiles with LCE profiles 
plot(cp_rf, selected_variables = sel_vars) + 
   ceteris_paribus_layer(lce_rf, selected_variables = sel_vars, color = "red")


## End(Not run)
</code></pre>


</div>