<div class="container">

<table style="width: 100%;"><tr>
<td>crypto_history</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get historic crypto currency market data</h2>

<h3>Description</h3>

<p>Scrape the crypto currency historic market tables from
'CoinMarketCap' <a href="https://coinmarketcap.com">https://coinmarketcap.com</a> and display
the results in a dataframe/tibble. This can be used to conduct
analysis on the crypto financial markets or to attempt
to predict future market movements or trends.
</p>


<h3>Usage</h3>

<pre><code class="language-R">crypto_history(
  coin_list = NULL,
  convert = "USD",
  limit = NULL,
  start_date = NULL,
  end_date = NULL,
  interval = NULL,
  requestLimit = 400,
  sleep = 0,
  wait = 60,
  finalWait = FALSE,
  single_id = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>coin_list</code></td>
<td>
<p>string if NULL retrieve all currently existing coins (<code>crypto_list()</code>),
or provide list of crypto currencies in the <code>crypto_list()</code> or <code>cryptoi_listings()</code> format (e.g. current and/or dead coins since 2015)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>convert</code></td>
<td>
<p>(default: USD) to one of available fiat prices (<code>fiat_list()</code>) or bitcoin 'BTC'. Be aware, that since 2024 only USD and BTC are available here!</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limit</code></td>
<td>
<p>integer Return the top n records, default is all tokens</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_date</code></td>
<td>
<p>date Start date to retrieve data from</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_date</code></td>
<td>
<p>date End date to retrieve data from, if not provided, today will be assumed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interval</code></td>
<td>
<p>string Interval with which to sample data according to what <code>seq()</code> needs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>requestLimit</code></td>
<td>
<p>limiting the length of request URLs when bundling the api calls</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sleep</code></td>
<td>
<p>integer (default 60) Seconds to sleep between API requests</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wait</code></td>
<td>
<p>waiting time before retry in case of fail (needs to be larger than 60s in case the server blocks too many attempts, default=60)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>finalWait</code></td>
<td>
<p>to avoid calling the web-api again with another command before 60s are over (TRUE=default)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>single_id</code></td>
<td>
<p>Download data coin by coin (as of May 2024 this is necessary)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Crypto currency historic OHLC market data in a dataframe and additional information via attribute "info":
</p>
<table>
<tr style="vertical-align: top;">
<td><code>timestamp</code></td>
<td>
<p>Timestamp of entry in database</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>Coin market cap unique id</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>Coin name</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>symbol</code></td>
<td>
<p>Coin symbol</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ref_cur_id</code></td>
<td>
<p>reference Currency id</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ref_cur_name</code></td>
<td>
<p>reference Currency name</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>open</code></td>
<td>
<p>Market open</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>high</code></td>
<td>
<p>Market high</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>low</code></td>
<td>
<p>Market low</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>close</code></td>
<td>
<p>Market close</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>volume</code></td>
<td>
<p>Volume 24 hours</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>market_cap</code></td>
<td>
<p>Market cap - close x circulating supply</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_open</code></td>
<td>
<p>Timestamp of open</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_close</code></td>
<td>
<p>Timestamp of close</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_high</code></td>
<td>
<p>Timestamp of high</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_low</code></td>
<td>
<p>Timestamp of low</p>
</td>
</tr>
</table>
<p>This is the main function of the crypto package. If you want to retrieve
ALL active coins then do not pass an argument to <code>crypto_history()</code>, alternatively pass the coin name.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

# Retrieving market history for ALL crypto currencies
all_coins &lt;- crypto_history(limit = 2)
one_coin &lt;- crypto_history(limit = 1, convert="BTC")

# Retrieving market history since 2020 for ALL crypto currencies
all_coins &lt;- crypto_history(start_date = '2020-01-01',limit=10)

# Retrieve 2015 history for all 2015 crypto currencies
coin_list_2015 &lt;- crypto_list(only_active=TRUE) %&gt;%
              dplyr::filter(first_historical_data&lt;="2015-12-31",
              last_historical_data&gt;="2015-01-01")
coins_2015 &lt;- crypto_history(coin_list = coin_list_2015,
              start_date = "2015-01-01", end_date="2015-12-31", limit=20, interval="30d")
# retrieve hourly bitcoin data for 2 days
btc_hourly &lt;- crypto_history(coin_list = coin_list_2015,
              start_date = "2015-01-01", end_date="2015-01-03", limit=1, interval="1h")


## End(Not run)

</code></pre>


</div>