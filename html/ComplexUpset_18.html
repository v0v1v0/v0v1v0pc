<div class="container">

<table style="width: 100%;"><tr>
<td>upset_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prepare data for UpSet plots</h2>

<h3>Description</h3>

<p>Prepare data for UpSet plots
</p>


<h3>Usage</h3>

<pre><code class="language-R">upset_data(
  data,
  intersect,
  min_size = 0,
  max_size = Inf,
  min_degree = 0,
  max_degree = Inf,
  n_intersections = NULL,
  keep_empty_groups = FALSE,
  warn_when_dropping_groups = FALSE,
  warn_when_converting = "auto",
  sort_sets = "descending",
  sort_intersections = "descending",
  sort_intersections_by = "cardinality",
  sort_ratio_numerator = "exclusive_intersection",
  sort_ratio_denominator = "inclusive_union",
  group_by = "degree",
  mode = "exclusive_intersection",
  size_columns_suffix = "_size",
  encode_sets = FALSE,
  max_combinations_datapoints_n = 10^10,
  intersections = "observed"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a dataframe including binary columns representing membership in classes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>intersect</code></td>
<td>
<p>which columns should be used to compose the intersection</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_size</code></td>
<td>
<p>minimal number of observations in an intersection for it to be included</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_size</code></td>
<td>
<p>maximal number of observations in an intersection for it to be included</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_degree</code></td>
<td>
<p>minimal degree of an intersection for it to be included</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_degree</code></td>
<td>
<p>maximal degree of an intersection for it to be included</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_intersections</code></td>
<td>
<p>the exact number of the intersections to be displayed; n largest intersections that meet the size and degree criteria will be shown</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_empty_groups</code></td>
<td>
<p>whether empty sets should be kept (including sets which are only empty after filtering by size)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn_when_dropping_groups</code></td>
<td>
<p>whether a warning should be issued when empty sets are being removed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warn_when_converting</code></td>
<td>
<p>whether a warning should  be issued when input is not boolean</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort_sets</code></td>
<td>
<p>whether to sort the rows in the intersection matrix (descending sort by default); one of: <code>'ascending'</code>, <code>'descending'</code>, <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort_intersections</code></td>
<td>
<p>whether to sort the columns in the intersection matrix (descending sort by default); one of: <code>'ascending'</code>, <code>'descending'</code>, <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort_intersections_by</code></td>
<td>
<p>the mode of sorting, the size of the intersection (cardinality) by default; one of: <code>'cardinality'</code>, <code>'degree'</code>, <code>'ratio'</code>, or any combination of these (e.g. <code>c('degree', 'cardinality')</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort_ratio_numerator</code></td>
<td>
<p>the mode for numerator when sorting by ratio</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort_ratio_denominator</code></td>
<td>
<p>the mode for denominator when sorting by ratio</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_by</code></td>
<td>
<p>the mode of grouping intersections; one of: <code>'degree'</code>, <code>'sets'</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>region selection mode for sorting and trimming by size. See <code>get_size_mode()</code> for accepted values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size_columns_suffix</code></td>
<td>
<p>suffix for the columns to store the sizes (adjust if conflicts with your data)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>encode_sets</code></td>
<td>
<p>whether set names (column in input data) should be encoded as numbers (set to TRUE to overcome R limitations of max 10 kB for variable names for datasets with huge numbers of sets); default TRUE for upset() and FALSE for upset_data()</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_combinations_datapoints_n</code></td>
<td>
<p>a fail-safe limit preventing accidental use of <code>intersections='all'</code> with a high number of sets and observations</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>intersections</code></td>
<td>
<p>whether only the intersections present in data (<code>observed</code>, default), or all intersections (<code>all</code>) should be computed; using all intersections for a high number of sets is not computationally feasible - use <code>min_degree</code> and <code>max_degree</code> to narrow down the selection; this is only useful for modes different from the default exclusive intersection. You can also provide a list with a custom selection of intersections (order is respected when you set <code>sort_intersections=FALSE</code>)</p>
</td>
</tr>
</table>
</div>