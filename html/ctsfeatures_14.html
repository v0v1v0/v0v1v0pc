<div class="container">

<table style="width: 100%;"><tr>
<td>plot_mcc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Constructs a control chart for the marginal distribution of a categorical
series</h2>

<h3>Description</h3>

<p><code>plot_mcc</code> constructs a control chart for the marginal distribution
of a categorical series
</p>


<h3>Usage</h3>

<pre><code class="language-R">plot_mcc(
  series,
  c,
  sigma,
  lambda = 0.99,
  k = 3.3,
  min_max = FALSE,
  plot = TRUE,
  title = "Control chart (marginal)",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>series</code></td>
<td>
<p>An object of type <code>tsibble</code> (see R package <code>tsibble</code>), whose column named Value
contains the values of the corresponding CTS. This column must be of class <code>factor</code> and its levels
must be determined by the range of the CTS.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>c</code></td>
<td>
<p>The hypothetical marginal distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma</code></td>
<td>
<p>A matrix containing the variances for each category (columns)
and each time t (rows).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>
<p>The constant lambda to construct the EWMA estimator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>The constant k to construct the k sigma limits.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_max</code></td>
<td>
<p>Logical. If <code>min_max = FALSE</code> (default), the standard
control chart for the marginal distribution is plotted. Otherwise, the
reduced control chart is plotted, i.e., only the minimum and maximum values
of the standardized statistics (with respect to the set of categories) are considered.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>Logical. If <code>plot = TRUE</code> (default), returns the control
chart. Otherwise, returns the standardized statistics or their maximum and
minimum value for each time t.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>The title of the graph.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters for the function.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Constructs a control chart of a CTS with range <code class="reqn">\mathcal{V}=\{1, \ldots, r\}</code> based on the marginal distribution. The chart relies on the
standardized statistic <code class="reqn">T_{t, i}=\frac{\hat{\pi}_{t, i}^{(\lambda)}-p_i}{k \cdot \sigma_{t, i}}</code>, where the <code class="reqn">\hat{\pi}_{t, i}^{(\lambda)}</code>,
<code class="reqn">i=1,\ldots,r</code>, are the components of the EWMA estimator of the marginal
distribution, <code class="reqn">p_i</code> is the marginal probability of category <code class="reqn">i</code>,
<code class="reqn">\sigma_{t,i}</code> is the variance of <code class="reqn">\hat{\pi}_{t, i}^{(\lambda)}</code> and <code class="reqn">k</code>
is a constant set by the user. If <code>min_max = FALSE</code>, then only the
statistics <code class="reqn">T_t^{\min }=\min_{i \in \mathcal{V}} T_{t, i}</code> and
<code class="reqn">T_t^{\max }=\max_{i \in \mathcal{V}} T_{t, i}</code> are plotted.
An out-of-control alarm is signalled if the statistics are below -1 or
above 1.
</p>


<h3>Value</h3>

<p>If <code>plot = TRUE</code> (default), represents the control chart for the marginal distribution. Otherwise, the function
returns a matrix with the values of the standardized statistics for each time t
</p>


<h3>Author(s)</h3>

<p>Ángel López-Oriona, José A. Vilar
</p>


<h3>References</h3>


<p>Weiß CH (2008).
“Visual analysis of categorical time series.”
<em>Statistical Methodology</em>, <b>5</b>(1), 56–71.
</p>



<h3>Examples</h3>

<pre><code class="language-R">sequence_1 &lt;- SyntheticData1[which(SyntheticData1$Series==1),]
cycle_cc &lt;- plot_ccc(series = sequence_1, mu_t = c(1, 1.5, 1),
lcl_t = rep(10, 600), ucl_t = rep(10, 600))
cycle_md &lt;- plot_mcc(series = sequence_1, c = c(0.3, 0.3, 0.4),
sigma = matrix(rep(c(1, 1, 1), 600), nrow = 600)) # Representing
# a control chart for the marginal distribution
cycle_md &lt;- plot_mcc(series = sequence_1, c = c(0.3, 0.3, 0.4),
sigma = matrix(rep(c(1, 1, 1), 600), nrow = 600), plot = FALSE) # Computing the
# corresponding standardized statistic
</code></pre>


</div>