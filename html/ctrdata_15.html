<div class="container">

<table style="width: 100%;"><tr>
<td>dfTrials2Long</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert data frame with trial records into long format</h2>

<h3>Description</h3>

<p>The function works with procotol- and results- related information.
It converts lists and other values that are in a data frame returned
by dbGetFieldsIntoDf into individual rows of a long data frame.
From the resulting long data frame, values of interest can be selected
using dfName2Value.
The function is particularly useful for fields with complex content,
such as node field "<code>clinical_results</code>" from EUCTR, for which
dbGetFieldsIntoDf returns as a multiply nested list and for
which this function then converts every observation of every (leaf)
field into a row of its own.
</p>


<h3>Usage</h3>

<pre><code class="language-R">dfTrials2Long(df)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>Data frame (or tibble) with columns including
the trial identifier (<code>_id</code>) and
one or more variables as obtained from
dbGetFieldsIntoDf</p>
</td>
</tr></table>
<h3>Value</h3>

<p>A data frame  (or tibble, if <code>tibble</code> is loaded)
with the four columns: '_id', 'identifier', 'name', 'value'
</p>


<h3>Examples</h3>

<pre><code class="language-R">
dbc &lt;- nodbi::src_sqlite(
   dbname = system.file("extdata", "demo.sqlite", package = "ctrdata"),
   collection = "my_trials")

dfwide &lt;- dbGetFieldsIntoDf(
  fields = "clinical_results.participant_flow",
  con = dbc)

dfTrials2Long(df = dfwide)

</code></pre>


</div>