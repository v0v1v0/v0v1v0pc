<div class="container">

<table style="width: 100%;"><tr>
<td>add_ci.survreg</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Confidence Intervals for the Mean Survival Time of Accelerated
Failure Time Models.</h2>

<h3>Description</h3>

<p>This function is one of the methods for <code>add_ci</code>, and is
called automatically when <code>add_ci</code> is used on a <code>fit</code> of
class <code>survreg</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'survreg'
add_ci(df, fit, alpha = 0.1, names = NULL, yhatName = "mean_pred", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A data frame of new data on which to form
predictions and confidence intervals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>An object of class <code>survreg</code>. Predictions are made
with this object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>A number between 0 and 1. 1 - <code>alpha</code> is the
confidence level of the intervals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names</code></td>
<td>
<p><code>NULL</code> or a string of length 2. If <code>NULL</code>, quantiles
automatically will be named by <code>add_quantile</code>, otherwise,
they will be named <code>names</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yhatName</code></td>
<td>
<p>A string. Name of the vector of predictions. The
default name is <code>mean_pred</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>add_ci.survreg</code> calculates confidence intervals for the mean
survival time of several accelerated failure time (AFT) models
including exponential, lognormal, weibull, and loglogistic
models. AFT models must be fit with the <code>survreg</code> function in
the <code>survival</code> package. Confidence intervals are formed
parametrically via the Delta method.
</p>
<p><code>add_ci.survreg</code> will compute confidence intervals for the
following mean survival time point estimates:
</p>
<p>Exponential: <code class="reqn">E[Y|X] = \exp{X\beta}</code>
</p>
<p>Weibull: <code class="reqn">E[Y|X] = \exp{X\beta}\Gamma(1 + \sigma)</code>
</p>
<p>Lognormal: <code class="reqn">E[Y|X] = \exp{X\beta + \frac{\sigma^2}{2}}</code>
</p>
<p>Loglogistic: <code class="reqn">E[Y|X] = \exp{X\beta}\Gamma(1 + \sigma)(1 - \sigma)</code>
</p>
<p>Traditionally, survival time predictions are made with the median
survival time. For forming confidence intervals for the median
survival time (or any quantile of the survival time distribution),
see <code>add_quantile.survreg</code>.
</p>
<p>Note: The expected survival time of a loglogistic model with scale
&gt;= 1 does not exist. Otherwise, expected survival times exist for
each of the four AFT models considered in <code>add.ci_survreg</code>.
</p>
<p>Note: Due to a limitation, the <code>Surv</code> object must be specified in
<code>survreg</code> function call. See the examples section for one way
to do this.
</p>
<p>Note: <code>add_ci.survreg</code> cannot inspect the convergence of
<code>fit</code>. Poor maximum likelihood estimates will result in poor
confidence intervals. Inspect any warning messages given from
<code>survreg</code>.
</p>


<h3>Value</h3>

<p>A dataframe, <code>df</code>, with predicted expected values and
level <em>1 - alpha</em> level confidence levels attached.
</p>


<h3>References</h3>

<p>For descriptions of the log-location scale models supported:
Meeker, William Q., and Luis A. Escobar. Statistical methods for reliability data. John Wiley &amp; Sons, 2014. (Chapter 4)
</p>
<p>For a description of the multivariate Delta method:
Meeker, William Q., and Luis A. Escobar. Statistical methods for reliability data. John Wiley &amp; Sons, 2014. (Appendix B.2)
</p>


<h3>See Also</h3>

<p><code>add_quantile.survreg</code> for quantiles of the
survival time distribution of <code>survreg</code> objects,
<code>add_pi.survreg</code> for prediction intervals of
<code>survreg</code> objects, and <code>add_probs.survreg</code> for
survival probabilities of <code>survreg</code> objects.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Define a data set.
df &lt;- survival::stanford2
## remove a covariate with missing values.
df &lt;- df[, 1:4]
## next, create the Surv object inside the survreg call:
fit &lt;- survival::survreg(survival::Surv(time, status) ~ age + I(age^2),
                         data = df, dist = "lognormal")
add_ci(df, fit, alpha = 0.1, names = c("lwr", "upr"))

## Try a different model:
fit2 &lt;- survival::survreg(survival::Surv(time, status) ~ age + I(age^2),
                          data = df, dist = "weibull")
add_ci(df, fit2, alpha = 0.1, names = c("lwr", "upr"))

</code></pre>


</div>