<div class="container">

<table style="width: 100%;"><tr>
<td>covidcast_cor</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute correlations between two <code>covidcast_signal</code> data frames</h2>

<h3>Description</h3>

<p>Computes correlations between two <code>covidcast_signal</code> data frames, allowing
for slicing by geo location, or by time. (Only the latest issue from each
data frame is used for correlations.) See the correlations vignette
for examples: <code>vignette("correlation-utils", package = "covidcast")</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">covidcast_cor(
  x,
  y,
  dt_x = 0,
  dt_y = 0,
  by = c("geo_value", "time_value"),
  use = "na.or.complete",
  method = c("pearson", "kendall", "spearman")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x, y</code></td>
<td>
<p>The <code>covidcast_signal</code> data frames to correlate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dt_x, dt_y</code></td>
<td>
<p>Time shifts (in days) to consider for <code>x</code> and <code>y</code>,
respectively, before computing correlations. Default is 0. Negative shifts
translate into in a lag value and positive shifts into a lead value; for
example, setting <code>dt_y = 2</code> results in values of <code>y</code> being shifted earlier
(leading) by 2 days before correlation, so values of <code>x</code> are correlated
with values of <code>y</code> from two days later.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>If "geo_value", then correlations are computed for each geo
location, over all time. Each correlation is measured between two time
series at the same location. If "time_value", then correlations are
computed for each time, over all geo locations. Each correlation is
measured between all locations at one time. Default is "geo_value".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use, method</code></td>
<td>
<p>Arguments to pass to <code>cor()</code>, with "na.or.complete" the
default for <code>use</code> (different than <code>cor()</code>) and "pearson" the default for
<code>method</code> (same as <code>cor()</code>).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data frame with first column <code>geo_value</code> or <code>time_value</code> (matching
<code>by</code>), and second column <code>value</code>, which gives the correlation.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# For all these examples, let x and y be two signals measured at the county
# level over several months.

## `by = "geo_value"`
# Correlate each county's time series together, returning one correlation per
# county:
covidcast_cor(x, y, by = "geo_value")

# Correlate x in each county with values of y 14 days later
covidcast_cor(x, y, dt_y = 14, by = "geo_value")

# Equivalently, x can be shifted -14 days:
covidcast_cor(x, y, dt_x = -14, by = "geo_value")

## `by = "time_value"`
# For each date, correlate x's values in every county against y's values in
# the same counties. Returns one correlation per date:
covidcast_cor(x, y, by = "time_value")

# Correlate x values across counties against y values 7 days later
covidcast_cor(x, y, dt_y = 7, by = "time_value")

## End(Not run)

</code></pre>


</div>