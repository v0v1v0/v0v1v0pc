<div class="container">

<table style="width: 100%;"><tr>
<td>detect.and.assign</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>detect.and.assign</h2>

<h3>Description</h3>

<p>Traces the fundamental frequency from a wave object. Also
applies smoothening to trace.
</p>


<h3>Usage</h3>

<pre><code class="language-R">detect.and.assign(
  all_files = NULL,
  path_chunks = NULL,
  path_calls = NULL,
  ffilter_from = 1100,
  threshold = 0.4,
  msmooth = c(1000, 95),
  min_dur = 0.1,
  max_dur = 0.3,
  step_size = 0.01,
  wing = 6,
  save_files = TRUE,
  quiet = FALSE,
  save_extra = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>all_files</code></td>
<td>
<p>character vector or 'NULL'. Character vector should contain
all the paths to the raw recordings that should be considered. If 'NULL'
files are loaded from 'path_chunks'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path_chunks</code></td>
<td>
<p>character, path to where the chunks are stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path_calls</code></td>
<td>
<p>character, path to where to store the results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ffilter_from</code></td>
<td>
<p>numeric, frequency in Hz for the high-pass filter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>numeric, threshold (fraction of the maximum) for amplitude
envelope when detecting call.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>msmooth</code></td>
<td>
<p>used as argument for the 'seewave::env' function. *A vector
of length 2 to smooth the amplitude envelope with a mean sliding window. The
first component is the window length (in number of points). The second
component is the overlap between successive windows (in %).* Default is
'c(500, 95)'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_dur</code></td>
<td>
<p>numeric, the minimal duration in seconds for a detection to
be saved. Default is '0.1'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_dur</code></td>
<td>
<p>numeric, the maximal duration in seconds for a detection to
be saved. Default is '0.3'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>step_size</code></td>
<td>
<p>numeric, duration in seconds of the bins for signal
compression before cross correlation. Default is '0.01'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wing</code></td>
<td>
<p>numeric, the duration in seconds to load before and after each
detection to improve alignment. This is not saved with the aligned call.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save_files</code></td>
<td>
<p>logical, if 'TRUE' the files are stored in the
'path_chunks' location. Results are also returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>logical, if 'TRUE' no messages are printed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save_extra</code></td>
<td>
<p>numeric, how much to add to start and end time in
seconds. Can be used to make sure the whole vocalisation is included.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a data frame with start = start time in samples and end =
end time in samples for each detection.
</p>


<h3>Examples</h3>

<pre><code class="language-R">require(callsync)
require(seewave)
require(tuneR)
path_git = 'https://raw.githubusercontent.com'
path_repo = '/simeonqs/callsync/master/tests/testthat/files'
file_1 = '/chunk@1@1@1@1.wav'
file_2 = '/chunk@2@1@1@1.wav'
url_1 = paste0(path_git, path_repo, file_1)
url_2 = paste0(path_git, path_repo, file_2)
local_file_1 = paste(tempdir(), file_1, sep = '/')
local_file_2 = paste(tempdir(), file_2, sep = '/')
if(!file.exists(local_file_1))
  download.file(url_1, destfile = local_file_1, mode = 'wb',)
if(!file.exists(local_file_2))
  download.file(url_2, destfile = local_file_2, mode = 'wb')
all_files = c(local_file_1, local_file_2)
## Not run: 
result = detect.and.assign(all_files = all_files,
                           quiet = TRUE,
                           save_files = FALSE)
                           
## End(Not run)

</code></pre>


</div>