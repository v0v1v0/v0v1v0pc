<div class="container">

<table style="width: 100%;"><tr>
<td>datasetPairs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Construct a dataset of pairs of observations for the estimation
of conditional Kendall's tau</h2>

<h3>Description</h3>

<p>In (Derumigny, &amp; Fermanian (2019)), it is described how the problem
of estimating conditional Kendall's tau can be rewritten as a
classification task for a dataset of pairs (of observations).
This function computes such a dataset, that can be then used to
estimate conditional Kendall's tau using one of the following
functions:
<code>CKT.fit.tree</code>, <code>CKT.fit.randomForest</code>,
<code>CKT.fit.GLM</code>, <code>CKT.fit.nNets</code>,
<code>CKT.predict.kNN</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">datasetPairs(
  X1,
  X2,
  Z,
  h,
  cut = 0.9,
  onlyConsecutivePairs = FALSE,
  nPairs = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X1</code></td>
<td>
<p>vector of observations of the first conditioned variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X2</code></td>
<td>
<p>vector of observations of the second conditioned variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Z</code></td>
<td>
<p>vector or matrix of observations of the conditioning variable(s),
of dimension <code>dimZ</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>h</code></td>
<td>
<p>the bandwidth. Can be a vector; in this case,
the components of <code>h</code> will be reused to match the dimension of <code>Z</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cut</code></td>
<td>
<p>the cutting level to keep a given pair or not.
Used only if no <code>nPairs</code> is provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>onlyConsecutivePairs</code></td>
<td>
<p>if <code>TRUE</code>, only consecutive pairs are used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nPairs</code></td>
<td>
<p>number of most relevant pairs to keep in the final datasets.
If this is different than the default <code>NULL</code>,
the cutting level <code>cut</code> is not used.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A matrix with <code>(4+dimZ)</code> columns and <code>n*(n-1)/2</code> rows
if <code>onlyConsecutivePairs=FALSE</code> and else <code>(n/2)</code> rows.
It is structured in the following way:
</p>

<ul>
<li>
<p> column <code>1</code> contains the information
about the concordance of the pair (i,j) ;
</p>
</li>
<li>
<p> columns <code>2</code> to <code>1+dimZ</code> contain
the mean value of Z (the conditioning variables) ;
</p>
</li>
<li>
<p> column <code>2+dimZ</code> contains the value of the kernel K_h(Z_j - Z_i) ;
</p>
</li>
<li>
<p> column <code>3+dimZ</code> and <code>4+dimZ</code>
contain the corresponding values of i and j.
</p>
</li>
</ul>
<h3>References</h3>

<p>Derumigny, A., &amp; Fermanian, J. D. (2019).
A classification point-of-view about conditional Kendallâ€™s tau.
Computational Statistics &amp; Data Analysis, 135, 70-94.
(Algorithm 1 for all pairs and Algorithm 8
for the case of only consecutive pairs)
<a href="https://doi.org/10.1016/j.csda.2019.01.013">doi:10.1016/j.csda.2019.01.013</a>
</p>


<h3>See Also</h3>

<p>the functions that require such a dataset of pairs
to do the estimation of conditional Kendall's tau:
<code>CKT.fit.tree</code>, <code>CKT.fit.randomForest</code>,
<code>CKT.fit.GLM</code>, <code>CKT.fit.nNets</code>,
<code>CKT.predict.kNN</code>, and <code>CKT.fit.randomForest</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># We simulate from a conditional copula
N = 500
Z = rnorm(n = N, mean = 5, sd = 2)
conditionalTau = 0.9 * pnorm(Z, mean = 5, sd = 2)
simCopula = VineCopula::BiCopSim(N = N , family = 3,
    par = VineCopula::BiCopTau2Par(1 , conditionalTau) )
X1 = qnorm(simCopula[,1])
X2 = qnorm(simCopula[,2])

datasetP = datasetPairs(
X1 = X1, X2 = X2, Z = Z, h = 0.07, cut = 0.9)

</code></pre>


</div>