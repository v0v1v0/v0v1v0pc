<div class="container">

<table style="width: 100%;"><tr>
<td>add_probs.lmerMod</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Response Probabilities for Linear Mixed Models</h2>

<h3>Description</h3>

<p>This function is one of the methods of <code>add_probs</code>, and is
called automatically when <code>add_probs</code> is used on a <code>fit</code>
of class <code>lmerMod</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'lmerMod'
add_probs(
  df,
  fit,
  q,
  name = NULL,
  yhatName = "pred",
  comparison = "&lt;",
  type = "parametric",
  includeRanef = TRUE,
  nSims = 10000,
  log_response = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A data frame of new data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>An object of class <code>lmerMod</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q</code></td>
<td>
<p>A real number. A quantile of the conditional response
distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p><code>NULL</code> or a string. If <code>NULL</code>, probabilities
automatically will be named by <code>add_probs</code>, otherwise, the
probabilities will be named <code>name</code> in the returned data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yhatName</code></td>
<td>
<p>A string. Name of the vector of predictions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>comparison</code></td>
<td>
<p>A character vector of length one. Must be either
<code>"&lt;"</code> or <code>"&gt;"</code>. If <code>comparison = "&lt;"</code>, then
<code class="reqn">Pr(Y|x &lt; q)</code> is calculated for each x in the new data,
<code>df</code>. Otherwise, <code class="reqn">Pr(Y|x &gt; q)</code> is calculated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>A string, either <code>"parametric"</code> or
<code>"boot"</code>. Determines the method used to determine the
probabilities.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>includeRanef</code></td>
<td>
<p>A logical. If <code>TRUE</code>, probabilities and
predictions will be calculated at the group level. If
<code>FALSE</code>, random effects will not be included, and
probabilities will be calculated at the population level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nSims</code></td>
<td>
<p>A positive integer. If <code>type = "boot"</code>,
<code>nSims</code> will determine the number of bootstrap simulations to
perform.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log_response</code></td>
<td>
<p>A logical. Set to <code>TRUE</code> if your model is
a log-linear mixed model: <code class="reqn">log(Y) = X \beta + Z \gamma +
\epsilon</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>It is recommended that one perform a parametric bootstrap to
determine these probabilities. To do so, use the option <code>type
= "boot"</code>.
</p>


<h3>Value</h3>

<p>A dataframe, <code>df</code>, with predictions and probabilities
attached.
</p>


<h3>See Also</h3>

<p><code>add_ci.lmerMod</code> for confidence intervals
for <code>lmerMod</code> objects, <code>add_pi.lmerMod</code> for
prediction intervals of <code>lmerMod</code> objects, and
<code>add_quantile.lmerMod</code> for response quantiles of
<code>lmerMod</code> objects.
</p>


<h3>Examples</h3>

<pre><code class="language-R">dat &lt;- lme4::sleepstudy

# Fit a random intercept model
fit &lt;- lme4::lmer(Reaction ~ Days + (1|Subject), data = lme4::sleepstudy)

# What is the probability that a new reaction time will be less
# than 300? (given the random effects).
add_probs(dat, fit, q = 300)

# What is the probability that a new reaction time will be greater
# than 300? (ignoring the random effects).
add_probs(dat, fit, q = 300, includeRanef = FALSE, comparison = "&gt;")

</code></pre>


</div>