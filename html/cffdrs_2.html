<div class="container">

<table style="width: 100%;"><tr>
<td>cffdrs-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Canadian Forest Fire Danger Rating System</h2>

<h3>Description</h3>

<p>The cffdrs package allows R users to calculate the outputs of the two main
components of the Canadian Forest Fire Danger Rating System (CFFDRS;
<a href="https://cwfis.cfs.nrcan.gc.ca/background/summary/fdr">https://cwfis.cfs.nrcan.gc.ca/background/summary/fdr</a>): the Fire Weather
Index (FWI) System
(<a href="https://cwfis.cfs.nrcan.gc.ca/background/summary/fwi">https://cwfis.cfs.nrcan.gc.ca/background/summary/fwi</a>) and the Fire
Behaviour Prediction (FBP) System
(<a href="https://cwfis.cfs.nrcan.gc.ca/background/summary/fbp">https://cwfis.cfs.nrcan.gc.ca/background/summary/fbp</a>) along with
additional methods created and used Canadian fire modelling. These systems
are widely used internationally to assess fire danger (FWI System) and
quantify fire behavior (FBP System).
</p>


<h3>Details</h3>

<p>The FWI System (Van Wagner 1987) is based on the moisture content and the
effect of wind of three classes of forest fuels on fire behavior. It
consists of six components: three fuel moisture codes (Fire Fuel Moisture
Code, Duff Moisture Code, Drought Code), and three fire behavior indexes
representing rate of spread (Initial Spread Index), fuel consumption
(Buildup Index), and fire intensity (Fire Weather Index). The FWI System
outputs are determined from daily noon weather observations: temperature,
relative humidity, wind speed, and 24-hour rainfall.
</p>
<p>The FBP System (Forestry Canada Fire Danger Group 1992; Hirsch 1996)
provides a set of primary and secondary measures of fire behavior. The
primary outputs consist of estimates of fire spread rate, fuel consumption,
fire intensity, and fire description (i.e., surface, intermittent, or crown
fire). The secondary outputs, which are not used nearly as often, give
estimates of fire area, perimeter, perimeter growth rate, and flank and back
fire behavior based on a simple elliptical fire growth model. Unlike the FWI
System, which is weather based, the FBP System also requires information on
vegetation (hereafter, fuel types) and slope (if any) to calculate its
outputs. Sixteen fuel types are included in the FBP System, covering mainly
major vegetation types in Canada.
</p>

<table>
<tr>
<td style="text-align: left;"> Package: </td>
<td style="text-align: left;"> cffdrs</td>
</tr>
<tr>
<td style="text-align: left;"> Type: </td>
<td style="text-align: left;"> Package</td>
</tr>
<tr>
<td style="text-align: left;"> Version: </td>
<td style="text-align: left;">
1.8.16</td>
</tr>
<tr>
<td style="text-align: left;"> Date: </td>
<td style="text-align: left;"> 2020-05-26</td>
</tr>
<tr>
<td style="text-align: left;"> License: </td>
<td style="text-align: left;"> GPL-2</td>
</tr>
<tr>
<td style="text-align: left;"> </td>
</tr>
</table>
<p> This package
includes eleven functions. Seven functions, <code>fwi</code>,
<code>fwiRaster</code>, <code>hffmc</code>, <code>hffmcRaster</code>,
<code>sdmc</code>, <code>gfmc</code>, and
<code>overwinter_drought_code</code> are used for
FWI System calculation, whereas two functions, <code>fbp</code> and
<code>fbpRaster</code> are used for FBP System calculation. One function,
<code>fire_season</code> determines fire season start and end dates based on
weather. Two functions <code>pros</code> and <code>lros</code> are rate of
spread and direction calculations across triangles. These functions are not
fully independent: their inputs overlap greatly and the users will have to
provide FWI System outputs to calculate FBP System outputs. The fwi,
fwiRaster, and sdmc functions calculate the outputs
based on daily noon local standard time (LST) weather observations of
temperature, relative humidity, wind speed, and 24-hour rainfall, as well as
the previous day's moisture content. The hffmc, gfmc, and hffmcRaster
functions calculate the outputs based on hourly weather observations of
temperature, relative humidity, wind speed, and hourly rainfall, as well as
the previous hour's weather conditions. The fbp and fbpRaster functions
calculate the outputs of the FBP System based on given set of information
about fire weather conditions (weather observations and their associated FWI
System components), fuel type, and slope (optional).
</p>


<h3>Author(s)</h3>

<p>Xianli Wang, Alan Cantin, Marc-Andr√© Parisien, Mike Wotton, Kerry
Anderson, Brett Moore, Tom Schiks, and Mike Flannigan
</p>
<p>Maintainer: Alan Cantin <a href="mailto:Alan.Cantin@nrcan-rncan.gc.ca">Alan.Cantin@nrcan-rncan.gc.ca</a>
</p>


<h3>References</h3>

<p>1. Van Wagner, C.E. and T.L. Pickett. 1985. Equations and
FORTRAN program for the Canadian Forest Fire Weather Index System. Can. For.
Serv., Ottawa, Ont. For. Tech. Rep. 33. 18 p.
</p>
<p>2. Van Wagner, C.E. 1987. Development and structure of the Canadian forest
fire weather index system. Forest Technology Report 35. (Canadian Forestry
Service: Ottawa).
</p>
<p>3. Lawson, B.D. and O.B. Armitage. 2008. Weather guide for the Canadian
Forest Fire Danger Rating System. Nat. Resour. Can., Can. For. Serv., North.
For. Cent., Edmonton, AB.
</p>
<p>4. Hirsch K.G. 1996. Canadian Forest Fire Behavior Prediction (FBP) System:
user's guide. Nat. Resour. Can., Can. For. Serv., Northwest Reg., North.
For. Cent., Edmonton, Alberta. Spec. Rep. 7. 122p.
</p>
<p>5. Forestry Canada Fire Danger Group. 1992. Development and structure of the
Canadian Forest Fire Behavior Prediction System. Forestry Canada, Ottawa,
Ontario Information Report ST-X-3. 63 p.
<a href="https://cfs.nrcan.gc.ca/pubwarehouse/pdfs/10068.pdf">https://cfs.nrcan.gc.ca/pubwarehouse/pdfs/10068.pdf</a>
</p>
<p>6. Wotton, B.M., Alexander, M.E., Taylor, S.W. 2009. Updates and revisions
to the 1992 Canadian forest fire behavior prediction system. Nat. Resour.
Can., Can. For. Serv., Great Lakes For. Cent., Sault Ste. Marie, Ontario,
Canada. Information Report GLC-X-10, 45p.
<a href="https://publications.gc.ca/collections/collection_2010/nrcan/Fo123-2-10-2009-eng.pdf">https://publications.gc.ca/collections/collection_2010/nrcan/Fo123-2-10-2009-eng.pdf</a>
</p>
<p>7. Tymstra, C., Bryce, R.W., Wotton, B.M., Armitage, O.B. 2009. Development
and structure of Prometheus: the Canadian wildland fire growth simulation
Model. Nat. Resour. Can., Can. For. Serv., North. For. Cent., Edmonton, AB.
Inf. Rep. NOR-X-417.
</p>


<h3>See Also</h3>

<p><code>fbp</code>, <code>fire_season</code>, <code>fwi</code>,
<code>fwiRaster</code>, <code>gfmc</code>, <code>hffmc</code>,
<code>hffmcRaster</code>, <code>lros</code>, <code>pros</code>,
<code>sdmc</code>,
<code>overwinter_drought_code</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Calculating daily FWI with wintering DC
#
# This exercise demonstrates how to calculate daily FWI System variables
# given a chronical two years daily fire weather observations from one
# weather station.
# In the example, we showed first how to decide fire season start and end
# dates with fire_season, we then made overwintering DC adjustment with
# overwinter_drought_code for the second fire season, and eventually
# calculated the daily FWI System variables over two fire seasons with fwi.
# All these steps were packed up into an example user's function, which could
# be modified by various user groups. Note: the data used in this example is
# also the test data for overwinter_drought_code.
#
# library(cffdrs)

# Example of a customised function to calculate fwi and
# overwinter DC. This could be further modified by
# users with various needs.
fwi_fs_wDC &lt;- function(input) {
  all.fwi &lt;- NULL
  curYr.fwi &lt;- NULL
  # Create date variable
  input$date &lt;- as.Date(as.POSIXlt(
    paste(input$yr, "-", input$mon, "-", input$day, sep = "")
  ))

  # use default fire season start and end temperature thresholds
  fs &lt;- fire_season(input)
  # Fire season dates, ordered chronologically
  fs &lt;- with(fs, fs[order(yr, mon, day), ])
  # Create same Date format as weather dataset for comparison
  fs$date &lt;- as.Date(as.POSIXlt(paste(
    fs$yr, "-", fs$mon, "-", fs$day,
    sep = ""
  )))

  theyears &lt;- unique(fs$yr)

  for (curYr.row in 1:length(theyears)) {
    curYr &lt;- theyears[curYr.row]
    curYr.d &lt;- fs[fs$yr == curYr, ]
    # set an initial startup values
    curYr.init &lt;- data.frame(ffmc = 80, dmc = 10, dc = 16)
    # if there is more than one year of data, accumulate precipitation,
    # then calculate overwinterDC and continue
    if (curYr.row &gt; 1) {
      # calculate the overwinter period
      # end of last year's fire season
      curYr.owd &lt;- curYr.fsd[nrow(curYr.fsd), ]
      # rbind with beginning of current year's fire season
      curYr.owd &lt;- rbind(curYr.owd, curYr.d[1, ])

      # accumulate precipitation for the period between end of last
      # and start of current
      curYr.owdata &lt;- sum(input[(input$date &gt; curYr.owd[1, "date"] &amp;
        input$date &lt; curYr.owd[2, "date"]), ]$prec)
      # calculate overwinter DC value
      owDC &lt;- overwinter_drought_code(
        DCf = tail(curYr.fwi$DC, n = 1), rw = curYr.owdata
      )
      # Initialize moisture codes
      curYr.init &lt;- data.frame(ffmc = 80, dmc = 10, dc = owDC)
    }

    # get first and last dates of this year
    curYr.fsd &lt;- curYr.d[c(1, nrow(curYr.d)), ]
    # match input data to those dates for fire season data
    curYr.fsdata &lt;- input[
      input$yr == curYr &amp;
        input$date &gt;= curYr.fsd[1, "date"] &amp;
        input$date &lt;= curYr.fsd[2, "date"],
    ]

    # run fwi on fire_season data
    curYr.fwi &lt;- fwi(curYr.fsdata, init = curYr.init)
    # force column names to be uppercase for consistency
    names(curYr.fwi) &lt;- toupper(names(curYr.fwi))
    all.fwi &lt;- rbind(all.fwi, curYr.fwi)
  }
  all.fwi
}

## Usage of the custom function
# Load the test dataset, which is also the test data for
# overwinter_drought_code:
data("test_wDC")
# select 1 weather station
localWX_1 &lt;- test_wDC[test_wDC$id == 1, ]
# run function with the data and fire season values
fwi_withFSwDC &lt;- fwi_fs_wDC(localWX_1)
# Check the resulting fwi indices, calculated with a fire season start and
# end date, and using overwintered DC
fwi_withFSwDC

</code></pre>


</div>