<div class="container">

<table style="width: 100%;"><tr>
<td>add_ci.negbin</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Confidence Intervals for Negative Binomial Linear Model Predictions</h2>

<h3>Description</h3>

<p>This function is one of the methods for <code>add_ci</code>, and is
called automatically when <code>add_ci</code> is used on a <code>fit</code> of
class <code>negbin</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'negbin'
add_ci(
  df,
  fit,
  alpha = 0.05,
  names = NULL,
  yhatName = "pred",
  response = TRUE,
  type = "parametric",
  nSims = 2000,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A data frame of new data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>An object of class <code>negbin</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>A real number between 0 and 1. Controls the confidence
level of the interval estimates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names</code></td>
<td>
<p><code>NULL</code> or character vector of length two. If
<code>NULL</code>, confidence bounds automatically will be named by
<code>add_ci</code>, otherwise, the lower confidence bound will be
named <code>names[1]</code> and the upper confidence bound will be
named <code>names[2]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yhatName</code></td>
<td>
<p>A string. Name of the vector of predictions made
for each observation in df</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>response</code></td>
<td>
<p>A logical. The default is <code>TRUE</code>. If
<code>TRUE</code>, the confidence intervals will be determined for
the expected response; if <code>FALSE</code>, confidence intervals
will be made on the scale of the linear predictor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>A string. Must be <code>type = "parametric"</code> or
<code>type = "boot"</code>. <code>type</code> determines the method used to
compute the confidence intervals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nSims</code></td>
<td>
<p>An integer. Number of simulations to perform if the
bootstrap method is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The default link function is log-link. Confidence Intervals are
determined by making an interval on the scale of the linear
predictor, then applying the inverse link function from the model
fit to transform the linear level confidence intervals to the
response level. Alternatively, bootstrap confidence intervals may
be formed. The bootstrap intervals are formed by first resampling
cases from the data frame used to calculate <code>fit</code>, then bias
corrected and accelerated intervals are calculated. See
<code>boot::boot.ci</code> for more details.
</p>


<h3>Value</h3>

<p>A dataframe, <code>df</code>, with predicted values, upper and lower
confidence bounds attached.
</p>


<h3>See Also</h3>

<p><code>add_pi.negbin</code> for prediction intervals for
<code>negbin</code> objects, <code>add_probs.negbin</code> for conditional
probabilities of <code>negbin</code> objects, and
<code>add_quantile.negbin</code> for response quantiles of
<code>negbin</code> objects.
</p>


<h3>Examples</h3>

<pre><code class="language-R">x1 &lt;- rnorm(300, mean = 1)
y &lt;- MASS::rnegbin(n = 300, mu = exp(5 + 0.5 * x1), theta = 2)
df &lt;- data.frame(x1 = x1, y = y)
fit &lt;- MASS::glm.nb(y ~ x1, data = df)
df &lt;- df[sample(100),]
add_ci(df, fit, names = c("lcb", "ucb"))

</code></pre>


</div>