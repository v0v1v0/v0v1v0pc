<div class="container">

<table style="width: 100%;"><tr>
<td>cn</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Control Nets</h2>

<h3>Description</h3>

<p>Generate the control net for a uni-variable B-spline
</p>


<h3>Usage</h3>

<pre><code class="language-R">cn(x, ...)

## S3 method for class 'cpr_bt'
cn(x, theta, ...)

## S3 method for class 'formula'
cn(
  formula,
  data,
  method = stats::lm,
  method.args = list(),
  keep_fit = TRUE,
  check_rank = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>cpr_bt</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>pass through</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta</code></td>
<td>
<p>a vector of (regression) coefficients, the ordinates of the
control net.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>a formula that is appropriate for regression method being used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a required <code>data.frame</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>the regression method such as <code>lm</code>,
<code>glm</code>, <code>lmer</code>, etc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method.args</code></td>
<td>
<p>a list of additional arguments to pass to the regression
method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_fit</code></td>
<td>
<p>(logical, defaults to <code>FALSE</code>).  If <code>TRUE</code> the
regression model fit is retained and returned in the the <code>fit</code> element.
If <code>FALSE</code> the regression model is not saved and the <code>fit</code> element
will be <code>NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_rank</code></td>
<td>
<p>(logical, defaults to <code>TRUE</code>) if TRUE check that the
design matrix is full rank.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>cn</code> generates the control net for the given B-spline function.  There
are several methods for building a control net.
</p>


<h3>Value</h3>

<p>a <code>cpr_cn</code> object.  This is a list with the following elements.
Some of the elements are omitted when the using the <code>cn.cpr_bt</code> method.
</p>

<dl>
<dt>cn</dt>
<dd>
<p>the control net, <code>data.frame</code> with each row defining a vertex
of the control net</p>
</dd>
<dt>bspline_list</dt>
<dd>
<p>A list of the marginal B-splines</p>
</dd>
<dt>call</dt>
<dd>
<p>the call</p>
</dd>
<dt>keep_fit</dt>
<dd>
<p>logical, indicates if the regression models was retained</p>
</dd>
<dt>fit</dt>
<dd>
<p>if <code>isTRUE(keep_fit)</code> then the regression model is here,
else <code>NA</code>.</p>
</dd>
<dt>coefficients</dt>
<dd>
<p>regression coefficients, only the fixed effects if a
mixed effects model was used.</p>
</dd>
<dt>vcov</dt>
<dd>
<p>The variance-covariance matrix for the <code>coefficients</code></p>
</dd>
<dt>loglik</dt>
<dd>
<p>The log-likelihood for the regression model</p>
</dd>
<dt>rse</dt>
<dd>
<p>the residual standard error for the regression models</p>
</dd>
</dl>
<h3>See Also</h3>

<p><code>summary.cpr_cn</code>, <code>cnr</code>,
<code>plot.cpr_cn</code> for plotting control nets
</p>


<h3>Examples</h3>

<pre><code class="language-R">
acn &lt;- cn(log10(pdg) ~
              btensor(   x     = list(day, age)
                      , df     = list(30, 4)
                      , bknots = list(c(-1, 1), c(44, 53))
              )
           , data = spdg)
str(acn, max.level = 1)

</code></pre>


</div>