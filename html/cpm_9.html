<div class="container">

<table style="width: 100%;"><tr>
<td>makeChangePointModel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creates a CPM S4 Object</h2>

<h3>Description</h3>

<p>This function is used to create a change point model (CPM) S4 object. The CPM object can be used to process a sequence of data, one observation at a time. The CPM object maintains its state between each observation, and can be queried to obtain the <code>D_{k,t}</code> statistics, and to test whether a change has been detected. 
</p>
<p>Note that this function is part of the S4 object section of the <code>cpm</code> package, which allows for more precise control over the change detection process. For many simple change detection applications this extra complexity will not be required, and the <code>detectChangePoint</code> and <code>processStream</code> functions should be used instead.
</p>
<p>For a fuller overview of this function including a description of the CPM framework and examples of how to use the various functions, please consult the package manual "Parametric and Nonparametric Sequential Change Detection in R: The cpm Package" available from www.gordonjross.co.uk
</p>


<h3>Usage</h3>

<pre><code class="language-R">     makeChangePointModel(cpmType, ARL0=500, startup=20, lambda=NA) 
     </code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>cpmType</code></td>
<td>
<p>The type of CPM which is to be created. Possible arguments are: 
</p>

<ul>
<li> <p><code>Student</code>: Student-t test statistic, as in [Hawkins et al, 2003]. Use to detect mean changes in a Gaussian sequence.
</p>
</li>
<li> <p><code>Bartlett</code>: Bartlett test statistic, as in [Hawkins and Zamba, 2005]. Use to detect variance changes in a Gaussian sequence.
</p>
</li>
<li> <p><code>GLR</code>: Generalized Likelihood Ratio test statistic, as in [Hawkins and Zamba, 2005b]. Use to detect both mean and variance changes in a Gaussian sequence.
</p>
</li>
<li> <p><code>Exponential</code>: Generalized Likelihood Ratio test statistic for the Exponential distribution, as in [Ross, 2013]. Used to detect changes in the parameter of an Exponentially distributed sequence.
</p>
</li>
<li> <p><code>GLRAdjusted</code> and <code>ExponentialAdjusted</code>: Identical to the GLR and Exponential statistics, except with the finite-sample correction discussed in [Ross, 2013] which can lead to more powerful change detection.
</p>
</li>
<li> <p><code>FET</code>: Fishers Exact Test statistic, as in [Ross and Adams, 2012b]. Use to detect parameter changes in a Bernoulli sequence.
</p>
</li>
<li> <p><code>Mann-Whitney</code>: Mann-Whitney test statistic, as in [Ross et al, 2011]. Use to detect location shifts in a stream with a (possibly unknown) non-Gaussian distribution.
</p>
</li>
<li> <p><code>Mood</code>: Mood test statistic, as in [Ross et al, 2011]. Use to detect scale shifts in a stream with a (possibly unknown) non-Gaussian distribution.
</p>
</li>
<li> <p><code>Lepage</code>: Lepage test statistics in [Ross et al, 2011]. Use to detect location and/or shifts in a stream with a (possibly unknown) non-Gaussian distribution.
</p>
</li>
<li> <p><code>Kolmogorov-Smirnov</code>: Kolmogorov-Smirnov test statistic, as in [Ross et al 2012]. Use to detect arbitrary changes in a stream with a (possibly unknown) non-Gaussian distribution.
</p>
</li>
<li> <p><code>Cramer-von-Mises</code>: Cramer-von-Mises test statistic, as in [Ross et al 2012]. Use to detect arbitrary changes in a stream with a (possibly unknown) non-Gaussian distribution.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ARL0</code></td>
<td>
<p>Determines the <code class="reqn">ARL_0</code> which the CPM should have, which corresponds to the average number of observations before a false positive occurs, assuming that the sequence does not undergo a chang. Because the thresholds of the CPM are computationally expensive to estimate, the package contains pre-computed values of the thresholds corresponding to several common values of the <code class="reqn">ARL_0</code>. This means that only certain  values for the <code class="reqn">ARL_0</code> are allowed. Specifically, the <code class="reqn">ARL_0</code> must have one of the following values: 370, 500, 600, 700, ..., 1000, 2000, 3000, ..., 10000, 20000, ..., 50000.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>startup</code></td>
<td>
<p>The number of observations after which monitoring begins. No change points will be flagged during this startup period. This must be set to at least 20.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>
<p>A smoothing parameter which is used to reduce the discreteness of the test statistic when using the FET CPM. See [Ross and Adams, 2012b] in the References section for more details on how this parameter is used.  Currently the package only contains sequences of ARL0 thresholds corresponding to lambda=0.1 and lambda=0.3, so using other values will result in an error. If no value is specified, the default value will be 0.1.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A CPM S4 object. The class of this object will depend on the value which has been passed as the <code>cpmType</code> argument.
</p>


<h3>Author(s)</h3>

<p>Gordon J. Ross <a href="mailto:gordon@gordonjross.co.uk">gordon@gordonjross.co.uk</a></p>


<h3>References</h3>

<p>Hawkins, D. , Zamba, K. (2005) – A Change-Point Model for a Shift in Variance, <em>Journal of Quality Technology</em>, 37, 21-31
</p>
<p>Hawkins, D. , Zamba, K. (2005b) – Statistical Process Control for Shifts in Mean or Variance Using a Changepoint Formulation, <em>Technometrics</em>, 47(2), 164-173
</p>
<p>Hawkins, D., Qiu, P., Kang, C. (2003) – The Changepoint Model for Statistical Process Control, <em>Journal of Quality Technology</em>, 35, 355-366. 
</p>
<p>Ross, G. J., Tasoulis, D. K., Adams, N. M. (2011) – A Nonparametric Change-Point Model for Streaming Data, <em>Technometrics</em>, 53(4)
</p>
<p>Ross, G. J., Adams, N. M. (2012) – Two Nonparametric Control Charts for Detecting Arbitary Distribution Changes, <em>Journal of Quality Technology</em>, 44:102-116
</p>
<p>Ross, G. J., Adams, N. M. (2013) – Sequential Monitoring of a Proportion, <em>Computational Statistics</em>, 28(2)
</p>
<p>Ross, G. J., (2014) – Sequential Change Detection in the Presence of Unknown Parameters, <em>Statistics and Computing</em> 24:1017-1030
</p>
<p>Ross, G. J., (2015) – Parametric and Nonparametric Sequential Change Detection in R: The cpm Package, <em>Journal of Statistical Software</em>, forthcoming
</p>


<h3>See Also</h3>

<p><code>processObservation, changeDetected, cpmReset</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#generate a sequence containing a single change point
x &lt;- c(rnorm(100,0,1),rnorm(100,1,1))

#use a Student CPM
cpm &lt;- makeChangePointModel(cpmType="Student", ARL0=500)

for (i in 1:length(x)) {

  #process each observation in turn
  cpm &lt;- processObservation(cpm,x[i])
  
  if (changeDetected(cpm)) {
    print(sprintf("change detected at observation %s",i))
    break
  }
}
     </code></pre>


</div>