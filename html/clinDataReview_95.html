<div class="container">

<table style="width: 100%;"><tr>
<td>timeProfileIntervalPlot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Visualize time intervals across subjects/parameters.</h2>

<h3>Description</h3>

<p>Visualize time intervals across subjects/parameters.
</p>


<h3>Usage</h3>

<pre><code class="language-R">timeProfileIntervalPlot(
  data,
  paramVar,
  paramLab = getLabelVar(paramVar, labelVars = labelVars),
  paramVarSep = " - ",
  paramGroupVar = NULL,
  timeStartVar,
  timeStartLab = getLabelVar(timeStartVar, labelVars = labelVars),
  timeEndVar,
  timeEndLab = getLabelVar(timeEndVar, labelVars = labelVars),
  timeStartShapeVar = NULL,
  timeStartShapeLab = getLabelVar(timeStartShapeVar, labelVars = labelVars),
  timeEndShapeVar = NULL,
  timeEndShapeLab = getLabelVar(timeEndShapeVar, labelVars = labelVars),
  shapePalette = NULL,
  colorVar = NULL,
  colorLab = getLabelVar(colorVar, labelVars = labelVars),
  colorPalette = NULL,
  alpha = 1,
  yLab = NULL,
  xLab = paste(c(timeStartLab, timeEndLab), collapse = " and "),
  title = NULL,
  subtitle = NULL,
  caption = NULL,
  labelVars = NULL,
  width = 800,
  height = NULL,
  hoverVars,
  hoverLab,
  idVar = "USUBJID",
  idLab = getLabelVar(idVar, labelVars = labelVars),
  pathVar = NULL,
  pathLab = getLabelVar(pathVar, labelVars = labelVars),
  id = paste0("plotClinData", sample.int(n = 1000, size = 1)),
  selectVars = NULL,
  selectLab = getLabelVar(selectVars, labelVars = labelVars),
  table = FALSE,
  tableVars,
  tableLab,
  tableButton = TRUE,
  tablePars = list(),
  watermark = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data.frame with data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>paramVar</code></td>
<td>
<p>Character vector with variable of <code>data</code>
to represent in the y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>paramLab</code></td>
<td>
<p>(optional) String with label for <code>paramVar</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>paramVarSep</code></td>
<td>
<p>(optional) String with separator used to combined <code>paramVar</code>
if multiple.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>paramGroupVar</code></td>
<td>
<p>(optional) Character vector with variable(s) to group/order
the <code>paramVar</code> elements in the y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeStartVar</code></td>
<td>
<p>String with variable with the start of the time interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeStartLab</code></td>
<td>
<p>(optional) String with label for <code>timeStartVar</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeEndVar</code></td>
<td>
<p>String with variable with the end of the time interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeEndLab</code></td>
<td>
<p>(optional) String with label for <code>timeEndVar</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeStartShapeVar</code></td>
<td>
<p>(optional) String with variable used for the shape
of the start of the time interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeStartShapeLab</code></td>
<td>
<p>(optional) String with label for <code>timeStartShapeVar</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeEndShapeVar</code></td>
<td>
<p>(optional) String with variable used for the shape
of the end of the time interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeEndShapeLab</code></td>
<td>
<p>(optional) String with label for <code>timeEndShapeVar</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shapePalette</code></td>
<td>
<p>(optional) Character vector with shape palette for
<code>timeStartShapeVar</code> and <code>timeEndShapeVar</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colorVar</code></td>
<td>
<p>(optional) String with color variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colorLab</code></td>
<td>
<p>String with label for <code>colorVar</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colorPalette</code></td>
<td>
<p>(optional) Named character vector with color palette.
If not specified, the viridis color palette is used.<br>
See <code>clinColors</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>(optional) Numeric with transparency, 1 by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xLab, yLab</code></td>
<td>
<p>(optional) String with labels for the x/y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>String with title for the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subtitle</code></td>
<td>
<p>String with subtitle.<br>
The subtitle is included at the top left of the plot,
below the title.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>caption</code></td>
<td>
<p>String with caption. <br>
The caption is included at the bottom right of the plot.
Please note that this might overlap with 
vertical or rotated x-axis labels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labelVars</code></td>
<td>
<p>Named character vector containing variable labels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>Numeric, width of the plot in pixels,
800 by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>Numeric, height of the plot in pixels,
500 by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hoverVars</code></td>
<td>
<p>Character vector with variable(s) to be displayed in the hover,
by default any position (and axis) and aesthetic variables displayed in the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hoverLab</code></td>
<td>
<p>Named character vector with labels for <code>hoverVars</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idVar</code></td>
<td>
<p>String with variable containing subject ID.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idLab</code></td>
<td>
<p>String with label for <code>idVar</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pathVar</code></td>
<td>
<p>String with variable of <code>data</code> containing hyperlinks 
with path to the subject-specific report, formatted as: <br></p>
<pre>&lt;a href="./path-to-report"&gt;label&lt;/a&gt;</pre>
<p>.<br> 
If multiple, they should be separated by: ', '.<br>
The report(s) will be:
</p>

<ul>
<li>
<p> compressed to a zip file and downloaded 
if the user clicks on the 'p' (a.k.a 'profile') key
when hovering on a point of the plot
</p>
</li>
<li>
<p> included in a collapsible row, and clickable with hyperlinks
in the table
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pathLab</code></td>
<td>
<p>String with label for <code>pathVar</code>,
included in the collapsible row in the table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>String with general id for the plot:
</p>

<ul>
<li>
<p> 'id' is used as <code>group</code> for the <code>SharedData</code>
</p>
</li>
<li>
<p> 'button:[id]' is used as button ID if <code>table</code> is TRUE
</p>
</li>
</ul>
<p>If not specified, a random id, as 'plotClinData[X]' is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selectVars</code></td>
<td>
<p>(optional) Character vector with variable(s) from <code>data</code>
for which a selection box should be included. This enables to select the data
displayed in the plot (and associated table).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selectLab</code></td>
<td>
<p>(Named) character vector with label for <code>selectVars</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table</code></td>
<td>
<p>Logical, if TRUE (FALSE by default)
returns also a <code>datatable</code> containing the plot data.
The plot and table are linked when included in a Rmarkdown document: 
when clicking on an plot element,
only the corresponding records are retained in the associated table;
when some records are selected in the table, they are highlighted in the 
associated table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tableVars</code></td>
<td>
<p>Character vector with variables to be included 
in the table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tableLab</code></td>
<td>
<p>Named character vector with labels
for each <code>tableVars</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tableButton</code></td>
<td>
<p>Logical, if TRUE (by default)
the table is included within an HTML button.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tablePars</code></td>
<td>
<p>List with parameters passed to the
<code>getClinDT</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>watermark</code></td>
<td>
<p>(optional) String with path to a file containing a watermark.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical, if TRUE (FALSE by default) progress messages are printed
in the current console.
For the visualizations, progress messages during download
of subject-specific report are displayed in the browser console.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Either:
</p>

<ul>
<li>
<p> if a <code>table</code> is requested: a <code>clinDataReview</code> object, 
a.k.a a list with the 'plot' (<code>plotly</code> object) and 'table'
(<code>datatable</code> object)
</p>
</li>
<li>
<p> otherwise: a <code>plotly</code> object
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Laure Cougnaud
</p>


<h3>See Also</h3>

<p>Other Clinical data visualization of individual profiles.: 
<code>scatterplotClinData()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(clinUtils)

data(dataADaMCDISCP01)
labelVars &lt;- attr(dataADaMCDISCP01, "labelVars")

dataAE &lt;- dataADaMCDISCP01$ADAE

# basic plot
timeProfileIntervalPlot(
	data = dataAE,
	paramVar = "USUBJID",
	# time-variables
	timeStartVar = "ASTDY",
	timeEndVar = "ASTDY",
	# colored by severity
	colorVar = "AESEV",
	labelVars = labelVars
)

# add caption &amp; subtitle
timeProfileIntervalPlot(
	data = dataAE,
	paramVar = "USUBJID",
	timeStartVar = "ASTDY",
	timeEndVar = "ASTDY",
	colorVar = "AESEV",
	labelVars = labelVars,
	title = "Adverse events",
	subtitle = "Time intervals",
	caption = "Day is relative to the study baseline"
)

# add a selection box
if(interactive()){
  timeProfileIntervalPlot(
    data = dataAE,
    paramVar = "USUBJID",
    # time-variables
    timeStartVar = "ASTDY",
    timeEndVar = "ASTDY",
    # colored by severity
    colorVar = "AESEV",
    labelVars = labelVars,
    selectVars = "AEDECOD"
  )
}
</code></pre>


</div>