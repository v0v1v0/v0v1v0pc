<div class="container">

<table style="width: 100%;"><tr>
<td>CreateSpacetimeFolds</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create Space-time Folds</h2>

<h3>Description</h3>

<p>Create spatial, temporal or spatio-temporal Folds for cross validation based on pre-defined groups
</p>


<h3>Usage</h3>

<pre><code class="language-R">CreateSpacetimeFolds(
  x,
  spacevar = NA,
  timevar = NA,
  k = 10,
  class = NA,
  seed = sample(1:1000, 1)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>data.frame containing spatio-temporal data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spacevar</code></td>
<td>
<p>Character indicating which column of x identifies the
spatial units (e.g. ID of weather stations)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timevar</code></td>
<td>
<p>Character indicating which column of x identifies the
temporal units (e.g. the day of the year)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>numeric. Number of folds. If spacevar or timevar is NA and a
leave one location out or leave one time step out cv should be performed,
set k to the number of unique spatial or temporal units.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>class</code></td>
<td>
<p>Character indicating which column of x identifies a class unit (e.g. land cover)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>numeric. See ?seed</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function creates train and test sets by taking (spatial and/or temporal) groups into account.
In contrast to <code>nndm</code>, it requires that the groups are already defined (e.g. spatial clusters or blocks or temporal units).
Using "class" is helpful in the case that data are clustered in space
and are categorical. E.g This is the case for land cover classifications when
training data come as training polygons. In this case the data should be split in a way
that entire polygons are held back (spacevar="polygonID") but at the same time the distribution of classes
should be similar in each fold (class="LUC").
</p>


<h3>Value</h3>

<p>A list that contains a list for model training and a list for
model validation that can directly be used as "index" and "indexOut" in
caret's trainControl function
</p>


<h3>Note</h3>

<p>Standard k-fold cross-validation can lead to considerable misinterpretation in spatial-temporal modelling tasks. This function can be used to prepare a Leave-Location-Out, Leave-Time-Out or Leave-Location-and-Time-Out cross-validation as target-oriented validation strategies for spatial-temporal prediction tasks. See Meyer et al. (2018) for further information.
</p>


<h3>Author(s)</h3>

<p>Hanna Meyer
</p>


<h3>References</h3>

<p>Meyer, H., Reudenbach, C., Hengl, T., Katurji, M., Nau√ü, T. (2018): Improving performance of spatio-temporal machine learning models using forward feature selection and target-oriented validation. Environmental Modelling &amp; Software 101: 1-9.
</p>


<h3>See Also</h3>

<p><code>trainControl</code>,<code>ffs</code>, <code>nndm</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
data(cookfarm)
### Prepare for 10-fold Leave-Location-and-Time-Out cross validation
indices &lt;- CreateSpacetimeFolds(cookfarm,"SOURCEID","Date")
str(indices)
### Prepare for 10-fold Leave-Location-Out cross validation
indices &lt;- CreateSpacetimeFolds(dat,spacevar="SOURCEID")
str(indices)
### Prepare for leave-One-Location-Out cross validation
indices &lt;- CreateSpacetimeFolds(dat,spacevar="SOURCEID",
    k=length(unique(dat$SOURCEID)))
str(indices)

## End(Not run)
</code></pre>


</div>