<div class="container">

<table style="width: 100%;"><tr>
<td>clean_CRAN_db</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Clean and organize package and author names in the output of <code>tools::CRAN_package_db()</code>
</h2>

<h3>Description</h3>

<p>Clean and organize package and author names in the output of <code>tools::CRAN_package_db()</code>
</p>


<h3>Usage</h3>

<pre><code class="language-R">clean_CRAN_db(
  packages_db,
  clean_directives = clean_up_directives,
  clean_author = clean_up_author,
  clean_maintainer = standardize_whitespace
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>packages_db</code></td>
<td>
<p>a <code>data.frame</code> with the same structure to the
output of <code>tools::CRAN_package_db()</code> (default) or
<code>utils::available.packages()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clean_directives</code></td>
<td>
<p>a function that transforms the contents of
the various directives in the package descriptions to vectors
of package names. Default is <code>clean_up_directives()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clean_author</code></td>
<td>
<p>a function that transforms the contents of
<code>Author</code> to vectors of package authors. Default is
<code>clean_up_author()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clean_maintainer</code></td>
<td>
<p>a function that transforms the contents of
<code>Maintainer</code> to vectors of of maintainer names. Default is
<code>standardize_whitespace()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>clean_CRAN_db()</code> uses <code>clean_up_directives()</code> and
<code>clean_up_author()</code> to clean up the author names and package names
in the various directives (like <code>Imports</code>, <code>Depends</code>, <code>Suggests</code>,
<code>Enhances</code>, <code>LinkingTo</code>) as in the <code>data.frame</code> that results from
<code>tools::CRAN_package_db()</code>  return an organized <code>data.frame</code> of
class <code>cranly_db</code> that can be used for further analysis.
</p>
<p>The function tries hard to identify and eliminate mistakes in the
Author field of the description file, and extract a clean list of
only author names. The relevant operations are coded in the
<code>clean_up_author()</code> function. Specifically, some references to
copyright holders had to go because they were contaminating the
list of authors (most are not necessary anyway, but that is a
different story...). The current version of <code>clean_up_author()</code> is
far from best practice in using regex but it currently does a fair
job in cleaning up messy Author fields. It will be improving in
future versions.
</p>
<p>Custom clean-up functions can also be supplied via the
<code>clean_directives</code> and <code>clean_author</code> arguments.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> with the same variables as <code>package_db</code> (but with
lower case names), that also inherits from <code>class_db</code>, and has a
<code>timestamp</code> attribute.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Download today's CRAN package database
cran_db &lt;- tools::CRAN_package_db()

## Before clean up
cran_db[cran_db$Package == "weights", "Author"]

## After clean up
package_db &lt;- clean_CRAN_db(cran_db)
package_db[package_db$package == "weights", "author"]

</code></pre>


</div>