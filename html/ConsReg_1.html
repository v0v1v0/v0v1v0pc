<div class="container">

<table style="width: 100%;"><tr>
<td>ConsReg</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fit a regression model with gaussian or binomial objective function</h2>

<h3>Description</h3>

<p>ConsReg is a function that allows to estimate a regression model:
linear regression (gaussian), logistic regression (binomial) or poisson regression.  It allows
the introduction of restrictions (both lower and upper limits) and restrictions
between the coefficients (in the form, for example, of a&gt;b).
</p>


<h3>Usage</h3>

<pre><code class="language-R">ConsReg(...)

## Default S3 method:
ConsReg(x, y, family, optimizer, ini.pars.coef = NULL,
  constraints = NULL, LOWER = NULL, UPPER = NULL, penalty = 1000,
  ...)

## S3 method for class 'formula'
ConsReg(formula, data = list(), optimizer = "solnp",
  family = c("gaussian", "binomial"), constraints = NULL,
  LOWER = NULL, UPPER = NULL, penalty = 1000,
  na.action = "na.omit", ini.pars.coef = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional parameters passed in the optimizer (number of iterations, ...)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>matrix of predictive variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>vector of outcome variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>a description of the error distribution and link
function to be used in the model. Possible values are: "gaussian" (linear regression) or
"binomial" (logistic regression) and "poisson"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optimizer</code></td>
<td>
<p>Optimizer package used for fit the model
(include bayesian and genetic algorithm optimization).
Possible values are: "solnp" (default) (Rsolnp),
"gosonlp" (Rsolnp),  "optim" (stats::optim), "nloptr" (nloptr), DEoptim ("DEoptim"),
"dfoptim" (dfoptim), "mcmc" (FME::modMCMC), "MCMCmetrop" (MCMCpack::MCMCmetrop1R),'adaptMCMC'(adaptMCMC::MCMC),
"GA" (GA package), "GenSA" (GenSA package)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ini.pars.coef</code></td>
<td>
<p>vector of initial parameters. In case there is some constraint,
then the ini.pars.coef should fulfill the constraints</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraints</code></td>
<td>
<p>vector of constraints (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LOWER</code></td>
<td>
<p>(default NULL) vector of lower bounds for the coefficients.
If the lenght of LOWER is not equal with the length of the coeefficients, then, the rest will be equal to -Inf</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>UPPER</code></td>
<td>
<p>(default NULL) vector of lower bounds for the coefficients.
If the lenght of UPPER is not equal with the length of the coeefficients, then, the rest will be equal to +Inf</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>penalty</code></td>
<td>
<p>(default 1000) penalty to the objective function if some constraints do not fullfill</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>an object of class "formula" (or one that can be coerced to that class): a symbolic description of
the model to be fitted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>an optional data frame, list or environment (or object coercible by as.data.frame to a data frame)
containing the variables in the model. If not found in data, the variables are taken from environment(formula),
typically the environment from which lm is called.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>na.action to the data</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Several optimizers of various R packages are implemented,
including methods typically used in Bayesian regressions like Markov Chain Monte Carlo simulation.
</p>
<p>Constraints will be a string:
For example, if x1 and x2 are two coefficient names, then a constraint could be:
"x1 &gt; x2" or "x1+x2 &gt; 2". For some constraints, one can write: "x1+x2&gt;2, x1 &gt; 1".
Each constraint will be separate by commas.
</p>
<p>Important: if there are some constraints that do not fulfill in a model without those constraints,
it is recommended to use <code>ini.pars.coef</code> parameter to set initial values that fulfill constraints.
See the example
</p>


<h3>Value</h3>

<p>An object of class "<code>ConsReg</code>".
</p>
<table>
<tr style="vertical-align: top;">
<td><code>coefficients</code></td>
<td>
<p>Coefficients of the regression</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hessian</code></td>
<td>
<p>hessian matrix if the optimizer can return it</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>Model family function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optimizer</code></td>
<td>
<p>optimizer object return (see details of each optimization package)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optimizer.name</code></td>
<td>
<p>name of the optimizer</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>nrow(data) - number of coefficients</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rank</code></td>
<td>
<p>number of coefficients</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>residuals</code></td>
<td>
<p>residuals of the model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fitted</code></td>
<td>
<p>fitted values of the model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metrics</code></td>
<td>
<p>Accuracy metrics of the model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>call</code></td>
<td>
<p>the matched call</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>objective variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>regressors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>formula term</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family.name</code></td>
<td>
<p>Name of the family used</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Josep Puig Sall√©s
</p>


<h3>Examples</h3>

<pre><code class="language-R">data('fake_data')
fit1 = ConsReg(formula = y~x1+x2+x3+ I(x3^2) + x4, family = 'gaussian',
                     optimizer = 'mcmc',
                     data = fake_data)
summary(fit1)

# We impose constraints to x3 and x3^2 and x4
fit2 = ConsReg(formula = y~x1+x2+x3+ I(x3^2) + x4, data = fake_data,
            family = 'gaussian',
            constraints = '(x3 + `I(x3^2)`) &gt; .01, x4 &lt; .2',
            optimizer = 'mcmc',
            ini.pars.coef = c(-1.65, .12, -.004, 0.1, 0.1, .15))

fit1$coefficients
fit2$coefficients

</code></pre>


</div>