<div class="container">

<table style="width: 100%;"><tr>
<td>crul-options</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Set curl options, proxy, and basic auth</h2>

<h3>Description</h3>

<p>Set curl options, proxy, and basic auth
</p>


<h3>Usage</h3>

<pre><code class="language-R">set_opts(...)

set_verbose()

set_proxy(x)

set_auth(x)

set_headers(...)

crul_settings(reset = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>For <code>set_opts()</code> any curl option in the set
<code>curl::curl_options()</code>. For <code>set_headers()</code> a named list of headers</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>For <code>set_proxy()</code> a <code>proxy</code> object made with <code>proxy()</code>. For
<code>set_auth()</code> an <code>auth</code> object made with <code>auth()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reset</code></td>
<td>
<p>(logical) reset all settings (aka, delete them).
Default: <code>FALSE</code></p>
</td>
</tr>
</table>
<h3>Details</h3>


<ul>
<li> <p><code>set_opts()</code>: set curl options; supports any options in
<code>curl::curl_options()</code>
</p>
</li>
<li> <p><code>set_verbose()</code>: set custom curl verbose; sets <code>verbose=TRUE</code>
and <code>debugfunction</code> to the callback result from <code>curl_verbose()</code>
</p>
</li>
<li> <p><code>set_proxy()</code>: set proxy settings, accepts <code>proxy()</code>
</p>
</li>
<li> <p><code>set_auth()</code>: set authorization, accepts <code>auth()</code>
</p>
</li>
<li> <p><code>set_headers()</code>: set request headers, a named list
</p>
</li>
<li> <p><code>crul_settings()</code>: list all settigns set via these functions
</p>
</li>
</ul>
<h3>Note</h3>

<p>the <code>mock</code> option will be seen in output of <code>crul_settings()</code>
but is set via the function <code>mock()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (interactive()) {
# get settings
crul_settings()

# curl options
set_opts(timeout_ms = 1000)
crul_settings()
set_opts(timeout_ms = 4000)
crul_settings()
set_opts(verbose = TRUE)
crul_settings()
## Not run: 
HttpClient$new('https://hb.opencpu.org')$get('get')

## End(Not run)
# set_verbose - sets: `verbose=TRUE`, and `debugfunction` to 
# result of call to `curl_verbose()`, see `?curl_verbose`
set_verbose()
crul_settings()

# basic authentication
set_auth(auth(user = "foo", pwd = "bar", auth = "basic"))
crul_settings()

# proxies
set_proxy(proxy("http://97.77.104.22:3128"))
crul_settings()

# headers
crul_settings(TRUE) # reset first
set_headers(foo = "bar")
crul_settings()
set_headers(`User-Agent` = "hello world")
crul_settings()
## Not run: 
set_opts(verbose = TRUE)
HttpClient$new('https://hb.opencpu.org')$get('get')

## End(Not run)

# reset
crul_settings(TRUE)
crul_settings()

# works with async functions
## Async
set_opts(verbose = TRUE)
cc &lt;- Async$new(urls = c(
    'https://hb.opencpu.org/get?a=5',
    'https://hb.opencpu.org/get?foo=bar'))
(res &lt;- cc$get())

## AsyncVaried
set_opts(verbose = TRUE)
set_headers(stuff = "things")
reqlist &lt;- list(
  HttpRequest$new(url = "https://hb.opencpu.org/get")$get(),
  HttpRequest$new(url = "https://hb.opencpu.org/post")$post())
out &lt;- AsyncVaried$new(.list = reqlist)
out$request()
}
</code></pre>


</div>