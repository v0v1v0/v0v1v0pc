<div class="container">

<table style="width: 100%;"><tr>
<td>QThreshold</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Transform an absolute threshold into probabilities</h2>

<h3>Description</h3>

<p>From the user's perspective, an absolute threshold can be very useful for a 
specific needs (e.g.: grape variety). However, this absolute threshold could 
be transformed to a relative threshold in order to get its frequency in a given 
dataset. Therefore, the function <code>QThreshold</code> returns the probability of 
an absolute threshold. This is done by computing the Cumulative Distribution 
Function of a sample and leaving-one-ot. The sample used will depend on the 
dimensions of the data provided and the dimension names provided in sdate_dim 
and memb_dim parameters:
</p>

<ul>
<li>
<p>If a forecast (hindcast) has dimensions member and start date, and
both must be used in the sample, their names should be passed in 
sdate_dim and memb_dim.
</p>
</li>
<li>
<p>If a forecast (hindcast) has dimensions member and start date, and
only start date must be used in the sample (the calculation is done in
each separate member), memb_dim can be set to NULL.
</p>
</li>
<li>
<p>If a reference (observations) has start date dimension, the sample
used is the start date dimension.
</p>
</li>
<li>
<p>If a reference (observations) doesn't have start date dimension, 
the sample used must be especified in sdate_dim parameter.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">QThreshold(
  data,
  threshold,
  dates = NULL,
  start = NULL,
  end = NULL,
  time_dim = "time",
  memb_dim = "member",
  sdate_dim = "sdate",
  ncores = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A multidimensional array with named dimensions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>A multidimensional array with named dimensions in the same 
units as parameter 'data' and with the common dimensions of the element 
'data' of the same length.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dates</code></td>
<td>
<p>A multidimensional array of dates with named dimensions matching 
the temporal dimensions on parameter 'data'. By default it is NULL, to  
select aperiod this parameter must be provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p>An optional parameter to defined the initial date of the period 
to select from the data by providing a list of two elements: the initial 
date of the period and the initial month of the period. By default it is set
to NULL and the indicator is computed using all the data provided in 
<code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end</code></td>
<td>
<p>An optional parameter to defined the final date of the period to 
select from the data by providing a list of two elements: the final day of 
the period and the final month of the period. By default it is set to NULL 
and the indicator is computed using all the data provided in <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_dim</code></td>
<td>
<p>A character string indicating the name of the temporal 
dimension. By default, it is set to 'time'. More than one dimension name 
matching the dimensions provided in the object <code>data$data</code> can be 
specified. This dimension is required to subset the data in a requested 
period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>memb_dim</code></td>
<td>
<p>A character string indicating the name of the dimension in 
which the ensemble members are stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sdate_dim</code></td>
<td>
<p>A character string indicating the name of the dimension in 
which the initialization dates are stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncores</code></td>
<td>
<p>An integer indicating the number of cores to use in parallel 
computation.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A multidimensional array with named dimensions containing the 
probability of an absolute threshold in the element <code>data</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">threshold = 25
data &lt;- array(rnorm(5 * 3 * 20 * 2, mean = 26), 
             c(member = 5, sdate = 3, time = 214, lon = 2)) 

Dates &lt;- c(seq(as.Date("01-05-2000", format = "%d-%m-%Y"), 
              as.Date("30-11-2000", format = "%d-%m-%Y"), by = 'day'),
          seq(as.Date("01-05-2001", format = "%d-%m-%Y"), 
              as.Date("30-11-2001", format = "%d-%m-%Y"), by = 'day'),
          seq(as.Date("01-05-2002", format = "%d-%m-%Y"), 
              as.Date("30-11-2002", format = "%d-%m-%Y"), by = 'day'))
dim(Dates) &lt;- c(sdate = 3, time = 214)

thres_q &lt;- QThreshold(data, threshold, dates = Dates, time_dim = 'time',
                     start = list(21, 4), end = list(21, 6))

</code></pre>


</div>