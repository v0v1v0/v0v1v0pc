<div class="container">

<table style="width: 100%;"><tr>
<td>collapsibleTree</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create Interactive Collapsible Tree Diagrams</h2>

<h3>Description</h3>

<p>Interactive Reingold-Tilford tree diagram created using D3.js,
where every node can be expanded and collapsed by clicking on it.
</p>


<h3>Usage</h3>

<pre><code class="language-R">collapsibleTree(
  df,
  ...,
  inputId = NULL,
  attribute = "leafCount",
  aggFun = sum,
  fill = "lightsteelblue",
  linkLength = NULL,
  fontSize = 10,
  tooltip = FALSE,
  tooltipHtml = NULL,
  nodeSize = NULL,
  collapsed = TRUE,
  zoomable = TRUE,
  width = NULL,
  height = NULL
)

## S3 method for class 'data.frame'
collapsibleTree(
  df,
  hierarchy,
  root = deparse(substitute(df)),
  inputId = NULL,
  attribute = "leafCount",
  aggFun = sum,
  fill = "lightsteelblue",
  fillByLevel = TRUE,
  linkLength = NULL,
  fontSize = 10,
  tooltip = FALSE,
  nodeSize = NULL,
  collapsed = TRUE,
  zoomable = TRUE,
  width = NULL,
  height = NULL,
  ...
)

## S3 method for class 'Node'
collapsibleTree(
  df,
  hierarchy_attribute = "level",
  root = df$name,
  inputId = NULL,
  attribute = "leafCount",
  aggFun = sum,
  fill = "lightsteelblue",
  linkLength = NULL,
  fontSize = 10,
  tooltip = FALSE,
  tooltipHtml = NULL,
  nodeSize = NULL,
  collapsed = TRUE,
  zoomable = TRUE,
  width = NULL,
  height = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>a <code>data.frame</code> from which to construct a nested list
(where every row is a leaf) or a preconstructed <code>data.tree</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments to pass onto S3 methods that implement
this generic function - <code>collapsibleTree.data.frame</code>, <code>collapsibleTree.Node</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inputId</code></td>
<td>
<p>the input slot that will be used to access the selected node (for Shiny).
Will return a named list of the most recently clicked node,
along with all of its parents.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>attribute</code></td>
<td>
<p>numeric column not listed in hierarchy that will be used
for tooltips, if applicable. Defaults to 'leafCount',
which is the cumulative count of a node's children</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggFun</code></td>
<td>
<p>aggregation function applied to the attribute column to determine
values of parent nodes. Defaults to <code>sum</code>, but <code>mean</code> also makes sense.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p>either a single color or a mapping of colors:
</p>

<ul>
<li>
<p> For <code>data.frame</code> input, a vector of colors the same length as the number
of nodes. By default, vector should be ordered by level, such that the root color is
described first, then all the children's colors, and then all the grandchildren's colors
</p>
</li>
<li>
<p> For <code>data.tree</code> input, a tree attribute containing the color for each node
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>linkLength</code></td>
<td>
<p>length of the horizontal links that connect nodes in pixels.
(optional, defaults to automatic sizing)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fontSize</code></td>
<td>
<p>font size of the label text in pixels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tooltip</code></td>
<td>
<p>tooltip shows the node's label and attribute value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tooltipHtml</code></td>
<td>
<p>column name (possibly containing html) to override default tooltip
contents, allowing for more advanced customization. Applicable only for <code>data.tree</code> input.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nodeSize</code></td>
<td>
<p>numeric column that will be used to determine relative node size.
Default is to have a constant node size throughout. 'leafCount' can also
be used here (cumulative count of a node's children), or 'count'
(count of node's immediate children).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collapsed</code></td>
<td>
<p>the tree's children will start collapsed by default
</p>

<ul>
<li>
<p> For <code>data.frame</code> input, can also be a vector of logical values the same length
as the number of nodes. Follows the same logic as the fill vector.
</p>
</li>
<li>
<p> For <code>data.tree</code> input, can also be a tree attribute for conditionally collapsing nodes
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zoomable</code></td>
<td>
<p>pan and zoom by dragging and scrolling</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>width in pixels (optional, defaults to automatic sizing)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p>height in pixels (optional, defaults to automatic sizing)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hierarchy</code></td>
<td>
<p>a character vector of column names that define the order
and hierarchy of the tree network. Applicable only for <code>data.frame</code> input.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>root</code></td>
<td>
<p>label for the root node</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fillByLevel</code></td>
<td>
<p>which order to assign fill values to nodes.
<code>TRUE</code>: Filling by level; will assign fill values to nodes vertically.
<code>FALSE</code>: Filling by order; will assign fill values to nodes horizontally.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hierarchy_attribute</code></td>
<td>
<p>name of the <code>data.tree</code> attribute that contains
hierarchy information of the tree network. Applicable only for <code>data.tree</code> input.</p>
</td>
</tr>
</table>
<h3>Source</h3>

<p>Christopher Gandrud: <a href="http://christophergandrud.github.io/networkD3/">http://christophergandrud.github.io/networkD3/</a>.
</p>
<p>d3noob: <a href="https://bl.ocks.org/d3noob/43a860bc0024792f8803bba8ca0d5ecd">https://bl.ocks.org/d3noob/43a860bc0024792f8803bba8ca0d5ecd</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">collapsibleTree(warpbreaks, c("wool", "tension", "breaks"))

# Data from US Forest Service DataMart
species &lt;- read.csv(system.file("extdata/species.csv", package = "collapsibleTree"))
collapsibleTree(df = species, c("REGION", "CLASS", "NAME"), fill = "green")

# Visualizing the order in which the node colors are filled
library(RColorBrewer)
collapsibleTree(
  warpbreaks, c("wool", "tension"),
  fill = brewer.pal(9, "RdBu"),
  fillByLevel = TRUE
)
collapsibleTree(
  warpbreaks, c("wool", "tension"),
  fill = brewer.pal(9, "RdBu"),
  fillByLevel = FALSE
)

# Tooltip can be mapped to an attribute, or default to leafCount
collapsibleTree(
  warpbreaks, c("wool", "tension", "breaks"),
  tooltip = TRUE,
  attribute = "breaks"
)

# Node size can be mapped to any numeric column, or to leafCount
collapsibleTree(
  warpbreaks, c("wool", "tension", "breaks"),
  nodeSize = "breaks"
)

# collapsibleTree.Node example
data(acme, package="data.tree")
acme$Do(function(node) node$cost &lt;- data.tree::Aggregate(node, attribute = "cost", aggFun = sum))
acme$Do(function(node) node$lessThanMillion &lt;- node$cost &lt; 10^6)
collapsibleTree(
  acme,
  nodeSize  = "cost",
  attribute = "cost",
  tooltip = TRUE,
  collapsed = "lessThanMillion"
)

# Emulating collapsibleTree.data.frame using collapsibleTree.Node
species &lt;- read.csv(system.file("extdata/species.csv", package = "collapsibleTree"))
hierarchy &lt;- c("REGION", "CLASS", "NAME")
species$pathString &lt;- paste(
  "species",
  apply(species[,hierarchy], 1, paste, collapse = "//"),
  sep = "//"
)
df &lt;- data.tree::as.Node(species, pathDelimiter = "//")
collapsibleTree(df)

</code></pre>


</div>