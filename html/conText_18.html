<div class="container">

<table style="width: 100%;"><tr>
<td>dem</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Build a document-embedding matrix</h2>

<h3>Description</h3>

<p>Given a document-feature-matrix, for each document,
multiply its feature counts (columns) with their
corresponding pretrained word embeddings and average
(usually referred to as averaged or additive document embeddings).
If specified and a transformation matrix is provided,
multiply the document embeddings by the transformation matrix
to obtain the corresponding <code style="white-space: pre;">⁠a la carte⁠</code> document embeddings.
(see eq 2: https://arxiv.org/pdf/1805.05388.pdf)
</p>


<h3>Usage</h3>

<pre><code class="language-R">dem(x, pre_trained, transform = TRUE, transform_matrix, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a quanteda (<code>dfm-class</code>) document-feature-matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pre_trained</code></td>
<td>
<p>(numeric) a F x D matrix corresponding to pretrained embeddings.
F = number of features and D = embedding dimensions.
rownames(pre_trained) = set of features for which there is a pre-trained embedding.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transform</code></td>
<td>
<p>(logical) if TRUE (default) apply the 'a la carte' transformation,
if FALSE ouput untransformed averaged embeddings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transform_matrix</code></td>
<td>
<p>(numeric) a D x D 'a la carte' transformation matrix.
D = dimensions of pretrained embeddings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>(logical) - if TRUE, report the documents that had
no overlapping features with the pretrained embeddings provided.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a N x D (<code>dem-class</code>) document-embedding-matrix corresponding to the ALC embeddings for each document.
N = number of documents (that could be embedded), D = dimensions of pretrained embeddings. This object
inherits the document variables in <code>x</code>, the dfm used. These can be accessed calling the attribute: <code style="white-space: pre;">⁠@docvars⁠</code>.
Note, documents with no overlapping features with the pretrained embeddings provided are automatically
dropped. For a list of the documents that were embedded call the attribute: <code style="white-space: pre;">⁠@Dimnames$docs⁠</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(quanteda)

# tokenize corpus
toks &lt;- tokens(cr_sample_corpus)

# build a tokenized corpus of contexts sorrounding a target term
immig_toks &lt;- tokens_context(x = toks, pattern = "immigr*", window = 6L)

# construct document-feature-matrix
immig_dfm &lt;- dfm(immig_toks)

# construct document-embedding-matrix
immig_dem &lt;- dem(immig_dfm, pre_trained = cr_glove_subset,
transform = TRUE, transform_matrix = cr_transform, verbose = FALSE)
</code></pre>


</div>