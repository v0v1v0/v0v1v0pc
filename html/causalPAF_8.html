<div class="container">

<table style="width: 100%;"><tr>
<td>indirect_PAF_Sjolander_onesimulation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculation of Population Attributable Fraction (PAF), with a decomposition of the total PAF into direct
and indirect components.</h2>

<h3>Description</h3>

<p>Calculation of Population Attributable Fraction (PAF), with a decomposition of the total PAF into direct
and indirect components. It performs one simulation which can be combined with a bootstrap approach to
perform multiple simulations. If we think of <code class="reqn">Y_0</code> as the potential outcome for
an individual if they were never exposed to the risk factor, can be directly interpreted as the relative change in
disease prevalence if an exposure was absent from the population.
Sjolander introduced the ideas of mediation into the literature for PAF, defining a decomposition of the total PAF
into direct and indirect components:  and
<img src="../help/figures/CausalDAG.jpg" alt="CausalDAG.jpg"> options: width=100 alt="Causal Bayesian network DAG" 

</p>


<h3>Usage</h3>

<pre><code class="language-R">indirect_PAF_Sjolander_onesimulation(
  data_frame,
  exposure,
  mediator,
  response,
  mediator_model,
  response_model,
  response_model_2,
  weights
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data_frame</code></td>
<td>
<p>Data frame containing the data. The data frame has cases in rows and variables in columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exposure</code></td>
<td>
<p>The exposure name in the form of character string e.g. “phys” for physical exercise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mediator</code></td>
<td>
<p>The mediator name in the form of character string e.g. “whr” for waist hip ratio.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>response</code></td>
<td>
<p>The outcome name in the form of character string e.g. “case” for a stroke case.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mediator_model</code></td>
<td>
<p>A list containing each of the fitted mediator regression models e.g.
<code>mediator_model=list(model_list[[6]],model_list[[7]],model_list[[8]])</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>response_model</code></td>
<td>
<p>is a regression for the outcome on all mediators together with all parents and confounders of the mediators in
a Markov causal Bayesian network DAG e.g.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>response_model_2</code></td>
<td>
<p>is a regression for the outcome on the exposure together with  all parents and confounders of the exposure in
a Markov causal Bayesian network DAG along with other risk factors at the same level of the causal Bayesian network DAG. E.G. If
physical exercise (“exer”) in the example given in the diagram is the exposure. Then the regression would include all
parents of “exer” (i.e. sex, region, educ, age) as well as risk factors at the same level of the causal Bayesian network
(i.e. stress, smoke, diet, alcoh).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>A numeric n x <code class="reqn">1</code> vector where n is the number of patients in the case control data frame.
Different weighting approaches can be applied as per the literature, Pathway-specific population attributable
fractions (PS-PAF) O'Connell and Ferguson (<code class="reqn">2022</code>), Revisiting sequential population attributable fractions Ferguson, O'Connell and O'Donnell (<code class="reqn">2020</code>).
For more information on weighting, a tutorial paper will be published and linked here when it is published.
For example, O'Connell and Ferguson (<code class="reqn">2022</code>), for a case-control study design, when prevalence pi is known, and
the sampled disease cases and controls are randomly selected from their respective populations. We assume for
simplicity that the case to control matching ration is <code class="reqn">1</code> to r, for some r greater than or equal to <code class="reqn">1</code>.
Under assumptions outlined in O'Connell and Ferguson (<code class="reqn">2022</code>), the components of the PAF can be found as the
corresponding empirical expectations and distributions in the re-weighted dataset where cases are assigned the weights,
<code class="reqn">1</code>, and controls are assigned the weights of (((<code class="reqn">1</code> divided by pi) minus <code class="reqn">1</code>) all divided by r). Effectively, then we can think of the re-weighted population as a random
sample. A tutorial paper will be linked here when published for more information which will show how to apply the weighting for different study designs.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>totalPAF </code></td>
<td>
<p>total PAF</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>directPAF</code></td>
<td>
<p>direct PAF</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indirectPAF</code></td>
<td>
<p>indirect PAF</p>
</td>
</tr>
</table>
</div>