<div class="container">

<table style="width: 100%;"><tr>
<td>CsChange</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Testing for Change in C-Statistic</h2>

<h3>Description</h3>

<p>Calculate the confidence interval and p value for change in C-statistic. The adjusted C-statistic is calculated by using formula as "Somers' Dxy rank correlation"/2+0.5. The confidence interval was calculated by using the bootstrap method. The p value was calculated by using the Z testing method. Please refer to the article of Peter Ganz et al. (2016) &lt;doi:10.1001/jama.2016.5951&gt;.
</p>


<h3>Usage</h3>

<pre><code class="language-R">CsChange(fit1,fit2,form1,form2,data,nb,signif,seed)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fit1</code></td>
<td>
<p>an object from 'cph', 'coxph' or 'lrm' model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit2</code></td>
<td>
<p>another object from 'cph', 'coxph' or 'lrm' model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>form1</code></td>
<td>
<p>unnecessary, the formula used in fit1, i.e., 'y~x1'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>form2</code></td>
<td>
<p>unnecessary, the formula used in fit2, i.e., 'y~x1+x2'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame used in the fit1 or fit2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nb</code></td>
<td>
<p>the number of bootstrap replicate, with a default of 200</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>signif</code></td>
<td>
<p>the significant level of confidence interval, with a default of 0.05 and a two-sided test</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>an integer used to set for random seed, with a default of 123</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>change</code></td>
<td>
<p>in list 1, the change of C-statistic from fit1 to fit2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>low,up</code></td>
<td>
<p>in list 1, the confidence interval of change</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>in list 1, the p value of testing for change</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>c</code></td>
<td>
<p>in list 2, the C-statistic of fit1 and fit2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>low,up</code></td>
<td>
<p>in list 2, the confidence interval of change</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>Please feel free to contact us, if you have any advice and find any bug!
</p>
<p>Update description:
</p>
<p>Version 0.1.1: Fix the error of "variables not found" for the 'coxph' model.
</p>
<p>Version 0.1.2: Fix the error of data with missing value.
</p>
<p>Version 0.1.3: a) Add the c statistic of fit1 and fit2 to the output. b) Fix the error of model with multiple variables. c) Fix the error of independent variable with functions, i.e., rcc(), ploy().
</p>
<p>Version 0.1.4: a) Fix the error with the arguments of 'time=' and 'event=' in the coxph model. b) 'lrm' model was supported. c) Different dependent variables could be set.
</p>
<p>Version 0.1.5: a) Apply 'boot.ci' function to compute the confidence interFix the error with the arguments of 'time=' and 'event=' in the coxph model. b) 'lrm' model was supported. c) Different dependent variables could be set.
</p>
<p>Version 0.1.6: Fix minor bugs.
</p>
<p>Version 0.1.7: Fix the error from the update that 'survival' is no longer attached by rms.
</p>
<p>more functions will be included in 'CsChange' package!
</p>


<h3>Author(s)</h3>

<p>Zhicheng Du&lt;dgdzc@hotmail.com&gt;, Yuantao Hao&lt;haoyt@mail.sysu.edu.cn&gt;
</p>


<h3>References</h3>

<p>Peter Ganz, Bettina Heidecker, Kristian Hveem, Christian Jonasson, Shintaro Kato, Mark R. Segal, David G. Sterling, Stephen A. Williams. Development and Validation of a Protein-Based Risk Score for Cardiovascular Outcomes Among Patients With Stable Coronary Heart Disease. JAMA. 2016; 315(23):2532-2541. doi:10.1001/jama.2016.5951
</p>


<h3>Examples</h3>

<pre><code class="language-R">require("rms")
require("survival")
set.seed(123)
n=50
age=50+12*rnorm(n)
sex=factor(sample(c('Male','Female'), n,rep=TRUE, prob=c(.6, .4)))
cens=15*runif(n)
h=.02*exp(.04*(age-50)+.8*(sex=='Female'))
dt=-log(runif(n))/h
e=ifelse(dt &lt;= cens,1,0)
dt=pmin(dt, cens)
units(dt)="Year"
data=data.frame(dt=dt,e=e,dt1=dt,dt2=dt,e1=e,e2=e,age,sex)
dd=datadist(age, sex)
options(datadist='dd')

#for 'cph' model
fit1=cph(Surv(dt,e)~age,data)
fit2=cph(Surv(dt,e)~age+sex,data)
CsChange(fit1,fit2,data=data,nb=20)

#for 'coxph' model
fit1=coxph(Surv(dt,e)~age,data)
fit2=coxph(Surv(dt,e)~age+sex,data)
CsChange(fit1,fit2,data=data,nb=20)

#for 'coxph' model
#fit1=coxph(Surv(dt1,e1)~age,data)
#fit2=coxph(Surv(dt2,e2)~age+sex,data)
#CsChange(fit1,fit2,data=data,nb=20)

#for 'coxph' model
#fit1=coxph(Surv(dt,e)~age+sex,data)
#fit2=coxph(Surv(dt,e)~rcs(age)+sex,data)
#CsChange(fit1,fit2,data=data,nb=20)#ignore the warnings messages
</code></pre>


</div>