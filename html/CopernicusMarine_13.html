<div class="container">

<table style="width: 100%;"><tr>
<td>cms_download_stac</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>List and get STAC files for a Copernicus marine product</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt="[Stable]"></a> Full marine data sets can be downloaded using the
SpatioTemporal Asset Catalogs (STAC). Use these functions to list download locations and get
the files.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cms_download_stac(
  file_tibble,
  destination,
  show_progress = TRUE,
  overwrite = FALSE
)

cms_list_stac_files(product, layer)

cms_stac_properties(product, layer)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file_tibble</code></td>
<td>
<p>A <code>dplyr::tibble()</code> with in each row the files to be downloaded.
Should be created with <code>cms_list_stac_files()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>destination</code></td>
<td>
<p>A <code>character</code> string representing the path location where the downloaded
files should be stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_progress</code></td>
<td>
<p>A <code>logical</code> value. When <code>TRUE</code> (default) the download progress will be shown.
This can be useful for large files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>A <code>logical</code> value. When <code>FALSE</code> (default), files at the <code>destination</code> won't be
overwritten when the exist. Instead an error will be thrown if this is the case. When set to
<code>TRUE</code>, existing files will be overwritten.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>product</code></td>
<td>
<p>An identifier (type <code>character</code>) of the desired Copernicus marine product.
Can be obtained with <code>cms_products_list</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layer</code></td>
<td>
<p>The name of a desired layer within a product (type <code>character</code>). Can be obtained with <code>cms_product_details</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>In case of <code>cms_stac_properties</code> a <code>dplyr::tibble()</code> is returned with some
product properties, It is used as precursor for <code>cms_list_stac_files</code>.
In case of <code>cms_list_stac_files</code> a <code>dplyr::tibble()</code> is returned containing
available URLs (for the specified <code>product</code> and <code>layer</code>) and some meta information is returned.
In case of <code>cms_download_stac</code> an invisible <code>logical</code> value is returned, indicating whether
all requested files are successfully stored at the <code>destination</code> path. A <code>list</code> of responses
(of class <code>httr2::response()</code>) for all requested download links is included as attribute
to the result.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
## List some STAC properties for a specific product and layer
cms_stac_properties(
  product       = "GLOBAL_ANALYSISFORECAST_PHY_001_024",
  layer         = "cmems_mod_glo_phy-cur_anfc_0.083deg_P1D-m"
)

## Get the available files for a specific product and layer:
file_tibble &lt;-
  cms_list_stac_files("GLOBAL_ANALYSISFORECAST_PHY_001_024",
                      "cmems_mod_glo_phy-cur_anfc_0.083deg_P1D-m")

dest &lt;- tempdir()

## download the first file from the file_tibble to 'dest'
cms_download_stac(file_tibble[1,, drop = FALSE], dest)

## End(Not run)
</code></pre>


</div>