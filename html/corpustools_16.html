<div class="container">

<table style="width: 100%;"><tr>
<td>compare_documents</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate the similarity of documents</h2>

<h3>Description</h3>

<p>Calculate the similarity of documents
</p>


<h3>Usage</h3>

<pre><code class="language-R">compare_documents(
  tc,
  feature = "token",
  date_col = NULL,
  meta_cols = NULL,
  hour_window = c(24),
  measure = c("cosine", "overlap_pct"),
  min_similarity = 0,
  weight = c("norm_tfidf", "tfidf", "termfreq", "docfreq"),
  ngrams = NA,
  from_subset = NULL,
  to_subset = NULL,
  return_igraph = T,
  verbose = T
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tc</code></td>
<td>
<p>A tCorpus</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>feature</code></td>
<td>
<p>the column name of the feature that is to be used for the comparison.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date_col</code></td>
<td>
<p>a date with time in POSIXct. If given together with hour_window, only documents within the given hour_window will be compared.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meta_cols</code></td>
<td>
<p>a character vector with columns in the meta data / docvars. If given, only documents for which these values are identical are compared</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hour_window</code></td>
<td>
<p>A vector of length 1 or 2. If length is 1, the same value is used for the left and right side of the window. If length is 2, the first and second value determine the left and right side. For example, the value 12 will compare each document to all documents between the previous and next 12 hours, and c(-10, 36) will compare each document to all documents between the previous 10 and the next 36 hours.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>measure</code></td>
<td>
<p>the similarity measure. Currently supports cosine similarity (symmetric) and overlap_pct (asymmetric)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_similarity</code></td>
<td>
<p>A threshold for the similarity score</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>a weighting scheme for the document-term matrix. Default is term-frequency inverse document frequency with normalized rows (document length).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ngrams</code></td>
<td>
<p>an integer. If given, ngrams of this length are used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from_subset</code></td>
<td>
<p>An expression to select a subset. If given, only this subset will be compared to other documents</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to_subset</code></td>
<td>
<p>An expression to select a subset. If given, documents are only compared to this subset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_igraph</code></td>
<td>
<p>If TRUE, return as an igraph network. Otherwise, return as a list with the edgelist and meta data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>If TRUE, report progress</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An igraph graph in which nodes are documents and edges represent similarity scores
</p>


<h3>Examples</h3>

<pre><code class="language-R">d = data.frame(text = c('a b c d e',
                        'e f g h i j k',
                        'a b c'),
               date = as.POSIXct(c('2010-01-01','2010-01-01','2012-01-01')))
tc = create_tcorpus(d)

g = compare_documents(tc)
igraph::get.data.frame(g)

g = compare_documents(tc, measure = 'overlap_pct')
igraph::get.data.frame(g)

g = compare_documents(tc, date_col = 'date', hour_window = c(0,36))
igraph::get.data.frame(g)
</code></pre>


</div>