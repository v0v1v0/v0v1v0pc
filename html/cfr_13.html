<div class="container">

<table style="width: 100%;"><tr>
<td>prepare_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prepare common epidemiological data formats for CFR estimation</h2>

<h3>Description</h3>

<p>This S3 generic has methods for classes commonly used for epidemiological
data.
</p>
<p>Currently, the only supported data format is <code style="white-space: pre;">⁠&lt;incidence2&gt;⁠</code> from the
<span class="pkg">incidence2</span> package. See <code>incidence2::incidence()</code>. Grouped
<code style="white-space: pre;">⁠&lt;incidence2&gt;⁠</code> data are supported, see <strong>Details</strong>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">prepare_data(data, ...)

## S3 method for class 'incidence2'
prepare_data(
  data,
  cases_variable = "cases",
  deaths_variable = "deaths",
  fill_NA = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A <code style="white-space: pre;">⁠&lt;data.frame&gt;⁠</code>-like object. Currently, only <code style="white-space: pre;">⁠&lt;incidence2&gt;⁠</code>
objects are supported. These may be grouped.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Currently unused. Passing extra arguments will throw a warning.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cases_variable</code></td>
<td>
<p>A string for the name of the cases variable in the
"count_variable" column of <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deaths_variable</code></td>
<td>
<p>A string for the name of the deaths variable in the
"count_variable" column of <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill_NA</code></td>
<td>
<p>A logical indicating whether <code>NA</code>s in the cases and deaths
data should be replaced by 0s. The default value is <code>TRUE</code>, with a message
to make users aware of the replacement.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The method for <code style="white-space: pre;">⁠&lt;incidence2&gt;⁠</code> data can replace <code>NA</code>s in the case and death
data with 0s using the <code>fill_NA</code> argument, which is <code>TRUE</code> by default,
meaning that <code>NA</code>s are replaced.
</p>
<p>Keeping <code>NA</code>s will cause downstream issues when calling functions such as
<code>cfr_static()</code> on the data, as they cannot handle <code>NA</code>s.
Setting <code>fill_NA = TRUE</code> resolves this issue.
</p>
<p>Passing a grouped <code style="white-space: pre;">⁠&lt;incidence2&gt;⁠</code> object to <code>data</code> will result in the function
respecting the grouping and returning grouping variables in separate columns.
</p>


<h3>Value</h3>

<p>A <code style="white-space: pre;">⁠&lt;data.frame&gt;⁠</code> suitable for disease severity estimation functions
provided in <span class="pkg">cfr</span>, with the columns "date", "cases", and "deaths".
</p>
<p>Additionally, for grouped <code style="white-space: pre;">⁠&lt;incidence2&gt;⁠</code> data, columns representing the
grouping variables will also be present.
</p>
<p>The result has a continuous sequence of dates between the start and end date
of <code>data</code>; this is required if the data is to be passed to functions such as
<code>cfr_static()</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#### For &lt;incidence2&gt; data ####
# load Covid-19 data from incidence2
covid_uk &lt;- incidence2::covidregionaldataUK

# convert to incidence2 object
covid_uk_incidence &lt;- incidence2::incidence(
  covid_uk,
  date_index = "date",
  counts = c("cases_new", "deaths_new"),
  count_names_to = "count_variable"
)

# View tail of prepared data
data &lt;- prepare_data(
  covid_uk_incidence,
  cases_variable = "cases_new",
  deaths_variable = "deaths_new"
)

tail(data)

#### For grouped &lt;incidence2&gt; data ####
# convert data to incidence2 object grouped by region
covid_uk_incidence &lt;- incidence2::incidence(
  covid_uk,
  date_index = "date",
  counts = c("cases_new", "deaths_new"),
  count_names_to = "count_variable",
  groups = "region"
)

# View tail of prepared data
data &lt;- prepare_data(
  covid_uk_incidence,
  cases_variable = "cases_new",
  deaths_variable = "deaths_new"
)

tail(data)

</code></pre>


</div>