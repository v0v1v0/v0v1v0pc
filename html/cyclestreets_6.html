<div class="container">

<table style="width: 100%;"><tr>
<td>journey2</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plan a journey with CycleStreets.net</h2>

<h3>Description</h3>

<p>R interface to the CycleStreets.net journey planning API,
a route planner made by cyclists for cyclists.
See <a href="https://www.cyclestreets.net/api/">cyclestreets.net/api</a> for details.
</p>


<h3>Usage</h3>

<pre><code class="language-R">journey2(
  fromPlace = NA,
  toPlace = NA,
  id = NULL,
  plan = "fastest",
  pat = NULL,
  base_url = "https://www.cyclestreets.net",
  host_con = 1,
  reporterrors = TRUE,
  segments = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fromPlace</code></td>
<td>
<p>sf points, matrix, or vector of lng/lat coordinates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>toPlace</code></td>
<td>
<p>sf points, matrix, or vector of lng/lat coordinates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>a character ID value to be attached to the results</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plan</code></td>
<td>
<p>Text strong of either "fastest" (default), "quietest" or "balanced"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pat</code></td>
<td>
<p>The API key used. By default this uses <code>Sys.getenv("CYCLESTREETS")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base_url</code></td>
<td>
<p>The base url from which to construct API requests
(with default set to main server)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>host_con</code></td>
<td>
<p>number of threads to use passed to curl::new_pool</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reporterrors</code></td>
<td>
<p>Boolean value (TRUE/FALSE) indicating if cyclestreets (TRUE by default).
should report errors (FALSE by default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>segments</code></td>
<td>
<p>Logical, if true route segments returned otherwise whole routes</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Requires the internet and a CycleStreets.net API key.
CycleStreets.net does not yet work worldwide.
</p>
<p>You need to have an api key for this code to run.
By default it uses the CYCLESTREETS environment variable.
A quick way to set this is to install the <code>usethis</code> package and then
executing the following command:
</p>
<p><code>usethis::edit_r_environ()</code>
</p>
<p>That should open up a new file in your text editor where you
can add the environment variable as follows
(replace 1a... with your key for this to work):
</p>
<p>CYCLESTREETS=1a43ed677e5e6fe9
</p>
<p>After setting the environment variable, as outlined above,
you need to restart your R session before the journey function will work.
</p>
<p>See <a href="https://www.cyclestreets.net/help/journey/howitworks/">www.cyclestreets.net/help/journey/howitworks/</a>
for details on how these are calculated.
</p>


<h3>See Also</h3>

<p>json2sf_cs
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
from = c(-1.55, 53.80) # geo_code("leeds")
to = c(-1.76, 53.80) # geo_code("bradford uk")
r1 = journey(from, to)
r2 = journey2(from, to, segments = TRUE)
# waldo::compare(r1, r2) # see differences
sum(sf::st_length(r1))
sum(sf::st_length(r2))
# waldo::compare(sum(sf::st_length(r1)), sum(sf::st_length(r2)))
# waldo::compare(names(r1), names(r2))
# waldo::compare(r1[1, ], r2[1, ])
r1[1:2, ]
r2[1:2, ]
r1$grammesCO2saved
r1$calories

## End(Not run)
</code></pre>


</div>