<div class="container">

<table style="width: 100%;"><tr>
<td>add_quantile.survreg</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Confidence Intervals for Predicted Survival Time Quantiles of
Accelerated Failure Time Models</h2>

<h3>Description</h3>

<p>This function is one of the methods of <code>add_quantile</code> and is
automatically called when an object of class <code>survreg</code> is
passed to <code>add_quantile</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'survreg'
add_quantile(
  df,
  fit,
  p = 0.5,
  name = NULL,
  yhatName = "median_pred",
  confint = TRUE,
  alpha = 0.1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A data frame of new data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>An object of class <code>survreg</code>. Predictions are made
with this object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>A real number between 0 and 1. Sets the probability level
of the quantiles.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p><code>NULL</code> or a character vector of length 3. If
<code>NULL</code>, quantiles automatically will be named by
<code>add_quantile</code>, otherwise, they will be named <code>name</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yhatName</code></td>
<td>
<p>A string. Name of the vector of predictions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>confint</code></td>
<td>
<p>A logical. If <code>TRUE</code>, confidence intervals for
the quantiles are also appended to <code>df</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>A number. Controls the confidence level of the
confidence intervals if <code>confint = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>add_quantile.survreg</code> produces quantiles for the estimated
distribution of survival times from a survreg object. Estimated
quantiles (such as the median survival time) may be calculated for
a range of distributions including lognormal, exponential, weibull,
and loglogistic models. <code>add_quantile.survreg</code> can compute
quantiles through a parametric method based on the Delta
Method. Generally, this method performs well under a mild to
moderate amount of censoring. Parametric intervals are calculated
using a transformation of the confidence intervals produced by
<code>predict.survreg</code> and are mathematically identical to intervals
calculated by a manual Delta Method.
</p>
<p>Unlike other <code>add_quantile</code> methods,
<code>add_quantile.survreg</code> additionally produces confidence
intervals for predicted quantiles by default. This may optionally
be disabled by switching the <code>confint</code> argument.
</p>
<p>Note: Due to a limitation, the <code>Surv</code> object must be specified in
<code>survreg</code> function call. See the examples section for one way
to do this.
</p>
<p>Note: <code>add_quantile.survreg</code> cannot inspect the convergence of
<code>fit</code>. Poor maximum likelihood estimates will result in poor
confidence intervals. Inspect any warning messages given from
<code>survreg</code>.
</p>


<h3>Value</h3>

<p>A dataframe, <code>df</code>, with predicted medians, level <code class="reqn">p</code>
quantiles, and confidence intervals attached.
</p>


<h3>References</h3>

<p>For descriptions of the log-location scale models supported:
Meeker, William Q., and Luis A. Escobar. Statistical methods for reliability data. John Wiley &amp; Sons, 2014. (Chapter 4)
</p>
<p>For a description of the multivariate Delta method:
Meeker, William Q., and Luis A. Escobar. Statistical methods for reliability data. John Wiley &amp; Sons, 2014. (Appendix B.2)
</p>
<p>For a description of Delta Method Confidence Intervals:
Meeker, William Q., and Luis A. Escobar. Statistical methods for reliability data. John Wiley &amp; Sons, 2014. (Chapter 8)
</p>


<h3>See Also</h3>

<p><code>add_ci.survreg</code> for confidence intervals
<code>survreg</code> objects, <code>add_pi.survreg</code> for
prediction intervals of <code>survreg</code> objects, and
<code>add_probs.survreg</code> for survival probabilities of
<code>survreg</code> objects.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Define a data set:
df &lt;- survival::stanford2
## remove a covariate with missing values:
df &lt;- df[, 1:4]
## next, create the Surv object inside the survreg call:
fit &lt;- survival::survreg(survival::Surv(time, status) ~ age + I(age^2),
                         data = df, dist = "lognormal")
## Calculate the level 0.75 quantile wit CIs for that quantile
add_quantile(df, fit, p = 0.75, name = c("quant", "lwr", "upr"))

## Try a weibull model for the same data:
fit2 &lt;- survival::survreg(survival::Surv(time, status) ~ age + I(age^2),
                          data = df, dist = "weibull")
## Calculate the level 0.75 quantile with CIs for the quantile
add_quantile(df, fit2, p = 0.75, name = c("quant", "lwr", "upr"))

</code></pre>


</div>