<div class="container">

<table style="width: 100%;"><tr>
<td>add_ci.lmerMod</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Confidence Intervals for Linear Mixed Model Predictions</h2>

<h3>Description</h3>

<p>This function is one of the methods for <code>add_ci</code>, and is
called automatically when <code>add_ci</code> is used on a <code>fit</code> of
class <code>lmerMod</code>. It is recommended that one use parametric
confidence intervals when modeling with a random intercept linear
mixed model (i.e. a fit with a formula such as <code>lmer(y ~ x +
(1|group))</code>). Otherwise, confidence intervals may be bootstrapped
via <code>lme4::bootMer</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'lmerMod'
add_ci(
  df,
  fit,
  alpha = 0.05,
  names = NULL,
  yhatName = "pred",
  type = "boot",
  includeRanef = TRUE,
  nSims = 500,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A data frame of new data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>An object of class <code>lmerMod</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>A real number between 0 and 1. Controls the confidence
level of the interval estimates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names</code></td>
<td>
<p><code>NULL</code> or character vector of length two. If
<code>NULL</code>, confidence bounds automatically will be named by
<code>add_ci</code>, otherwise, the lower confidence bound will be
named <code>names[1]</code> and the upper confidence bound will be
named <code>names[2]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yhatName</code></td>
<td>
<p>A string. Name of the predictions vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>A string. Must be <code>"parametric"</code> or <code>"boot"</code>,
If <code>type = "boot"</code>, then <code>add_ci</code> calls
<code>lme4::bootMer</code> to calculate the confidence
intervals. This method may be time consuming, but is applicable
with random slope and random intercept models. The parametric
method is fast, but currently only works well for random
intercept models.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>includeRanef</code></td>
<td>
<p>A logical. Default is <code>TRUE</code>. Set whether
the predictions and intervals should be made conditional on the
random effects. If <code>FALSE</code>, random effects will not be
included.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nSims</code></td>
<td>
<p>A positive integer.  Controls the number of bootstrap
replicates if <code>type = "boot"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Bootstrapped intervals are slower to compute, but they are the
recommended method when working with any linear mixed models more
complicated than the random intercept model.
</p>


<h3>Value</h3>

<p>A dataframe, <code>df</code>, with predicted values, upper and lower
confidence bounds attached.
</p>


<h3>See Also</h3>

<p><code>add_pi.lmerMod</code> for prediction intervals
of <code>lmerMod</code> objects, <code>add_probs.lmerMod</code> for
conditional probabilities of <code>lmerMod</code> objects, and
<code>add_quantile.lmerMod</code> for response quantiles of
<code>lmerMod</code> objects.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
dat &lt;- lme4::sleepstudy
# Fit a linear mixed model (random intercept model)
fit &lt;- lme4::lmer(Reaction ~ Days + (1|Subject), data = lme4::sleepstudy)
# Get the fitted values for each observation in dat, and
# append CIs for those fitted values to dat
add_ci(dat, fit, alpha = 0.5)
# Try the parametric bootstrap method, and make prediction at the population level
add_ci(dat, fit, alpha = 0.5, type = "boot", includeRanef = FALSE, nSims = 100)

## End(Not run)
</code></pre>


</div>