<div class="container">

<table style="width: 100%;"><tr>
<td>get_intersecting_geometries</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get identifiers for census regions intersecting a geometry</h2>

<h3>Description</h3>

<p>This function returns a list of regions that intersect a given geometry input. This list of regions can be used
directly to query census when one is interested in census data for a particular geographic region that does
not coincide with defined census geometries. The returned value can be used as the <code>regions</code>
parameter in get_census to get corresponding census geographies and variables that cover the give geometry.
Input spatial objects can be any <code>sf</code> or <code>sfc</code> class objects such as <code>POINT</code>, <code>MULTIPOINT</code> or <code>POLYGON</code>.
</p>
<p>This function comes with CensusMapper API limits
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_intersecting_geometries(
  dataset,
  level,
  geometry,
  simplified = FALSE,
  use_cache = TRUE,
  quiet = FALSE,
  api_key = Sys.getenv("CM_API_KEY")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dataset</code></td>
<td>
<p>A CensusMapper dataset identifier.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>The census aggregation level to retrieve. One of <code>"Regions"</code>, <code>"PR"</code>, <code>"CMA"</code>, <code>"CD"</code>, <code>"CSD"</code>, <code>"CT"</code>, <code>"DA"</code>, <code>"EA"</code> (for 1996 census), or <code>"DB"</code> (for 2001-2016 censuses)..</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>geometry</code></td>
<td>
<p>A valid <code>sf</code> or <code>sfc</code> class object. As long as the geometry is valid, any projection is accepted. Objects will be reprojected as server-side intersections use lat/lon projection.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simplified</code></td>
<td>
<p>If <code>TRUE</code> will return a region list compatible with get_census, otherwise will return a character vector of matching region ids.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_cache</code></td>
<td>
<p>If set to <code>TRUE</code> (the default) data will be read from the local cache if available.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>When TRUE, suppress messages and warnings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_key</code></td>
<td>
<p>An API key for the CensusMapper API. Defaults to <code>options()</code> and then the <code>CM_API_KEY</code> environment variable.</p>
</td>
</tr>
</table>
<h3>Source</h3>

<p>Census data and boundary geographies are reproduced and distributed on
an "as is" basis with the permission of Statistics Canada (Statistics Canada
1996; 2001; 2006; 2011; 2016).
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 
# Example using a POINT-class object from a pair of lat/lon coordinates
point_geo &lt;- sf::st_sfc(sf::st_point(c(-123.25149, 49.27026)), crs=4326)
regions &lt;- get_intersecting_geometries(dataset = 'CA16', level = 'CT', geometry = point_geo)
census_data &lt;- get_census(dataset='CA16', regions=regions,
                          vectors=c("v_CA16_408","v_CA16_409","v_CA16_410"),
                          level='CT')

# Example using a POLYGON-class object from a bounding box with four coordinates
poly_geo &lt;- sf::st_as_sfc(sf::st_bbox(c(ymin = 49.25, ymax = 49.30,
                          xmin = -123.25, xmax = -123.30)), crs = 4326)
regions &lt;- get_intersecting_geometries(dataset = 'CA16', level = 'CT', geometry = poly_geo)
census_data &lt;- get_census(dataset='CA16', regions=regions,
                         vectors=c("v_CA16_408","v_CA16_409","v_CA16_410"), level='CT')


## End(Not run)
</code></pre>


</div>