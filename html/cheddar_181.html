<div class="container">

<table style="width: 100%;"><tr>
<td>SiteBySpeciesMatrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Community collection site by species matrix</h2>

<h3>Description</h3>

<p>Returns a matrix with a column per community and a row per unique 
node within communities in the collection.</p>


<h3>Usage</h3>

<pre><code class="language-R">SiteBySpeciesMatrix(collection, abundance=NULL, na.missing=FALSE)</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>collection</code></td>
<td>
<p>an object of class <code>CommunityCollection</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>abundance</code></td>
<td>
<p>the name of a node property that provides abundance values. 
This can be the name of a first-class propery or the name of a function. 
The name must meet the criteria of the <code>properties</code> parameter of 
<code>NPS</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.missing</code></td>
<td>
<p>if <code>TRUE</code> nodes that are absent from the community 
will be represented by <code>NA</code>; if <code>FALSE</code>, these nodes are 
represented by 0.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If <code>abundance</code> is <code>NULL</code>, the returned <code>matrix</code> 
indicates presence (1) or absence (0 or <code>NA</code> - see <code>na.missing</code>) 
of nodes. If <code>abundance</code> is given, values are the abundances of nodes,  
or 0 or <code>NA</code> where nodes are absent.
</p>


<h3>Value</h3>

<p>A <code>matrix</code>.</p>


<h3>Author(s)</h3>

<p>Lawrence Hudson</p>


<h3>See Also</h3>

<p><code>CommunityCollection</code>, <code>NPS</code>, 
<code>CollectionCPS</code>, <code>Biomass</code>, 
<code>Log10Biomass</code>, <code>matrix</code></p>


<h3>Examples</h3>

<pre><code class="language-R">data(pHWebs)

# If abundance is NULL, you get a presence/absence matrix:
SiteBySpeciesMatrix(pHWebs)

# Numerical abundance
SiteBySpeciesMatrix(pHWebs, 'N')

# Biomass abundance
SiteBySpeciesMatrix(pHWebs, 'Biomass')

# Log10 biomass abundance
SiteBySpeciesMatrix(pHWebs, 'Log10Biomass')

# Example showing how to model biomass in term of pH using vegan's rda function
m &lt;- SiteBySpeciesMatrix(pHWebs, 'Biomass')

# Some nodes (e.g. CPOM) do not have a biomass. The rows in m for these nodes 
# will contain all NA. Rows containing all NA will upset vegan's rda function 
# so these rows must be removed.
m &lt;- m[apply(m, 1, function(row) all(!is.na(row))),]

# Tranpose to get row per site - the format required by vegan's rda function
m &lt;- t(m)

# Matrix (with a row per site) of variables on the right hand side of the 
# model equation
variables &lt;- CollectionCPS(pHWebs)

## Not run: library(vegan)
## Not run: res &lt;- rda(m~pH,variables)
</code></pre>


</div>