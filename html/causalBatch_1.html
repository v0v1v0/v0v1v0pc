<div class="container">

<table style="width: 100%;"><tr>
<td>cb.align.kway_match</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>K-Way matching</h2>

<h3>Description</h3>

<p>A function for performing k-way matching using the matchIt package. Looks for samples which have corresponding matches across all other treatment levels.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cb.align.kway_match(
  Ts,
  Xs,
  match.form,
  reference = NULL,
  match.args = list(method = "nearest", exact = NULL, replace = FALSE, caliper = 0.1),
  retain.ratio = 0.05
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Ts</code></td>
<td>
<p><code>[n]</code> the labels of the samples, with <code>K &lt; n</code> levels, as a factor variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Xs</code></td>
<td>
<p><code>[n, r]</code> the <code>r</code> covariates/confounding variables, for each of the <code>n</code> samples, as a data frame with named columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>match.form</code></td>
<td>
<p>A formula of columns from <code>Xs</code>, to be passed directly to <code>matchit</code> for subsequent matching. See <code>formula</code> argument from <code>matchit</code> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference</code></td>
<td>
<p>the name of the reference/control batch, against which to match. Defaults to <code>NULL</code>, which treats the reference batch as the smallest batch.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>match.args</code></td>
<td>
<p>A named list arguments for the <code>matchit</code> function, to be used to specify specific matching strategies, where the list names are arguments and the corresponding values the value to be passed to <code>matchit</code>. Defaults to inexact nearest-neighbor caliper (width 0.1) matching without replacement.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>retain.ratio</code></td>
<td>
<p>If the number of samples retained is less than <code>retain.ratio*n</code>, throws a warning. Defaults to <code>0.05</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>an <code>[m]</code> vector consisting of the sample ids of the <code>n</code> original samples that were retained after matching.
</p>


<h3>Details</h3>

<p>For more details see the help vignette:
<code>vignette("causal_balancing", package = "causalBatch")</code>
</p>


<h3>Author(s)</h3>

<p>Eric W. Bridgeford
</p>


<h3>References</h3>

<p>Eric W. Bridgeford, et al. "A Causal Perspective for Batch Effects: When is no answer better than a wrong answer?" Biorxiv (2024).
</p>
<p>Daniel E. Ho, et al. "MatchIt: Nonparametric Preprocessing for Parametric Causal Inference" JSS (2011).
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(causalBatch)
sim &lt;- cb.sims.sim_linear(a=-1, n=100, err=1/8, unbalancedness=1.5)
cb.align.kway_match(sim$Ts, data.frame(Covar=sim$Xs), "Covar")
</code></pre>


</div>