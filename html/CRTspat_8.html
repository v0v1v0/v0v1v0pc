<div class="container">

<table style="width: 100%;"><tr>
<td>CRTpower</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Power and sample size calculations for a cluster randomized trial</h2>

<h3>Description</h3>

<p><code>CRTpower</code> carries out power and sample size calculations for cluster randomized trials.
</p>


<h3>Usage</h3>

<pre><code class="language-R">CRTpower(
  trial = NULL,
  locations = NULL,
  alpha = 0.05,
  desiredPower = 0.8,
  effect = NULL,
  yC = NULL,
  outcome_type = "d",
  sigma2 = NULL,
  denominator = 1,
  N = 1,
  ICC = NULL,
  cv_percent = NULL,
  c = NULL,
  sd_h = 0,
  spillover_interval = 0,
  contaminate_pop_pr = 0,
  distance_distribution = "normal"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>trial</code></td>
<td>
<p>dataframe or <code>'CRTsp'</code> object: optional list of locations</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>locations</code></td>
<td>
<p>numeric: total number of units available for randomization (required if <code>trial</code> is not specified)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>numeric: confidence level</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>desiredPower</code></td>
<td>
<p>numeric: desired power</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>effect</code></td>
<td>
<p>numeric: required effect size</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yC</code></td>
<td>
<p>numeric: baseline (control) value of outcome</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outcome_type</code></td>
<td>
<p>character: with options -
<code>'y'</code>: continuous;
<code>'n'</code>: count;
<code>'e'</code>: event rate;
<code>'p'</code>: proportion;
<code>'d'</code>: dichotomous.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma2</code></td>
<td>
<p>numeric: variance of the outcome (required for <code>outcome_type = 'y'</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>denominator</code></td>
<td>
<p>numeric: rate multiplier (for <code>outcome_type = 'n'</code> or <code>outcome_type = 'e'</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>numeric: mean of the denominator for proportions (for <code>outcome_type = 'p'</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ICC</code></td>
<td>
<p>numeric: Intra-cluster correlation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cv_percent</code></td>
<td>
<p>numeric: Coefficient of variation of the outcome (expressed as a percentage)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>c</code></td>
<td>
<p>integer: number of clusters in each arm (required if <code>trial</code> is not specified)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd_h</code></td>
<td>
<p>numeric: standard deviation of number of units per cluster (required if <code>trial</code> is not specified)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spillover_interval</code></td>
<td>
<p>numeric:  95% spillover interval (km)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>contaminate_pop_pr</code></td>
<td>
<p>numeric: Proportion of the locations within the 95% spillover interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distance_distribution</code></td>
<td>
<p>numeric: algorithm for computing distribution of spillover, with options -
<code>'empirical'</code>: empirical distribution;
<code>'normal'</code>: normal distribution.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Power and sample size calculations are for an unmatched two-arm trial. For counts
or event rate data the formula of <a href="https://academic.oup.com/ije/article/28/2/319/655247">Hayes &amp; Bennett, 1999</a> is used. This requires as an input the
between cluster coefficient of variation (<code>cv_percent</code>). For continuous outcomes and proportions the formulae of
<a href="https://bmcmedresmethodol.biomedcentral.com/articles/10.1186/1471-2288-11-102">Hemming et al, 2011</a> are used. These make use of
the intra-cluster correlation in the outcome (<code>ICC</code>) as an input. If the coefficient of variation and not the ICC is supplied then
the intra-cluster correlation is computed from the coefficient of variation using the formulae
from <a href="https://www.taylorfrancis.com/books/mono/10.1201/9781584888178/cluster-randomised-trials-richard-hayes-lawrence-moulton">Hayes &amp; Moulton</a>. If incompatible values for <code>ICC</code> and <code>cv_percent</code> are supplied
then the value of the <code>ICC</code> is used.<br><br>
The calculations do not consider any loss in power due to loss to follow-up and by default there is no adjustment for effects of spillover.<br><br>
Spillover bias can be allowed for using a diffusion model of mosquito movement. If no location or arm assignment information is available
then <code>contaminate_pop_pr</code> is used to parameterize the model using a normal approximation for the distribution of distance
to discordant locations.<br><br>
If a trial data frame or <code>'CRTsp'</code> object is input then this is used to determine the number of locations. If this input object
contains cluster assignments then the numbers and sizes of clusters in the input data are used to estimate the power.
If <code>spillover_interval &gt; 0</code> and <code>distance_distribution = 'empirical'</code> then effects of spillover are
incorporated into the power calculations based on the empirical distribution of distances to the nearest
discordant location. (If <code>distance_distribution is not equal to 'empirical'</code> then the distribution of distances is assumed to
be normal.<br><br>
If geolocations are not input then power and sample size calculations are based on the scalar input parameters.<br><br>
If buffer zones have been specified in the <code>'CRTsp'</code> object then separate calculations are made for the core area and for the full site.<br><br>
The output is an object of class <code>'CRTsp'</code> containing any input trial data frame and values for:
</p>

<ul>
<li>
<p> The required numbers of clusters to achieve the specified power.
</p>
</li>
<li>
<p> The design effect based on the input ICC.
</p>
</li>
<li>
<p> Calculations of the power ignoring any bias caused by loss to follow-up etc.<br></p>
</li>
<li>
<p> Calculations of <code>delta</code>, the expected spillover bias.
</p>
</li>
</ul>
<h3>Value</h3>

<p>A list of class <code>'CRTsp'</code> object comprising the input data, cluster and arm assignments,
trial description and results of power calculations
</p>


<h3>Examples</h3>

<pre><code class="language-R">{# Power calculations for a binary outcome without input geolocations
examplePower1 &lt;- CRTpower(locations = 3000, ICC = 0.10, effect = 0.4, alpha = 0.05,
    outcome_type = 'd', desiredPower = 0.8, yC=0.35, c = 20, sd_h = 5)
summary(examplePower1)
# Power calculations for a rate outcome without input geolocations
examplePower2 &lt;- CRTpower(locations = 2000, cv_percent = 40, effect = 0.4, denominator = 2.5,
    alpha = 0.05, outcome_type = 'e', desiredPower = 0.8, yC = 0.35, c = 20, sd_h=5)
summary(examplePower2)
# Example with input geolocations
examplePower3 &lt;- CRTpower(trial = readdata('example_site.csv'), desiredPower = 0.8,
    effect=0.4, yC=0.35, outcome_type = 'd', ICC = 0.05, c = 20)
summary(examplePower3)
# Example with input geolocations, randomisation, and spillover
example4 &lt;- randomizeCRT(specify_clusters(trial = readdata('example_site.csv'), c = 20))
examplePower4 &lt;- CRTpower(trial = example4, desiredPower = 0.8,
    effect=0.4, yC=0.35, outcome_type = 'd', ICC = 0.05, contaminate_pop_pr = 0.3)
summary(examplePower4)
}
</code></pre>


</div>