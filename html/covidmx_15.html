<div class="container">

<table style="width: 100%;"><tr>
<td>estima_rt</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>RT: Número efectivo de reproducción</h2>

<h3>Description</h3>

<p><code>estima_rt</code> Calcula el número efectivo de reproducción por fecha y entidad usando
los metodos de <code>EpiEstim::estimate_R()</code>. Por default calcula el número efectivo de
reproducción para cada estado.
</p>


<h3>Usage</h3>

<pre><code class="language-R">estima_rt(
  datos_covid,
  entidades = c("AGUASCALIENTES", "BAJA CALIFORNIA", "BAJA CALIFORNIA SUR", "CAMPECHE",
    "CHIAPAS", "CHIHUAHUA", "CIUDAD DE MÉXICO", "COAHUILA DE ZARAGOZA", "COLIMA",
    "DURANGO", "GUANAJUATO", "GUERRERO", "HIDALGO", "JALISCO", "MÉXICO",
    "MICHOACÁN DE OCAMPO", "MORELOS", "NAYARIT", "NUEVO LEÓN", "OAXACA", "PUEBLA",
    "QUERÉTARO", "QUINTANA ROO", "SAN LUIS POTOSÍ", "SINALOA", "SONORA", "TABASCO",
    "TAMAULIPAS", "TLAXCALA", "VERACRUZ DE IGNACIO DE LA LLAVE", "YUCATÁN", "ZACATECAS"),
  group_by_entidad = TRUE,
  entidad_tipo = c("Unidad Medica", "Residencia", "Nacimiento"),
  fecha_tipo = c("Sintomas", "Ingreso", "Defuncion"),
  tipo_clasificacion = c("Sospechosos", "Confirmados COVID", "Negativo a COVID",
    "Inválido", "No realizado"),
  tipo_paciente = c("AMBULATORIO", "HOSPITALIZADO", "NO ESPECIFICADO"),
  list_name = "estima_rt",
  min_date = as.POSIXct("2020-01-01", tz = Sys.timezone(), format = "%Y-%m-%d"),
  max_date = as.POSIXct(Sys.time()),
  method = "parametric_si",
  config = if (requireNamespace("EpiEstim", quietly = TRUE)) {
    
    EpiEstim::make_config(list(mean_si = 2.5, std_si = 1.6))
 } else {
     NULL
 },
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>datos_covid</code></td>
<td>
<p>(<strong>obligatorio</strong>) Lista de <code>tibble</code>s o <code>duckdb</code>s resultante de
<code>descarga_datos_abiertos()</code> o <code>read_datos_abiertos()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>entidades</code></td>
<td>
<p>(<strong>opcional</strong>)  Vector con las entidades de las unidades medicas a analizar.
Opciones: <code>AGUASCALIENTES</code>, <code style="white-space: pre;">⁠BAJA CALIFORNIA⁠</code>, <code style="white-space: pre;">⁠BAJA CALIFORNIA SUR⁠</code>,
<code>CAMPECHE</code>, <code>CHIAPAS</code>, <code>CHIHUAHUA</code>, <code style="white-space: pre;">⁠CIUDAD DE MEXICO⁠</code>,
<code style="white-space: pre;">⁠COAHUILA DE ZARAGOZA⁠</code> , <code>COLIMA</code>, <code>DURANGO</code>, <code>GUANAJUATO</code>, <code>GUERRERO</code>,
<code>HIDALGO</code>, <code>JALISCO</code>, <code>MEXICO</code>, <code style="white-space: pre;">⁠MICHOACAN DE OCAMPO⁠</code>, <code>MORELOS</code>,<code>NAYARIT</code>
<code style="white-space: pre;">⁠NUEVO LEON⁠</code>, <code>OAXACA</code> ,<code>PUEBLA</code>, <code>QUERETARO</code>,<code style="white-space: pre;">⁠QUINTANA ROO⁠</code>,
<code style="white-space: pre;">⁠SAN LUIS POTOSI⁠</code>, <code>SINALOA</code>, <code>SONORA</code>, <code>TABASCO</code>, <code>TAMAULIPAS</code>,<code>TLAXCALA</code>,
<code style="white-space: pre;">⁠VERACRUZ DE IGNACIO DE LA LLAVE⁠</code>, <code>YUCATAN</code>, <code>ZACATECAS</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_by_entidad</code></td>
<td>
<p>(<strong>opcional</strong>) <code>TRUE</code> obtiene los casos para cada entidad reportando
en cada fecha la entidad y los casos en dicha entidad. <code>FALSE</code>  junta las <code>entidades</code> sumando
sus casos en una sola observacion por cada fecha.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>entidad_tipo</code></td>
<td>
<p>(<strong>opcional</strong>) Indica a que se refiere las <code>entidades</code> seleccionadas. Elige
una de las opciones: <code style="white-space: pre;">⁠Unidad Medica⁠</code> (entidad de la unidad medica), <code>Nacimiento</code>
(entidad de origen del individuo) o <code>Residencia</code> (entidad donde reside el individuo).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fecha_tipo</code></td>
<td>
<p>(<strong>opcional</strong>) Selecciona si la fecha que se utiliza es la fecha de <code>Ingreso</code>
(si aplica), la fecha de <code>Sintomas</code> o la de <code>Defuncion</code> (si aplica). El default es fecha de <code>Sintomas</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tipo_clasificacion</code></td>
<td>
<p>(<strong>opcional</strong>)  Vector con el tipo de clasificaciones (por la prueba)
a incluir:<code>Sospechosos</code>,<code style="white-space: pre;">⁠Confirmados COVID⁠</code>, <code style="white-space: pre;">⁠Negativo a COVID⁠</code>, <code style="white-space: pre;">⁠Inv\u00e1lido⁠</code>, <code style="white-space: pre;">⁠No realizado⁠</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tipo_paciente</code></td>
<td>
<p>(<strong>opcional</strong>) Vector con el tipo de pacientes a incluir. Opciones:
<code>AMBULATORIO</code>, <code>HOSPITALIZADO</code>, <code style="white-space: pre;">⁠NO ESPECIFICADO⁠</code>. Por default se incluyen todos.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>list_name</code></td>
<td>
<p>(<strong>opcional</strong>) Asigna un nombre en la lista de datos a la base generada</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_date</code></td>
<td>
<p>(<strong>opcional</strong>) Mínima fecha a partir de la cual estimar el RT.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_date</code></td>
<td>
<p>(<strong>opcional</strong>) Máxima fecha a partir de la cual estimar el RT.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>(<strong>opcional</strong>) Metodo para estimar el RT con <code>EpiEstim::estimate_R()</code>. Por
default se recomienda el método paramétrico de intervalo serial <code>parametric_si</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>config</code></td>
<td>
<p>(<strong>opcional</strong>) Configuracion para la estimacion del RT usando
<code>EpiEstim::make_config()</code>. Por default se utiliza una media del intervalo serial
de <code>mean_si = 2.5</code> y una desviación estandar de <code>std_si = 1.6</code>. Sin embargo, como el intervalo
serial depende mucho de la variante se recomienda cambiarlo.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>(<strong>opcional</strong>) Parámetros adicionales para <code>EpiEstim::estimate_R()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Se sugiere establecer una mínima fecha y una máxima fecha con <code>min_date</code> y
<code>max_date</code> para la estimación pues los intervalos seriales de omicron son distintos
a los de la variante delta.
</p>


<h3>Value</h3>

<p>Une a la lista de <code>datos_covid</code> una nueva entrada de nombre <code>list_name</code>
(default: <code>estima_rt</code>) con una base de datos (<code>tibble</code>) con los
resultados agregados.
</p>

<ul>
<li> <p><code>estima_rt</code> - Base de datos generara con los datos agregados (el nombre cambia si
se usa <code>list_name</code>).
</p>
</li>
<li>
<p> dict - Diccionario de datos
</p>
</li>
<li>
<p> dats - Datos originales (conexion a <code>duckdb</code> o <code>tibble</code>)
</p>
</li>
<li>
<p> disconnect  - Función para desconectarte de <code>duckdb</code>
</p>
</li>
<li>
<p> ... - Cualquier otro elemento que ya existiera en <code>datos_covid</code>
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>descarga_datos_abiertos()</code> <code>numero_pruebas()</code> <code>cfr()</code> <code>chr()</code>
<code>positividad()</code> <code>casos()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Para el ejemplo usaremos los datos precargados (datosabiertos) pero tu puedes
# correr el ejemplo descargando informacion mas reciente.
datos_covid &lt;- datosabiertos

# Casos a nivel nacional por estado en todos

suppressWarnings(
  datos_covid &lt;- datos_covid |&gt; estima_rt()
)
head(datos_covid$estima_rt)

# Cambios en la fecha de estimacion siguiendo la recomendacion
# y obtenemos todo a nivel nacional
datos_covid &lt;- datos_covid |&gt; estima_rt(
  min_date = as.POSIXct("2021-07-01"),
  max_date = as.POSIXct("2021-09-01"),
  list_name = "rt_min_max",
  group_by_entidad = FALSE
)
head(datos_covid$rt_min_max)

# Casos a nivel nacional en los confirmados
datos_covid &lt;- datos_covid |&gt;
  estima_rt(
    tipo_clasificacion = "Confirmados COVID",
    group_by_entidad = FALSE,
    list_name = "rt_confirmados"
  )
head(datos_covid$rt_confirmados)

#' # Cambios en los parametros de epiestim
# estos parametros no tienen razon de ser mas alla de mostrar como se cambian
datos_covid &lt;- datos_covid |&gt;
  estima_rt(
    group_by_entidad = FALSE,
    list_name = "config_rt",
    method = "uncertain_si", # Metodo de estimacion
    config = EpiEstim::make_config(
      mean_si = 2.4,
      std_si = 0.3,
      std_mean_si = 0.2,
      min_mean_si = 2,
      max_mean_si = 4,
      std_std_si = 0.1,
      min_std_si = 0.1,
      max_std_si = 1.0
    )
  )
head(datos_covid$config_rt)

# Casos en BC, BCS en los confirmados
datos_covid |&gt;
  estima_rt(
    entidades = c("BAJA CALIFORNIA", "BAJA CALIFORNIA SUR"),
    tipo_clasificacion = "Confirmados COVID",
    group_by_entidad = TRUE,
    list_name = "rt_bc_bcs"
  ) |&gt;
  plot_covid(
    df_name = "rt_bc_bcs", df_date_index = "FECHA_SINTOMAS",
    df_variable = "Mean(R)", df_covariates = "ENTIDAD_FEDERATIVA"
  )


# Finalmente desconectamos
datos_covid$disconnect()

</code></pre>


</div>