<div class="container">

<table style="width: 100%;"><tr>
<td>aggregation.auc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Determine the area under the ROC curve for a fitted model</h2>

<h3>Description</h3>

<p>Evaluate the area under the ROC curve for a fitted model on new data. To be used as argument <code>aggregation.fun</code> in <code>peperr</code> call. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">aggregation.auc(full.data=NULL, response, x, model, cplx=NULL,  
type=c("apparent", "noinf"), fullsample.attr = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>full.data</code></td>
<td>
<p>passed from <code>peperr</code>, but not used for calculation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>response</code></td>
<td>
<p>vector of binary response.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><code>n*p</code> matrix of covariates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>model fitted as returned by a <code>fit.fun</code>, as used in a call to <code>peperr</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cplx</code></td>
<td>
<p>passed from <code>peperr</code>, but not necessary for calculation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>character.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fullsample.attr</code></td>
<td>
<p>passed from <code>peperr</code>, but not necessary for calculation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments, passed to <code>predict</code> function.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Area under the ROC curve is calculated based on internal <code>glmnet:::auc</code> function from package <code>glmnet</code>.
</p>


<h3>Value</h3>

<p>Scalar, indicating the area under the ROC curve.
</p>


<h3>Author(s)</h3>

<p>Thomas Hielscher \
<a href="mailto:t.hielscher@dkfz.de">t.hielscher@dkfz.de</a>
</p>


<h3>See Also</h3>

<p><code>peperr</code></p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# binomial model - classification

library(c060)
library(gridExtra)
library(ggplot2)

set.seed(0815)
x &lt;- matrix(rnorm(100*20),100,20)
y &lt;- sample(0:1,100,replace=TRUE)

peperr_obj &lt;- peperr(response=y, x=x, fit.fun=fit.glmnet, args.fit=list(family="binomial"),
           complexity=complexity.glmnet, args.complexity=list(nfolds=10, family="binomial"),
           trace=F, RNG="fixed",seed=0815,
#           aggregation.fun=c060:::aggregation.misclass,                  
#           aggregation.fun=c060:::aggregation.brier,                  
           aggregation.fun=c060:::aggregation.auc,                  
           indices=resample.indices(n=nrow(x), sample.n = 100, method = "sub632"))

tmp   &lt;- data.frame(grp="",error=unlist(peperr_obj$sample.error)) 
errs  &lt;- data.frame(error=c(perr(peperr_obj,"resample"),
         perr(peperr_obj,"632p"),perr(peperr_obj,"app"),
         perr(peperr_obj,"nullmodel")), col  = c("red","blue","green","brown"),
         row.names=c("mean\nout-of-bag",".632plus","apparent","null model"))
                 
p     &lt;- ggplot(tmp, aes(grp,error))
pg    &lt;- p + geom_boxplot(outlier.colour = rgb(0,0,0,0), outlier.size=0) +
         geom_jitter(position=position_jitter(width=.1)) + 
         theme_bw() + scale_y_continuous("AUC") +  scale_x_discrete("") +
         geom_hline(aes(yintercept=error, colour=col), data=errs, show_guide=T) + 
         scale_colour_identity("error type", guide = "legend", breaks=errs$col,
         labels=rownames(errs)) +
         ggtitle("AUC \n in bootstrap samples ")                       

p2     &lt;- ggplot(data.frame(complx=peperr_obj$sample.complexity), aes(x=complx))
pg2    &lt;- p2 + geom_histogram(binwidth = 0.02, fill = "white", colour="black") +
          theme_bw()+  xlab(expression(lambda)) +
          ylab("frequency") + 
          geom_vline(xintercept=peperr_obj$selected.complexity, colour="red") + 
          ggtitle("Selected complexity \n in bootstrap samples") +
          ggplot2::annotate("text", x = 0.12, y = -0.5,
          label = "full data", colour="red", size=4)

grid.arrange(pg2, pg, ncol=2)


## End(Not run)</code></pre>


</div>