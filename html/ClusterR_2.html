<div class="container">

<table style="width: 100%;"><tr>
<td>AP_preferenceRange</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Affinity propagation preference range</h2>

<h3>Description</h3>

<p>Affinity propagation preference range
</p>


<h3>Usage</h3>

<pre><code class="language-R">AP_preferenceRange(data, method = "bound", threads = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a matrix. Either a similarity matrix (where number of rows equal to number of columns) or a 3-dimensional matrix where the 1st, 2nd and 3rd column correspond to (i-index, j-index, value) triplet of a similarity matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>a character string specifying the preference range method to use. One of 'exact', 'bound'. See the details section for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threads</code></td>
<td>
<p>an integer specifying the number of cores to run in parallel ( applies only if <em>method</em> is set to 'exact' which is more computationally intensive )</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Given a set of similarities, <em>data</em>, this function computes a lower bound, pmin, on the value for the preference where the optimal number of clusters (exemplars) changes from 1 to 2,
and the exact value of the preference, pmax, where the optimal number of clusters changes from n-1 to n. For N data points, there may be as many as N^2-N pair-wise similarities (note that
the similarity of data point i to k need not be equal to the similarity of data point k to i). These may be passed in an NxN matrix of similarities, <em>data</em>, where data(i,k) is the similarity of
point i to point k. In fact, only a smaller number of relevant similarities need to be provided, in which case the others are assumed to be -Inf. M similarity values are known, can be passed
in an Mx3 matrix <em>data</em>, where each row of <em>data</em> contains a pair of data point indices and a corresponding similarity value: data(j,3) is the similarity of data point data(j,1) to
data point data(j,2).
</p>
<p>A single-cluster solution may not exist, in which case pmin is set to NaN. The <em>AP_preferenceRange</em> uses one of the methods below to compute pmin and pmax:
</p>
<p><em>exact</em> : Computes the exact values for pmin and pmax (Warning: This can be quite slow)
<em>bound</em> : Computes the exact value for pmax, but estimates pmin using a bound (default)
</p>


<h3>References</h3>

<p>https://www.psi.toronto.edu/affinitypropagation/preferenceRange.m
</p>


<h3>Examples</h3>

<pre><code class="language-R">
set.seed(1)
dat = matrix(sample(1:255, 2500, replace = TRUE), 100, 25)

smt = 1.0 - distance_matrix(dat, method = 'euclidean', upper = TRUE, diagonal = TRUE)
diag(smt) = 0.0

ap_range = AP_preferenceRange(smt, method = "bound")

</code></pre>


</div>