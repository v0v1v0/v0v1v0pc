<div class="container">

<table style="width: 100%;"><tr>
<td>appendDataset</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Append one Crunch dataset to another</h2>

<h3>Description</h3>

<p>With Crunch, you can add additional rows to a dataset by appending a second
dataset to the bottom of the original dataset. Crunch makes intelligent
guesses to align the variables between the two datasets and to harmonize the
categories and subvariables of variables, as appropriate.
</p>


<h3>Usage</h3>

<pre><code class="language-R">appendDataset(dataset1, dataset2, upsert = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dataset1</code></td>
<td>
<p>a CrunchDataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataset2</code></td>
<td>
<p>another CrunchDataset, or possibly a data.frame. If
<code>dataset2</code> is not a Crunch dataset, it will be uploaded as a new
dataset before appending. If it is a CrunchDataset, it may be subsetted with
a filter expression on the rows and a selection of variables on the columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>upsert</code></td>
<td>
<p>Logical: should the append instead "update" rows based on the
primary key variable and "insert" (append) where the primary key values are
new? Default is <code>FALSE</code>. Note that this upserting behavior requires a primary
key variable to have been set previously; see <code>pk()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Variables are matched between datasets based on their aliases. Variables
present in only one of the two datasets are fine; they're handled by filling
in with missing values for the rows corresponding to the dataset where they
don't exist. For variables present in both datasets, you will have best
results if you ensure that the two datasets have the same variable names
and types, and that their categorical and array variables have consistent
categories. To preview how datasets will align when appended, see
<code>compareDatasets()</code>.
</p>
<p>Particularly if you're appending to datasets that are already shared with
others, you may want to use the fork-edit-merge workflow when appending
datasets. This allows you to verify your changes before releasing them to
the other viewers of the dataset. To do this fork the dataset with
<code>forkDataset()</code>, append the new data to the fork, ensure that the append
worked as expected, and then merge the fork back to the original dataset
with <code>mergeFork()</code>. For more, see <code>vignette("fork-and-merge", package = "crunch")</code>.
</p>


<h3>Value</h3>

<p><code>dataset1</code>, updated with <code>dataset2</code>, potentially filtered on rows and
variables, appended to it.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
ds &lt;- loadDataset("Survey, 2016")
new_wave &lt;- loadDataset("Survey, 2017")
ds &lt;- appendDataset(ds, new_wave)

## End(Not run)
</code></pre>


</div>