<div class="container">

<table style="width: 100%;"><tr>
<td>cluster.bs.ivreg</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Pairs Cluster Bootstrapped p-Values For Regression With Instrumental Variables</h2>

<h3>Description</h3>

<p>This software estimates p-values using pairs cluster bootstrapped t-statistics for instrumental variables regression models (Cameron, Gelbach, and Miller 2008). The data set is repeatedly re-sampled by cluster, a model is estimated, and inference is based on the sampling distribution of the pivotal (t) statistic.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cluster.bs.ivreg(
  mod,
  dat,
  cluster,
  ci.level = 0.95,
  boot.reps = 1000,
  stratify = FALSE,
  cluster.se = TRUE,
  report = TRUE,
  prog.bar = TRUE,
  output.replicates = FALSE,
  seed = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mod</code></td>
<td>
<p>A model estimated using <code>ivreg</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>
<p>The data set used to estimate <code>mod</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster</code></td>
<td>
<p>A formula of the clustering variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci.level</code></td>
<td>
<p>What confidence level should CIs reflect?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot.reps</code></td>
<td>
<p>The number of bootstrap samples to draw.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stratify</code></td>
<td>
<p>Sample clusters only (= FALSE) or clusters and observations by cluster (= TRUE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster.se</code></td>
<td>
<p>Use clustered standard errors (= TRUE) or ordinary SEs (= FALSE) for bootstrap replicates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>report</code></td>
<td>
<p>Should a table of results be printed to the console?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prog.bar</code></td>
<td>
<p>Show a progress bar of the bootstrap (= TRUE) or not (= FALSE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output.replicates</code></td>
<td>
<p>Should the cluster bootstrap coefficient replicates be output (= TRUE) or not (= FALSE)?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Random number seed for replicability (default is NULL).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with the elements
</p>
<table>
<tr style="vertical-align: top;">
<td><code>p.values</code></td>
<td>
<p>A matrix of the estimated p-values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p>A matrix of confidence intervals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replicates</code></td>
<td>
<p>Optional: A matrix of the coefficient estimates from each cluster bootstrap replicate.</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>Code to estimate clustered standard errors by Mahmood Arai: http://thetarzan.wordpress.com/2011/06/11/clustered-standard-errors-in-r/. Cluster SE degrees of freedom correction = (M/(M-1)) with M = the number of clusters.
</p>


<h3>Author(s)</h3>

<p>Justin Esarey
</p>


<h3>References</h3>

<p>Esarey, Justin, and Andrew Menger. 2017. "Practical and Effective Approaches to Dealing with Clustered Data." <em>Political Science Research and Methods</em> forthcoming: 1-35. &lt;URL:http://jee3.web.rice.edu/cluster-paper.pdf&gt;.
</p>
<p>Cameron, A. Colin, Jonah B. Gelbach, and Douglas L. Miller. 2008. "Bootstrap-Based Improvements for Inference with Clustered Errors." <em>The Review of Economics and Statistics</em> 90(3): 414-427. &lt;DOI:10.1162/rest.90.3.414&gt;.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

##############################################
# example one: predict cigarette consumption
##############################################
require(AER)
data("CigarettesSW", package = "AER") 
CigarettesSW$rprice &lt;- with(CigarettesSW, price/cpi)
CigarettesSW$rincome &lt;- with(CigarettesSW, income/population/cpi)
CigarettesSW$tdiff &lt;- with(CigarettesSW, (taxs - tax)/cpi)
fm &lt;- ivreg(log(packs) ~ log(rprice) + log(rincome) | 
    log(rincome) + tdiff + I(tax/cpi), data = CigarettesSW)

# compute pairs cluster bootstrapped p-values
cluster.bs.c &lt;- cluster.bs.ivreg(fm, dat = CigarettesSW, cluster = ~state, report = T)


################################################
# example two: pooled IV analysis of employment
################################################
require(plm)
require(AER)
data(EmplUK)
EmplUK$lag.wage &lt;- lag(EmplUK$wage)
emp.iv &lt;- ivreg(emp ~ wage + log(capital+1) | output + lag.wage + log(capital+1), data = EmplUK)

# compute cluster-adjusted p-values
cluster.bs.e &lt;- cluster.bs.ivreg(mod = emp.iv, dat = EmplUK, cluster = ~firm)


## End(Not run)
</code></pre>


</div>