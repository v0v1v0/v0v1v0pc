<div class="container">

<table style="width: 100%;"><tr>
<td>CalibrationCurves</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>General information on the package and its functions
</h2>

<h3>Description</h3>

<p>Using this package, you can assess the calibration performance of your prediction model. That is, to which extent the predictions and correspond with what we observe empirically.
To assess the calibration of model with a binary outcome, you can use the <code>val.prob.ci.2</code> or the <code>valProbggplot</code> function. If the outcome of your prediction model
is not binary but follows a different distribution of the exponential family, you can employ the <code>genCalCurve</code> function.
</p>
<p>If you are not familiar with the theory and/or application of calibration, you can consult the vignette of the package. This vignette provides a comprehensive overview of the theory and
contains a tutorial with some practical examples. Further, we suggest the reader to consult the <a href="https://arxiv.org/abs/2309.08559">paper</a> on generalized calibration curves on arXiv.
In this paper, we provide the theoretical background on the generalized calibration framework and illustrate its applicability with some prototypical examples of both statistical and
machine learning prediction models that are well-calibrated, overfit and underfit.
</p>
<p>Originally, the package only contained functions to assess the calibration of prediction models with a binary outcome. The details section provides some background information on the
history of the package's development.
</p>


<h3>Details</h3>

<p>Some years ago, Yvonne Vergouwe and Ewout Steyerberg adapted the function <code>val.prob</code> from the rms-package (<a href="https://cran.r-project.org/package=rms">https://cran.r-project.org/package=rms</a>) into <code>val.prob.ci</code> and added the following functions to <code>val.prob</code>:
</p>

<ul>
<li>
<p> Scaled Brier score by relating to max for average calibrated Null model
</p>
</li>
<li>
<p> Risk distribution according to outcome
</p>
</li>
<li>
<p> 0 and 1 to indicate outcome label; set with <code>d1lab=".."</code>, <code>d0lab=".."</code>
</p>
</li>
<li>
<p> Labels: y axis: "Observed Frequency"; Triangle: "Grouped observations"
</p>
</li>
<li>
<p> Confidence intervals around triangles
</p>
</li>
<li>
<p> A cut-off can be plotted; set x coordinate
</p>
</li>
</ul>
<p>In December 2015, Bavo De Cock, Daan Nieboer, and Ben Van Calster adapted
this to <code>val.prob.ci.2</code>:
</p>

<ul>
<li>
<p> Flexible calibration curves can be obtained using loess (default) or
restricted cubic splines, with pointwise 95% confidence intervals. Flexible calibration curves are now given by default and this decision is based on the findings reported in Van Calster et al. (2016).
</p>
</li>
<li>
<p> Loess: confidence intervals can be obtained in closed form or using bootstrapping
(CL.BT=T will do bootstrapping with 2000 bootstrap samples, however
this will take a while)
</p>
</li>
<li>
<p> RCS: 3 to 5 knots can be used
</p>

<ul>
<li>
<p> the knot locations will be estimated using default quantiles of
x (by <code>rcspline.eval</code>, see <code>rcspline.plot</code> and <code>rcspline.eval</code>)
</p>
</li>
<li>
<p> if estimation problems occur at the specified number of knots
(nr.knots, default is 5), the analysis is repeated with
nr.knots-1 until the problem has disappeared and the function stops if there is still an estimation problem with 3 knots
</p>
</li>
</ul>
</li>
<li>
<p> You can now adjust the plot through use of normal plot commands
(<code>cex.axis</code> etcetera), and the size of the legend now has to be specified in
<code>cex.leg</code>
</p>
</li>
<li>
<p> Label y-axis: "Observed proportion"
</p>
</li>
<li>
<p> Stats: added the Estimated Calibration Index (ECI), a statistical
measure to quantify lack of calibration (Van Hoorde et al., 2015)
</p>
</li>
<li>
<p> Stats to be shown in the plot: by default we show the <code>"abc"</code> of model performance (Steyerberg et al., 2011). That is, calibration intercept (calibration-in-the-large), calibration slope and c-
statistic. Alternatively, the user can select the statistics of
choice (e.g. <code>dostats=c("C (ROC)","R2")</code> or <code>dostats=c(2,3)</code>.
</p>
</li>
<li>
<p> Vectors p, y and logit no longer have to be sorted
</p>
</li>
</ul>
<p>In 2023, Bavo De Cock (Campo) published a <a href="https://arxiv.org/abs/2309.08559">paper</a> that introduces the generalized calibration framework. This framework is an extension of the logistic calibration framework to prediction models where the outcome's distribution is a member of the exponential family. As such, we are able to assess the calibration of a wider range of prediction models. The methods in this paper are implemented
in the CalibrationCurves package.
</p>
<p>The most current version of this package can always be found on
<a href="https://github.com/BavoDC">https://github.com/BavoDC</a> and can easily be installed using the following code: <br><code>install.packages("devtools") # if not yet installed</code> <br><code>require(devtools)</code> <br><code>install_github("BavoDC/CalibrationCurves", dependencies = TRUE, build_vignettes = TRUE)</code> <br></p>


<h3>References</h3>

<p>De Cock Campo, B. (2023). Towards reliable predictive analytics: a generalized calibration framework. arXiv:2309.08559, available at <a href="https://arxiv.org/abs/2309.08559">https://arxiv.org/abs/2309.08559</a>.
</p>
<p>Steyerberg, E.W.Van Calster, B., Pencina, M.J. (2011). Performance measures for prediction models and markers : evaluation of predictions and classifications. <em>Revista Espanola de Cardiologia</em>, <b>64(9)</b>, pp. 788-794
</p>
<p>Van Calster, B., Nieboer, D., Vergouwe, Y., De Cock, B., Pencina M., Steyerberg E.W. (2016). A calibration hierarchy for risk models was defined: from utopia to empirical data. <em>Journal of Clinical Epidemiology</em>, <b>74</b>, pp. 167-176
</p>
<p>Van Hoorde, K., Van Huffel, S., Timmerman, D., Bourne, T., Van Calster, B. (2015).
A spline-based tool to assess and visualize the calibration of multiclass risk predictions.
<em>Journal of Biomedical Informatics</em>, <b>54</b>, pp. 283-93
</p>


</div>