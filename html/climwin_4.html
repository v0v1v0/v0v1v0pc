<div class="container">

<table style="width: 100%;"><tr>
<td>crosswin</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Test the correlation between two climate variables.</h2>

<h3>Description</h3>

<p>Test the correlation between two climate variables.
</p>


<h3>Usage</h3>

<pre><code class="language-R">crosswin(
  xvar,
  xvar2,
  cdate,
  bdate,
  range,
  stat,
  stat2,
  type,
  refday,
  cinterval = "day",
  cmissing = FALSE,
  spatial = NULL,
  cohort = NULL,
  cutoff.day = NULL,
  cutoff.month = NULL,
  furthest = NULL,
  closest = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>xvar</code></td>
<td>
<p>The first climate variable of interest. Please specify the parent 
environment and variable name (e.g. Climate$Temp).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xvar2</code></td>
<td>
<p>The second climate variable of interest. Please specify the parent 
environment and variable name (e.g. Climate$Temp).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cdate</code></td>
<td>
<p>The climate date variable (dd/mm/yyyy). Please specify the parent
environment and variable name (e.g. Climate$Date).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bdate</code></td>
<td>
<p>The biological date variable (dd/mm/yyyy). Please specify the 
parent environment and variable name (e.g. Biol$Date).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>range</code></td>
<td>
<p>Two values signifying respectively the furthest and closest number 
of time intervals (set by cinterval) back from the cutoff date or biological record to include 
in the climate window search.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stat</code></td>
<td>
<p>The aggregate statistic used to analyse the climate data. Can 
currently use basic R statistics (e.g. mean, min), as well as slope. 
Additional aggregate statistics can be created using the format function(x) 
(...). See FUN in <code>apply</code> for more detail.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stat2</code></td>
<td>
<p>Second aggregate statistic used to analyse climate data (xvar2). Can 
currently use basic R statistics (e.g. mean, min), as well as slope. 
Additional aggregate statistics can be created using the format function(x) 
(...). See FUN in <code>apply</code> for more detail.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>"absolute" or "relative", whether you wish the climate window to be relative
(e.g. the number of days before each biological record is measured) or absolute
(e.g. number of days before a set point in time).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>refday</code></td>
<td>
<p>If type is absolute, the day and month respectively of the 
year from which the absolute window analysis will start.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cinterval</code></td>
<td>
<p>The resolution at which climate window analysis will be 
conducted. May be days ("day"), weeks ("week"), or months ("month"). Note the units 
of parameter 'range' will differ depending on the choice 
of cinterval</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cmissing</code></td>
<td>
<p>cmissing Determines what should be done if there are 
missing climate data. Three approaches are possible: 
- FALSE; the function will not run if missing climate data is encountered.
An object 'missing' will be returned containing the dates of missing climate.
- "method1"; missing climate data will be replaced with the mean climate
of the preceding and following 2 days.
- "method2"; missing climate data will be replaced with the mean climate
of all records on the same date.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spatial</code></td>
<td>
<p>A list item containing:
1. A factor that defines which spatial group (i.e. population) each biological
record is taken from. The length of this factor should correspond to the length 
of the biological dataset.
2. A factor that defines which spatial group (i.e. population) climate data
corresponds to. This length of this factor should correspond to the length of
the climate dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohort</code></td>
<td>
<p>A variable used to group biological records that occur in the same biological
season but cover multiple years (e.g. southern hemisphere breeding season). By default,
autowin will use year (extracted from parameter bdate) as the cohort variable. 
The cohort variable should be in the same dataset as the variable bdate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cutoff.day, cutoff.month</code></td>
<td>
<p>Redundant parameters. Now replaced by refday.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>furthest, closest</code></td>
<td>
<p>Redundant parameters. Now replaced by range.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Will return a dataframe containing the correlation between the two
climate variables.
</p>


<h3>Author(s)</h3>

<p>Liam D. Bailey and Martijn van de Pol
</p>


<h3>Examples</h3>

<pre><code class="language-R">
#Simple test example
#Create data from a subset of our test dataset
#Just use two years
biol_data &lt;- Mass[1:2, ]
clim_data &lt;- MassClimate[grep(pattern = "1979|1986", x = MassClimate$Date), ]
                   
cross &lt;- crosswin(xvar  = list(Temp = clim_data$Temp),
                 xvar2 = list(Rain = clim_data$Rain),
                 cdate = clim_data$Date, bdate = biol_data$Date,
                 range = c(1, 0), 
                 stat = "mean", stat2 = "mean",
                 type = "relative",
                 cmissing = FALSE, cinterval = "day")

## Not run: 
# Full working example
# Test correlation between temperature and rainfall in the MassClimate dataset.

data(Mass)
data(MassClimate)

cross &lt;- crosswin(xvar = list(Temp = MassClimate$Temp), 
                 xvar2 = list(Rain = MassClimate$Rain), 
                 cdate = MassClimate$Date, bdate = Mass$Date, 
                 range = c(365, 0),
                 stat = "mean", stat2 = "mean", type = "relative",
                 cmissing = FALSE, cinterval = "day")
                
# View the output
head(cross)

# Plot the output
plotcor(cross, type = "C")


## End(Not run)

</code></pre>


</div>