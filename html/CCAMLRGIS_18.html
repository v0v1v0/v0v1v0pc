<div class="container">

<table style="width: 100%;"><tr>
<td>create_Pies</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create Pies</h2>

<h3>Description</h3>

<p>Generates pie charts that can be overlaid on maps. The <code>Input</code> data must be a dataframe with, at least,
columns for latitude, longitude, class and value. For each location, a pie is created with pieces for each class,
and the size of each piece depends on the proportion of each class (the value of each class divided by the sum of values).
Optionally, the area of each pie can be proportional to a chosen variable (if that variable is different than the 
value mentioned above, the <code>Input</code> data must have a fifth column and that variable must be unique to each location).
If the <code>Input</code> data contains locations that are too close together, the data can be gridded by setting <code>GridKm</code>.
Once pie charts have been created, the function add_PieLegend may be used to add a legend to the figure.
</p>


<h3>Usage</h3>

<pre><code class="language-R">create_Pies(
  Input,
  NamesIn = NULL,
  Classes = NULL,
  cols = c("green", "red"),
  Size = 50,
  SizeVar = NULL,
  GridKm = NULL,
  Other = 0,
  Othercol = "grey"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Input</code></td>
<td>
<p>input dataframe.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NamesIn</code></td>
<td>
<p>character vector of length 4 specifying the column names of Latitude, Longitude,
Class and value fields in the <code>Input</code>.
</p>
<p>Names must be given in that order, e.g.:
</p>
<p><code>NamesIn=c('Latitude','Longitude','Class','Value')</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Classes</code></td>
<td>
<p>character, optional vector of classes to be displayed. If this excludes classes that are in the <code>Input</code>,
those excluded classes will be pooled in a 'Other' class.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cols</code></td>
<td>
<p>character, vector of two or more color names to colorize pie pieces.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Size</code></td>
<td>
<p>numeric, value controlling the size of pies.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SizeVar</code></td>
<td>
<p>numeric, optional, name of the field in the <code>Input</code> that should be used to scale the area of pies.
Must be unique to locations in the input.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>GridKm</code></td>
<td>
<p>numeric, optional, cell size of the grid in kilometers. If provided, locations are pooled by grid
cell and values are summed for each class.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Other</code></td>
<td>
<p>numeric, optional, percentage threshold below which classes are pooled in a 'Other' class.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Othercol</code></td>
<td>
<p>character, optional, color of the pie piece for the 'Other' class.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Spatial object in your environment, ready to be plotted.
</p>


<h3>See Also</h3>

<p><code>add_PieLegend</code>, <code>PieData</code>, <code>PieData2</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"> 
# For more examples, see:
# https://github.com/ccamlr/CCAMLRGIS#23-create-pies
  
#Pies of constant size, all classes displayed:
#Create pies
MyPies=create_Pies(Input=PieData,NamesIn=c("Lat","Lon","Sp","N"),Size=50)
#Plot Pies
plot(st_geometry(MyPies),col=MyPies$col)
#Add Pies legend
add_PieLegend(Pies=MyPies,PosX=-0.1,PosY=-1,Boxexp=c(0.5,0.45,0.12,0.45),
             PieTitle="Species")



</code></pre>


</div>