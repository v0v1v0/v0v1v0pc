<div class="container">

<table style="width: 100%;"><tr>
<td>comm.simul</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Framework for community assembly simulation</h2>

<h3>Description</h3>

<p>Flexible framework of individual-based simulation of community assembly
following framework proposed by Botta-Dukat &amp; Czucz (2016), but allowing
intraspecific trait variation (ITV)
</p>


<h3>Usage</h3>

<pre><code class="language-R">comm.simul(
  x = vector(),
  S = 200,
  n.traits = 3,
  J = 300,
  rand.seed = NULL,
  sim.length = 1,
  fSpecPool = "Gener.species.pool",
  competition.kernel = "Gaussian.competition.kernel",
  fSurvive = "Gaussian.tolerance",
  fSeedProduction = "SeedProduction",
  fDispersal = "MetaCom.Dispersal",
  fITV = "randomITV",
  verbose = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Vector of environmental values in communities. If not given, 40
communities are created, with environmental variable equally
spacing from 0.11 to 0.89</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>S</code></td>
<td>
<p>Species pool size</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.traits</code></td>
<td>
<p>Number of traits</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>J</code></td>
<td>
<p>Number of individuals in each community</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rand.seed</code></td>
<td>
<p>Random seed number. Setting the same value allows repeating
the same simulation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sim.length</code></td>
<td>
<p>Length of simulation. <code>sim.length*S</code> cycle (disturbance-seed
production-dispersal-establishment) will happen.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fSpecPool</code></td>
<td>
<p>Name of (the user defined) function that generates the
species pool. See <code>Gener.species.pool</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>competition.kernel</code></td>
<td>
<p>Name of the (user defined) function for calculating
pairwise competition coefficients. See more details
in available functions and specification of your own
function in <code>competition.kernel</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fSurvive</code></td>
<td>
<p>Name of the (user defined) function for calculating survival
probability of seeds. See more details
in available functions and specification of your own
function in <code>tolerance</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fSeedProduction</code></td>
<td>
<p>Name of the user defined function for calculating
number of produced seeds See <code>SeedProduction</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fDispersal</code></td>
<td>
<p>Name of the user defined function for dispersal of
produced seeds among local communities.
See more details in available functions and specification
of your own function in <code>fDispersal</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fITV</code></td>
<td>
<p>Name of the function that define seeds trait values, possibly
considering mother's trait and mothers environment.
If "noITV", there is no intraspecific trait variation.
See more details in available functions and specification
of your own function in <code>fITV</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Runing may take long time. If <code>verbose</code> set to <code>TRUE</code>,
it writes messages into the screen indicating the progress.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters of functions called by the framework.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is a framework for simulation of assembly in a meta-community.
The simulation consists of a community initialization followed by an
iterative simulation of a "disturbanceâ€“regeneration" cycle.
During initialization a species pool is created defining each species by
its trait values. Each locality is characterized by an environmental variable.
Initial composition of local communities is a random selection from the species
pool: species identity is selected independently for each individal with
probability of seedling survival (that depends on local environment and trait value).
</p>
<p>The "disturbance-regeneration" cycle consists of the following steps:
</p>

<ol>
<li>
<p> disturbance event: some randomly selected individuals
die in each community
</p>
</li>
<li>
<p> survivors produce seeds. Seed production depends on fertility
of the locality and competition among coexisting individuals
</p>
</li>
<li>
<p> seeds are dispersed among localities
</p>
</li>
<li>
<p> all seeds germinate and seedlings struggle for survival. The number of
adults in local communities is fixed, thus number of seedlings that can
survive and grow up equals to the number of individulas died in the
disturbance event (in the recent version one individual dies, but planed development
is introducing a disturbance severity/number of deaths parameter)
</p>
</li>
</ol>
<p>It is a flexible framework that calls funcions for:
</p>

<ul>
<li>
<p> generating species pool
(<code>Gener.species.pool</code>)
</p>
</li>
<li>
<p> calculating pairwise competition coefficients
(<code>competition.kernel</code>)
</p>
</li>
<li>
<p> calculating seedling's survival probabilities
(<code>tolerance</code>)
</p>
</li>
<li>
<p> calculating number of produced seeds
(<code>SeedProduction</code>)
</p>
</li>
<li>
<p> calculating trait values of offsprings
(<code>fITV</code>)
</p>
</li>
<li>
<p> seed dispersal among localities
(<code>fDispersal</code>)
</p>
</li>
</ul>
<p>Functions available in the package can be easily replaced by user-defined
functions.
</p>


<h3>Value</h3>

<p>A list with two elements:
</p>
<p><code>$final.community</code> a dataframe containing data on individuals in the final meta-community.
Each individual represented by a row; columns are: sub-community,
species identity, trait values.
</p>
<p><code>$parameters</code> list of simulation parameters (including parameters of functions called by the framework function)
</p>


<h3>References</h3>

<p>Botta-Dukat Z, Czucz B (2016) Testing the ability of
functional diversity indices to detect trait convergence and divergence
using individual-based simulation.
<em>Methods in Ecology and Evolution</em> <b>7</b>(1): 114-126.
doi: <a href="https://doi.org/10.1111/2041-210X.12450">10.1111/2041-210X.12450</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">w&lt;-comm.simul(S=20, J=30)
str(w)

set.seed(1)
w&lt;-comm.simul(S=20, J=30, fITV=NULL)$final.community
w[w[,2]==1,] # Each individuals belonging to Species1 has the same trait values
</code></pre>


</div>