<div class="container">

<table style="width: 100%;"><tr>
<td>n4meansEB</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Number of Subjects Required for a Cluster Randomized Trial with a Continuous Outcome Using Empirical Smoothing</h2>

<h3>Description</h3>

<p>This function provides detailed sample size estimation information to determine
the required number of clusters that must be enrolled in a cluster randomized trial using the
empirical smoothing density for the ICC.
The method applies a smoothed density function (including optional weighting) to obtain
an empirical distribution for the ICC.  Output includes quantiles of values of the
required number of clusters to obtain a prespecified power level.  This version assumes
the outcome of interest is continuous.</p>


<h3>Usage</h3>

<pre><code class="language-R">n4meansEB(ICC, varICC=0, delta, from, to, sigma, m, iter=1000, alpha=0.05, power=0.8, 
two.tailed=TRUE, digits=3, plot=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ICC</code></td>
<td>
<p>A vector of possible ICC values, obtained from a reasonable number of independent
studies.  These values form the basis of the empirical density function for the ICC.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varICC</code></td>
<td>
<p>A vector of variances of the ICC estimates.  In some cases, it may be desirable
to give greater weight (smaller variances) to estimates of the ICC that are obtained from larger
samples.  The default value is zero, which implies that all estimates are weighted equally.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta</code></td>
<td>
<p>The anticipated mean difference in the planned study.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>
<p>A lower limit representing the lowest plausible value for the ICC.  This is used 
in the estimation of the ICC's empirical density function. The default value is zero as the ICC is assumed
to be non-negative.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to</code></td>
<td>
<p>An upper bound for the plausible range of the ICC.  A default value is not specified as this
may range depending on the circumstances.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma</code></td>
<td>
<p>The anticipated variance in each group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>
<p>The anticipated average (or actual) cluster size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iter</code></td>
<td>
<p>The total number of iterations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>The desired type I error rate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>power</code></td>
<td>
<p>The desired level of power, recall power = 1 - type II error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>two.tailed</code></td>
<td>
<p>Logical, If TRUE calculations are based on a two-tailed type I error,
if FALSE, a one-sided calculation is performed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>Number of digits to round calculations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>Logical: Would you like a plot of the estimated density of the ICC and Histogram?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function estimates an empirical density for the ICC using the Gaussian kernel.  Weights
can be incorporated through the use of the varICC parameter.
Values are sampled from this empirical density a large (iter) number of times and the
resulting number of clusters that must be randomized to achieve a pre-specified power level
is then calculated.  The resulting output is the quantiles of the required number of clusters,
illustrating the most likely values of the ICC and number of clusters required.  Additional
details are in Rotondi and Donner (2009).</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ResRho</code></td>
<td>
<p>A vector of values of sampled values of the ICC.  This is of length iter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ResK</code></td>
<td>
<p>A vector of values of the required number of clusters k, using the 
ICC values in ResRho.  This is also of length iter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pe</code></td>
<td>
<p>The anticipated proportion of individuals in the experimental group with the outcome.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pc</code></td>
<td>
<p>The anticipated proportion of individuals in the control group with the outcome.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ICC</code></td>
<td>
<p>The specified vector of values for the ICC.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varICC</code></td>
<td>
<p>A vector of variances of the ICC (study weights).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>
<p>Lower bound in the ICC density estimation.  Default of zero.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to</code></td>
<td>
<p>Upper bound in ICC Density Estimation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>
<p>The size of each cluster.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>The desired type I error rate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>power</code></td>
<td>
<p>The desired level of power, recall power = 1 - type II error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>two.tailed</code></td>
<td>
<p>TRUE or FALSE; Depending on whether the alpha level is one or two sided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>Number of digits to round results.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Michael Rotondi, <a href="mailto:mrotondi@yorku.ca">mrotondi@yorku.ca</a></p>


<h3>References</h3>

<p>Matthews JNS.  Introduction to Randomized Controlled Clinical Trials (2nd Ed.) Chapman &amp; Hall: New York, 2006.
</p>
<p>Donner A and Klar N.  Design and Analysis of Cluster Randomization Trials in Health Research.  Arnold: London, 2000.
</p>
<p>Rotondi M and Donner A.  (2009) Sample Size Estimation in Cluster Randomized Trials: An Empirical Bayes Approach, Journal
of Educational and Behavioral Statistics, 34:229-237. 
</p>


<h3>See Also</h3>

<p><code>n4propsEB</code></p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: ICC values are from Rotondi and Donner (2009).  Suppose classrooms of size 25 are randomized 
with hypothetical experimental rates of 0.05 and control rates of 0.18.  Plots are suppressed, 
and iter = 50 for testing purposes.
## End(Not run)
n4meansEB(delta=0.5, sigma=1, m=25, ICC=c(0.162, 0.205, 0.234, 0.253), 
varICC= c(0.030, 0.032, 0.010, 0.026)^2, from=0.15, to=0.28, iter=50, plot=FALSE);
</code></pre>


</div>