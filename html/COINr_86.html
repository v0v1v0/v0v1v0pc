<div class="container">

<table style="width: 100%;"><tr>
<td>Normalise.coin</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a normalised data set</h2>

<h3>Description</h3>

<p>Creates a normalised data set using specifications specified in <code>global_specs</code>. Columns of <code>dset</code> can also optionally be
normalised with individual specifications using the <code>indiv_specs</code> argument. If indicators should have their
directions reversed, this can be specified using the <code>directions</code> argument. Non-numeric columns are ignored
automatically by this function. By default, this function normalises each indicator using the "min-max" method, scaling indicators to lie between
0 and 100. This calls the <code>n_minmax()</code> function. COINr has a number of built-in normalisation functions of the form <code style="white-space: pre;">⁠n_*()⁠</code>. See <a href="https://bluefoxr.github.io/COINr/articles/normalise.html#built-in-normalisation-functions">online documentation</a>
for details.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'coin'
Normalise(
  x,
  dset,
  global_specs = NULL,
  indiv_specs = NULL,
  directions = NULL,
  out2 = "coin",
  write_to = NULL,
  write2log = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A coin</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dset</code></td>
<td>
<p>A named data set found in <code>.$Data</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>global_specs</code></td>
<td>
<p>Specifications to apply to all columns, apart from those specified by <code>indiv_specs</code>. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indiv_specs</code></td>
<td>
<p>Specifications applied to specific columns, overriding those specified in <code>global_specs</code>.
See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>directions</code></td>
<td>
<p>An optional data frame containing the following columns:
</p>

<ul>
<li> <p><code>iCode</code> The indicator code, corresponding to the column names of the data set
</p>
</li>
<li> <p><code>Direction</code> numeric vector with entries either <code>-1</code> or <code>1</code>
If <code>directions</code> is not specified, the directions will be taken from the <code>iMeta</code> table in the coin, if available.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out2</code></td>
<td>
<p>Either <code>"coin"</code> to return normalised data set back to the coin, or <code>df</code> to simply return a data
frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>write_to</code></td>
<td>
<p>Optional character string for naming the data set in the coin. Data will be written to
<code>.$Data[[write_to]]</code>. Default is <code>write_to == "Normalised"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>write2log</code></td>
<td>
<p>Logical: if <code>FALSE</code>, the arguments of this function are not written to the coin log, so this
function will not be invoked when regenerating. Recommend to keep <code>TRUE</code> unless you have a good reason to do otherwise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed to or from other methods.</p>
</td>
</tr>
</table>
<h3>Details</h3>



<h4>Global specification</h4>

<p>The <code>global_specs</code> argument is a list which specifies the normalisation function and any function parameters
that should be used to normalise the indicators found in the data set. Unless <code>indiv_specs</code> is specified, this will be applied
to all indicators. The list should have two entries:
</p>

<ul>
<li> <p><code>.$f_n</code>: the name of the function to use to normalise each indicator
</p>
</li>
<li> <p><code>.$f_n_para</code>: any further parameters to pass to <code>f_n</code>, apart from the numeric vector (each column of the data set)
</p>
</li>
</ul>
<p>In this list, <code>f_n</code> should be a character string which is the name of a normalisation
function. For example, <code>f_n = "n_minmax"</code> calls the <code>n_minmax()</code> function. <code>f_n_para</code> is a list of any
further arguments to <code>f_n</code>. This means that any function can be passed to <code>Normalise()</code>, as long as its
first argument is <code>x</code>, a numeric vector, and it returns a numeric vector of the same length. See <code>n_minmax()</code>
for an example.
</p>
<p><code>f_n_para</code> is <em>required</em> to be a named list. So e.g. if we define a function <code>f1(x, arg1, arg2)</code> then we should
specify <code>f_n = "f1"</code>, and <code>f_n_para = list(arg1 = val1, arg2 = val2)</code>, where <code>val1</code> and <code>val2</code> are the
values assigned to the arguments <code>arg1</code> and <code>arg2</code> respectively.
</p>
<p>The default list for <code>global_specs</code> is: <code>list(f_n = "n_minmax", f_n_para = list(l_u = c(0,100)))</code>, i.e.
min-max normalisation between 0 and 100.
</p>
<p>Note, all COINr normalisation functions (passed to <code>f_n</code>) are of the form <code style="white-space: pre;">⁠n_*()⁠</code>. Type <code>n_</code> in the R Studio console and press the Tab key to see a list.
</p>



<h4>Individual parameter specification with iMeta</h4>

<p>For some normalisation methods we may use the same function for all indicators but use different parameters - for example, using
distance to target normalisation or goalpost normalisation. COINr now supports specifying these parameters in the <code>iMeta</code> table.
To enable this, set <code>f_n_para = "use_iMeta"</code> within the <code>global_specs</code> list.
</p>
<p>For this to work you will also need to add the correct-named columns in the <code>iMeta</code> table. To see which column names to add, check the
function documentation of the normalisation function you wish to use (e.g. <code>n_goalposts()</code>). See also examples in the
<a href="https://bluefoxr.github.io/COINr/articles/normalise.html">normalisation vignette</a>. These columns should be added before construction of
the coin.
</p>



<h4>Individual column specification</h4>

<p>To give full individual control, indicators can be normalised with different normalisation functions and parameters using the
<code>indiv_specs</code> argument. This must be specified as a named list e.g. <code>list(i1 = specs1, i2 = specs2)</code> where
<code>i1</code> and <code>i2</code> are <code>iCode</code>s to apply individual normalisation to, and <code>specs1</code> and <code>specs2</code> are
respectively lists of the same format as <code>global_specs</code> (see above). In other words, <code>indiv_specs</code> is a big
list wrapping together <code>global_specs</code>-style lists. Any <code>iCode</code>s not named in <code>indiv_specs</code> (
i.e. those not in <code>names(indiv_specs)</code>) are normalised using the specifications from <code>global_specs</code>. So
<code>indiv_specs</code> lists the exceptions to <code>global_specs</code>.
</p>
<p>See also <code>vignette("normalise")</code> for more details.
</p>



<h3>Value</h3>

<p>An updated coin
</p>


<h3>Examples</h3>

<pre><code class="language-R"># build example coin
coin &lt;- build_example_coin(up_to = "new_coin")

# normalise the raw data set
coin &lt;- Normalise(coin, dset = "Raw")

</code></pre>


</div>