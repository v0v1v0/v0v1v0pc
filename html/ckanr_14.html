<div class="container">

<table style="width: 100%;"><tr>
<td>ckanr_setup</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Configure default CKAN settings</h2>

<h3>Description</h3>

<p>Configure default CKAN settings
</p>


<h3>Usage</h3>

<pre><code class="language-R">ckanr_setup(
  url = "https://data.ontario.ca/",
  key = NULL,
  test_url = NULL,
  test_key = NULL,
  test_did = NULL,
  test_rid = NULL,
  test_gid = NULL,
  test_oid = NULL,
  test_behaviour = NULL,
  proxy = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>url</code></td>
<td>
<p>A CKAN URL (optional), default: https://data.ontario.ca</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key</code></td>
<td>
<p>A CKAN API key (optional, character)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test_url</code></td>
<td>
<p>(optional, character) A valid CKAN URL for testing purposes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test_key</code></td>
<td>
<p>(optional, character) A valid CKAN API key privileged to
create datasets at <code>test_url</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test_did</code></td>
<td>
<p>(optional, character) A valid CKAN dataset ID, existing at
<code>test_url</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test_rid</code></td>
<td>
<p>(optional, character) A valid CKAN resource ID, attached to
<code>did</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test_gid</code></td>
<td>
<p>(optional, character) A valid CKAN group name at <code>test_url</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test_oid</code></td>
<td>
<p>(optional, character) A valid CKAN organization name at
<code>test_url</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test_behaviour</code></td>
<td>
<p>(optional, character) Whether to fail ("FAIL") or skip
("SKIP") writing tests in case of problems with the configured test CKAN.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>proxy</code></td>
<td>
<p>an object of class <code>request</code> from a call to
<code>crul::proxy()</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>ckanr_setup()</code> sets CKAN connection details. ckanr's functions
default to use the default URL and API key unless specified explicitly.
</p>
<p>ckanr's automated tests require a valid CKAN URL, a privileged API key
for that URL, plus the IDs of an existing dataset and an existing resource,
respectively.
</p>
<p>The writing tests (create, update, delete) can fail for two reasons:
failures in ckanr's code which the tests aim to detect,
or failures in the configured CKAN, which are not necessarily a problem
with ckanr's code but prevent the tests to prove otherwise.
</p>
<p>Setting <code>test_behaviour</code> to <code>"SKIP"</code> will allow writing tests to skip
if the configured test CKAN fails. This is desirable to e.g. test the other
functions even if the tester has no write access to a CKAN instance.
</p>
<p>Setting <code>test_behaviour</code> to <code>"FAIL"</code> will let the tester find any
problems with both the configured test CKAN and the writing functions.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># CKAN users without admin/editor privileges could run:
ckanr_setup(url = "https://data.ontario.ca/")

# Privileged CKAN editor/admin users can run:
ckanr_setup(url = "https://data.ontario.ca/", key = "some-CKAN-API-key")

# ckanR developers/testers can run:
ckanr_setup(url = "https://data.ontario.ca/", key = "some-CKAN-API-key",
           test_url = "http://test-ckan.gov/",test_key = "test-ckan-API-key",
           test_did = "test-ckan-dataset-id",test_rid = "test-ckan-resource-id",
           test_gid = "test-group-name", test_oid = "test-organzation-name",
           test_behaviour = "FAIL")

# Not specifying the default CKAN URL will reset the CKAN URL to its default
# "https://data.ontario.ca/":
ckanr_setup()

# set a proxy
ckanr_setup(proxy = crul::proxy("64.251.21.73:8080"))
ckanr_settings()
## run without setting proxy to reset to no proxy
ckanr_setup()
ckanr_settings()
</code></pre>


</div>