<div class="container">

<table style="width: 100%;"><tr>
<td>update.ca_model</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Update a cellular automaton</h2>

<h3>Description</h3>

<p>Update the definition of a stochastic cellular automaton
(SCA), using new parameters, type of wrapping, or any other parameters
entering in the definition of the model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'ca_model'
update(
  object,
  parms = NULL,
  neighbors = NULL,
  wrap = NULL,
  fixed_neighborhood = NULL,
  check_model = "quick",
  verbose = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>The SCA object (returned by <code>camodel</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parms</code></td>
<td>
<p>a named list of parameters, which should be all numeric,
single values. If this list contains only a subset of model parameters, the
old parameter values will be reused for those not provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>neighbors</code></td>
<td>
<p>The number of neighbors to use in the cellular automaton
('4' for 4-way or von-Neumann neghborhood, or '8' for an 8-way or Moore
neighborhood)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wrap</code></td>
<td>
<p>If <code>TRUE</code>, then the 2D grid on which the model is run wraps
around at the edges (the top/leftmost cells will be considered neighbors
of the bottom/rightmost cells)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fixed_neighborhood</code></td>
<td>
<p>When not using wrapping around the edges (<code>wrap = TRUE</code>,
the number of neighbors per cell is variable, which can slow down the simulation.
Set this option to <code>TRUE</code> to consider that the number of neighbors is always
four or eight, regardless of the position of the cell in the landscape, at the cost
of approximate dynamics on the edge of the landscape.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_model</code></td>
<td>
<p>A check of the model definition is done to make sure there
are no issues with it (e.g. probabilities outside the [1,0] interval, or an
unsupported model definition). A quick check that should catch most problems is
performed if check_model is "quick", an extensive check that tests all
neighborhood configurations is done with "full", and no check is performed with
"none".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>whether information should be printed when parsing the model
definition.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>extra arguments are ignored</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function updates some aspects of a pre-defined stochastic celullar
automaton, such as parameter values, the type of neighborhood, whether
to wrap around the edge of space, etc. It is handy when running multiple
simulations, and only a few aspects of the model needs to be changed, such as
parameter values. Note that this function cannot add or remove states to a model.
</p>
<p>Note that the <code>parms</code> list may only specify a subset of the model parameters
to update. In this case, old parameter values not specified in the call to
<code>update</code> will be re-used.
</p>


<h3>Value</h3>

<p>This function returns a list with class <code>ca_model</code> with the changes applied to 
the original model (see <code>camodel</code> for details about this type of
object).
</p>


<h3>See Also</h3>

<p>camodel, run_camodel...
</p>


<h3>Examples</h3>

<pre><code class="language-R">

# Update the parameters of a model
mussels &lt;- ca_library("musselbed")
mussels[["parms"]] # old parameters
mussels_new &lt;- update(mussels, parms = list(d = 0.2, delta = 0.1, r = 0.8))
mussels_new[["parms"]] # updated parameters

# Update the type of neighborhood, wrapping around the edges, and
# the parameters
mussels_new &lt;- update(mussels,
                      parms = list(d = 0.2, delta = 0.1, r = 0.8),
                      wrap = TRUE,
                      neighbors = 8)
mussels_new



# Run the model for different values of d, the death rate of mussels
ds &lt;- seq(0, 0.25, length.out = 12)
initmat &lt;- generate_initmat(mussels, c(0.5, 0.5, 0), nrow = 64, ncol = 64)
results &lt;- lapply(ds, function(this_dvalue) {
  musselmod &lt;- update(mussels, parms = list(d = this_dvalue))
  run &lt;- run_camodel(musselmod, initmat, times = seq(0, 128))
  data.frame(d = this_dvalue,
             as.data.frame(tail(run[["output"]][["covers"]], 1)))
})

results &lt;- do.call(rbind, results)
plot(results[ ,"d"], results[ ,"MUSSEL"], type = "b",
     xlab = "d", ylab = "Mussel cover")



</code></pre>


</div>