<div class="container">

<table style="width: 100%;"><tr>
<td>add_probs.glm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Response Probabilities for Generalized Linear Models</h2>

<h3>Description</h3>

<p>This is the method <code>add_probs</code> uses if the model fit is an
object of class <code>glm</code>. Probabilities are determined through
simulation, using the same method as <code>add_pi.glm</code>. Currently,
only logistic, Poisson, Quasipoisson, and Gamma models are
supported.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'glm'
add_probs(
  df,
  fit,
  q,
  name = NULL,
  yhatName = "pred",
  comparison = "&lt;",
  nSims = 2000,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A data frame of new data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>An object of class <code>glm</code>. Predictions are made with
this object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q</code></td>
<td>
<p>A double. A quantile of the response distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p><code>NULL</code> or a string. If <code>NULL</code>, probabilities
automatically will be named by <code>add_probs()</code>, otherwise,
the probabilities will be named <code>name</code> in the returned
dataframe.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yhatName</code></td>
<td>
<p>A string. Name of the vector of predictions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>comparison</code></td>
<td>
<p>A character vector of length one. If
<code>comparison = "&lt;"</code>, then <code class="reqn">Pr(Y|X &lt; q)</code> is
calculated. Any comparison is allowed in Poisson regression,
but only certain comparisons may be made in Logistic
regression. See the Details section.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nSims</code></td>
<td>
<p>A positive integer. Controls the number of simulated
draws to make if the model is Poisson.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Any of the five comparisons may be made for a Poisson,
quasipoisson, or Gamma model: <code>comparison = "&lt;"</code>, <code>"&gt;"</code>,
<code>"="</code>, <code>"&lt;="</code>, or <code>"&gt;="</code>. For logistic regression,
the comparison statement must be equivalent to <code class="reqn">Pr(Y|x = 0)</code> or
<code class="reqn">Pr(Y|x = 1)</code>.
</p>
<p>If <code>add_probs</code> is called on a Poisson, quasiPoisson or Gamma
model, a simulation is performed using <code>arm::sim</code>.
</p>
<p>If <code>add_probs</code> is called on a logistic model, the fitted
probabilities are used directly (no simulation is required).
</p>
<p>If <code>add_probs</code> is called on a Gaussian GLM, the returned
probabilities are identical to those given by
<code>add_probs.lm</code>. In this case, the comparisons <code>&lt;</code> and
<code>&lt;=</code> are identical (likewise for <code>&gt;</code> and <code>&gt;=</code>). If
the comparison <code>=</code> is used in the Gaussian GLM, an informative
error is returned.
</p>


<h3>Value</h3>

<p>A dataframe, <code>df</code>, with predicted values and
probabilities attached.
</p>


<h3>See Also</h3>

<p><code>add_ci.glm</code> for confidence intervals for
<code>glm</code> objects, <code>add_pi.glm</code> for prediction
intervals of <code>glm</code> objects, and
<code>add_quantile.glm</code> for response quantiles of
<code>glm</code> objects.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Fit a Poisson model
fit &lt;- glm(dist ~ speed, data = cars, family = "poisson")

# Determine the probability that a new dist is less than 20, given
# the Poisson model.
add_probs(cars, fit, q = 20)

# Determine the probability that a new dist is greater than 20,
# given the Poisson model.
add_probs(cars, fit, q = 30, comparison = "&gt;")

# Determine the probability that a new dist is greater than or
# equal to 20, given the Poisson model.
add_probs(cars, fit, q = 30, comparison = "&gt;=")

# Fit a logistic model
fit2 &lt;- glm(I(dist &gt; 30) ~ speed, data = cars, family = "binomial")
add_probs(cars, fit2, q = 0, comparison = "=")
add_probs(cars, fit2, q = 1, comparison = "=")

</code></pre>


</div>