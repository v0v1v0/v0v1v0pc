<div class="container">

<table style="width: 100%;"><tr>
<td>simulate_trial</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulates the cohort trial.</h2>

<h3>Description</h3>

<p>Simulates the cohort trial.
</p>


<h3>Usage</h3>

<pre><code class="language-R">simulate_trial(
  n_fin,
  cohorts_start = 1,
  composite = "or",
  rr_comb1,
  rr_plac1,
  rr_comb2,
  rr_plac2,
  random_type = NULL,
  random = FALSE,
  correlation,
  prob_comb1_rr = NULL,
  prob_plac1_rr = NULL,
  prob_comb2_rr = NULL,
  prob_plac2_rr = NULL,
  stage_data = FALSE,
  cohort_random = NULL,
  cohorts_max = 4,
  sr_drugs_pos = 1,
  sr_pats = cohorts_max * (n_fin + 3 * cohorts_max),
  sr_first_pos = FALSE,
  cohort_offset = 0,
  sharing_type = "all",
  safety_prob = 0,
  cohorts_sim = Inf,
  missing_prob = 0,
  cohort_fixed = NULL,
  accrual_type = "fixed",
  accrual_param = 9,
  hist_lag = 48,
  analysis_times = c(0.5, 0.75, 1),
  time_trend = time_trend,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n_fin</code></td>
<td>
<p>Sample size per cohort at final</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohorts_start</code></td>
<td>
<p>Number of cohorts to start the platform with</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>composite</code></td>
<td>
<p>Rule for deriving the composite endpoint. By default "or", otherwise "and"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rr_comb1</code></td>
<td>
<p>Response rates of treatment, histology endpoint 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rr_plac1</code></td>
<td>
<p>Response rate of the SoC, histology endpoint 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rr_comb2</code></td>
<td>
<p>Response rates of treatment, histology endpoint 2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rr_plac2</code></td>
<td>
<p>Response rate of the SoC, histology endpoint 2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>random_type</code></td>
<td>
<p>How should the response rates be drawn randomly? Options are:
</p>
<p>"absolute": Specify absolute response rates that will be drawn with a certain probability
</p>
<p>"risk_difference": Specify absolute response rates for placebo which will be drawn randomly,
plus specify vectors for absolute treatment effects of mono therapies over placebo and
for combo over the mono therapies.
</p>
<p>"risk_ratio": Specify absolute response rates for placebo which will be drawn randomly, plus specify vectors
for relative treatment effects of mono therapies over placebo and for combo over the mono therapies.
</p>
<p>"odds_ratios": Specify response rate for placebo, specify odds-ratios for mono therapies
(via rr_back and rr_mono) and respective probabilities.
On top, specify interaction for the combination therapy via rr_comb with prob_rr_comb.
</p>
<p>Set: odds_combo = odds_plac * or_mono1 * or_mono2 * rr_comb.
If rr_comb &gt; 1 -&gt; synergistic, if rr_comb = 1 -&gt; additive. If rr_comb &lt; 1 -&gt; antagonistic.
Default is "NULL".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>random</code></td>
<td>
<p>Should the response rates of the arms be randomly drawn from rr_exp? Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>correlation</code></td>
<td>
<p>Correlation between histology endpoints</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob_comb1_rr</code></td>
<td>
<p>If random == TRUE, what are the probabilities with which the elements of rr_comb1 should be drawn?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob_plac1_rr</code></td>
<td>
<p>If random == TRUE, what are the probabilities with which the elements of rr_plac1 should be drawn?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob_comb2_rr</code></td>
<td>
<p>If random == TRUE, what are the probabilities with which the elements of rr_comb2 should be drawn?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob_plac2_rr</code></td>
<td>
<p>If random == TRUE, what are the probabilities with which the elements of rr_plac2 should be drawn?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stage_data</code></td>
<td>
<p>Should individual stage data be passed along? Default is TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohort_random</code></td>
<td>
<p>If not NULL, indicates that new arms/cohorts should be randomly started.
For every timestep, there is a cohort_random probability that a new cohort will be started.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohorts_max</code></td>
<td>
<p>Maximum number of cohorts that are allowed to be added throughout the trial</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sr_drugs_pos</code></td>
<td>
<p>Stopping rule for successful experimental arms; Default = 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sr_pats</code></td>
<td>
<p>Stopping rule for total number of patients; Default = cohorts_max * n_fin + error term based on randomization</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sr_first_pos</code></td>
<td>
<p>Stopping rule for first successful cohort;
if TRUE, after first cohort was found to be successful, no further cohorts will be included
but cohorts will finish evaluating, unless other stopping rules reached prior.
Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohort_offset</code></td>
<td>
<p>Minimum number of time between adding new cohorts</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sharing_type</code></td>
<td>
<p>Which backbone and placebo data should be used for arm comparisons; Default is "all".
Another option is "concurrent" or "dynamic" or "cohort".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>safety_prob</code></td>
<td>
<p>Probability for a random stopping after every patient</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohorts_sim</code></td>
<td>
<p>Maximum number of cohorts that can run simultaneously</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing_prob</code></td>
<td>
<p>Probability for a missing value at final (independent of treatment)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohort_fixed</code></td>
<td>
<p>If not NULL, fixed timesteps after which a cohort will be included</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>accrual_type</code></td>
<td>
<p>Type of patient accrual; choices are "fixed", "poisson" or "exponential"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>accrual_param</code></td>
<td>
<p>Parameter used for patient accrual</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hist_lag</code></td>
<td>
<p>Time until histology outcome is observed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>analysis_times</code></td>
<td>
<p>Vector of information fractions needed for first interim, second interim and final</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_trend</code></td>
<td>
<p>Additive term by which response rates increase at every time step</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to be passed to decision function, such as decision making criteria</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>List containing: Responses and patients on experimental and control arm, total treatment successes and failures and final p-value
</p>


<h3>Examples</h3>

<pre><code class="language-R">
random &lt;- TRUE

rr_comb1 &lt;- 0.10
prob_comb1_rr &lt;- 1
rr_comb2 &lt;- 0.45
prob_comb2_rr &lt;- 1
rr_plac1 &lt;- 0.10
prob_plac1_rr &lt;- 1
rr_plac2 &lt;- 0.20
prob_plac2_rr &lt;- 1

correlation &lt;- 0.8

cohorts_start &lt;- 2
cohorts_max &lt;- 5
safety_prob &lt;- 0
sharing_type &lt;- "concurrent"
sr_drugs_pos &lt;- 5
sr_first_pos &lt;- FALSE
n_fin &lt;- 100
stage_data &lt;- TRUE
cohort_random &lt;- 0.01
cohort_offset &lt;- 0
cohorts_sim &lt;- Inf
random_type &lt;- "absolute"
missing_prob &lt;- 0.2
cohort_fixed &lt;- 5
hist_lag &lt;- 48
analysis_times &lt;- c(0.5, 0.75, 1)
accrual_type &lt;- "fixed"
accrual_param &lt;- 9
time_trend &lt;- 0.001
composite &lt;- "or"

# Comparison IA1
Bayes_Sup11 &lt;- matrix(nrow = 2, ncol = 2)
Bayes_Sup11[1,] &lt;- c(0.00, 0.95)
Bayes_Sup11[2,] &lt;- c(0.10, 0.80)
# Comparison IA2
Bayes_Sup12 &lt;- matrix(nrow = 2, ncol = 2)
Bayes_Sup12[1,] &lt;- c(0.00, 0.95)
Bayes_Sup12[2,] &lt;- c(0.10, 0.80)
# Comparison IA3
Bayes_Sup13 &lt;- matrix(nrow = 2, ncol = 2)
Bayes_Sup13[1,] &lt;- c(0.00, 0.95)
Bayes_Sup13[2,] &lt;- c(0.10, 0.80)

Bayes_Sup1 &lt;- Bayes_Sup2 &lt;- list(list(Bayes_Sup11), list(Bayes_Sup12), list(Bayes_Sup13))

# Comparison IA1
Bayes_Fut11 &lt;- matrix(nrow = 1, ncol = 2)
Bayes_Fut11[1,] &lt;- c(0.00, 0.20)
# Comparison IA2
Bayes_Fut12 &lt;- matrix(nrow = 1, ncol = 2)
Bayes_Fut12[1,] &lt;- c(0.00, 0.30)
# Comparison IA3
Bayes_Fut13 &lt;- matrix(nrow = 1, ncol = 2)
Bayes_Fut13[1,] &lt;- c(NA, NA)
# Endpoint 1+2
Bayes_Fut1 &lt;- Bayes_Fut2 &lt;- list(list(Bayes_Fut11), list(Bayes_Fut12), list(Bayes_Fut13))

simulate_trial(
 n_fin = n_fin, random_type = random_type, composite = composite,
 rr_comb1 = rr_comb1, rr_comb2 = rr_comb2, rr_plac1 = rr_plac1, rr_plac2 = rr_plac2,
 random = random, prob_comb1_rr = prob_comb1_rr, prob_comb2_rr = prob_comb2_rr,
 prob_plac1_rr = prob_plac1_rr, prob_plac2_rr = prob_plac2_rr, correlation = correlation,
 stage_data = stage_data, cohort_random = cohort_random, cohorts_max = cohorts_max,
 sr_drugs_pos = sr_drugs_pos, sharing_type = sharing_type, Bayes_Fut1 = Bayes_Fut1,
 safety_prob = safety_prob, Bayes_Sup1 = Bayes_Sup1, Bayes_Sup2 = Bayes_Sup2,
 cohort_offset = cohort_offset, sr_first_pos = sr_first_pos, Bayes_Fut2 = Bayes_Fut2,
 missing_prob = missing_prob, cohort_fixed = cohort_fixed, accrual_type = accrual_type,
 accrual_param = accrual_param, hist_lag = hist_lag, analysis_times = analysis_times,
 time_trend = time_trend, cohorts_start = cohorts_start, cohorts_sim = cohorts_sim
)

</code></pre>


</div>