<div class="container">

<table style="width: 100%;"><tr>
<td>mcdina</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Multiple Choice DINA Model
</h2>

<h3>Description</h3>

<p>The function <code>mcdina</code> implements the multiple choice DINA model
(de la Torre, 2009; see also Ozaki, 2015; Chen &amp; Zhou, 2017)
for multiple groups. Note that the dataset must contain
integer values <code class="reqn">1,\ldots, K_j</code> for each item. The multiple choice
DINA model assumes that each item category possesses different diagnostic capacity.
Using this modeling approach, different distractors of a
multiple choice item can be of different diagnostic value. The Q-matrix can also
contain integer values which allows the definition of polytomous attributes.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mcdina(dat, q.matrix, group=NULL, itempars="gr", weights=NULL,
    skillclasses=NULL, zeroprob.skillclasses=NULL,
    reduced.skillspace=TRUE, conv.crit=1e-04,
    dev.crit=0.1, maxit=1000, progress=TRUE)

## S3 method for class 'mcdina'
summary(object, digits=4, file=NULL,  ...)

## S3 method for class 'mcdina'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>

<p>A required <code class="reqn">N \times J</code> data matrix containing integer responses
(1, 2, <code class="reqn">\ldots</code>, <code class="reqn">K</code>) of <code class="reqn">N</code> respondents to <code class="reqn">J</code> test items.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q.matrix</code></td>
<td>

<p>A required matrix specifying which item category is intended to measure which skill.
The Q-matrix has <code class="reqn">K+2</code> columns for a model with <code class="reqn">K</code> skills.
In the first column should be the item index, in the second column the
category integer and the rest of the columns contains the 'ordinary'
Q-matrix specification. See <code>data.cdm01$q.matrix</code> for the layout of such a
Q-matrix. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>

<p>An optional vector of group identifiers for multiple group estimation.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>itempars</code></td>
<td>

<p>A character or a character vector of length <code class="reqn">J</code> indicating whether
item parameters should separately estimated within each group. The default
is <code>"gr"</code>, for group-invariant item parameters choose <code>"jo"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>

<p>An optional vector of sample weights.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skillclasses</code></td>
<td>

<p>An optional matrix for determining the skill space. The argument can be used
if a user wants less than the prespecified number of <code class="reqn">2^K</code> skill classes.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zeroprob.skillclasses</code></td>
<td>

<p>An optional vector of integers which indicates which skill classes should have
zero probability. Default is <code>NULL</code> (no skill classes with zero probability).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reduced.skillspace</code></td>
<td>
<p>An optional logical indicating whether the
skill space should be reduced to cover only bivariate associations
among skills (see Xu &amp; von Davier, 2008).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conv.crit</code></td>
<td>

<p>Convergence criterion for change in item parameter values
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dev.crit</code></td>
<td>

<p>Convergence criterion for change in deviance values
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxit</code></td>
<td>

<p>Maximum number of iterations.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>

<p>An optional logical indicating whether the function should print the
progress of iteration in the estimation process.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>

<p>Object of class <code>mcdina</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>

<p>Number of digits to display in <code>summary.mcdina</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>Optional file name for a file in which <code>summary</code>
should be sinked.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Object of class <code>mcdina</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to be passed.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The multiple choice DINA model defines for each item category <code class="reqn">jc</code> the
necessary skills to master this attribute. Therefore, the vector of skills
<code class="reqn">\bold{\alpha}</code> is transformed into item-specific latent responses
<code class="reqn">\eta_{j}</code> which are functions of
<code class="reqn">\bold{\alpha}</code> and Q-matrix entries <code class="reqn">q_{jc}</code>
(just like in the DINA model). If there are <code class="reqn">K_j</code> item categories for item <code class="reqn">j</code>,
then there exist at most <code class="reqn">K_j</code> values of the latent response <code class="reqn">\eta_j</code>.
</p>
<p>The multiple choice DINA model estimates the item response function as
</p>
<p style="text-align: center;"><code class="reqn"> P( X_{nj}=k | \eta_{nj}=l )=p_{jkl}  </code>
</p>

<p>with the constraint <code class="reqn">\sum_k p_{jkl}=1 </code>.
</p>


<h3>Value</h3>

<p>A list with following entries
</p>
<table>
<tr style="vertical-align: top;">
<td><code>item</code></td>
<td>
<p>Data frame with item parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>posterior</code></td>
<td>
<p>Individual posterior distribution</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>likelihood</code></td>
<td>
<p>Individual likelihood</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ic</code></td>
<td>
<p>List with information criteria</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q.matrix</code></td>
<td>
<p>Used Q-matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pik</code></td>
<td>
<p>Array of item-category probabilities</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta</code></td>
<td>
<p>Array of item parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>se.delta</code></td>
<td>
<p>Array of standard errors of item parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>itemstat</code></td>
<td>
<p>Data frame containing item definitions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.ik</code></td>
<td>
<p>Array of expected counts</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deviance</code></td>
<td>
<p>Deviance</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>attribute.patt</code></td>
<td>
<p>Probabilities of latent classes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>attribute.patt.splitted</code></td>
<td>
<p>Splitted attribute pattern</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skill.patt</code></td>
<td>
<p>Marginal skill probabilities</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MLE.class</code></td>
<td>
<p>Classified skills for each student (MLE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MAP.class</code></td>
<td>
<p>Classified skills for each student (MAP)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>EAP.class</code></td>
<td>
<p>Classified skills for each student (EAP)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>
<p>Used dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skillclasses</code></td>
<td>
<p>Used skill classes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>Used group identifiers</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lc</code></td>
<td>
<p>Data frame containing definitions of each item category</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lr</code></td>
<td>
<p>Data frame containing the relation of each latent class and each item category</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iter</code></td>
<td>
<p>Number of iterations</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>itempars</code></td>
<td>
<p>Used specification of item parameter estimation type</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>converged</code></td>
<td>
<p>Logical indicating whether convergence was achieved.</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>If <code>dat</code> and <code>q.matrix</code> correspond to the 'ordinary format' which is used
in <code>gdina</code>, then the function <code>mcdina</code> will detect it and convert it
into the necessary format (see Example 2).
</p>


<h3>References</h3>

<p>Chen, J., &amp; Zhou, H. (2017) Test designs and modeling under the general
nominal diagnosis model framework. <em>PLoS ONE 12</em>(6), e0180016.
</p>
<p>de la Torre, J. (2009). A cognitive diagnosis model for cognitively based
multiple-choice options. <em>Applied Psychological Measurement, 33</em>, 163-183.
</p>
<p>Ozaki, K. (2015). DINA models for multiple-choice items with few parameters:
Considering incorrect answers.
<em>Applied Psychological Measurement, 39</em>(6), 431-447.
</p>
<p>Xu, X., &amp; von Davier, M. (2008). <em>Fitting the structured general diagnostic
model to NAEP data</em>. ETS Research Report ETS RR-08-27. Princeton, ETS.
</p>


<h3>See Also</h3>

<p>See <code>din</code> for estimating the DINA/DINO model and <code>gdina</code>
for estimating the GDINA model.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#############################################################################
# EXAMPLE 1: Multiple choice DINA model for data.cdm01 dataset
#############################################################################

data(data.cdm01, package="CDM")

dat &lt;- data.cdm01$data
group &lt;- data.cdm01$group
q.matrix &lt;- data.cdm01$q.matrix

#*** Model 1: Single group model
mod1 &lt;- CDM::mcdina( dat=dat, q.matrix=q.matrix )
summary(mod1)

#*** Model 2: Multiple group model with group-invariant item parameters
mod2 &lt;- CDM::mcdina( dat=dat, q.matrix=q.matrix, group=group, itempars="jo")
summary(mod2)

## Not run: 
#*** Model 3: Multiple group model with group-specific item parameters
mod3 &lt;- CDM::mcdina( dat=dat, q.matrix=q.matrix, group=group, itempars="gr")
summary(mod3)

#*** Model 4: Multiple group model with some group-specific item parameters
itempars &lt;- rep("jo", ncol(dat))
itempars[ c( 2, 7, 9) ] &lt;- "gr" # set items 2,7 and 9 group specific
mod4 &lt;- CDM::mcdina( dat=dat, q.matrix=q.matrix, group=group, itempars=itempars)
summary(mod4)

#*** Model 5: Reduced skill space

# define skill classes
skillclasses &lt;- scan(nlines=1)  # read only one line
    0 0 0    1 0 0    0 1 0    0 0 1    1 1 0     1 1 1
skillclasses &lt;- matrix( skillclasses, ncol=3, byrow=TRUE )
mod5 &lt;- CDM::mcdina( dat, q.matrix=q.matrix, group=group0,  skillclasses=skillclasses )
summary(mod5)

#*** Model 6: Reduced skill space with setting zero probabilities
#             for some latent classes

# set probabilities of classes P101 P011 (6th and 7th class) to zero
zeroprob.skillclasses &lt;- c(6,7)
mod6 &lt;- CDM::mcdina( dat, q.matrix, group=group, zeroprob.skillclasses=zeroprob.skillclasses )
summary(mod6)

#############################################################################
# EXAMPLE 2: Using the mcdina function for estimating the DINA model
#############################################################################

data(sim.dina, package="CDM")
data(sim.qmatrix, package="CDM")

# estimate the DINA model
mod &lt;- CDM::mcdina( sim.dina, q.matrix=sim.qmatrix )
summary(mod)

#############################################################################
# EXAMPLE 3: MCDINA model with polytomous attributes
#############################################################################

data(data.cdm02, package="CDM")
dat &lt;- data.cdm02$data
q.matrix &lt;- data.cdm02$q.matrix

# estimate model with polytomous attribute B1
mod1 &lt;- CDM::mcdina( dat, q.matrix=q.matrix )
summary(mod1)

## End(Not run)
</code></pre>


</div>