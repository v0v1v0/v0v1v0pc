<div class="container">

<table style="width: 100%;"><tr>
<td>preProcess_ransacLevel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Finds plane of breechface marks using the RANSAC method</h2>

<h3>Description</h3>

<p>Finds plane of breechface marks using the RANSAC method
</p>


<h3>Usage</h3>

<pre><code class="language-R">preProcess_ransacLevel(
  x3p,
  ransacInlierThresh = 1e-06,
  ransacFinalSelectThresh = 2e-05,
  iters = 300,
  returnResiduals = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x3p</code></td>
<td>
<p>an x3p object containing a surface matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ransacInlierThresh</code></td>
<td>
<p>threshold to declare an observed value close to the
fitted plane an "inlier". A smaller value will yield a more stable
estimate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ransacFinalSelectThresh</code></td>
<td>
<p>once the RANSAC plane is fitted based on the
ransacInlierThresh, this argument dictates which observations are selected
as the final breech face estimate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iters</code></td>
<td>
<p>number of candidate planes to fit (higher value yields more
stable breech face estimate)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnResiduals</code></td>
<td>
<p>dictates whether the difference between the estimated
breech face and fitted plane are returned (residuals) or if the estimates
breech face is simply shifted down by its mean value</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>an x3p object containing the leveled surface matrix.
</p>


<h3>Note</h3>

<p>Given input depths (in microns), find best-fitting plane using
RANSAC. This should be the plane that the breechface marks are on. Adapted
from cartridges3D::findPlaneRansac function. This a modified version of the
findPlaneRansac function available in the cartridges3D package on GitHub.
</p>
<p>The preProcess_ransacLevel function will throw an error if the final
plane estimate is rank-deficient (which is relatively unlikely, but
theoretically possible). Re-run the function (possibly setting a different
seed) if this occurs.
</p>


<h3>See Also</h3>

<p>https://github.com/xhtai/cartridges3D
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
nbtrd_link &lt;- "https://tsapps.nist.gov/NRBTD/Studies/CartridgeMeasurement/"
fadul1.1_link &lt;- "DownloadMeasurement/2d9cc51f-6f66-40a0-973a-a9292dbee36d"

fadul1.1 &lt;- x3ptools::read_x3p(paste0(nbtrd_link,fadul1.1_link))

fadul1.1_ransacLeveled &lt;- fadul1.1 %&gt;%
                     preProcess_crop(region = "exterior",
                                     radiusOffset = -30) %&gt;%
                     preProcess_crop(region = "interior",
                                     radiusOffset = 200) %&gt;%
                     preProcess_removeTrend(statistic = "quantile",
                                            tau = .5,
                                            method = "fn")

x3pListPlot(list("Original" = fadul1.1,
                 "RANSAC Leveled" = fadul1.1_ransacLeveled),type = "list")

## End(Not run)

</code></pre>


</div>