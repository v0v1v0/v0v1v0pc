<div class="container">

<table style="width: 100%;"><tr>
<td>import2Dspectra</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Import 2D Spectroscopic Data</h2>

<h3>Description</h3>

<p>This function imports a single file (for instance, a csv) containing a 2D
spectroscopic data set.  The current version handles various types of
ASCII text files as well as a few other types.
This function is called by <code>files2Spectra2DObject</code>
and is exported and documented to assist in developing new format codes.
</p>


<h3>Usage</h3>

<pre><code class="language-R">import2Dspectra(file, fmt, nF2, debug = 0, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>Character string giving the path to a file containing a 2D spectrum.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fmt</code></td>
<td>
<p>Character string giving the format code to use.  Details below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nF2</code></td>
<td>
<p>Integer giving the number of data points in the F2 (x) dimension.
Note: If <em>any</em> dimension is zero-filled you may need to study
the acquistion details to get the correct value for this argument.
This may be vendor-dependent.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>debug</code></td>
<td>
<p>Integer.  Applies to <code>fmt = "dx"</code> only.  See <code>readJDX</code>
for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to be passed to <code>read.table</code>, or <code>readJDX</code>.
For <code>read.table</code>, <span class="pkg">You MUST supply values for <code>sep</code>, <code>dec</code> and <code>header</code> consistent
with your file structure, unless they are the same as the defaults for <code>read.table</code></span>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with 3 elements:
</p>

<ul>
<li>
<p> A matrix of the z values.  The no. of columns = <code>nF2</code> and the no. of rows
follows from the size of the imported data.
</p>
</li>
<li>
<p> A vector giving the F2 (x) values.
</p>
</li>
<li>
<p> A vector giving the F1 (y) values.
</p>
</li>
</ul>
<h3>Format Codes for Plain-Text ASCII Files</h3>

<p>ASCII format codes are constructed in two parts separated by a hyphen.
Three or more columns are expected. The first part gives
the order of the columns in the file, e.g. F2F1R means the first column has the F2 values,
the second column has the F1 values and the third the real-valued intensities.  The second part of the
format code relates to the order of the rows, i.e. which column varies fastest and in what direction.
These codes are best understood in relation to how the data is stored internally in a matrix.
The internal matrix is organized exactly as the data appears on the screen, with F2 decreasing
left-to-right, and F1 increasing top-to-bottom. There are many possible formats (only those listed
are implemented, please e-mail for help creating additional combinations):
</p>

<ul>
<li> <p><code>"F2F1R-F2decF1dec"</code> Columns in the file are F2 (x), F1 (y), real.  Both F2 and F1 are decreasing.
Last row is first in the file.  This format is used at least some of the time by
nmrPipe.
</p>
</li>
<li> <p><code>fmt = "F1F2RI-F1decF2dec2"</code> Columns in the file are F1 (y), F2 (x), real and imaginary
(imaginary data will be skipped).  F1 is held at a fixed value while F2 decreases.  F1 starts high
and decreases, so last row is first in the file. There are two sets of data in the file:
The data after FT'ing along F2 only, and the data after FT'ing along both dimensions.  The "2"
in the format name means we are taking the second data set.
This format is used by JEOL when exporting to "generic ascii".  Argument <code>nF2</code> is ignored
with this format as the value is sought from the corresponding <code>*.hdr</code> file.  Doing so
also allows one to import files with slightly different F1 and or F2, but for this to be successful
you will need to 1) set <code>allowSloppy = TRUE</code> in the call to <code>files2Spectra2DObject</code> and
2) harmonize the dimensions manually after initial import.
</p>
</li>
</ul>
<h3>Other Format Codes</h3>

<p>Here are some other format codes you can use:
</p>

<ul>
<li> <p><code>"SimpleM"</code>.  Imports matrices composed of z values.  The F2 and F1 values
are created from the dimension of the matrix.  After import, you will have to manually
convert the F2 and F1 values to ppm.  You may also have to transpose the matrices, or
perhaps invert the order of the rows or columns.  Imported via <code>read.table</code>.
</p>
</li>
<li> <p><code>"Btotxt"</code>.  This format imports Bruker data written to a file using the Bruker
"totxt" command.  Tested with TopSpin 4.0.7.  This format is read via <code>readLines</code>
and thus the ... argument does not apply.
</p>
</li>
<li> <p><code>"dx"</code>.  This format imports files written in the JCAMP-DX format, via
package <code>readJDX</code>.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Bryan A. Hanson, DePauw University.
</p>


</div>