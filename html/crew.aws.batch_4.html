<div class="container">

<table style="width: 100%;"><tr>
<td>crew_class_monitor_aws_batch</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>AWS Batch monitor class</h2>

<h3>Description</h3>

<p>AWS Batch monitor <code>R6</code> class
</p>


<h3>Details</h3>

<p>See <code>crew_monitor_aws_batch()</code>.
</p>


<h3>IAM policies</h3>

<p>In order for the AWS Batch <code>crew</code> monitor class to function
properly, your IAM policy needs permission to perform the <code>SubmitJob</code>,
<code>TerminateJob</code>, <code>ListJobs</code>, and <code>DescribeJobs</code> AWS Batch API calls.
In addition, to download CloudWatch logs with the <code>log()</code> method,
your IAM policy also needs permission to perform the <code>GetLogEvents</code>
CloudWatch logs API call.
For more information on AWS policies and permissions, please visit
<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html">https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html</a>.
</p>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>job_queue</code></dt>
<dd>
<p>See <code>crew_monitor_aws_batch()</code>.</p>
</dd>
<dt><code>job_definition</code></dt>
<dd>
<p>See <code>crew_monitor_aws_batch()</code>.</p>
</dd>
<dt><code>log_group</code></dt>
<dd>
<p>See <code>crew_monitor_aws_batch()</code>.</p>
</dd>
<dt><code>config</code></dt>
<dd>
<p>See <code>crew_monitor_aws_batch()</code>.</p>
</dd>
<dt><code>credentials</code></dt>
<dd>
<p>See <code>crew_monitor_aws_batch()</code>.</p>
</dd>
<dt><code>endpoint</code></dt>
<dd>
<p>See <code>crew_monitor_aws_batch()</code>.</p>
</dd>
<dt><code>region</code></dt>
<dd>
<p>See <code>crew_monitor_aws_batch()</code>.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-crew_class_monitor_aws_batch-new"><code>crew_class_monitor_aws_batch$new()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_monitor_aws_batch-validate"><code>crew_class_monitor_aws_batch$validate()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_monitor_aws_batch-terminate"><code>crew_class_monitor_aws_batch$terminate()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_monitor_aws_batch-status"><code>crew_class_monitor_aws_batch$status()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_monitor_aws_batch-log"><code>crew_class_monitor_aws_batch$log()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_monitor_aws_batch-jobs"><code>crew_class_monitor_aws_batch$jobs()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_monitor_aws_batch-active"><code>crew_class_monitor_aws_batch$active()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_monitor_aws_batch-inactive"><code>crew_class_monitor_aws_batch$inactive()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_monitor_aws_batch-submitted"><code>crew_class_monitor_aws_batch$submitted()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_monitor_aws_batch-pending"><code>crew_class_monitor_aws_batch$pending()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_monitor_aws_batch-runnable"><code>crew_class_monitor_aws_batch$runnable()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_monitor_aws_batch-starting"><code>crew_class_monitor_aws_batch$starting()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_monitor_aws_batch-running"><code>crew_class_monitor_aws_batch$running()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_monitor_aws_batch-succeeded"><code>crew_class_monitor_aws_batch$succeeded()</code></a>
</p>
</li>
<li> <p><a href="#method-crew_class_monitor_aws_batch-failed"><code>crew_class_monitor_aws_batch$failed()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-crew_class_monitor_aws_batch-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>AWS Batch job definition constructor.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_monitor_aws_batch$new(
  job_queue = NULL,
  job_definition = NULL,
  log_group = NULL,
  config = NULL,
  credentials = NULL,
  endpoint = NULL,
  region = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>job_queue</code></dt>
<dd>
<p>See <code>crew_monitor_aws_batch()</code>.</p>
</dd>
<dt><code>job_definition</code></dt>
<dd>
<p>See <code>crew_monitor_aws_batch()</code>.</p>
</dd>
<dt><code>log_group</code></dt>
<dd>
<p>See <code>crew_monitor_aws_batch()</code>.</p>
</dd>
<dt><code>config</code></dt>
<dd>
<p>See <code>crew_monitor_aws_batch()</code>.</p>
</dd>
<dt><code>credentials</code></dt>
<dd>
<p>See <code>crew_monitor_aws_batch()</code>.</p>
</dd>
<dt><code>endpoint</code></dt>
<dd>
<p>See <code>crew_monitor_aws_batch()</code>.</p>
</dd>
<dt><code>region</code></dt>
<dd>
<p>See <code>crew_monitor_aws_batch()</code>.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>AWS Batch job definition object.
</p>


<hr>
<a id="method-crew_class_monitor_aws_batch-validate"></a>



<h4>Method <code>validate()</code>
</h4>

<p>Validate the object.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_monitor_aws_batch$validate()</pre></div>



<h5>Returns</h5>

<p><code>NULL</code> (invisibly). Throws an error if a field is invalid.
</p>


<hr>
<a id="method-crew_class_monitor_aws_batch-terminate"></a>



<h4>Method <code>terminate()</code>
</h4>

<p>Terminate one or more AWS Batch jobs.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_monitor_aws_batch$terminate(
  ids,
  reason = "terminated by crew.aws.batch monitor",
  verbose = TRUE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>ids</code></dt>
<dd>
<p>Character vector with the IDs of the AWS Batch jobs
to terminate.</p>
</dd>
<dt><code>reason</code></dt>
<dd>
<p>Character of length 1, natural language explaining
the reason the job was terminated.</p>
</dd>
<dt><code>verbose</code></dt>
<dd>
<p>Logical of length 1, whether to show a progress bar
if the R process is interactive and <code>length(ids)</code> is greater than 1.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p><code>NULL</code> (invisibly).
</p>


<hr>
<a id="method-crew_class_monitor_aws_batch-status"></a>



<h4>Method <code>status()</code>
</h4>

<p>Get the status of a single job
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_monitor_aws_batch$status(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt>
<dd>
<p>Character of length 1, job ID. This is different
from the user-supplied job name.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>A one-row <code>tibble</code> with information about the job.
</p>


<hr>
<a id="method-crew_class_monitor_aws_batch-log"></a>



<h4>Method <code>log()</code>
</h4>

<p>Get the CloudWatch log of a job.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_monitor_aws_batch$log(id, start_from_head = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt>
<dd>
<p>Character of length 1, job ID. This is different
from the user-supplied job name.</p>
</dd>
<dt><code>start_from_head</code></dt>
<dd>
<p>Logical of length 1, whether to print earlier
log events before later ones.</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>This method assumes the job has log driver <code>"awslogs"</code>
(specifying AWS CloudWatch) and that the log group is the one
prespecified in the <code>log_group</code> argument of
<code>crew_monitor_aws_batch()</code>. This method cannot use
other log drivers such as Splunk, and it will fail if the log
group is wrong or missing.
</p>



<h5>Returns</h5>

<p>A <code>tibble</code> with log information.
</p>


<hr>
<a id="method-crew_class_monitor_aws_batch-jobs"></a>



<h4>Method <code>jobs()</code>
</h4>

<p>List all the jobs in the given job queue
with the given job definition.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_monitor_aws_batch$jobs(
  status = c("submitted", "pending", "runnable", "starting", "running", "succeeded",
    "failed")
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>status</code></dt>
<dd>
<p>Character vector of job states. Results are limited
to these job states.</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>The output only includes jobs under the
job queue and job definition
that were supplied through <code>crew_monitor_aws_batch()</code>.
</p>



<h5>Returns</h5>

<p>A <code>tibble</code> with one row per job and columns
with job information.
</p>


<hr>
<a id="method-crew_class_monitor_aws_batch-active"></a>



<h4>Method <code>active()</code>
</h4>

<p>List active jobs: submitted, pending,
runnable, starting, or running (not succeeded or failed).
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_monitor_aws_batch$active()</pre></div>



<h5>Details</h5>

<p>The output only includes jobs under the
job queue and job definition
that were supplied through <code>crew_monitor_aws_batch()</code>.
</p>



<h5>Returns</h5>

<p>A <code>tibble</code> with one row per job and columns
with job information.
</p>


<hr>
<a id="method-crew_class_monitor_aws_batch-inactive"></a>



<h4>Method <code>inactive()</code>
</h4>

<p>List inactive jobs: ones whose status
is succeeded or failed (not submitted, pending,
runnable, starting, or running).
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_monitor_aws_batch$inactive()</pre></div>



<h5>Details</h5>

<p>The output only includes jobs under the
job queue and job definition
that were supplied through <code>crew_monitor_aws_batch()</code>.
</p>



<h5>Returns</h5>

<p>A <code>tibble</code> with one row per job and columns
with job information.
</p>


<hr>
<a id="method-crew_class_monitor_aws_batch-submitted"></a>



<h4>Method <code>submitted()</code>
</h4>

<p>List jobs whose status is <code>"submitted"</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_monitor_aws_batch$submitted()</pre></div>



<h5>Details</h5>

<p>The output only includes jobs under the
job queue and job definition
that were supplied through <code>crew_monitor_aws_batch()</code>.
</p>



<h5>Returns</h5>

<p>A <code>tibble</code> with one row per job and columns
with job information.
</p>


<hr>
<a id="method-crew_class_monitor_aws_batch-pending"></a>



<h4>Method <code>pending()</code>
</h4>

<p>List jobs whose status is <code>"pending"</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_monitor_aws_batch$pending()</pre></div>



<h5>Details</h5>

<p>The output only includes jobs under the
job queue and job definition
that were supplied through <code>crew_monitor_aws_batch()</code>.
</p>



<h5>Returns</h5>

<p>A <code>tibble</code> with one row per job and columns
with job information.
</p>


<hr>
<a id="method-crew_class_monitor_aws_batch-runnable"></a>



<h4>Method <code>runnable()</code>
</h4>

<p>List jobs whose status is <code>"runnable"</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_monitor_aws_batch$runnable()</pre></div>



<h5>Details</h5>

<p>The output only includes jobs under the
job queue and job definition
that were supplied through <code>crew_monitor_aws_batch()</code>.
</p>



<h5>Returns</h5>

<p>A <code>tibble</code> with one row per job and columns
with job information.
</p>


<hr>
<a id="method-crew_class_monitor_aws_batch-starting"></a>



<h4>Method <code>starting()</code>
</h4>

<p>List jobs whose status is <code>"starting"</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_monitor_aws_batch$starting()</pre></div>



<h5>Details</h5>

<p>The output only includes jobs under the
job queue and job definition
that were supplied through <code>crew_monitor_aws_batch()</code>.
</p>



<h5>Returns</h5>

<p>A <code>tibble</code> with one row per job and columns
with job information.
</p>


<hr>
<a id="method-crew_class_monitor_aws_batch-running"></a>



<h4>Method <code>running()</code>
</h4>

<p>List jobs whose status is <code>"running"</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_monitor_aws_batch$running()</pre></div>



<h5>Details</h5>

<p>The output only includes jobs under the
job queue and job definition
that were supplied through <code>crew_monitor_aws_batch()</code>.
</p>



<h5>Returns</h5>

<p>A <code>tibble</code> with one row per job and columns
with job information.
</p>


<hr>
<a id="method-crew_class_monitor_aws_batch-succeeded"></a>



<h4>Method <code>succeeded()</code>
</h4>

<p>List jobs whose status is <code>"succeeded"</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_monitor_aws_batch$succeeded()</pre></div>



<h5>Details</h5>

<p>The output only includes jobs under the
job queue and job definition
that were supplied through <code>crew_monitor_aws_batch()</code>.
</p>



<h5>Returns</h5>

<p>A <code>tibble</code> with one row per job and columns
with job information.
</p>


<hr>
<a id="method-crew_class_monitor_aws_batch-failed"></a>



<h4>Method <code>failed()</code>
</h4>

<p>List jobs whose status is <code>"failed"</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>crew_class_monitor_aws_batch$failed()</pre></div>



<h5>Details</h5>

<p>The output only includes jobs under the
job queue and job definition
that were supplied through <code>crew_monitor_aws_batch()</code>.
</p>



<h5>Returns</h5>

<p>A <code>tibble</code> with one row per job and columns
with job information.
</p>




<h3>See Also</h3>

<p>Other monitor: 
<code>crew_monitor_aws_batch()</code>
</p>


</div>