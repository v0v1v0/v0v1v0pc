<div class="container">

<table style="width: 100%;"><tr>
<td>get_opt_weights</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Weight optimisation</h2>

<h3>Description</h3>

<p>This function provides optimised weights to agree with a pre-specified vector of "target importances".
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_opt_weights(
  coin,
  itarg = NULL,
  dset,
  Level,
  cortype = "pearson",
  optype = "balance",
  toler = NULL,
  maxiter = NULL,
  weights_to = NULL,
  out2 = "list"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>coin</code></td>
<td>
<p>coin object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>itarg</code></td>
<td>
<p>a vector of (relative) target importances. For example, <code>c(1,2,1)</code> would specify that the second
indicator should be twice as "important" as the other two.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dset</code></td>
<td>
<p>Name of the aggregated data set found in <code>coin$Data</code> which results from calling <code>Aggregate()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Level</code></td>
<td>
<p>The aggregation level to apply the weight adjustment to. This can only be one level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cortype</code></td>
<td>
<p>The type of correlation to use - can be either <code>"pearson"</code>, <code>"spearman"</code> or <code>"kendall"</code>. See stats::cor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optype</code></td>
<td>
<p>The optimisation type. Either <code>"balance"</code>, which aims to balance correlations
according to a vector of "importances" specified by <code>itarg</code> (default), or <code>"infomax"</code> which aims to maximise
overall correlations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>toler</code></td>
<td>
<p>Tolerance for convergence. Defaults to 0.1 (decrease for more accuracy, increase if convergence problems).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxiter</code></td>
<td>
<p>Maximum number of iterations. Default 500.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights_to</code></td>
<td>
<p>Name to write the optimised weight set to, if <code>out2 = "coin"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out2</code></td>
<td>
<p>Where to output the results. If <code>"coin"</code> (default for coin input), appends to updated coin,
creating a new list of weights in <code>.$Parameters$Weights</code>. Otherwise if <code>"list"</code> outputs to a list (default).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is a linear version of the weight optimisation proposed in this paper: <a href="https://doi.org/10.1016/j.ecolind.2017.03.056">doi:10.1016/j.ecolind.2017.03.056</a>.
Weights are optimised to agree with a pre-specified vector of "importances". The optimised weights are returned back to the coin.
</p>
<p>See <code>vignette("weights")</code> for more details on the usage of this function and an explanation of the underlying
method. Note that this function calculates correlations without considering statistical significance.
</p>
<p>This function replaces the now-defunct <code>weightOpt()</code> from COINr &lt; v1.0.
</p>


<h3>Value</h3>

<p>If <code>out2 = "coin"</code> returns an updated coin object with a new set of weights in <code>.$Meta$Weights</code>, plus
details of the optimisation in <code>.$Analysis</code>.
Else if <code>out2 = "list"</code> the same outputs (new weights plus details of optimisation) are wrapped in a list.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># build example coin
coin &lt;- build_example_coin(quietly = TRUE)

# check correlations between level 3 and index
get_corr(coin, dset = "Aggregated", Levels = c(3, 4))

# optimise weights at level 3
l_opt &lt;- get_opt_weights(coin, itarg = "equal", dset = "Aggregated",
                        Level = 3, weights_to = "OptLev3", out2 = "list")

# view results
tail(l_opt$WeightsOpt)

l_opt$CorrResultsNorm

</code></pre>


</div>