<div class="container">

<table style="width: 100%;"><tr>
<td>calCurvPlot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Calibration Curve Plot
</h2>

<h3>Description</h3>

<p>Flexible function for plotting the calibration curve for a risk score and different recalibrations of a risk score. Histograms of risk score and recalibrated risk scores can be plotted using argument "hist==TRUE". Dotted guidelines for the risk threshold R are plotted and clinically releavant risk region [R_l, R_u] are plotted to help gauge calibration in clinically relevants.
</p>


<h3>Usage</h3>

<pre><code class="language-R">calCurvPlot(y,p,p.std=NULL,p.recal=NULL,
            stdPlot=FALSE, recalPlot=FALSE,
            xlim=c(0,1),ylim=c(0,1),
            label="Original Risk Score",
            label2 = "Standard Recalibrated Risk Score",
            label3 = "Weighted/Constrained Recalibrated Risk Score",
            legendLab = c("Orig.", "Std.", "Wt."),
            mainTitle="Calibration of Risk Score",
            hist=TRUE,ylimHist = c(0,0.5),
            r,rl = -Inf, ru = Inf)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Vector of binary outcomes, with 1 indicating event (case) and 0 indicating no event                 (controls)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>Vector of risk score values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p.std</code></td>
<td>
<p>Vector of risk score values after standard logistic recalibration</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p.recal</code></td>
<td>
<p>Vector of risk score values after weighted/contratined logistic recalibration</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stdPlot</code></td>
<td>
<p>If TRUE plot calibration curve for standard logistic recalibrated risk score </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recalPlot</code></td>
<td>
<p>If TRUE plot calibration curve for weighted/contratined recalibrated risk score </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p>Limits for x-axis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>Limits for y-axis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>
<p>Label for x-axis corresponding to p vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label2</code></td>
<td>
<p>Label for x-axis corresponding to p.std vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label3</code></td>
<td>
<p>Label for x-axis corresponding to p.recal vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legendLab</code></td>
<td>
<p>Label for legend</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mainTitle</code></td>
<td>
<p>Main title for plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hist</code></td>
<td>
<p>If true plot distribution of risk scores along with calibration curve</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylimHist</code></td>
<td>
<p>Limits for y-axis of histogram</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>Clinically relevant risk threshold used indicated with dotted line</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rl</code></td>
<td>
<p>Lower bound of clinically relevant region indicated with dotted-dashed line</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ru</code></td>
<td>
<p>Upper bound of clinically relevant region indicated with dotted-dashed line</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Prints calibration plot of risk model p, and optional histogram of risk score</p>


<h3>Author(s)</h3>

<p>Anu Mishra
</p>


<h3>References</h3>

<p>Mishra, A. (2019). Methods for Risk Markers that Incorporate Clinical Utility (Doctoral dissertation). (Available Upon Request)</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
data("fakeData")

### get standard recalibrated risk score
stdRecal.res &lt;- stdRecal(y = fakeData$y,p = fakeData$p)
p.std &lt;- stdRecal.res$p.std

### Select tuning parameter lamba using 5-fold cross-validation repeated 25 times
grid &lt;- RAWgrid(r = 0.3,rl = -Inf,ru = Inf,p = fakeData$p,y = fakeData$y,
                cvParm = "lambda",rl.raw = 0.25,ru.raw = 0.35)
repCV &lt;- cvRepWtTuning(y = fakeData$y,p = fakeData$p,rl = -Inf,ru = Inf,r = 0.3,
                       kFold = 5,cvRep = 25,cvParm = "lambda",tuneSeq = grid,stdErrRule = TRUE)

## Implement weighted logistic recalibration
wtRecal.res &lt;- wtRecal(y = fakeData$y,p = fakeData$p,r = 0.3,rl = -Inf,ru = Inf,
                       lambda = repCV$cv.lambda,delta=1)
p.recal &lt;- wtRecal.res$p.wt

### Calibration curve of only original risk score with histogram
calCurvPlot(y=fakeData$y,p=fakeData$p,p.std=NULL,p.recal=NULL,
            stdPlot=FALSE, recalPlot=FALSE,
            xlim=c(0,1),ylim=c(0,1),
            label="Original Risk Score",
            label2 = "Standard Recalibrated Risk Score",
            label3 = "Weighted/Constrained Recalibrated Risk Score",
            legendLab = c("Orig.", "Std.", "Wt."),
            mainTitle="Calibration of Risk Score",
            hist=TRUE,ylimHist = c(0,0.5),
            r=0.3,rl = -Inf, ru = Inf)

### Calibration curve of only original, standard and weighted recalibrated risk score
calCurvPlot(fakeData$y,p=fakeData$p,p.std=p.std,p.recal=p.recal,
            stdPlot=TRUE, recalPlot=TRUE,
            xlim=c(0,1),ylim=c(0,1),
            label="Original Risk Score",
            label2 = "Standard Recalibrated Risk Score",
            label3 = "Weighted/Constrained Recalibrated Risk Score",
            legendLab = c("Orig.", "Std.", "Wt."),
            mainTitle="Calibration of Risk Score",
            hist=TRUE,ylimHist = c(0,0.5),
            r=0.3,rl = -Inf, ru = Inf)

## End(Not run)
</code></pre>


</div>