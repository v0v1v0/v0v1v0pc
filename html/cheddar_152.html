<div class="container">

<table style="width: 100%;"><tr>
<td>Pyramid plots</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Pyramid plots</h2>

<h3>Description</h3>

<p>High-level functions that create pyramid plots.</p>


<h3>Usage</h3>

<pre><code class="language-R">PlotBPyramid(community, 
             level = floor(PreyAveragedTrophicLevel(community)),
             expected.levels,
             fill.missing.levels = TRUE,
             order.by.expected = TRUE,
             show.level.labels = TRUE, 
             xlab = Log10BLabel(community, name=expression(~sum(italic(B)))), 
             ylab = "", 
             xlim = NULL, 
             col = NULL, 
             text.col = 'black',
             main = CPS(community)$title,
             ...)

PlotNPyramid(community, 
             level = floor(PreyAveragedTrophicLevel(community)),
             expected.levels,
             fill.missing.levels = TRUE,
             order.by.expected = TRUE,
             show.level.labels = TRUE, 
             xlab = Log10NLabel(community, name=expression(~sum(italic(N)))),
             ylab = "", 
             xlim = NULL, 
             col = NULL, 
             text.col = 'black',
             main = CPS(community)$title,
             ...)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>community</code></td>
<td>
<p>an object of class <code>Community</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>levels by which values are summed. Can be either the name of a 
node property, in which case it must meet the criteria of the 
<code>properties</code> parameter of <code>NPS</code>, or a vector of length 
<code>NumberOfNodes</code> that contains the levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expected.levels</code></td>
<td>
<p>the values that are expected to be in <code>level</code>; 
see Details for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill.missing.levels</code></td>
<td>
<p>if <code>TRUE</code>, values in <code>expected.levels</code> 
that are not present in <code>level</code> are shown in the pyramid.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order.by.expected</code></td>
<td>
<p>if <code>TRUE</code> then the levels are plotted in 
the order given in <code>expected.levels</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show.level.labels</code></td>
<td>
<p>logical - if <code>TRUE</code> then values of <code>level</code> 
are shown to the left of the pyramid.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>title of the x axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>title of the y axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p>limits of the x axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>fill colour; either a single colour a vector containing a colour 
per <code>level</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text.col</code></td>
<td>
<p>colour for the text showing the log10-transformed sums in the 
blocks of the pyramid; ; either a single colour a vector containing a 
colour per <code>level</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>title of the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other values to plot functions.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>PlotBPyramid</code> plots log10-transformed sum biomass abundance in 
each <code>level</code> and <code>PlotNPyramid</code> plots log10-transformed sum 
numerical abundance in each <code>level</code>.
</p>
<p><code>expected.levels</code> provides two behaviours. First, it provides error 
checking: an error is raised if values are in <code>level</code> that 
are not in <code>expected.levels</code>. Second, it interacts with 
<code>fill.missing.levels</code> and <code>order.by.expected</code> to control which levels 
are drawn and how. If <code>fill.missing.levels</code> is <code>TRUE</code> then values 
in <code>expected.levels</code> that are not present in <code>level</code> are shown on the 
pyramid plot. If <code>order.by.level</code> is <code>TRUE</code> then the levels are 
plotted in the order given in <code>expected.levels</code>.
If <code>level</code> contains numbers then <code>expected.levels</code> defaults to a 
sequence of integers <code>floor(min(level)):ceiling(max(level))</code>. 
If <code>level</code> is ‘category’ then <code>expected.levels</code> defaults to the 
intersection of values of ‘category’ that are present in <code>community</code> and 
the usual Cheddar default values: ‘&lt;unnamed&gt;’, ‘producer’, 
‘invertebrate’, ‘vert.ecto’, ‘vert.endo’.
</p>


<h3>Author(s)</h3>

<p>Lawrence Hudson</p>


<h3>See Also</h3>

<p><code>Community</code>, <code>SumBiomassByClass</code>, 
<code>SumNByClass</code>, <code>Log10BLabel</code>, 
<code>Log10NLabel</code>, <code>floor</code>, <code>ceiling</code></p>


<h3>Examples</h3>

<pre><code class="language-R">data(TL84)

# Use a large left-hand margin to show level text
reset.par &lt;- par(mar=c(5,8,1,1))

# Using prey-averaged trophic level
PlotNPyramid(TL84)

# Using chain-averaged of trophic level
PlotNPyramid(TL84, level=floor(ChainAveragedTrophicLevel(TL84)))

# Show by category
PlotNPyramid(TL84, level='category')

# Taxonomic kingdoms as levels
PlotNPyramid(TL84, level='kingdom')

# Taxonomic kingdoms as levels, with a defined order
PlotNPyramid(TL84, level='kingdom', expected.levels=c("&lt;unnamed&gt;", "Plantae", 
             "Chromista","Bacteria","Protozoa","Animalia"))


# Compare the YthanEstuary and the TL84 datasets. YthanEstuary has nodes in 
# each of the categories whereas TL84 only has producer, invertebrate and 
# vert.ecto nodes. Show categories that are not present in TL84
par(mfrow=c(1,2))
data(YthanEstuary)
xlim &lt;- range(c(Log10N(TL84), Log10N(YthanEstuary)), na.rm=TRUE)
PlotNPyramid(TL84, level='category', xlim=xlim, 
             expected.levels=c('&lt;unnamed&gt;', 'producer', 'invertebrate', 
                               'vert.ecto', 'vert.endo'))
PlotNPyramid(YthanEstuary, level='category',  xlim=xlim)
par(mfrow=c(1,1))


# For the BroadstoneStream dataset, the LongestTrophicLevel function returns 
# nodes in levels 1 and 7 to 10 but no nodes in levels 2 to 6. 
# By default all levels between the minimum and maximum are shown, so levels 
# 2 to 6 appear with no boxes.
data(BroadstoneStream)
PlotNPyramid(BroadstoneStream, 
             level=floor(LongestTrophicLevel(BroadstoneStream)))

# Set fill.missing.levels to FALSE to prevent levels 2 to 6 from being drawn.
PlotNPyramid(BroadstoneStream, 
             level=floor(LongestTrophicLevel(BroadstoneStream)), 
             fill.missing.levels=FALSE)

par(reset.par)
</code></pre>


</div>