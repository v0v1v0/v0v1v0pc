<div class="container">

<table style="width: 100%;"><tr>
<td>var.acomp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Variances and covariances of amounts and compositions</h2>

<h3>Description</h3>

<p>Compute the (co)variance matrix in the several approaches of compositional
and amount data analysis.
</p>


<h3>Usage</h3>

<pre><code class="language-R">  var(x,...)
    ## Default S3 method:
var(x, y=NULL, na.rm=FALSE, use, ...)
    ## S3 method for class 'acomp'
var(x,y=NULL,...,robust=getOption("robust"), 
       use="all.obs",giveCenter=FALSE)
    ## S3 method for class 'rcomp'
var(x,y=NULL,...,robust=getOption("robust"), 
       use="all.obs",giveCenter=FALSE)
    ## S3 method for class 'aplus'
var(x,y=NULL,...,robust=getOption("robust"), 
       use="all.obs",giveCenter=FALSE)
    ## S3 method for class 'rplus'
var(x,y=NULL,...,robust=getOption("robust"), 
       use="all.obs",giveCenter=FALSE)
    ## S3 method for class 'rmult'
var(x,y=NULL,...,robust=getOption("robust"), 
       use="all.obs",giveCenter=FALSE)
  cov(x,y=x,...)
    ## Default S3 method:
cov(x, y=NULL, use="everything", 
       method=c("pearson", "kendall", "spearman"), ...)
    ## S3 method for class 'acomp'
cov(x,y=NULL,...,robust=getOption("robust"), 
       use="all.obs",giveCenter=FALSE)
    ## S3 method for class 'rcomp'
cov(x,y=NULL,...,robust=getOption("robust"), 
       use="all.obs",giveCenter=FALSE)
    ## S3 method for class 'aplus'
cov(x,y=NULL,...,robust=getOption("robust"), 
       use="all.obs",giveCenter=FALSE)
    ## S3 method for class 'rplus'
cov(x,y=NULL,...,robust=getOption("robust"), 
       use="all.obs",giveCenter=FALSE)
    ## S3 method for class 'rmult'
cov(x,y=NULL,...,robust=getOption("robust"), 
    use="all.obs",giveCenter=FALSE)
          </code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a dataset, eventually of amounts or compositions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>a second dataset, eventually of amounts or compositions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>see <code>stats::var</code></p>
</td>
</tr>
</table>
<table><tr style="vertical-align: top;">
<td><code>use</code></td>
<td>
<p>see <code>stats::var</code></p>
</td>
</tr></table>
<table><tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>see <code>stats::cov</code></p>
</td>
</tr></table>
<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments to <code>stats::var</code> 
e.g. <code>use</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>robust</code></td>
<td>

<p>A description of a robust estimator. FALSE for the classical
estimators. See robustnessInCompositions for
further details.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>giveCenter</code></td>
<td>
<p>If TRUE the center used in the variance calculation
is reported as a "center" attribute. This is especially necessary
for robust estimations, where a reasonable center can not be
computed independently for the me variance calculation.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The basic functions of 
<code>stats::var</code> and <code>stats::cov</code>
are turned to
S3-generics. The original versions are copied to the default
method. This allows us to introduce generic methods to handle
variances and covariances of other data types, such as amounts or
compositions.
<br>
If classed amounts or compositions are involved, they are transformed
with their corresponding transforms, using the centered default
transform (<code>cdt</code>). That implies that the variances have to
be interpreded in a log scale level for  <code>acomp</code> and
<code>aplus</code>.
<br>
We should be aware that variance matrices of compositions 
(<code>acomp</code> and <code>rcomp</code>) are
singular. They can be transformed to the correponding nonsingular
variances of ilr or ipt-space by <code>clrvar2ilr</code>.
</p>
<p>In R versions older than v2.0.0, 

<code>stats::var</code> and <code>stats::cov</code>
were defined in package “base” instead of in “stats”.
This might produce some misfunction.
</p>


<h3>Value</h3>

<p>The variance matrix of x or the covariance matrix of x and
y.</p>


<h3>Author(s)</h3>

<p>K.Gerald v.d. Boogaart <a href="http://www.stat.boogaart.de">http://www.stat.boogaart.de</a></p>


<h3>See Also</h3>

<p><code>cdt</code>, <code>clrvar2ilr</code>, <code>clo</code>,
<code>mean.acomp</code>, <code>acomp</code>, <code>rcomp</code>,
<code>aplus</code>, <code>rplus</code>, <code>variation</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(SimulatedAmounts)
meanCol(sa.lognormals)
var(acomp(sa.lognormals))
var(rcomp(sa.lognormals))
var(aplus(sa.lognormals))
var(rplus(sa.lognormals))
cov(acomp(sa.lognormals5[,1:3]),acomp(sa.lognormals5[,4:5]))
cov(rcomp(sa.lognormals5[,1:3]),rcomp(sa.lognormals5[,4:5]))
cov(aplus(sa.lognormals5[,1:3]),aplus(sa.lognormals5[,4:5]))
cov(rplus(sa.lognormals5[,1:3]),rplus(sa.lognormals5[,4:5]))
cov(acomp(sa.lognormals5[,1:3]),aplus(sa.lognormals5[,4:5]))

svd(var(acomp(sa.lognormals)))

</code></pre>


</div>