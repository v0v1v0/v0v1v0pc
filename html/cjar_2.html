<div class="container">

<table style="width: 100%;"><tr>
<td>annotation_build</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Build the annotation in CJA</h2>

<h3>Description</h3>

<p>This function builds an annotation in Customer Journey Analytics
</p>


<h3>Usage</h3>

<pre><code class="language-R">annotation_build(
  name = NULL,
  description = NULL,
  date_range = c(Sys.Date() - 30, Sys.Date() - 1),
  color = "blue",
  applyToAllReports = FALSE,
  metric_id = NULL,
  metric_compType = NULL,
  filter_id = NULL,
  filter_verb = NULL,
  filter_dimType = NULL,
  filter_terms = NULL,
  filter_compType = NULL,
  create_annotation = TRUE,
  debug = FALSE,
  dataviewId = Sys.getenv("CJA_DATAVIEW_ID")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>This is the name of the new segment (required)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>description</code></td>
<td>
<p>This is the description of the segment (required)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date_range</code></td>
<td>
<p>The date range of the annotation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color</code></td>
<td>
<p>Color name string representing the annotation's color. Supported values include 'blue', 'purple', 'green', 'orange', 'red', 'light green', 'pink', 'dark green', and 'yellow'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>applyToAllReports</code></td>
<td>
<p>A boolean that determines if the annotation applies to all report suites.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric_id</code></td>
<td>
<p>The id for the metric scope as found in the <code>aw_get_metrics()</code> and <code>aw_get_calculatedmetrics()</code> functions.
This needs to be a "list()" array of items.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric_compType</code></td>
<td>
<p>The component type. This is either 'm' for metric or 'cm' for calculated metric. This needs to be a "list()" array of items.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter_id</code></td>
<td>
<p>The id for the metric scope as found in the <code>aw_get_dimensions()</code> and <code>aw_get_segments()</code> functions.
This needs to be a "list()" array of items.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter_verb</code></td>
<td>
<p>The verb is the operator of the filter. The options include
'equals', 'equals_any', and 'exists'. If the 'dimension type' is 'enum' or 'ordered_enum' it
can only use one of the verbs, 'equals' or 'exists'. This needs to be a "list()" array of items.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter_dimType</code></td>
<td>
<p>The dimension type as defined by the 'type' column in <code>aw_get_dimensions()</code> if it is a dimension that is being
used or it is blank because it is a segment. If it is a segment make sure to include an, "‚Äù", empty list item. This needs to be a "list()" array of items</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter_terms</code></td>
<td>
<p>If the verb is "equals_any" then this argument should contain a list of values.
If the verb is "equals" then the argument should be a single item. This needs to be a "list()" array of list items.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter_compType</code></td>
<td>
<p>The component type is either a 'd' (dimension) or an 's' (segemnt).
This needs to be a "list()" array of items.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>create_annotation</code></td>
<td>
<p>Default is TRUE. Set this to FALSE if you want to get the json string that hte function
creates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>debug</code></td>
<td>
<p>This enables the api call information to show in the console for
help with debugging issues. default is FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataviewId</code></td>
<td>
<p><em>Required</em> The id of the dataview for which to retrieve dimensions. If an environment variable called <code>CJA_DATAVIEW_ID</code> exists
in <code>.Renviron</code> or elsewhere and no <code>dataviewId</code> argument is provided, then the <code>CJA_DATAVIEW_ID</code> value will
be used. Use <code>cja_get_dataviews()</code> to get a list of available <code>dataviewId</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An id of the newly created annotation
</p>


</div>