<div class="container">

<table style="width: 100%;"><tr>
<td>calibrar_demo</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Demos for the calibrar package</h2>

<h3>Description</h3>

<p>Creates demo files able to be processed for a full calibration using
the calibrar package
</p>


<h3>Usage</h3>

<pre><code class="language-R">calibrar_demo(path = NULL, model = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>Path to create the demo files</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>Model to be used in the demo files, see details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters to be used in the construction of
the demo files.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Current implemented models are:
</p>

<dl>
<dt>PoissonMixedModel</dt>
<dd>
<p>Poisson Autoregressive Mixed model for the dynamics 
of a population in different sites:
</p>
<p style="text-align: center;"><code class="reqn">log(\mu_{i, t+1}) = log(\mu_{i, t}) + \alpha + \beta X_{i, t} + \gamma_t</code>
</p>

<p>where <code class="reqn">\mu_{i, t}</code> is the size of the population in site <code class="reqn">i</code> at year <code class="reqn">t</code>, 
<code class="reqn">X_{i, t}</code> is the value of an environmental variable in site <code class="reqn">i</code> at year <code class="reqn">t</code>. 
The parameters to estimate were <code class="reqn">\alpha</code>, <code class="reqn">\beta</code>, and <code class="reqn">\gamma_t</code>, the 
random effects for each year, <code class="reqn">\gamma_t \sim N(0,\sigma^2)</code>, and the initial 
population at each site <code class="reqn">\mu_{i, 0}</code>. We assumed that the observations 
<code class="reqn">N_{i,t}</code> follow a Poisson distribution with mean <code class="reqn">\mu_{i, t}</code>.</p>
</dd>
<dt>PredatorPrey</dt>
<dd>
<p>Lotka Volterra Predator-Prey model. The model is defined 
by a system of ordinary differential equations for the abundance of prey $N$ and predator $P$:
</p>
<p style="text-align: center;"><code class="reqn">\frac{dN}{dt} = rN(1-N/K)-\alpha NP</code>
</p>

<p style="text-align: center;"><code class="reqn">\frac{dP}{dt} = -lP + \gamma\alpha NP</code>
</p>

<p>The parameters to estimate are the prey’s growth rate <code class="reqn">r</code>, the predator’s 
mortality rate <code class="reqn">l</code>, the carrying capacity of the prey <code class="reqn">K</code> and <code class="reqn">\alpha</code> 
and <code class="reqn">\gamma</code> for the predation interaction. Uses <code>deSolve</code> package 
for numerical solution of the ODE system.</p>
</dd>
<dt>SIR</dt>
<dd>
<p>Susceptible-Infected-Recovered epidemiological model. 
The model is defined by a system of ordinary differential equations for the 
number of susceptible $S$, infected $I$ and recovered $R$ individuals:
</p>
<p style="text-align: center;"><code class="reqn">\frac{dS}{dt} = -\beta S I/N</code>
</p>

<p style="text-align: center;"><code class="reqn">\frac{dI}{dt} = \beta S I/N -\gamma I</code>
</p>

<p style="text-align: center;"><code class="reqn">\frac{dR}{dt} = \gamma I</code>
</p>

<p>The parameters to estimate are the  average number of contacts per person per 
time <code class="reqn">\beta</code> and the instant probability of an infectious individual 
recovering <code class="reqn">\gamma</code>. Uses <code>deSolve</code> package for numerical solution of the ODE system.</p>
</dd>
<dt>IBMLotkaVolterra</dt>
<dd>
<p>Stochastic Individual Based Model for Lotka-Volterra model. Uses <code>ibm</code> package for the simulation.</p>
</dd>
</dl>
<h3>Value</h3>

<p>A list with the following elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>Path were the files were saved</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>par</code></td>
<td>
<p>Real value of the parameters used in the demo</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>setup</code></td>
<td>
<p>Path to the calibration setup file</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>guess</code></td>
<td>
<p>Values to be provided as initial guess to the calibrate function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lower</code></td>
<td>
<p>Values to be provided as lower bounds to the calibrate function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>upper</code></td>
<td>
<p>Values to be provided as upper bounds to the calibrate function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>phase</code></td>
<td>
<p>Values to be provided as phases to the calibrate function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constants</code></td>
<td>
<p>Constants used in the demo, any other variable not listed here.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>NA, set for compatibility with summary methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>NA, set for compatibility with summary methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>counts</code></td>
<td>
<p>NA, set for compatibility with summary methods.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Ricardo Oliveros–Ramos
</p>


<h3>References</h3>

<p>Oliveros-Ramos and Shin (2014)
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

summary(ahr)
set.seed(880820)
path = NULL # NULL to use the current directory
# create the demonstration files
demo = calibrar_demo(path=path, model="PredatorPrey", T=100) 
# get calibration information
calibration_settings = calibration_setup(file = demo$setup)
# get observed data
observed = calibration_data(setup = calibration_settings, path=demo$path)
# Defining 'run_model' function
run_model = calibrar:::.PredatorPreyModel
# real parameters
cat("Real parameters used to simulate data\n")
print(unlist(demo$par)) # parameters are in a list
# objective functions
obj  = calibration_objFn(model=run_model, setup=calibration_settings, observed=observed, T=demo$T)
obj2 = calibration_objFn(model=run_model, setup=calibration_settings, observed=observed, 
T=demo$T, aggregate=TRUE)
cat("Starting calibration...\n")
cat("Running optimization algorithms\n", "\t")
cat("Running optim AHR-ES\n")
ahr = calibrate(par=demo$guess, fn=obj, lower=demo$lower, upper=demo$upper, phases=demo$phase)
summary(ahr)

## End(Not run) 
</code></pre>


</div>