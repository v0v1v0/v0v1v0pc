<div class="container">

<table style="width: 100%;"><tr>
<td>parseModel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Parse lavaan model</h2>

<h3>Description</h3>

<p>Turns a model written in lavaan model syntax into a
cSEMModel list.
</p>


<h3>Usage</h3>

<pre><code class="language-R">parseModel(
  .model        = NULL, 
  .instruments  = NULL, 
  .check_errors = TRUE
  )
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.model</code></td>
<td>
<p>A model in lavaan model syntax
or a cSEMModel list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.instruments</code></td>
<td>
<p>A named list of vectors of instruments. The names
of the list elements are the names of the dependent (LHS) constructs of the structural
equation whose explanatory variables are endogenous. The vectors
contain the names of the instruments corresponding to each equation. Note
that exogenous variables of a given equation <strong>must</strong> be supplied as
instruments for themselves. Defaults to <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.check_errors</code></td>
<td>
<p>Logical. Should the model to parse be checked for correctness
in a sense that all necessary components to estimate the model are given?
Defaults to <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Instruments must be supplied separately as a named list
of vectors of instruments.
The names of the list elements are the names of the dependent constructs of
the structural equation whose explanatory variables are endogenous.
The vectors contain the names of the instruments corresponding to each
equation. Note that exogenous variables of a given equation <strong>must</strong> be
supplied as instruments for themselves.
</p>
<p>By default <code>parseModel()</code> attempts to check if the model provided is correct
in a sense that all necessary components required to estimate the
model are specified (e.g., a construct of the structural model has at least
1 item). To prevent checking for errors use <code>.check_errors = FALSE</code>.
</p>


<h3>Value</h3>

<p>An object of class cSEMModel is a standardized list containing the
following components. J stands for the number of constructs and K for the number
of indicators.
</p>

<dl>
<dt><code style="white-space: pre;">⁠$structural⁠</code></dt>
<dd>
<p>A matrix mimicking the structural relationship between
constructs. If constructs are only linearly related, <code>structural</code> is
of dimension (J x J) with row- and column names equal to the construct
names. If the structural model contains nonlinear relationships
<code>structural</code> is (J x (J + J*)) where J* is the number of
nonlinear terms. Rows are ordered such that exogenous constructs are always
first, followed by constructs that only depend on exogenous constructs and/or
previously ordered constructs.</p>
</dd>
<dt><code style="white-space: pre;">⁠$measurement⁠</code></dt>
<dd>
<p>A (J x K) matrix mimicking the measurement/composite
relationship between constructs and their related indicators. Rows are in the same
order as the matrix <code style="white-space: pre;">⁠$structural⁠</code> with row names equal to
the construct names. The order of the columns is such that <code style="white-space: pre;">⁠$measurement⁠</code>
forms a block diagonal matrix.</p>
</dd>
<dt><code style="white-space: pre;">⁠$error_cor⁠</code></dt>
<dd>
<p>A (K x K) matrix mimicking the measurement error
correlation relationship. The row and column order is identical to
the column order of <code style="white-space: pre;">⁠$measurement⁠</code>.</p>
</dd>
<dt><code style="white-space: pre;">⁠$cor_specified⁠</code></dt>
<dd>
<p>A matrix indicating the correlation relationships
between any variables of the model as specified by the user. Mainly for internal purposes.
Note that <code style="white-space: pre;">⁠$cor_specified⁠</code> may also contain inadmissible correlations
such as a correlation between measurement errors indicators and constructs.</p>
</dd>
<dt><code style="white-space: pre;">⁠$construct_type⁠</code></dt>
<dd>
<p>A named vector containing the names of each construct
and their respective type ("Common factor" or "Composite").</p>
</dd>
<dt><code style="white-space: pre;">⁠$construct_order⁠</code></dt>
<dd>
<p>A named vector containing the names of each construct
and their respective order ("First order" or "Second order").</p>
</dd>
<dt><code style="white-space: pre;">⁠$model_type⁠</code></dt>
<dd>
<p>The type of model ("Linear" or "Nonlinear").</p>
</dd>
<dt><code style="white-space: pre;">⁠$instruments⁠</code></dt>
<dd>
<p>Only if instruments are supplied: a list of structural
equations relating endogenous RHS variables to instruments.</p>
</dd>
<dt><code style="white-space: pre;">⁠$indicators⁠</code></dt>
<dd>
<p>The names of the indicators
(i.e., observed variables and/or first-order constructs)</p>
</dd>
<dt><code style="white-space: pre;">⁠$cons_exo⁠</code></dt>
<dd>
<p>The names of the exogenous constructs of the structural model
(i.e., variables that do not appear on the LHS of any structural equation)</p>
</dd>
<dt><code style="white-space: pre;">⁠$cons_endo⁠</code></dt>
<dd>
<p>The names of the endogenous constructs of the structural model
(i.e., variables that appear on the LHS of at least one structural equation)</p>
</dd>
<dt><code style="white-space: pre;">⁠$vars_2nd⁠</code></dt>
<dd>
<p>The names of the constructs modeled as second orders.</p>
</dd>
<dt><code style="white-space: pre;">⁠$vars_attached_to_2nd⁠</code></dt>
<dd>
<p>The names of the constructs forming or building
a second order construct.</p>
</dd>
<dt><code style="white-space: pre;">⁠$vars_not_attached_to_2nd⁠</code></dt>
<dd>
<p>The names of the constructs not forming or building
a second order construct.</p>
</dd>
</dl>
<p>It is possible to supply an incomplete list to <code>parseModel()</code>, resulting
in an incomplete cSEMModel list which can be passed
to all functions that require <code>.csem_model</code> as a mandatory argument. Currently,
only the structural and the measurement matrix are required.
However, specifying an incomplete cSEMModel list may lead to unexpected behavior
and errors. Use with care.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># ===========================================================================
# Providing a model in lavaan syntax 
# ===========================================================================
model &lt;- "
# Structural model
y1 ~ y2 + y3

# Measurement model
y1 =~ x1 + x2 + x3
y2 =~ x4 + x5
y3 =~ x6 + x7

# Error correlation
x1 ~~ x2
"

m &lt;- parseModel(model)
m

# ===========================================================================
# Providing a complete model in cSEM format (class cSEMModel)
# ===========================================================================
# If the model is already a cSEMModel object, the model is returned as is:

identical(m, parseModel(m)) # TRUE

# ===========================================================================
# Providing a list 
# ===========================================================================
# It is possible to provide a list that contains at least the
# elements "structural" and "measurement". This is generally discouraged
# as this may cause unexpected errors.

m_incomplete &lt;- m[c("structural", "measurement", "construct_type")]
parseModel(m_incomplete)

# Providing a list containing list names that are not part of a `cSEMModel`
# causes an error:

## Not run: 
m_incomplete[c("name_a", "name_b")] &lt;- c("hello world", "hello universe")
parseModel(m_incomplete)

## End(Not run)

# Failing to provide "structural" or "measurement" also causes an error:

## Not run: 
m_incomplete &lt;- m[c("structural", "construct_type")]
parseModel(m_incomplete)

## End(Not run)
</code></pre>


</div>