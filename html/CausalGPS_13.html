<div class="container">

<table style="width: 100%;"><tr>
<td>compute_counter_weight</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute counter or weight of data samples</h2>

<h3>Description</h3>

<p>Computes counter (for matching approach) or weight (for weighting) approach.
</p>


<h3>Usage</h3>

<pre><code class="language-R">compute_counter_weight(gps_obj, ci_appr, nthread = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>gps_obj</code></td>
<td>
<p>A gps object that is generated with <code>estimate_gps</code> function.
If it is provided, the number of iteration will forced to 1 (Default: NULL).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci_appr</code></td>
<td>
<p>The causal inference approach. Possible values are:
</p>

<ul>
<li>
<p> "matching": Matching by GPS
</p>
</li>
<li>
<p> "weighting": Weighting by GPS
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nthread</code></td>
<td>
<p>An integer value that represents the number of threads to be
used by internal packages.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to different models.</p>
</td>
</tr>
</table>
<h3>Details</h3>



<h4>Additional parameters</h4>



<h5>Causal Inference Approach (ci_appr)</h5>


<ul><li>
<p> if ci_appr = 'matching':
</p>

<ul>
<li> <p><em>bin_seq</em>: A sequence of w (treatment) to generate pseudo population.
If <code>NULL</code> is passed the default value will be used, which is
<code>seq(min(w)+delta_n/2,max(w), by=delta_n)</code>.
</p>
</li>
<li> <p><em>dist_measure</em>: Matching function. Available options:
</p>

<ul><li>
<p> l1: Manhattan distance matching
</p>
</li></ul>
</li>
<li> <p><em>delta_n</em>: caliper parameter.
</p>
</li>
<li> <p><em>scale</em>: a specified scale parameter to control the relative weight that
is attributed to the distance measures of the exposure versus the GPS.
</p>
</li>
</ul>
</li></ul>
<h3>Value</h3>

<p>Returns a counter_weight (cgps_cw) object that includes <code>.data</code> and <code>params</code>
attributes.
</p>

<ul>
<li> <p><code>.data</code>: includes <code>id</code> and <code>counter_weight</code> columns. In case of <code>matching</code>
the <code>counter_weight</code> column is integer values, which represent how many times
the provided observational data was mached during the matching process. In
case of <code>weighting</code> the column is double values.
</p>
</li>
<li> <p><code>params</code>: Include related parameters that is used for the process.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
m_d &lt;- generate_syn_data(sample_size = 100)
gps_obj &lt;- estimate_gps(.data = m_d,
                        .formula = w ~ cf1 + cf2 + cf3 + cf4 + cf5 + cf6,
                        gps_density = "normal",
                        sl_lib = c("SL.xgboost"))

cw_object &lt;- compute_counter_weight(gps_obj = gps_obj,
                                    ci_appr = "matching",
                                    bin_seq = NULL,
                                    nthread = 1,
                                    delta_n = 0.1,
                                    dist_measure = "l1",
                                    scale = 0.5)

</code></pre>


</div>