<div class="container">

<table style="width: 100%;"><tr>
<td>rebuild.cov</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Rebuild and Decompose the (Inverse) Covariance Matrix</h2>

<h3>Description</h3>

<p><code>rebuild.cov</code> takes a correlation matrix and a vector with variances
and reconstructs the corresponding covariance matrix.
</p>
<p>Conversely, <code>decompose.cov</code> decomposes 
a covariance matrix into correlations and variances.
</p>
<p><code>decompose.invcov</code> decomposes a concentration matrix (=inverse covariance
matrix) into partial correlations and partial variances.  
</p>
<p><code>rebuild.invcov</code> takes a partial correlation matrix and a vector 
with partial variances and reconstructs the corresponding concentration matrix.
</p>


<h3>Usage</h3>

<pre><code class="language-R">
rebuild.cov(r, v)
rebuild.invcov(pr, pv)
decompose.cov(m)
decompose.invcov(m)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>correlation matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>v</code></td>
<td>
<p>variance vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pr</code></td>
<td>
<p>partial correlation matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pv</code></td>
<td>
<p>partial variance vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>
<p>a covariance or a concentration matrix</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The diagonal elements of the concentration matrix (=inverse covariance matrix)
are the precisions, and the off-diagonal elements
are the concentrations. Thus, the partial variances
correspond to the inverse precisions, and the partial correlations to the
negative standardized concentrations.
</p>


<h3>Value</h3>

<p><code>rebuild.cov</code> and <code>rebuild.invcov</code> return a matrix.
</p>
<p><code>decompose.cov</code> and <code>decompose.invcov</code> return a list containing
a matrix and a vector.
</p>


<h3>Author(s)</h3>

<p>Korbinian Strimmer (<a href="https://strimmerlab.github.io">https://strimmerlab.github.io</a>).
</p>


<h3>See Also</h3>

<p><code>cor</code>, <code>cov</code>, <code>pcor.shrink</code></p>


<h3>Examples</h3>

<pre><code class="language-R"># load corpcor library
library("corpcor")

# a correlation matrix and some variances
r = matrix(c(1, 1/2, 1/2, 1),  nrow = 2, ncol=2)
r
v = c(2, 3)

# construct the associated covariance matrix
c = rebuild.cov(r, v)
c

# decompose into correlations and variances
decompose.cov(c)


# the corresponding concentration matrix
conc = pseudoinverse(c) 
conc

# decompose into partial correlation matrix and partial variances
tmp = decompose.invcov(conc)
tmp
# note: because this is an example with two variables,
# the partial and standard correlations are identical!


# reconstruct the concentration matrix from partial correlations and
# partial variances 
rebuild.invcov(tmp$pr, tmp$pv)

</code></pre>


</div>