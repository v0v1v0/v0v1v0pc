<div class="container">

<table style="width: 100%;"><tr>
<td>aggregate_signals</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Aggregate <code>covidcast_signal</code> objects into one data frame</h2>

<h3>Description</h3>

<p>Aggregates <code>covidcast_signal</code> objects into one data frame, in either "wide"
or "long" format. (In "wide" aggregation, only the latest issue from each
data frame is retained, and several columns, including <code>data_source</code> and
<code>signal</code> are dropped; see details below). See <code>vignette("multi-signals", package = "covidcast")</code> for examples.
</p>


<h3>Usage</h3>

<pre><code class="language-R">aggregate_signals(x, dt = NULL, format = c("wide", "long"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Single <code>covidcast_signal</code> data frame, or a list of such data
frames, such as is returned by <code>covidcast_signals()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dt</code></td>
<td>
<p>Vector of shifts to apply to the values in the data frame <code>x</code>.
Negative shifts translate into in a lag value and positive shifts into a
lead value; for example, if <code>dt = -1</code>, then the value on June 2 that gets
reported is the original value on June 1; if <code>dt = 0</code>, then the values are
left as is. When <code>x</code> is a list of data frames, <code>dt</code> can either be a single
vector of shifts or a list of vectors of shifts, this list having the same
length as <code>x</code> (in order to apply, respectively, the same shifts or a
different set of shifts to each data frame in <code>x</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>One of either "wide" or "long". The default is "wide".</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function can be thought of having three use cases. In all three
cases, the result will be a new data frame in either "wide" or "long"
format, depending on <code>format</code>.
</p>
<p>The first use case is to apply time-shifts to the values in a given
<code>covidcast_signal</code> object. In this use case, <code>x</code> is a <code>covidcast_signal</code>
data frame and <code>dt</code> is a vector of shifts.
</p>
<p>The second use case is to bind together, into one data frame, signals that
are returned by <code>covidcast_signals()</code>. In this use case, <code>x</code> is a list of
<code>covidcast_signal</code> data frames, and <code>dt</code> is <code>NULL</code>.
</p>
<p>The third use case is a combination of the first two: to bind together
signals returned by <code>covidcast_signals()</code>, and simultaneously, apply
time-shifts to their values. In this use case, <code>x</code> is a list of
<code>covidcast_signal</code> data frames, and <code>dt</code> is either a vector of shifts—to
apply the same shifts for each signal in <code>x</code>, or a list of vector of
shifts—to apply different shifts for each signal in <code>x</code>.
</p>


<h3>Value</h3>

<p>Data frame of aggregated signals in "wide" or "long" form, depending
on <code>format</code>. In "long" form, an extra column <code>dt</code> is appended to indicate
the value of the time-shift. In "wide" form, only the latest issue of data
is retained; the returned data frame is formed via full joins of the input
data frames (on <code>geo_value</code> and <code>time_value</code> as the join key), and the
columns <code>data_source</code>, <code>signal</code>, <code>issue</code>, <code>lag</code>, <code>stderr</code>, <code>sample_size</code>
are all dropped from the output. Each unique signal—defined by a
combination of data source name, signal name, and time-shift—is given its
own column, whose name indicates its defining quantities. For example, the
column name "value+2:usa-facts_confirmed_incidence_num" corresponds to a
signal defined by <code>data_source = "usa-facts"</code>, <code>signal = "confirmed_incidence_num"</code>, and <code>dt = 2</code>.
</p>


<h3>See Also</h3>

<p><code>covidcast_wider()</code>, <code>covidcast_longer()</code>
</p>


</div>