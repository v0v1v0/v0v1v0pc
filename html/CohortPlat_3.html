<div class="container">

<table style="width: 100%;"><tr>
<td>simulate_trial</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulates the cohort trial.</h2>

<h3>Description</h3>

<p>Simulates the cohort trial.
</p>


<h3>Usage</h3>

<pre><code class="language-R">simulate_trial(
  n_int = 50,
  n_fin = 100,
  cohorts_start = 1,
  rr_comb,
  rr_mono,
  rr_back,
  rr_plac,
  rr_transform,
  random_type = NULL,
  trial_struc = "all_plac",
  random = FALSE,
  prob_comb_rr = NULL,
  prob_mono_rr = NULL,
  prob_back_rr = NULL,
  prob_plac_rr = NULL,
  prob_rr_transform = prob_rr_transform,
  stage_data = TRUE,
  cohort_random = NULL,
  cohorts_max = 4,
  sr_drugs_pos = 1,
  sr_pats = cohorts_max * (n_fin + 3 * cohorts_max),
  sr_first_pos = FALSE,
  target_rr = c(0, 0, 1),
  cohort_offset = 0,
  sharing_type = "all",
  safety_prob = 0,
  cohort_fixed = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n_int</code></td>
<td>
<p>Sample size per cohort to conduct interim analysis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_fin</code></td>
<td>
<p>Sample size per cohort at final</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohorts_start</code></td>
<td>
<p>Number of cohorts to start the platform with</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rr_comb</code></td>
<td>
<p>Response rates of combination therapies</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rr_mono</code></td>
<td>
<p>Response rate of mono therapies</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rr_back</code></td>
<td>
<p>Response rates of backbone arms</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rr_plac</code></td>
<td>
<p>Response rate of the placebo</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rr_transform</code></td>
<td>
<p>Function transforming all the above response rates to a vector of four probabilities for the multinomial simulation
First element is probability of both failures. Second element is probability of biomarker success and histology failure.
Third element is probability of biomarker failure and histology success. Fourth element is probability of both success.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>random_type</code></td>
<td>
<p>How should the response rates be drawn randomly? Options are:
</p>
<p>"absolute": Specify absolute response rates that will be drawn with a certain probability
</p>
<p>"risk_difference": Specify absolute response rates for placebo which will be drawn randomly, plus specify vectors
for absolute treatment effects of mono therapies over placebo and for combo over the mono therapies.
</p>
<p>"risk_ratio": Specify absolute response rates for placebo which will be drawn randomly, plus specify vectors
for relative treatment effects of mono therapies over placebo and for combo over the mono therapies.
</p>
<p>"odds_ratios": Specify response rate for placebo, specify odds-ratios for mono therapies (via rr_back and rr_mono)
and respective probabilities. On top, specify interaction for the combination therapy via rr_comb with prob_rr_comb.
Set: odds_combo = odds_plac * or_mono1 * or_mono2 * rr_comb.
If rr_comb &gt; 1 -&gt; synergistic, if rr_comb = 1 -&gt; additive. If rr_comb &lt; 1 -&gt; antagonistic.
Default is "NULL".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trial_struc</code></td>
<td>
<p>Trial Structure:
"all_plac" = all cohorts have placebo arm
</p>
<p>"no_plac" = no cohort has placebo arm
</p>
<p>"stop_post_mono" = all cohorts start with placebo arm, but after first mono has been declared successful,
newly enrolled cohorts have no more placebo
</p>
<p>"stop_post_back" = all cohorts start with placebo arm, but after first backbone has been declared successful,
newly enrolled cohorts have no more placebo</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>random</code></td>
<td>
<p>Should the response rates of the arms be randomly drawn from rr_exp? Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob_comb_rr</code></td>
<td>
<p>If random == TRUE, what are the probabilities with which the elements of rr_comb should be drawn?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob_mono_rr</code></td>
<td>
<p>If random == TRUE, what are the probabilities with which the elements of rr_mono should be drawn?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob_back_rr</code></td>
<td>
<p>If random == TRUE, what are the probabilities with which the elements of rr_back should be drawn?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob_plac_rr</code></td>
<td>
<p>If random == TRUE, what are the probabilities with which the elements of rr_plac should be drawn?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob_rr_transform</code></td>
<td>
<p>If random == TRUE, what are the probabilities with which the elements of rr_transform should be drawn?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stage_data</code></td>
<td>
<p>Should individual stage data be passed along? Default is TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohort_random</code></td>
<td>
<p>If not NULL, indicates that new arms/cohorts should be randomly started.
For every patient, there is a cohort_random probability that a new cohort will be started.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohorts_max</code></td>
<td>
<p>Maximum number of cohorts that are allowed to be added throughout the trial</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sr_drugs_pos</code></td>
<td>
<p>Stopping rule for successful experimental arms; Default = 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sr_pats</code></td>
<td>
<p>Stopping rule for total number of patients; Default = cohorts_max * n_fin + error term based on randomization</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sr_first_pos</code></td>
<td>
<p>Stopping rule for first successful cohort; if TRUE, after first cohort was found to be successful, no further cohorts will be included
but cohorts will finish evaluating, unless other stopping rules reached prior. Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target_rr</code></td>
<td>
<p>What is target to declare a combo a positive? Vector of length 3 giving 1) the threshold by which
the combo needs to be better than the monos and 2) the threhsold by which the monos need to be better than the placebo.
The third element of the vector specifies the relation, choices are 1=="risk-difference", 2=="risk-ratio" and 3=="odds-ratio".
By default: c(0,0, "risk-difference").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohort_offset</code></td>
<td>
<p>Minimum number of patients between adding new cohorts</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sharing_type</code></td>
<td>
<p>Which backbone and placebo data should be used for arm comparisons; Default is "all". Another option is "concurrent" or "dynamic" or "cohort".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>safety_prob</code></td>
<td>
<p>Probability for a safety stop after every patient</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohort_fixed</code></td>
<td>
<p>If not NULL, fixed timesteps after which a cohort will be included</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to be passed to decision function, such as decision making criteria</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>List containing: Responses and patients on experimental and control arm, total treatment successes and failures and final p-value
</p>


<h3>Examples</h3>

<pre><code class="language-R">
random &lt;- TRUE

rr_comb &lt;- c(0.25, 0.35, 0.4)
prob_comb_rr &lt;- c(0.4, 0.4, 0.2)
rr_mono &lt;- c(0.15, 0.20, 0.25)
prob_mono_rr &lt;- c(0.2, 0.4, 0.4)
rr_back &lt;- c(0.20, 0.25, 0.30)
prob_back_rr &lt;- c(0.3, 0.4, 0.3)
rr_plac &lt;- c(0.10, 0.12, 0.14)
prob_plac_rr &lt;- c(0.25, 0.5, 0.25)

rr_transform &lt;- list(
  function(x) {return(c(0.75*(1 - x), (1-0.75)*(1-x), (1-0.75)*x, 0.75*x))},
  function(x) {return(c(0.85*(1 - x), (1-0.85)*(1-x), (1-0.85)*x, 0.85*x))}
)
prob_rr_transform &lt;- c(0.5, 0.5)

cohorts_max &lt;- 5
trial_struc &lt;- "stop_post_back"
safety_prob &lt;- 0
sharing_type &lt;- "concurrent"
sr_drugs_pos &lt;- 5
sr_first_pos &lt;- FALSE
n_int &lt;- 50
n_fin &lt;- 100
stage_data &lt;- TRUE
cohort_random &lt;- NULL
target_rr &lt;- c(0,0,1)
cohort_offset &lt;- 0
random_type &lt;- "risk_difference"
cohort_fixed &lt;- 5

# Vergleich Combo vs Mono
Bayes_Sup1 &lt;- matrix(nrow = 3, ncol = 3)
Bayes_Sup1[1,] &lt;- c(0.00, 0.90, 1.00)
Bayes_Sup1[2,] &lt;- c(0.05, 0.65, 1.00)
Bayes_Sup1[3,] &lt;- c(0.10, 0.50, 1.00)
# Vergleich Combo vs Backbone
Bayes_Sup2 &lt;- matrix(nrow = 3, ncol = 3)
Bayes_Sup2[1,] &lt;- c(0.05, 0.80, 1.00)
Bayes_Sup2[2,] &lt;- c(NA, NA, NA)
Bayes_Sup2[3,] &lt;- c(NA, NA, NA)
# Vergleich Mono vs Placebo
Bayes_Sup3 &lt;- matrix(nrow = 3, ncol = 3)
Bayes_Sup3[1,] &lt;- c(0.00, 0.90, 1.00)
Bayes_Sup3[2,] &lt;- c(0.05, 0.65, 1.00)
Bayes_Sup3[3,] &lt;- c(NA, NA, NA)
Bayes_Sup4 &lt;- matrix(nrow = 3, ncol = 3)
Bayes_Sup4[1,] &lt;- c(0.00, 0.90, 1.00)
Bayes_Sup4[2,] &lt;- c(0.05, 0.65, 1.00)
Bayes_Sup4[3,] &lt;- c(NA, NA, NA)
Bayes_Sup &lt;- list(list(Bayes_Sup1, Bayes_Sup2, Bayes_Sup3, Bayes_Sup4),
             list(Bayes_Sup1, Bayes_Sup2, Bayes_Sup3, Bayes_Sup4))

# Vergleich Combo vs Mono
Bayes_Fut1 &lt;- matrix(nrow = 1, ncol = 2)
Bayes_Fut1[1,] &lt;- c(0.00, 0.60)
# Vergleich Combo vs Backbone
Bayes_Fut2 &lt;- matrix(nrow = 1, ncol = 2)
Bayes_Fut2[1,] &lt;- c(0.00, 0.60)
# Vergleich Mono vs Placebo
Bayes_Fut3 &lt;- matrix(nrow = 1, ncol = 2)
Bayes_Fut3[1,] &lt;- c(0.00, 0.60)
Bayes_Fut4 &lt;- matrix(nrow = 1, ncol = 2)
Bayes_Fut4[1,] &lt;- c(0.00, 0.60)
Bayes_Fut &lt;- list(list(Bayes_Fut1, Bayes_Fut2, Bayes_Fut3, Bayes_Fut4),
                  list(Bayes_Fut1, Bayes_Fut2, Bayes_Fut3, Bayes_Fut4))

a &lt;- simulate_trial(
n_int = n_int, n_fin = n_fin, trial_struc = trial_struc, random_type = random_type,
rr_comb = rr_comb, rr_mono = rr_mono, rr_back = rr_back, rr_plac = rr_plac,
rr_transform = rr_transform, random = random, prob_comb_rr = prob_comb_rr,
prob_mono_rr = prob_mono_rr, prob_back_rr = prob_back_rr, prob_plac_rr = prob_plac_rr,
stage_data = stage_data, cohort_random = cohort_random, cohorts_max = cohorts_max,
sr_drugs_pos = sr_drugs_pos, target_rr = target_rr, sharing_type = sharing_type,
safety_prob = safety_prob, Bayes_Sup = Bayes_Sup, prob_rr_transform = prob_rr_transform,
cohort_offset = cohort_offset, sr_first_pos = sr_first_pos, Bayes_Fut = Bayes_Fut,
cohort_fixed = cohort_fixed
)

</code></pre>


</div>